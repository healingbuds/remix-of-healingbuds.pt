var f$=Object.defineProperty;var mA=e=>{throw TypeError(e)};var m$=(e,t,r)=>t in e?f$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var It=(e,t,r)=>m$(e,typeof t!="symbol"?t+"":t,r),$1=(e,t,r)=>t.has(e)||mA("Cannot "+r);var tt=(e,t,r)=>($1(e,t,"read from private field"),r?r.call(e):t.get(e)),Ir=(e,t,r)=>t.has(e)?mA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dr=(e,t,r,n)=>($1(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),ds=(e,t,r)=>($1(e,t,"access private method"),r);var l0=(e,t,r,n)=>({set _(a){dr(e,t,a,r)},get _(){return tt(e,t,n)}});function ND(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(n,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();var g$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kk(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function y$(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var ID={exports:{}},Pb={},RD={exports:{}},Tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sx=Symbol.for("react.element"),x$=Symbol.for("react.portal"),v$=Symbol.for("react.fragment"),_$=Symbol.for("react.strict_mode"),b$=Symbol.for("react.profiler"),w$=Symbol.for("react.provider"),S$=Symbol.for("react.context"),T$=Symbol.for("react.forward_ref"),k$=Symbol.for("react.suspense"),C$=Symbol.for("react.memo"),P$=Symbol.for("react.lazy"),gA=Symbol.iterator;function E$(e){return e===null||typeof e!="object"?null:(e=gA&&e[gA]||e["@@iterator"],typeof e=="function"?e:null)}var DD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OD=Object.assign,LD={};function Vf(e,t,r){this.props=e,this.context=t,this.refs=LD,this.updater=r||DD}Vf.prototype.isReactComponent={};Vf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function FD(){}FD.prototype=Vf.prototype;function Ck(e,t,r){this.props=e,this.context=t,this.refs=LD,this.updater=r||DD}var Pk=Ck.prototype=new FD;Pk.constructor=Ck;OD(Pk,Vf.prototype);Pk.isPureReactComponent=!0;var yA=Array.isArray,zD=Object.prototype.hasOwnProperty,Ek={current:null},BD={key:!0,ref:!0,__self:!0,__source:!0};function VD(e,t,r){var n,a={},u=null,h=null;if(t!=null)for(n in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)zD.call(t,n)&&!BD.hasOwnProperty(n)&&(a[n]=t[n]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var _=Array(o),T=0;T<o;T++)_[T]=arguments[T+2];a.children=_}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)a[n]===void 0&&(a[n]=o[n]);return{$$typeof:sx,type:e,key:u,ref:h,props:a,_owner:Ek.current}}function j$(e,t){return{$$typeof:sx,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jk(e){return typeof e=="object"&&e!==null&&e.$$typeof===sx}function A$(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xA=/\/+/g;function U1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?A$(""+e.key):t.toString(36)}function X0(e,t,r,n,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case sx:case x$:h=!0}}if(h)return h=e,a=a(h),e=n===""?"."+U1(h,0):n,yA(a)?(r="",e!=null&&(r=e.replace(xA,"$&/")+"/"),X0(a,t,r,"",function(T){return T})):a!=null&&(jk(a)&&(a=j$(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(xA,"$&/")+"/")+e)),t.push(a)),1;if(h=0,n=n===""?".":n+":",yA(e))for(var o=0;o<e.length;o++){u=e[o];var _=n+U1(u,o);h+=X0(u,t,r,_,a)}else if(_=E$(e),typeof _=="function")for(e=_.call(e),o=0;!(u=e.next()).done;)u=u.value,_=n+U1(u,o++),h+=X0(u,t,r,_,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function c0(e,t,r){if(e==null)return e;var n=[],a=0;return X0(e,n,"","",function(u){return t.call(r,u,a++)}),n}function M$(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ms={current:null},J0={transition:null},N$={ReactCurrentDispatcher:Ms,ReactCurrentBatchConfig:J0,ReactCurrentOwner:Ek};function $D(){throw Error("act(...) is not supported in production builds of React.")}Tr.Children={map:c0,forEach:function(e,t,r){c0(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return c0(e,function(){t++}),t},toArray:function(e){return c0(e,function(t){return t})||[]},only:function(e){if(!jk(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Tr.Component=Vf;Tr.Fragment=v$;Tr.Profiler=b$;Tr.PureComponent=Ck;Tr.StrictMode=_$;Tr.Suspense=k$;Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N$;Tr.act=$D;Tr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=OD({},e.props),a=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=Ek.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(_ in t)zD.call(t,_)&&!BD.hasOwnProperty(_)&&(n[_]=t[_]===void 0&&o!==void 0?o[_]:t[_])}var _=arguments.length-2;if(_===1)n.children=r;else if(1<_){o=Array(_);for(var T=0;T<_;T++)o[T]=arguments[T+2];n.children=o}return{$$typeof:sx,type:e.type,key:a,ref:u,props:n,_owner:h}};Tr.createContext=function(e){return e={$$typeof:S$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:w$,_context:e},e.Consumer=e};Tr.createElement=VD;Tr.createFactory=function(e){var t=VD.bind(null,e);return t.type=e,t};Tr.createRef=function(){return{current:null}};Tr.forwardRef=function(e){return{$$typeof:T$,render:e}};Tr.isValidElement=jk;Tr.lazy=function(e){return{$$typeof:P$,_payload:{_status:-1,_result:e},_init:M$}};Tr.memo=function(e,t){return{$$typeof:C$,type:e,compare:t===void 0?null:t}};Tr.startTransition=function(e){var t=J0.transition;J0.transition={};try{e()}finally{J0.transition=t}};Tr.unstable_act=$D;Tr.useCallback=function(e,t){return Ms.current.useCallback(e,t)};Tr.useContext=function(e){return Ms.current.useContext(e)};Tr.useDebugValue=function(){};Tr.useDeferredValue=function(e){return Ms.current.useDeferredValue(e)};Tr.useEffect=function(e,t){return Ms.current.useEffect(e,t)};Tr.useId=function(){return Ms.current.useId()};Tr.useImperativeHandle=function(e,t,r){return Ms.current.useImperativeHandle(e,t,r)};Tr.useInsertionEffect=function(e,t){return Ms.current.useInsertionEffect(e,t)};Tr.useLayoutEffect=function(e,t){return Ms.current.useLayoutEffect(e,t)};Tr.useMemo=function(e,t){return Ms.current.useMemo(e,t)};Tr.useReducer=function(e,t,r){return Ms.current.useReducer(e,t,r)};Tr.useRef=function(e){return Ms.current.useRef(e)};Tr.useState=function(e){return Ms.current.useState(e)};Tr.useSyncExternalStore=function(e,t,r){return Ms.current.useSyncExternalStore(e,t,r)};Tr.useTransition=function(){return Ms.current.useTransition()};Tr.version="18.3.1";RD.exports=Tr;var U=RD.exports;const ht=kk(U),Ak=ND({__proto__:null,default:ht},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I$=U,R$=Symbol.for("react.element"),D$=Symbol.for("react.fragment"),O$=Object.prototype.hasOwnProperty,L$=I$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F$={key:!0,ref:!0,__self:!0,__source:!0};function UD(e,t,r){var n,a={},u=null,h=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(n in t)O$.call(t,n)&&!F$.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:R$,type:e,key:u,ref:h,props:a,_owner:L$.current}}Pb.Fragment=D$;Pb.jsx=UD;Pb.jsxs=UD;ID.exports=Pb;var f=ID.exports,qD={exports:{}},_a={},WD={exports:{}},GD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_e,Le){var ft=_e.length;_e.push(Le);e:for(;0<ft;){var yt=ft-1>>>1,wt=_e[yt];if(0<a(wt,Le))_e[yt]=Le,_e[ft]=wt,ft=yt;else break e}}function r(_e){return _e.length===0?null:_e[0]}function n(_e){if(_e.length===0)return null;var Le=_e[0],ft=_e.pop();if(ft!==Le){_e[0]=ft;e:for(var yt=0,wt=_e.length,Lt=wt>>>1;yt<Lt;){var Wt=2*(yt+1)-1,wr=_e[Wt],kr=Wt+1,er=_e[kr];if(0>a(wr,ft))kr<wt&&0>a(er,wr)?(_e[yt]=er,_e[kr]=ft,yt=kr):(_e[yt]=wr,_e[Wt]=ft,yt=Wt);else if(kr<wt&&0>a(er,ft))_e[yt]=er,_e[kr]=ft,yt=kr;else break e}}return Le}function a(_e,Le){var ft=_e.sortIndex-Le.sortIndex;return ft!==0?ft:_e.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var _=[],T=[],P=1,E=null,M=3,I=!1,z=!1,F=!1,D=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(_e){for(var Le=r(T);Le!==null;){if(Le.callback===null)n(T);else if(Le.startTime<=_e)n(T),Le.sortIndex=Le.expirationTime,t(_,Le);else break;Le=r(T)}}function te(_e){if(F=!1,W(_e),!z)if(r(_)!==null)z=!0,nt(se);else{var Le=r(T);Le!==null&&Ve(te,Le.startTime-_e)}}function se(_e,Le){z=!1,F&&(F=!1,q(xe),xe=-1),I=!0;var ft=M;try{for(W(Le),E=r(_);E!==null&&(!(E.expirationTime>Le)||_e&&!pt());){var yt=E.callback;if(typeof yt=="function"){E.callback=null,M=E.priorityLevel;var wt=yt(E.expirationTime<=Le);Le=e.unstable_now(),typeof wt=="function"?E.callback=wt:E===r(_)&&n(_),W(Le)}else n(_);E=r(_)}if(E!==null)var Lt=!0;else{var Wt=r(T);Wt!==null&&Ve(te,Wt.startTime-Le),Lt=!1}return Lt}finally{E=null,M=ft,I=!1}}var he=!1,pe=null,xe=-1,Re=5,Me=-1;function pt(){return!(e.unstable_now()-Me<Re)}function Oe(){if(pe!==null){var _e=e.unstable_now();Me=_e;var Le=!0;try{Le=pe(!0,_e)}finally{Le?Ye():(he=!1,pe=null)}}else he=!1}var Ye;if(typeof $=="function")Ye=function(){$(Oe)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,rt=Ge.port2;Ge.port1.onmessage=Oe,Ye=function(){rt.postMessage(null)}}else Ye=function(){D(Oe,0)};function nt(_e){pe=_e,he||(he=!0,Ye())}function Ve(_e,Le){xe=D(function(){_e(e.unstable_now())},Le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_e){_e.callback=null},e.unstable_continueExecution=function(){z||I||(z=!0,nt(se))},e.unstable_forceFrameRate=function(_e){0>_e||125<_e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<_e?Math.floor(1e3/_e):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(_)},e.unstable_next=function(_e){switch(M){case 1:case 2:case 3:var Le=3;break;default:Le=M}var ft=M;M=Le;try{return _e()}finally{M=ft}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_e,Le){switch(_e){case 1:case 2:case 3:case 4:case 5:break;default:_e=3}var ft=M;M=_e;try{return Le()}finally{M=ft}},e.unstable_scheduleCallback=function(_e,Le,ft){var yt=e.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?yt+ft:yt):ft=yt,_e){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=ft+wt,_e={id:P++,callback:Le,priorityLevel:_e,startTime:ft,expirationTime:wt,sortIndex:-1},ft>yt?(_e.sortIndex=ft,t(T,_e),r(_)===null&&_e===r(T)&&(F?(q(xe),xe=-1):F=!0,Ve(te,ft-yt))):(_e.sortIndex=wt,t(_,_e),z||I||(z=!0,nt(se))),_e},e.unstable_shouldYield=pt,e.unstable_wrapCallback=function(_e){var Le=M;return function(){var ft=M;M=Le;try{return _e.apply(this,arguments)}finally{M=ft}}}})(GD);WD.exports=GD;var z$=WD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B$=U,ya=z$;function mt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HD=new Set,xy={};function ph(e,t){vf(e,t),vf(e+"Capture",t)}function vf(e,t){for(xy[e]=t,e=0;e<t.length;e++)HD.add(t[e])}var Ql=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mS=Object.prototype.hasOwnProperty,V$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vA={},_A={};function $$(e){return mS.call(_A,e)?!0:mS.call(vA,e)?!1:V$.test(e)?_A[e]=!0:(vA[e]=!0,!1)}function U$(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function q$(e,t,r,n){if(t===null||typeof t>"u"||U$(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ns(e,t,r,n,a,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var rs={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rs[e]=new Ns(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rs[t]=new Ns(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rs[e]=new Ns(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rs[e]=new Ns(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rs[e]=new Ns(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rs[e]=new Ns(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rs[e]=new Ns(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rs[e]=new Ns(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rs[e]=new Ns(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mk=/[\-:]([a-z])/g;function Nk(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mk,Nk);rs[t]=new Ns(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mk,Nk);rs[t]=new Ns(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mk,Nk);rs[t]=new Ns(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rs[e]=new Ns(e,1,!1,e.toLowerCase(),null,!1,!1)});rs.xlinkHref=new Ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rs[e]=new Ns(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ik(e,t,r,n){var a=rs.hasOwnProperty(t)?rs[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(q$(t,r,a,n)&&(r=null),n||a===null?$$(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var sc=B$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,u0=Symbol.for("react.element"),Dp=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Rk=Symbol.for("react.strict_mode"),gS=Symbol.for("react.profiler"),ZD=Symbol.for("react.provider"),KD=Symbol.for("react.context"),Dk=Symbol.for("react.forward_ref"),yS=Symbol.for("react.suspense"),xS=Symbol.for("react.suspense_list"),Ok=Symbol.for("react.memo"),Gc=Symbol.for("react.lazy"),YD=Symbol.for("react.offscreen"),bA=Symbol.iterator;function wg(e){return e===null||typeof e!="object"?null:(e=bA&&e[bA]||e["@@iterator"],typeof e=="function"?e:null)}var Nn=Object.assign,q1;function zg(e){if(q1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);q1=t&&t[1]||""}return`
`+q1+e}var W1=!1;function G1(e,t){if(!e||W1)return"";W1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(T){var n=T}Reflect.construct(e,[],t)}else{try{t.call()}catch(T){n=T}e.call(t.prototype)}else{try{throw Error()}catch(T){n=T}e()}}catch(T){if(T&&n&&typeof T.stack=="string"){for(var a=T.stack.split(`
`),u=n.stack.split(`
`),h=a.length-1,o=u.length-1;1<=h&&0<=o&&a[h]!==u[o];)o--;for(;1<=h&&0<=o;h--,o--)if(a[h]!==u[o]){if(h!==1||o!==1)do if(h--,o--,0>o||a[h]!==u[o]){var _=`
`+a[h].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=h&&0<=o);break}}}finally{W1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?zg(e):""}function W$(e){switch(e.tag){case 5:return zg(e.type);case 16:return zg("Lazy");case 13:return zg("Suspense");case 19:return zg("SuspenseList");case 0:case 2:case 15:return e=G1(e.type,!1),e;case 11:return e=G1(e.type.render,!1),e;case 1:return e=G1(e.type,!0),e;default:return""}}function vS(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Op:return"Fragment";case Dp:return"Portal";case gS:return"Profiler";case Rk:return"StrictMode";case yS:return"Suspense";case xS:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case KD:return(e.displayName||"Context")+".Consumer";case ZD:return(e._context.displayName||"Context")+".Provider";case Dk:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ok:return t=e.displayName||null,t!==null?t:vS(e.type)||"Memo";case Gc:t=e._payload,e=e._init;try{return vS(e(t))}catch{}}return null}function G$(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vS(t);case 8:return t===Rk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function _u(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function QD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function H$(e){var t=QD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){n=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(h){n=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function d0(e){e._valueTracker||(e._valueTracker=H$(e))}function XD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=QD(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function k_(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function _S(e,t){var r=t.checked;return Nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function wA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_u(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function JD(e,t){t=t.checked,t!=null&&Ik(e,"checked",t,!1)}function bS(e,t){JD(e,t);var r=_u(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wS(e,t.type,r):t.hasOwnProperty("defaultValue")&&wS(e,t.type,_u(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function SA(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wS(e,t,r){(t!=="number"||k_(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Bg=Array.isArray;function Jp(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_u(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function SS(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(mt(91));return Nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function TA(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(mt(92));if(Bg(r)){if(1<r.length)throw Error(mt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_u(r)}}function eO(e,t){var r=_u(t.value),n=_u(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function kA(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function tO(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TS(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?tO(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var h0,rO=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(h0=h0||document.createElement("div"),h0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=h0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vy(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Z$=["Webkit","ms","Moz","O"];Object.keys(Zg).forEach(function(e){Z$.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zg[t]=Zg[e]})});function nO(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zg.hasOwnProperty(e)&&Zg[e]?(""+t).trim():t+"px"}function iO(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=nO(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var K$=Nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kS(e,t){if(t){if(K$[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(mt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(mt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(mt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(mt(62))}}function CS(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PS=null;function Lk(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ES=null,ef=null,tf=null;function CA(e){if(e=lx(e)){if(typeof ES!="function")throw Error(mt(280));var t=e.stateNode;t&&(t=Nb(t),ES(e.stateNode,e.type,t))}}function sO(e){ef?tf?tf.push(e):tf=[e]:ef=e}function aO(){if(ef){var e=ef,t=tf;if(tf=ef=null,CA(e),t)for(e=0;e<t.length;e++)CA(t[e])}}function oO(e,t){return e(t)}function lO(){}var H1=!1;function cO(e,t,r){if(H1)return e(t,r);H1=!0;try{return oO(e,t,r)}finally{H1=!1,(ef!==null||tf!==null)&&(lO(),aO())}}function _y(e,t){var r=e.stateNode;if(r===null)return null;var n=Nb(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(mt(231,t,typeof r));return r}var jS=!1;if(Ql)try{var Sg={};Object.defineProperty(Sg,"passive",{get:function(){jS=!0}}),window.addEventListener("test",Sg,Sg),window.removeEventListener("test",Sg,Sg)}catch{jS=!1}function Y$(e,t,r,n,a,u,h,o,_){var T=Array.prototype.slice.call(arguments,3);try{t.apply(r,T)}catch(P){this.onError(P)}}var Kg=!1,C_=null,P_=!1,AS=null,Q$={onError:function(e){Kg=!0,C_=e}};function X$(e,t,r,n,a,u,h,o,_){Kg=!1,C_=null,Y$.apply(Q$,arguments)}function J$(e,t,r,n,a,u,h,o,_){if(X$.apply(this,arguments),Kg){if(Kg){var T=C_;Kg=!1,C_=null}else throw Error(mt(198));P_||(P_=!0,AS=T)}}function fh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function uO(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function PA(e){if(fh(e)!==e)throw Error(mt(188))}function eU(e){var t=e.alternate;if(!t){if(t=fh(e),t===null)throw Error(mt(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var u=a.alternate;if(u===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===r)return PA(a),e;if(u===n)return PA(a),t;u=u.sibling}throw Error(mt(188))}if(r.return!==n.return)r=a,n=u;else{for(var h=!1,o=a.child;o;){if(o===r){h=!0,r=a,n=u;break}if(o===n){h=!0,n=a,r=u;break}o=o.sibling}if(!h){for(o=u.child;o;){if(o===r){h=!0,r=u,n=a;break}if(o===n){h=!0,n=u,r=a;break}o=o.sibling}if(!h)throw Error(mt(189))}}if(r.alternate!==n)throw Error(mt(190))}if(r.tag!==3)throw Error(mt(188));return r.stateNode.current===r?e:t}function dO(e){return e=eU(e),e!==null?hO(e):null}function hO(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hO(e);if(t!==null)return t;e=e.sibling}return null}var pO=ya.unstable_scheduleCallback,EA=ya.unstable_cancelCallback,tU=ya.unstable_shouldYield,rU=ya.unstable_requestPaint,Jn=ya.unstable_now,nU=ya.unstable_getCurrentPriorityLevel,Fk=ya.unstable_ImmediatePriority,fO=ya.unstable_UserBlockingPriority,E_=ya.unstable_NormalPriority,iU=ya.unstable_LowPriority,mO=ya.unstable_IdlePriority,Eb=null,il=null;function sU(e){if(il&&typeof il.onCommitFiberRoot=="function")try{il.onCommitFiberRoot(Eb,e,void 0,(e.current.flags&128)===128)}catch{}}var wo=Math.clz32?Math.clz32:lU,aU=Math.log,oU=Math.LN2;function lU(e){return e>>>=0,e===0?32:31-(aU(e)/oU|0)|0}var p0=64,f0=4194304;function Vg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function j_(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,u=e.pingedLanes,h=r&268435455;if(h!==0){var o=h&~a;o!==0?n=Vg(o):(u&=h,u!==0&&(n=Vg(u)))}else h=r&~a,h!==0?n=Vg(h):u!==0&&(n=Vg(u));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-wo(t),a=1<<r,n|=e[r],t&=~a;return n}function cU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uU(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-wo(u),o=1<<h,_=a[h];_===-1?(!(o&r)||o&n)&&(a[h]=cU(o,t)):_<=t&&(e.expiredLanes|=o),u&=~o}}function MS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gO(){var e=p0;return p0<<=1,!(p0&4194240)&&(p0=64),e}function Z1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ax(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-wo(t),e[t]=r}function dU(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-wo(r),u=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~u}}function zk(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-wo(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Kr=0;function yO(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xO,Bk,vO,_O,bO,NS=!1,m0=[],lu=null,cu=null,uu=null,by=new Map,wy=new Map,Kc=[],hU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jA(e,t){switch(e){case"focusin":case"focusout":lu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":uu=null;break;case"pointerover":case"pointerout":by.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wy.delete(t.pointerId)}}function Tg(e,t,r,n,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:u,targetContainers:[a]},t!==null&&(t=lx(t),t!==null&&Bk(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function pU(e,t,r,n,a){switch(t){case"focusin":return lu=Tg(lu,e,t,r,n,a),!0;case"dragenter":return cu=Tg(cu,e,t,r,n,a),!0;case"mouseover":return uu=Tg(uu,e,t,r,n,a),!0;case"pointerover":var u=a.pointerId;return by.set(u,Tg(by.get(u)||null,e,t,r,n,a)),!0;case"gotpointercapture":return u=a.pointerId,wy.set(u,Tg(wy.get(u)||null,e,t,r,n,a)),!0}return!1}function wO(e){var t=Ld(e.target);if(t!==null){var r=fh(t);if(r!==null){if(t=r.tag,t===13){if(t=uO(r),t!==null){e.blockedOn=t,bO(e.priority,function(){vO(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function e_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=IS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);PS=n,r.target.dispatchEvent(n),PS=null}else return t=lx(r),t!==null&&Bk(t),e.blockedOn=r,!1;t.shift()}return!0}function AA(e,t,r){e_(e)&&r.delete(t)}function fU(){NS=!1,lu!==null&&e_(lu)&&(lu=null),cu!==null&&e_(cu)&&(cu=null),uu!==null&&e_(uu)&&(uu=null),by.forEach(AA),wy.forEach(AA)}function kg(e,t){e.blockedOn===t&&(e.blockedOn=null,NS||(NS=!0,ya.unstable_scheduleCallback(ya.unstable_NormalPriority,fU)))}function Sy(e){function t(a){return kg(a,e)}if(0<m0.length){kg(m0[0],e);for(var r=1;r<m0.length;r++){var n=m0[r];n.blockedOn===e&&(n.blockedOn=null)}}for(lu!==null&&kg(lu,e),cu!==null&&kg(cu,e),uu!==null&&kg(uu,e),by.forEach(t),wy.forEach(t),r=0;r<Kc.length;r++)n=Kc[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Kc.length&&(r=Kc[0],r.blockedOn===null);)wO(r),r.blockedOn===null&&Kc.shift()}var rf=sc.ReactCurrentBatchConfig,A_=!0;function mU(e,t,r,n){var a=Kr,u=rf.transition;rf.transition=null;try{Kr=1,Vk(e,t,r,n)}finally{Kr=a,rf.transition=u}}function gU(e,t,r,n){var a=Kr,u=rf.transition;rf.transition=null;try{Kr=4,Vk(e,t,r,n)}finally{Kr=a,rf.transition=u}}function Vk(e,t,r,n){if(A_){var a=IS(e,t,r,n);if(a===null)i2(e,t,n,M_,r),jA(e,n);else if(pU(a,e,t,r,n))n.stopPropagation();else if(jA(e,n),t&4&&-1<hU.indexOf(e)){for(;a!==null;){var u=lx(a);if(u!==null&&xO(u),u=IS(e,t,r,n),u===null&&i2(e,t,n,M_,r),u===a)break;a=u}a!==null&&n.stopPropagation()}else i2(e,t,n,null,r)}}var M_=null;function IS(e,t,r,n){if(M_=null,e=Lk(n),e=Ld(e),e!==null)if(t=fh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=uO(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return M_=e,null}function SO(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nU()){case Fk:return 1;case fO:return 4;case E_:case iU:return 16;case mO:return 536870912;default:return 16}default:return 16}}var iu=null,$k=null,t_=null;function TO(){if(t_)return t_;var e,t=$k,r=t.length,n,a="value"in iu?iu.value:iu.textContent,u=a.length;for(e=0;e<r&&t[e]===a[e];e++);var h=r-e;for(n=1;n<=h&&t[r-n]===a[u-n];n++);return t_=a.slice(e,1<n?1-n:void 0)}function r_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function g0(){return!0}function MA(){return!1}function ba(e){function t(r,n,a,u,h){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?g0:MA,this.isPropagationStopped=MA,this}return Nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=g0)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=g0)},persist:function(){},isPersistent:g0}),t}var $f={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uk=ba($f),ox=Nn({},$f,{view:0,detail:0}),yU=ba(ox),K1,Y1,Cg,jb=Nn({},ox,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qk,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cg&&(Cg&&e.type==="mousemove"?(K1=e.screenX-Cg.screenX,Y1=e.screenY-Cg.screenY):Y1=K1=0,Cg=e),K1)},movementY:function(e){return"movementY"in e?e.movementY:Y1}}),NA=ba(jb),xU=Nn({},jb,{dataTransfer:0}),vU=ba(xU),_U=Nn({},ox,{relatedTarget:0}),Q1=ba(_U),bU=Nn({},$f,{animationName:0,elapsedTime:0,pseudoElement:0}),wU=ba(bU),SU=Nn({},$f,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),TU=ba(SU),kU=Nn({},$f,{data:0}),IA=ba(kU),CU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EU[e])?!!t[e]:!1}function qk(){return jU}var AU=Nn({},ox,{key:function(e){if(e.key){var t=CU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=r_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?PU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qk,charCode:function(e){return e.type==="keypress"?r_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?r_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),MU=ba(AU),NU=Nn({},jb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),RA=ba(NU),IU=Nn({},ox,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qk}),RU=ba(IU),DU=Nn({},$f,{propertyName:0,elapsedTime:0,pseudoElement:0}),OU=ba(DU),LU=Nn({},jb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FU=ba(LU),zU=[9,13,27,32],Wk=Ql&&"CompositionEvent"in window,Yg=null;Ql&&"documentMode"in document&&(Yg=document.documentMode);var BU=Ql&&"TextEvent"in window&&!Yg,kO=Ql&&(!Wk||Yg&&8<Yg&&11>=Yg),DA=" ",OA=!1;function CO(e,t){switch(e){case"keyup":return zU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function PO(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Lp=!1;function VU(e,t){switch(e){case"compositionend":return PO(t);case"keypress":return t.which!==32?null:(OA=!0,DA);case"textInput":return e=t.data,e===DA&&OA?null:e;default:return null}}function $U(e,t){if(Lp)return e==="compositionend"||!Wk&&CO(e,t)?(e=TO(),t_=$k=iu=null,Lp=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kO&&t.locale!=="ko"?null:t.data;default:return null}}var UU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function LA(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!UU[e.type]:t==="textarea"}function EO(e,t,r,n){sO(n),t=N_(t,"onChange"),0<t.length&&(r=new Uk("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Qg=null,Ty=null;function qU(e){zO(e,0)}function Ab(e){var t=Bp(e);if(XD(t))return e}function WU(e,t){if(e==="change")return t}var jO=!1;if(Ql){var X1;if(Ql){var J1="oninput"in document;if(!J1){var FA=document.createElement("div");FA.setAttribute("oninput","return;"),J1=typeof FA.oninput=="function"}X1=J1}else X1=!1;jO=X1&&(!document.documentMode||9<document.documentMode)}function zA(){Qg&&(Qg.detachEvent("onpropertychange",AO),Ty=Qg=null)}function AO(e){if(e.propertyName==="value"&&Ab(Ty)){var t=[];EO(t,Ty,e,Lk(e)),cO(qU,t)}}function GU(e,t,r){e==="focusin"?(zA(),Qg=t,Ty=r,Qg.attachEvent("onpropertychange",AO)):e==="focusout"&&zA()}function HU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ab(Ty)}function ZU(e,t){if(e==="click")return Ab(t)}function KU(e,t){if(e==="input"||e==="change")return Ab(t)}function YU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var To=typeof Object.is=="function"?Object.is:YU;function ky(e,t){if(To(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!mS.call(t,a)||!To(e[a],t[a]))return!1}return!0}function BA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function VA(e,t){var r=BA(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=BA(r)}}function MO(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?MO(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NO(){for(var e=window,t=k_();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=k_(e.document)}return t}function Gk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function QU(e){var t=NO(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&MO(r.ownerDocument.documentElement,r)){if(n!==null&&Gk(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,u=Math.min(n.start,a);n=n.end===void 0?u:Math.min(n.end,a),!e.extend&&u>n&&(a=n,n=u,u=a),a=VA(r,u);var h=VA(r,n);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>n?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XU=Ql&&"documentMode"in document&&11>=document.documentMode,Fp=null,RS=null,Xg=null,DS=!1;function $A(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;DS||Fp==null||Fp!==k_(n)||(n=Fp,"selectionStart"in n&&Gk(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xg&&ky(Xg,n)||(Xg=n,n=N_(RS,"onSelect"),0<n.length&&(t=new Uk("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Fp)))}function y0(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zp={animationend:y0("Animation","AnimationEnd"),animationiteration:y0("Animation","AnimationIteration"),animationstart:y0("Animation","AnimationStart"),transitionend:y0("Transition","TransitionEnd")},e2={},IO={};Ql&&(IO=document.createElement("div").style,"AnimationEvent"in window||(delete zp.animationend.animation,delete zp.animationiteration.animation,delete zp.animationstart.animation),"TransitionEvent"in window||delete zp.transitionend.transition);function Mb(e){if(e2[e])return e2[e];if(!zp[e])return e;var t=zp[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in IO)return e2[e]=t[r];return e}var RO=Mb("animationend"),DO=Mb("animationiteration"),OO=Mb("animationstart"),LO=Mb("transitionend"),FO=new Map,UA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pu(e,t){FO.set(e,t),ph(t,[e])}for(var t2=0;t2<UA.length;t2++){var r2=UA[t2],JU=r2.toLowerCase(),eq=r2[0].toUpperCase()+r2.slice(1);Pu(JU,"on"+eq)}Pu(RO,"onAnimationEnd");Pu(DO,"onAnimationIteration");Pu(OO,"onAnimationStart");Pu("dblclick","onDoubleClick");Pu("focusin","onFocus");Pu("focusout","onBlur");Pu(LO,"onTransitionEnd");vf("onMouseEnter",["mouseout","mouseover"]);vf("onMouseLeave",["mouseout","mouseover"]);vf("onPointerEnter",["pointerout","pointerover"]);vf("onPointerLeave",["pointerout","pointerover"]);ph("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ph("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ph("onBeforeInput",["compositionend","keypress","textInput","paste"]);ph("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ph("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tq=new Set("cancel close invalid load scroll toggle".split(" ").concat($g));function qA(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,J$(n,t,void 0,e),e.currentTarget=null}function zO(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var h=n.length-1;0<=h;h--){var o=n[h],_=o.instance,T=o.currentTarget;if(o=o.listener,_!==u&&a.isPropagationStopped())break e;qA(a,o,T),u=_}else for(h=0;h<n.length;h++){if(o=n[h],_=o.instance,T=o.currentTarget,o=o.listener,_!==u&&a.isPropagationStopped())break e;qA(a,o,T),u=_}}}if(P_)throw e=AS,P_=!1,AS=null,e}function yn(e,t){var r=t[BS];r===void 0&&(r=t[BS]=new Set);var n=e+"__bubble";r.has(n)||(BO(t,e,2,!1),r.add(n))}function n2(e,t,r){var n=0;t&&(n|=4),BO(r,e,n,t)}var x0="_reactListening"+Math.random().toString(36).slice(2);function Cy(e){if(!e[x0]){e[x0]=!0,HD.forEach(function(r){r!=="selectionchange"&&(tq.has(r)||n2(r,!1,e),n2(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[x0]||(t[x0]=!0,n2("selectionchange",!1,t))}}function BO(e,t,r,n){switch(SO(t)){case 1:var a=mU;break;case 4:a=gU;break;default:a=Vk}r=a.bind(null,t,r,e),a=void 0,!jS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function i2(e,t,r,n,a){var u=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var h=n.tag;if(h===3||h===4){var o=n.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(h===4)for(h=n.return;h!==null;){var _=h.tag;if((_===3||_===4)&&(_=h.stateNode.containerInfo,_===a||_.nodeType===8&&_.parentNode===a))return;h=h.return}for(;o!==null;){if(h=Ld(o),h===null)return;if(_=h.tag,_===5||_===6){n=u=h;continue e}o=o.parentNode}}n=n.return}cO(function(){var T=u,P=Lk(r),E=[];e:{var M=FO.get(e);if(M!==void 0){var I=Uk,z=e;switch(e){case"keypress":if(r_(r)===0)break e;case"keydown":case"keyup":I=MU;break;case"focusin":z="focus",I=Q1;break;case"focusout":z="blur",I=Q1;break;case"beforeblur":case"afterblur":I=Q1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=NA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=vU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=RU;break;case RO:case DO:case OO:I=wU;break;case LO:I=OU;break;case"scroll":I=yU;break;case"wheel":I=FU;break;case"copy":case"cut":case"paste":I=TU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=RA}var F=(t&4)!==0,D=!F&&e==="scroll",q=F?M!==null?M+"Capture":null:M;F=[];for(var $=T,W;$!==null;){W=$;var te=W.stateNode;if(W.tag===5&&te!==null&&(W=te,q!==null&&(te=_y($,q),te!=null&&F.push(Py($,te,W)))),D)break;$=$.return}0<F.length&&(M=new I(M,z,null,r,P),E.push({event:M,listeners:F}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",M&&r!==PS&&(z=r.relatedTarget||r.fromElement)&&(Ld(z)||z[Xl]))break e;if((I||M)&&(M=P.window===P?P:(M=P.ownerDocument)?M.defaultView||M.parentWindow:window,I?(z=r.relatedTarget||r.toElement,I=T,z=z?Ld(z):null,z!==null&&(D=fh(z),z!==D||z.tag!==5&&z.tag!==6)&&(z=null)):(I=null,z=T),I!==z)){if(F=NA,te="onMouseLeave",q="onMouseEnter",$="mouse",(e==="pointerout"||e==="pointerover")&&(F=RA,te="onPointerLeave",q="onPointerEnter",$="pointer"),D=I==null?M:Bp(I),W=z==null?M:Bp(z),M=new F(te,$+"leave",I,r,P),M.target=D,M.relatedTarget=W,te=null,Ld(P)===T&&(F=new F(q,$+"enter",z,r,P),F.target=W,F.relatedTarget=D,te=F),D=te,I&&z)t:{for(F=I,q=z,$=0,W=F;W;W=xp(W))$++;for(W=0,te=q;te;te=xp(te))W++;for(;0<$-W;)F=xp(F),$--;for(;0<W-$;)q=xp(q),W--;for(;$--;){if(F===q||q!==null&&F===q.alternate)break t;F=xp(F),q=xp(q)}F=null}else F=null;I!==null&&WA(E,M,I,F,!1),z!==null&&D!==null&&WA(E,D,z,F,!0)}}e:{if(M=T?Bp(T):window,I=M.nodeName&&M.nodeName.toLowerCase(),I==="select"||I==="input"&&M.type==="file")var se=WU;else if(LA(M))if(jO)se=KU;else{se=HU;var he=GU}else(I=M.nodeName)&&I.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(se=ZU);if(se&&(se=se(e,T))){EO(E,se,r,P);break e}he&&he(e,M,T),e==="focusout"&&(he=M._wrapperState)&&he.controlled&&M.type==="number"&&wS(M,"number",M.value)}switch(he=T?Bp(T):window,e){case"focusin":(LA(he)||he.contentEditable==="true")&&(Fp=he,RS=T,Xg=null);break;case"focusout":Xg=RS=Fp=null;break;case"mousedown":DS=!0;break;case"contextmenu":case"mouseup":case"dragend":DS=!1,$A(E,r,P);break;case"selectionchange":if(XU)break;case"keydown":case"keyup":$A(E,r,P)}var pe;if(Wk)e:{switch(e){case"compositionstart":var xe="onCompositionStart";break e;case"compositionend":xe="onCompositionEnd";break e;case"compositionupdate":xe="onCompositionUpdate";break e}xe=void 0}else Lp?CO(e,r)&&(xe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(xe="onCompositionStart");xe&&(kO&&r.locale!=="ko"&&(Lp||xe!=="onCompositionStart"?xe==="onCompositionEnd"&&Lp&&(pe=TO()):(iu=P,$k="value"in iu?iu.value:iu.textContent,Lp=!0)),he=N_(T,xe),0<he.length&&(xe=new IA(xe,e,null,r,P),E.push({event:xe,listeners:he}),pe?xe.data=pe:(pe=PO(r),pe!==null&&(xe.data=pe)))),(pe=BU?VU(e,r):$U(e,r))&&(T=N_(T,"onBeforeInput"),0<T.length&&(P=new IA("onBeforeInput","beforeinput",null,r,P),E.push({event:P,listeners:T}),P.data=pe))}zO(E,t)})}function Py(e,t,r){return{instance:e,listener:t,currentTarget:r}}function N_(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=_y(e,r),u!=null&&n.unshift(Py(e,u,a)),u=_y(e,t),u!=null&&n.push(Py(e,u,a))),e=e.return}return n}function xp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function WA(e,t,r,n,a){for(var u=t._reactName,h=[];r!==null&&r!==n;){var o=r,_=o.alternate,T=o.stateNode;if(_!==null&&_===n)break;o.tag===5&&T!==null&&(o=T,a?(_=_y(r,u),_!=null&&h.unshift(Py(r,_,o))):a||(_=_y(r,u),_!=null&&h.push(Py(r,_,o)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var rq=/\r\n?/g,nq=/\u0000|\uFFFD/g;function GA(e){return(typeof e=="string"?e:""+e).replace(rq,`
`).replace(nq,"")}function v0(e,t,r){if(t=GA(t),GA(e)!==t&&r)throw Error(mt(425))}function I_(){}var OS=null,LS=null;function FS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zS=typeof setTimeout=="function"?setTimeout:void 0,iq=typeof clearTimeout=="function"?clearTimeout:void 0,HA=typeof Promise=="function"?Promise:void 0,sq=typeof queueMicrotask=="function"?queueMicrotask:typeof HA<"u"?function(e){return HA.resolve(null).then(e).catch(aq)}:zS;function aq(e){setTimeout(function(){throw e})}function s2(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Sy(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Sy(t)}function du(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ZA(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),Jo="__reactFiber$"+Uf,Ey="__reactProps$"+Uf,Xl="__reactContainer$"+Uf,BS="__reactEvents$"+Uf,oq="__reactListeners$"+Uf,lq="__reactHandles$"+Uf;function Ld(e){var t=e[Jo];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Xl]||r[Jo]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ZA(e);e!==null;){if(r=e[Jo])return r;e=ZA(e)}return t}e=r,r=e.parentNode}return null}function lx(e){return e=e[Jo]||e[Xl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(mt(33))}function Nb(e){return e[Ey]||null}var VS=[],Vp=-1;function Eu(e){return{current:e}}function xn(e){0>Vp||(e.current=VS[Vp],VS[Vp]=null,Vp--)}function dn(e,t){Vp++,VS[Vp]=e.current,e.current=t}var bu={},ys=Eu(bu),Hs=Eu(!1),th=bu;function _f(e,t){var r=e.type.contextTypes;if(!r)return bu;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in r)a[u]=t[u];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Zs(e){return e=e.childContextTypes,e!=null}function R_(){xn(Hs),xn(ys)}function KA(e,t,r){if(ys.current!==bu)throw Error(mt(168));dn(ys,t),dn(Hs,r)}function VO(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(mt(108,G$(e)||"Unknown",a));return Nn({},r,n)}function D_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bu,th=ys.current,dn(ys,e),dn(Hs,Hs.current),!0}function YA(e,t,r){var n=e.stateNode;if(!n)throw Error(mt(169));r?(e=VO(e,t,th),n.__reactInternalMemoizedMergedChildContext=e,xn(Hs),xn(ys),dn(ys,e)):xn(Hs),dn(Hs,r)}var Gl=null,Ib=!1,a2=!1;function $O(e){Gl===null?Gl=[e]:Gl.push(e)}function cq(e){Ib=!0,$O(e)}function ju(){if(!a2&&Gl!==null){a2=!0;var e=0,t=Kr;try{var r=Gl;for(Kr=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Gl=null,Ib=!1}catch(a){throw Gl!==null&&(Gl=Gl.slice(e+1)),pO(Fk,ju),a}finally{Kr=t,a2=!1}}return null}var $p=[],Up=0,O_=null,L_=0,Ra=[],Da=0,rh=null,Zl=1,Kl="";function Ed(e,t){$p[Up++]=L_,$p[Up++]=O_,O_=e,L_=t}function UO(e,t,r){Ra[Da++]=Zl,Ra[Da++]=Kl,Ra[Da++]=rh,rh=e;var n=Zl;e=Kl;var a=32-wo(n)-1;n&=~(1<<a),r+=1;var u=32-wo(t)+a;if(30<u){var h=a-a%5;u=(n&(1<<h)-1).toString(32),n>>=h,a-=h,Zl=1<<32-wo(t)+a|r<<a|n,Kl=u+e}else Zl=1<<u|r<<a|n,Kl=e}function Hk(e){e.return!==null&&(Ed(e,1),UO(e,1,0))}function Zk(e){for(;e===O_;)O_=$p[--Up],$p[Up]=null,L_=$p[--Up],$p[Up]=null;for(;e===rh;)rh=Ra[--Da],Ra[Da]=null,Kl=Ra[--Da],Ra[Da]=null,Zl=Ra[--Da],Ra[Da]=null}var fa=null,pa=null,Sn=!1,yo=null;function qO(e,t){var r=za(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function QA(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fa=e,pa=du(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fa=e,pa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=rh!==null?{id:Zl,overflow:Kl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=za(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,fa=e,pa=null,!0):!1;default:return!1}}function $S(e){return(e.mode&1)!==0&&(e.flags&128)===0}function US(e){if(Sn){var t=pa;if(t){var r=t;if(!QA(e,t)){if($S(e))throw Error(mt(418));t=du(r.nextSibling);var n=fa;t&&QA(e,t)?qO(n,r):(e.flags=e.flags&-4097|2,Sn=!1,fa=e)}}else{if($S(e))throw Error(mt(418));e.flags=e.flags&-4097|2,Sn=!1,fa=e}}}function XA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fa=e}function _0(e){if(e!==fa)return!1;if(!Sn)return XA(e),Sn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!FS(e.type,e.memoizedProps)),t&&(t=pa)){if($S(e))throw WO(),Error(mt(418));for(;t;)qO(e,t),t=du(t.nextSibling)}if(XA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(mt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){pa=du(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}pa=null}}else pa=fa?du(e.stateNode.nextSibling):null;return!0}function WO(){for(var e=pa;e;)e=du(e.nextSibling)}function bf(){pa=fa=null,Sn=!1}function Kk(e){yo===null?yo=[e]:yo.push(e)}var uq=sc.ReactCurrentBatchConfig;function Pg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(mt(309));var n=r.stateNode}if(!n)throw Error(mt(147,e));var a=n,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var o=a.refs;h===null?delete o[u]:o[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(mt(284));if(!r._owner)throw Error(mt(290,e))}return e}function b0(e,t){throw e=Object.prototype.toString.call(t),Error(mt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function JA(e){var t=e._init;return t(e._payload)}function GO(e){function t(q,$){if(e){var W=q.deletions;W===null?(q.deletions=[$],q.flags|=16):W.push($)}}function r(q,$){if(!e)return null;for(;$!==null;)t(q,$),$=$.sibling;return null}function n(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function a(q,$){return q=mu(q,$),q.index=0,q.sibling=null,q}function u(q,$,W){return q.index=W,e?(W=q.alternate,W!==null?(W=W.index,W<$?(q.flags|=2,$):W):(q.flags|=2,$)):(q.flags|=1048576,$)}function h(q){return e&&q.alternate===null&&(q.flags|=2),q}function o(q,$,W,te){return $===null||$.tag!==6?($=p2(W,q.mode,te),$.return=q,$):($=a($,W),$.return=q,$)}function _(q,$,W,te){var se=W.type;return se===Op?P(q,$,W.props.children,te,W.key):$!==null&&($.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Gc&&JA(se)===$.type)?(te=a($,W.props),te.ref=Pg(q,$,W),te.return=q,te):(te=c_(W.type,W.key,W.props,null,q.mode,te),te.ref=Pg(q,$,W),te.return=q,te)}function T(q,$,W,te){return $===null||$.tag!==4||$.stateNode.containerInfo!==W.containerInfo||$.stateNode.implementation!==W.implementation?($=f2(W,q.mode,te),$.return=q,$):($=a($,W.children||[]),$.return=q,$)}function P(q,$,W,te,se){return $===null||$.tag!==7?($=Qd(W,q.mode,te,se),$.return=q,$):($=a($,W),$.return=q,$)}function E(q,$,W){if(typeof $=="string"&&$!==""||typeof $=="number")return $=p2(""+$,q.mode,W),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case u0:return W=c_($.type,$.key,$.props,null,q.mode,W),W.ref=Pg(q,null,$),W.return=q,W;case Dp:return $=f2($,q.mode,W),$.return=q,$;case Gc:var te=$._init;return E(q,te($._payload),W)}if(Bg($)||wg($))return $=Qd($,q.mode,W,null),$.return=q,$;b0(q,$)}return null}function M(q,$,W,te){var se=$!==null?$.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return se!==null?null:o(q,$,""+W,te);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case u0:return W.key===se?_(q,$,W,te):null;case Dp:return W.key===se?T(q,$,W,te):null;case Gc:return se=W._init,M(q,$,se(W._payload),te)}if(Bg(W)||wg(W))return se!==null?null:P(q,$,W,te,null);b0(q,W)}return null}function I(q,$,W,te,se){if(typeof te=="string"&&te!==""||typeof te=="number")return q=q.get(W)||null,o($,q,""+te,se);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case u0:return q=q.get(te.key===null?W:te.key)||null,_($,q,te,se);case Dp:return q=q.get(te.key===null?W:te.key)||null,T($,q,te,se);case Gc:var he=te._init;return I(q,$,W,he(te._payload),se)}if(Bg(te)||wg(te))return q=q.get(W)||null,P($,q,te,se,null);b0($,te)}return null}function z(q,$,W,te){for(var se=null,he=null,pe=$,xe=$=0,Re=null;pe!==null&&xe<W.length;xe++){pe.index>xe?(Re=pe,pe=null):Re=pe.sibling;var Me=M(q,pe,W[xe],te);if(Me===null){pe===null&&(pe=Re);break}e&&pe&&Me.alternate===null&&t(q,pe),$=u(Me,$,xe),he===null?se=Me:he.sibling=Me,he=Me,pe=Re}if(xe===W.length)return r(q,pe),Sn&&Ed(q,xe),se;if(pe===null){for(;xe<W.length;xe++)pe=E(q,W[xe],te),pe!==null&&($=u(pe,$,xe),he===null?se=pe:he.sibling=pe,he=pe);return Sn&&Ed(q,xe),se}for(pe=n(q,pe);xe<W.length;xe++)Re=I(pe,q,xe,W[xe],te),Re!==null&&(e&&Re.alternate!==null&&pe.delete(Re.key===null?xe:Re.key),$=u(Re,$,xe),he===null?se=Re:he.sibling=Re,he=Re);return e&&pe.forEach(function(pt){return t(q,pt)}),Sn&&Ed(q,xe),se}function F(q,$,W,te){var se=wg(W);if(typeof se!="function")throw Error(mt(150));if(W=se.call(W),W==null)throw Error(mt(151));for(var he=se=null,pe=$,xe=$=0,Re=null,Me=W.next();pe!==null&&!Me.done;xe++,Me=W.next()){pe.index>xe?(Re=pe,pe=null):Re=pe.sibling;var pt=M(q,pe,Me.value,te);if(pt===null){pe===null&&(pe=Re);break}e&&pe&&pt.alternate===null&&t(q,pe),$=u(pt,$,xe),he===null?se=pt:he.sibling=pt,he=pt,pe=Re}if(Me.done)return r(q,pe),Sn&&Ed(q,xe),se;if(pe===null){for(;!Me.done;xe++,Me=W.next())Me=E(q,Me.value,te),Me!==null&&($=u(Me,$,xe),he===null?se=Me:he.sibling=Me,he=Me);return Sn&&Ed(q,xe),se}for(pe=n(q,pe);!Me.done;xe++,Me=W.next())Me=I(pe,q,xe,Me.value,te),Me!==null&&(e&&Me.alternate!==null&&pe.delete(Me.key===null?xe:Me.key),$=u(Me,$,xe),he===null?se=Me:he.sibling=Me,he=Me);return e&&pe.forEach(function(Oe){return t(q,Oe)}),Sn&&Ed(q,xe),se}function D(q,$,W,te){if(typeof W=="object"&&W!==null&&W.type===Op&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case u0:e:{for(var se=W.key,he=$;he!==null;){if(he.key===se){if(se=W.type,se===Op){if(he.tag===7){r(q,he.sibling),$=a(he,W.props.children),$.return=q,q=$;break e}}else if(he.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Gc&&JA(se)===he.type){r(q,he.sibling),$=a(he,W.props),$.ref=Pg(q,he,W),$.return=q,q=$;break e}r(q,he);break}else t(q,he);he=he.sibling}W.type===Op?($=Qd(W.props.children,q.mode,te,W.key),$.return=q,q=$):(te=c_(W.type,W.key,W.props,null,q.mode,te),te.ref=Pg(q,$,W),te.return=q,q=te)}return h(q);case Dp:e:{for(he=W.key;$!==null;){if($.key===he)if($.tag===4&&$.stateNode.containerInfo===W.containerInfo&&$.stateNode.implementation===W.implementation){r(q,$.sibling),$=a($,W.children||[]),$.return=q,q=$;break e}else{r(q,$);break}else t(q,$);$=$.sibling}$=f2(W,q.mode,te),$.return=q,q=$}return h(q);case Gc:return he=W._init,D(q,$,he(W._payload),te)}if(Bg(W))return z(q,$,W,te);if(wg(W))return F(q,$,W,te);b0(q,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,$!==null&&$.tag===6?(r(q,$.sibling),$=a($,W),$.return=q,q=$):(r(q,$),$=p2(W,q.mode,te),$.return=q,q=$),h(q)):r(q,$)}return D}var wf=GO(!0),HO=GO(!1),F_=Eu(null),z_=null,qp=null,Yk=null;function Qk(){Yk=qp=z_=null}function Xk(e){var t=F_.current;xn(F_),e._currentValue=t}function qS(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function nf(e,t){z_=e,Yk=qp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qs=!0),e.firstContext=null)}function $a(e){var t=e._currentValue;if(Yk!==e)if(e={context:e,memoizedValue:t,next:null},qp===null){if(z_===null)throw Error(mt(308));qp=e,z_.dependencies={lanes:0,firstContext:e}}else qp=qp.next=e;return t}var Fd=null;function Jk(e){Fd===null?Fd=[e]:Fd.push(e)}function ZO(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Jk(t)):(r.next=a.next,a.next=r),t.interleaved=r,Jl(e,n)}function Jl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Hc=!1;function eC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KO(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hu(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,jr&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Jl(e,r)}return a=n.interleaved,a===null?(t.next=t,Jk(n)):(t.next=a.next,a.next=t),n.interleaved=t,Jl(e,r)}function n_(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zk(e,r)}}function eM(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?a=u=h:u=u.next=h,r=r.next}while(r!==null);u===null?a=u=t:u=u.next=t}else a=u=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function B_(e,t,r,n){var a=e.updateQueue;Hc=!1;var u=a.firstBaseUpdate,h=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var _=o,T=_.next;_.next=null,h===null?u=T:h.next=T,h=_;var P=e.alternate;P!==null&&(P=P.updateQueue,o=P.lastBaseUpdate,o!==h&&(o===null?P.firstBaseUpdate=T:o.next=T,P.lastBaseUpdate=_))}if(u!==null){var E=a.baseState;h=0,P=T=_=null,o=u;do{var M=o.lane,I=o.eventTime;if((n&M)===M){P!==null&&(P=P.next={eventTime:I,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var z=e,F=o;switch(M=t,I=r,F.tag){case 1:if(z=F.payload,typeof z=="function"){E=z.call(I,E,M);break e}E=z;break e;case 3:z.flags=z.flags&-65537|128;case 0:if(z=F.payload,M=typeof z=="function"?z.call(I,E,M):z,M==null)break e;E=Nn({},E,M);break e;case 2:Hc=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,M=a.effects,M===null?a.effects=[o]:M.push(o))}else I={eventTime:I,lane:M,tag:o.tag,payload:o.payload,callback:o.callback,next:null},P===null?(T=P=I,_=E):P=P.next=I,h|=M;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;M=o,o=M.next,M.next=null,a.lastBaseUpdate=M,a.shared.pending=null}}while(!0);if(P===null&&(_=E),a.baseState=_,a.firstBaseUpdate=T,a.lastBaseUpdate=P,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);ih|=h,e.lanes=h,e.memoizedState=E}}function tM(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(mt(191,a));a.call(n)}}}var cx={},sl=Eu(cx),jy=Eu(cx),Ay=Eu(cx);function zd(e){if(e===cx)throw Error(mt(174));return e}function tC(e,t){switch(dn(Ay,t),dn(jy,e),dn(sl,cx),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:TS(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=TS(t,e)}xn(sl),dn(sl,t)}function Sf(){xn(sl),xn(jy),xn(Ay)}function YO(e){zd(Ay.current);var t=zd(sl.current),r=TS(t,e.type);t!==r&&(dn(jy,e),dn(sl,r))}function rC(e){jy.current===e&&(xn(sl),xn(jy))}var jn=Eu(0);function V_(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var o2=[];function nC(){for(var e=0;e<o2.length;e++)o2[e]._workInProgressVersionPrimary=null;o2.length=0}var i_=sc.ReactCurrentDispatcher,l2=sc.ReactCurrentBatchConfig,nh=0,Mn=null,Pi=null,qi=null,$_=!1,Jg=!1,My=0,dq=0;function hs(){throw Error(mt(321))}function iC(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!To(e[r],t[r]))return!1;return!0}function sC(e,t,r,n,a,u){if(nh=u,Mn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,i_.current=e===null||e.memoizedState===null?mq:gq,e=r(n,a),Jg){u=0;do{if(Jg=!1,My=0,25<=u)throw Error(mt(301));u+=1,qi=Pi=null,t.updateQueue=null,i_.current=yq,e=r(n,a)}while(Jg)}if(i_.current=U_,t=Pi!==null&&Pi.next!==null,nh=0,qi=Pi=Mn=null,$_=!1,t)throw Error(mt(300));return e}function aC(){var e=My!==0;return My=0,e}function Zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qi===null?Mn.memoizedState=qi=e:qi=qi.next=e,qi}function Ua(){if(Pi===null){var e=Mn.alternate;e=e!==null?e.memoizedState:null}else e=Pi.next;var t=qi===null?Mn.memoizedState:qi.next;if(t!==null)qi=t,Pi=e;else{if(e===null)throw Error(mt(310));Pi=e,e={memoizedState:Pi.memoizedState,baseState:Pi.baseState,baseQueue:Pi.baseQueue,queue:Pi.queue,next:null},qi===null?Mn.memoizedState=qi=e:qi=qi.next=e}return qi}function Ny(e,t){return typeof t=="function"?t(e):t}function c2(e){var t=Ua(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var n=Pi,a=n.baseQueue,u=r.pending;if(u!==null){if(a!==null){var h=a.next;a.next=u.next,u.next=h}n.baseQueue=a=u,r.pending=null}if(a!==null){u=a.next,n=n.baseState;var o=h=null,_=null,T=u;do{var P=T.lane;if((nh&P)===P)_!==null&&(_=_.next={lane:0,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null}),n=T.hasEagerState?T.eagerState:e(n,T.action);else{var E={lane:P,action:T.action,hasEagerState:T.hasEagerState,eagerState:T.eagerState,next:null};_===null?(o=_=E,h=n):_=_.next=E,Mn.lanes|=P,ih|=P}T=T.next}while(T!==null&&T!==u);_===null?h=n:_.next=o,To(n,t.memoizedState)||(qs=!0),t.memoizedState=n,t.baseState=h,t.baseQueue=_,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do u=a.lane,Mn.lanes|=u,ih|=u,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function u2(e){var t=Ua(),r=t.queue;if(r===null)throw Error(mt(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,u=t.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do u=e(u,h.action),h=h.next;while(h!==a);To(u,t.memoizedState)||(qs=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,n]}function QO(){}function XO(e,t){var r=Mn,n=Ua(),a=t(),u=!To(n.memoizedState,a);if(u&&(n.memoizedState=a,qs=!0),n=n.queue,oC(tL.bind(null,r,n,e),[e]),n.getSnapshot!==t||u||qi!==null&&qi.memoizedState.tag&1){if(r.flags|=2048,Iy(9,eL.bind(null,r,n,a,t),void 0,null),Gi===null)throw Error(mt(349));nh&30||JO(r,t,a)}return a}function JO(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Mn.updateQueue,t===null?(t={lastEffect:null,stores:null},Mn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function eL(e,t,r,n){t.value=r,t.getSnapshot=n,rL(t)&&nL(e)}function tL(e,t,r){return r(function(){rL(t)&&nL(e)})}function rL(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!To(e,r)}catch{return!0}}function nL(e){var t=Jl(e,1);t!==null&&So(t,e,1,-1)}function rM(e){var t=Zo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:e},t.queue=e,e=e.dispatch=fq.bind(null,Mn,e),[t.memoizedState,e]}function Iy(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Mn.updateQueue,t===null?(t={lastEffect:null,stores:null},Mn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function iL(){return Ua().memoizedState}function s_(e,t,r,n){var a=Zo();Mn.flags|=e,a.memoizedState=Iy(1|t,r,void 0,n===void 0?null:n)}function Rb(e,t,r,n){var a=Ua();n=n===void 0?null:n;var u=void 0;if(Pi!==null){var h=Pi.memoizedState;if(u=h.destroy,n!==null&&iC(n,h.deps)){a.memoizedState=Iy(t,r,u,n);return}}Mn.flags|=e,a.memoizedState=Iy(1|t,r,u,n)}function nM(e,t){return s_(8390656,8,e,t)}function oC(e,t){return Rb(2048,8,e,t)}function sL(e,t){return Rb(4,2,e,t)}function aL(e,t){return Rb(4,4,e,t)}function oL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lL(e,t,r){return r=r!=null?r.concat([e]):null,Rb(4,4,oL.bind(null,t,e),r)}function lC(){}function cL(e,t){var r=Ua();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&iC(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function uL(e,t){var r=Ua();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&iC(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function dL(e,t,r){return nh&21?(To(r,t)||(r=gO(),Mn.lanes|=r,ih|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qs=!0),e.memoizedState=r)}function hq(e,t){var r=Kr;Kr=r!==0&&4>r?r:4,e(!0);var n=l2.transition;l2.transition={};try{e(!1),t()}finally{Kr=r,l2.transition=n}}function hL(){return Ua().memoizedState}function pq(e,t,r){var n=fu(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},pL(e))fL(t,r);else if(r=ZO(e,t,r,n),r!==null){var a=As();So(r,e,n,a),mL(r,t,n)}}function fq(e,t,r){var n=fu(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(pL(e))fL(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,o=u(h,r);if(a.hasEagerState=!0,a.eagerState=o,To(o,h)){var _=t.interleaved;_===null?(a.next=a,Jk(t)):(a.next=_.next,_.next=a),t.interleaved=a;return}}catch{}finally{}r=ZO(e,t,a,n),r!==null&&(a=As(),So(r,e,n,a),mL(r,t,n))}}function pL(e){var t=e.alternate;return e===Mn||t!==null&&t===Mn}function fL(e,t){Jg=$_=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mL(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,zk(e,r)}}var U_={readContext:$a,useCallback:hs,useContext:hs,useEffect:hs,useImperativeHandle:hs,useInsertionEffect:hs,useLayoutEffect:hs,useMemo:hs,useReducer:hs,useRef:hs,useState:hs,useDebugValue:hs,useDeferredValue:hs,useTransition:hs,useMutableSource:hs,useSyncExternalStore:hs,useId:hs,unstable_isNewReconciler:!1},mq={readContext:$a,useCallback:function(e,t){return Zo().memoizedState=[e,t===void 0?null:t],e},useContext:$a,useEffect:nM,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,s_(4194308,4,oL.bind(null,t,e),r)},useLayoutEffect:function(e,t){return s_(4194308,4,e,t)},useInsertionEffect:function(e,t){return s_(4,2,e,t)},useMemo:function(e,t){var r=Zo();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zo();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=pq.bind(null,Mn,e),[n.memoizedState,e]},useRef:function(e){var t=Zo();return e={current:e},t.memoizedState=e},useState:rM,useDebugValue:lC,useDeferredValue:function(e){return Zo().memoizedState=e},useTransition:function(){var e=rM(!1),t=e[0];return e=hq.bind(null,e[1]),Zo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Mn,a=Zo();if(Sn){if(r===void 0)throw Error(mt(407));r=r()}else{if(r=t(),Gi===null)throw Error(mt(349));nh&30||JO(n,t,r)}a.memoizedState=r;var u={value:r,getSnapshot:t};return a.queue=u,nM(tL.bind(null,n,u,e),[e]),n.flags|=2048,Iy(9,eL.bind(null,n,u,r,t),void 0,null),r},useId:function(){var e=Zo(),t=Gi.identifierPrefix;if(Sn){var r=Kl,n=Zl;r=(n&~(1<<32-wo(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=My++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=dq++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},gq={readContext:$a,useCallback:cL,useContext:$a,useEffect:oC,useImperativeHandle:lL,useInsertionEffect:sL,useLayoutEffect:aL,useMemo:uL,useReducer:c2,useRef:iL,useState:function(){return c2(Ny)},useDebugValue:lC,useDeferredValue:function(e){var t=Ua();return dL(t,Pi.memoizedState,e)},useTransition:function(){var e=c2(Ny)[0],t=Ua().memoizedState;return[e,t]},useMutableSource:QO,useSyncExternalStore:XO,useId:hL,unstable_isNewReconciler:!1},yq={readContext:$a,useCallback:cL,useContext:$a,useEffect:oC,useImperativeHandle:lL,useInsertionEffect:sL,useLayoutEffect:aL,useMemo:uL,useReducer:u2,useRef:iL,useState:function(){return u2(Ny)},useDebugValue:lC,useDeferredValue:function(e){var t=Ua();return Pi===null?t.memoizedState=e:dL(t,Pi.memoizedState,e)},useTransition:function(){var e=u2(Ny)[0],t=Ua().memoizedState;return[e,t]},useMutableSource:QO,useSyncExternalStore:XO,useId:hL,unstable_isNewReconciler:!1};function co(e,t){if(e&&e.defaultProps){t=Nn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function WS(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Nn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Db={isMounted:function(e){return(e=e._reactInternals)?fh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=As(),a=fu(e),u=Yl(n,a);u.payload=t,r!=null&&(u.callback=r),t=hu(e,u,a),t!==null&&(So(t,e,a,n),n_(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=As(),a=fu(e),u=Yl(n,a);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=hu(e,u,a),t!==null&&(So(t,e,a,n),n_(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=As(),n=fu(e),a=Yl(r,n);a.tag=2,t!=null&&(a.callback=t),t=hu(e,a,n),t!==null&&(So(t,e,n,r),n_(t,e,n))}};function iM(e,t,r,n,a,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,h):t.prototype&&t.prototype.isPureReactComponent?!ky(r,n)||!ky(a,u):!0}function gL(e,t,r){var n=!1,a=bu,u=t.contextType;return typeof u=="object"&&u!==null?u=$a(u):(a=Zs(t)?th:ys.current,n=t.contextTypes,u=(n=n!=null)?_f(e,a):bu),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Db,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function sM(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Db.enqueueReplaceState(t,t.state,null)}function GS(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},eC(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=$a(u):(u=Zs(t)?th:ys.current,a.context=_f(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(WS(e,t,u,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Db.enqueueReplaceState(a,a.state,null),B_(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Tf(e,t){try{var r="",n=t;do r+=W$(n),n=n.return;while(n);var a=r}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function d2(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function HS(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var xq=typeof WeakMap=="function"?WeakMap:Map;function yL(e,t,r){r=Yl(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){W_||(W_=!0,nT=n),HS(e,t)},r}function xL(e,t,r){r=Yl(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){HS(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){HS(e,t),typeof n!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function aM(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new xq;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Nq.bind(null,e,t,r),t.then(e,e))}function oM(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lM(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Yl(-1,1),t.tag=2,hu(r,t,1))),r.lanes|=1),e)}var vq=sc.ReactCurrentOwner,qs=!1;function Ts(e,t,r,n){t.child=e===null?HO(t,null,r,n):wf(t,e.child,r,n)}function cM(e,t,r,n,a){r=r.render;var u=t.ref;return nf(t,a),n=sC(e,t,r,n,u,a),r=aC(),e!==null&&!qs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ec(e,t,a)):(Sn&&r&&Hk(t),t.flags|=1,Ts(e,t,n,a),t.child)}function uM(e,t,r,n,a){if(e===null){var u=r.type;return typeof u=="function"&&!gC(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,vL(e,t,u,n,a)):(e=c_(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&a)){var h=u.memoizedProps;if(r=r.compare,r=r!==null?r:ky,r(h,n)&&e.ref===t.ref)return ec(e,t,a)}return t.flags|=1,e=mu(u,n),e.ref=t.ref,e.return=t,t.child=e}function vL(e,t,r,n,a){if(e!==null){var u=e.memoizedProps;if(ky(u,n)&&e.ref===t.ref)if(qs=!1,t.pendingProps=n=u,(e.lanes&a)!==0)e.flags&131072&&(qs=!0);else return t.lanes=e.lanes,ec(e,t,a)}return ZS(e,t,r,n,a)}function _L(e,t,r){var n=t.pendingProps,a=n.children,u=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Gp,ca),ca|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dn(Gp,ca),ca|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=u!==null?u.baseLanes:r,dn(Gp,ca),ca|=n}else u!==null?(n=u.baseLanes|r,t.memoizedState=null):n=r,dn(Gp,ca),ca|=n;return Ts(e,t,a,r),t.child}function bL(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ZS(e,t,r,n,a){var u=Zs(r)?th:ys.current;return u=_f(t,u),nf(t,a),r=sC(e,t,r,n,u,a),n=aC(),e!==null&&!qs?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ec(e,t,a)):(Sn&&n&&Hk(t),t.flags|=1,Ts(e,t,r,a),t.child)}function dM(e,t,r,n,a){if(Zs(r)){var u=!0;D_(t)}else u=!1;if(nf(t,a),t.stateNode===null)a_(e,t),gL(t,r,n),GS(t,r,n,a),n=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var _=h.context,T=r.contextType;typeof T=="object"&&T!==null?T=$a(T):(T=Zs(r)?th:ys.current,T=_f(t,T));var P=r.getDerivedStateFromProps,E=typeof P=="function"||typeof h.getSnapshotBeforeUpdate=="function";E||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==n||_!==T)&&sM(t,h,n,T),Hc=!1;var M=t.memoizedState;h.state=M,B_(t,n,h,a),_=t.memoizedState,o!==n||M!==_||Hs.current||Hc?(typeof P=="function"&&(WS(t,r,P,n),_=t.memoizedState),(o=Hc||iM(t,r,o,n,M,_,T))?(E||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=_),h.props=n,h.state=_,h.context=T,n=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{h=t.stateNode,KO(e,t),o=t.memoizedProps,T=t.type===t.elementType?o:co(t.type,o),h.props=T,E=t.pendingProps,M=h.context,_=r.contextType,typeof _=="object"&&_!==null?_=$a(_):(_=Zs(r)?th:ys.current,_=_f(t,_));var I=r.getDerivedStateFromProps;(P=typeof I=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==E||M!==_)&&sM(t,h,n,_),Hc=!1,M=t.memoizedState,h.state=M,B_(t,n,h,a);var z=t.memoizedState;o!==E||M!==z||Hs.current||Hc?(typeof I=="function"&&(WS(t,r,I,n),z=t.memoizedState),(T=Hc||iM(t,r,T,n,M,z,_)||!1)?(P||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(n,z,_),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(n,z,_)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=z),h.props=n,h.state=z,h.context=_,n=T):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),n=!1)}return KS(e,t,r,n,u,a)}function KS(e,t,r,n,a,u){bL(e,t);var h=(t.flags&128)!==0;if(!n&&!h)return a&&YA(t,r,!1),ec(e,t,u);n=t.stateNode,vq.current=t;var o=h&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&h?(t.child=wf(t,e.child,null,u),t.child=wf(t,null,o,u)):Ts(e,t,o,u),t.memoizedState=n.state,a&&YA(t,r,!0),t.child}function wL(e){var t=e.stateNode;t.pendingContext?KA(e,t.pendingContext,t.pendingContext!==t.context):t.context&&KA(e,t.context,!1),tC(e,t.containerInfo)}function hM(e,t,r,n,a){return bf(),Kk(a),t.flags|=256,Ts(e,t,r,n),t.child}var YS={dehydrated:null,treeContext:null,retryLane:0};function QS(e){return{baseLanes:e,cachePool:null,transitions:null}}function SL(e,t,r){var n=t.pendingProps,a=jn.current,u=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),dn(jn,a&1),e===null)return US(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=n.children,e=n.fallback,u?(n=t.mode,u=t.child,h={mode:"hidden",children:h},!(n&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=Fb(h,n,0,null),e=Qd(e,n,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=QS(r),t.memoizedState=YS,e):cC(t,h));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return _q(e,t,h,n,o,a,r);if(u){u=n.fallback,h=t.mode,a=e.child,o=a.sibling;var _={mode:"hidden",children:n.children};return!(h&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=_,t.deletions=null):(n=mu(a,_),n.subtreeFlags=a.subtreeFlags&14680064),o!==null?u=mu(o,u):(u=Qd(u,h,r,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,n=u,u=t.child,h=e.child.memoizedState,h=h===null?QS(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~r,t.memoizedState=YS,n}return u=e.child,e=u.sibling,n=mu(u,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function cC(e,t){return t=Fb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function w0(e,t,r,n){return n!==null&&Kk(n),wf(t,e.child,null,r),e=cC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _q(e,t,r,n,a,u,h){if(r)return t.flags&256?(t.flags&=-257,n=d2(Error(mt(422))),w0(e,t,h,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=n.fallback,a=t.mode,n=Fb({mode:"visible",children:n.children},a,0,null),u=Qd(u,a,h,null),u.flags|=2,n.return=t,u.return=t,n.sibling=u,t.child=n,t.mode&1&&wf(t,e.child,null,h),t.child.memoizedState=QS(h),t.memoizedState=YS,u);if(!(t.mode&1))return w0(e,t,h,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var o=n.dgst;return n=o,u=Error(mt(419)),n=d2(u,n,void 0),w0(e,t,h,n)}if(o=(h&e.childLanes)!==0,qs||o){if(n=Gi,n!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|h)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,Jl(e,a),So(n,e,a,-1))}return mC(),n=d2(Error(mt(421))),w0(e,t,h,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Iq.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,pa=du(a.nextSibling),fa=t,Sn=!0,yo=null,e!==null&&(Ra[Da++]=Zl,Ra[Da++]=Kl,Ra[Da++]=rh,Zl=e.id,Kl=e.overflow,rh=t),t=cC(t,n.children),t.flags|=4096,t)}function pM(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),qS(e.return,t,r)}function h2(e,t,r,n,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=n,u.tail=r,u.tailMode=a)}function TL(e,t,r){var n=t.pendingProps,a=n.revealOrder,u=n.tail;if(Ts(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pM(e,r,t);else if(e.tag===19)pM(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(dn(jn,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&V_(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),h2(t,!1,a,r,u);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&V_(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}h2(t,!0,r,null,u);break;case"together":h2(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function a_(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ec(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ih|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(mt(153));if(t.child!==null){for(e=t.child,r=mu(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=mu(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function bq(e,t,r){switch(t.tag){case 3:wL(t),bf();break;case 5:YO(t);break;case 1:Zs(t.type)&&D_(t);break;case 4:tC(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;dn(F_,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(dn(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?SL(e,t,r):(dn(jn,jn.current&1),e=ec(e,t,r),e!==null?e.sibling:null);dn(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return TL(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),dn(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,_L(e,t,r)}return ec(e,t,r)}var kL,XS,CL,PL;kL=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};XS=function(){};CL=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,zd(sl.current);var u=null;switch(r){case"input":a=_S(e,a),n=_S(e,n),u=[];break;case"select":a=Nn({},a,{value:void 0}),n=Nn({},n,{value:void 0}),u=[];break;case"textarea":a=SS(e,a),n=SS(e,n),u=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=I_)}kS(r,n);var h;r=null;for(T in a)if(!n.hasOwnProperty(T)&&a.hasOwnProperty(T)&&a[T]!=null)if(T==="style"){var o=a[T];for(h in o)o.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(xy.hasOwnProperty(T)?u||(u=[]):(u=u||[]).push(T,null));for(T in n){var _=n[T];if(o=a!=null?a[T]:void 0,n.hasOwnProperty(T)&&_!==o&&(_!=null||o!=null))if(T==="style")if(o){for(h in o)!o.hasOwnProperty(h)||_&&_.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in _)_.hasOwnProperty(h)&&o[h]!==_[h]&&(r||(r={}),r[h]=_[h])}else r||(u||(u=[]),u.push(T,r)),r=_;else T==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,o=o?o.__html:void 0,_!=null&&o!==_&&(u=u||[]).push(T,_)):T==="children"?typeof _!="string"&&typeof _!="number"||(u=u||[]).push(T,""+_):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(xy.hasOwnProperty(T)?(_!=null&&T==="onScroll"&&yn("scroll",e),u||o===_||(u=[])):(u=u||[]).push(T,_))}r&&(u=u||[]).push("style",r);var T=u;(t.updateQueue=T)&&(t.flags|=4)}};PL=function(e,t,r,n){r!==n&&(t.flags|=4)};function Eg(e,t){if(!Sn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ps(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function wq(e,t,r){var n=t.pendingProps;switch(Zk(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ps(t),null;case 1:return Zs(t.type)&&R_(),ps(t),null;case 3:return n=t.stateNode,Sf(),xn(Hs),xn(ys),nC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(_0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yo!==null&&(aT(yo),yo=null))),XS(e,t),ps(t),null;case 5:rC(t);var a=zd(Ay.current);if(r=t.type,e!==null&&t.stateNode!=null)CL(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(mt(166));return ps(t),null}if(e=zd(sl.current),_0(t)){n=t.stateNode,r=t.type;var u=t.memoizedProps;switch(n[Jo]=t,n[Ey]=u,e=(t.mode&1)!==0,r){case"dialog":yn("cancel",n),yn("close",n);break;case"iframe":case"object":case"embed":yn("load",n);break;case"video":case"audio":for(a=0;a<$g.length;a++)yn($g[a],n);break;case"source":yn("error",n);break;case"img":case"image":case"link":yn("error",n),yn("load",n);break;case"details":yn("toggle",n);break;case"input":wA(n,u),yn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!u.multiple},yn("invalid",n);break;case"textarea":TA(n,u),yn("invalid",n)}kS(r,u),a=null;for(var h in u)if(u.hasOwnProperty(h)){var o=u[h];h==="children"?typeof o=="string"?n.textContent!==o&&(u.suppressHydrationWarning!==!0&&v0(n.textContent,o,e),a=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&v0(n.textContent,o,e),a=["children",""+o]):xy.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&yn("scroll",n)}switch(r){case"input":d0(n),SA(n,u,!0);break;case"textarea":d0(n),kA(n);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(n.onclick=I_)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=tO(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=h.createElement(r,{is:n.is}):(e=h.createElement(r),r==="select"&&(h=e,n.multiple?h.multiple=!0:n.size&&(h.size=n.size))):e=h.createElementNS(e,r),e[Jo]=t,e[Ey]=n,kL(e,t,!1,!1),t.stateNode=e;e:{switch(h=CS(r,n),r){case"dialog":yn("cancel",e),yn("close",e),a=n;break;case"iframe":case"object":case"embed":yn("load",e),a=n;break;case"video":case"audio":for(a=0;a<$g.length;a++)yn($g[a],e);a=n;break;case"source":yn("error",e),a=n;break;case"img":case"image":case"link":yn("error",e),yn("load",e),a=n;break;case"details":yn("toggle",e),a=n;break;case"input":wA(e,n),a=_S(e,n),yn("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Nn({},n,{value:void 0}),yn("invalid",e);break;case"textarea":TA(e,n),a=SS(e,n),yn("invalid",e);break;default:a=n}kS(r,a),o=a;for(u in o)if(o.hasOwnProperty(u)){var _=o[u];u==="style"?iO(e,_):u==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&rO(e,_)):u==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&vy(e,_):typeof _=="number"&&vy(e,""+_):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(xy.hasOwnProperty(u)?_!=null&&u==="onScroll"&&yn("scroll",e):_!=null&&Ik(e,u,_,h))}switch(r){case"input":d0(e),SA(e,n,!1);break;case"textarea":d0(e),kA(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_u(n.value));break;case"select":e.multiple=!!n.multiple,u=n.value,u!=null?Jp(e,!!n.multiple,u,!1):n.defaultValue!=null&&Jp(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=I_)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ps(t),null;case 6:if(e&&t.stateNode!=null)PL(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(mt(166));if(r=zd(Ay.current),zd(sl.current),_0(t)){if(n=t.stateNode,r=t.memoizedProps,n[Jo]=t,(u=n.nodeValue!==r)&&(e=fa,e!==null))switch(e.tag){case 3:v0(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&v0(n.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Jo]=t,t.stateNode=n}return ps(t),null;case 13:if(xn(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sn&&pa!==null&&t.mode&1&&!(t.flags&128))WO(),bf(),t.flags|=98560,u=!1;else if(u=_0(t),n!==null&&n.dehydrated!==null){if(e===null){if(!u)throw Error(mt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(mt(317));u[Jo]=t}else bf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ps(t),u=!1}else yo!==null&&(aT(yo),yo=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?Ei===0&&(Ei=3):mC())),t.updateQueue!==null&&(t.flags|=4),ps(t),null);case 4:return Sf(),XS(e,t),e===null&&Cy(t.stateNode.containerInfo),ps(t),null;case 10:return Xk(t.type._context),ps(t),null;case 17:return Zs(t.type)&&R_(),ps(t),null;case 19:if(xn(jn),u=t.memoizedState,u===null)return ps(t),null;if(n=(t.flags&128)!==0,h=u.rendering,h===null)if(n)Eg(u,!1);else{if(Ei!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=V_(e),h!==null){for(t.flags|=128,Eg(u,!1),n=h.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)u=r,e=n,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return dn(jn,jn.current&1|2),t.child}e=e.sibling}u.tail!==null&&Jn()>kf&&(t.flags|=128,n=!0,Eg(u,!1),t.lanes=4194304)}else{if(!n)if(e=V_(h),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Eg(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Sn)return ps(t),null}else 2*Jn()-u.renderingStartTime>kf&&r!==1073741824&&(t.flags|=128,n=!0,Eg(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(r=u.last,r!==null?r.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Jn(),t.sibling=null,r=jn.current,dn(jn,n?r&1|2:r&1),t):(ps(t),null);case 22:case 23:return fC(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ca&1073741824&&(ps(t),t.subtreeFlags&6&&(t.flags|=8192)):ps(t),null;case 24:return null;case 25:return null}throw Error(mt(156,t.tag))}function Sq(e,t){switch(Zk(t),t.tag){case 1:return Zs(t.type)&&R_(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sf(),xn(Hs),xn(ys),nC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rC(t),null;case 13:if(xn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(mt(340));bf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xn(jn),null;case 4:return Sf(),null;case 10:return Xk(t.type._context),null;case 22:case 23:return fC(),null;case 24:return null;default:return null}}var S0=!1,ms=!1,Tq=typeof WeakSet=="function"?WeakSet:Set,Rt=null;function Wp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Hn(e,t,n)}else r.current=null}function JS(e,t,r){try{r()}catch(n){Hn(e,t,n)}}var fM=!1;function kq(e,t){if(OS=A_,e=NO(),Gk(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var h=0,o=-1,_=-1,T=0,P=0,E=e,M=null;t:for(;;){for(var I;E!==r||a!==0&&E.nodeType!==3||(o=h+a),E!==u||n!==0&&E.nodeType!==3||(_=h+n),E.nodeType===3&&(h+=E.nodeValue.length),(I=E.firstChild)!==null;)M=E,E=I;for(;;){if(E===e)break t;if(M===r&&++T===a&&(o=h),M===u&&++P===n&&(_=h),(I=E.nextSibling)!==null)break;E=M,M=E.parentNode}E=I}r=o===-1||_===-1?null:{start:o,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(LS={focusedElem:e,selectionRange:r},A_=!1,Rt=t;Rt!==null;)if(t=Rt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Rt=e;else for(;Rt!==null;){t=Rt;try{var z=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(z!==null){var F=z.memoizedProps,D=z.memoizedState,q=t.stateNode,$=q.getSnapshotBeforeUpdate(t.elementType===t.type?F:co(t.type,F),D);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var W=t.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(mt(163))}}catch(te){Hn(t,t.return,te)}if(e=t.sibling,e!==null){e.return=t.return,Rt=e;break}Rt=t.return}return z=fM,fM=!1,z}function ey(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&JS(t,r,u)}a=a.next}while(a!==n)}}function Ob(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function eT(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function EL(e){var t=e.alternate;t!==null&&(e.alternate=null,EL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Jo],delete t[Ey],delete t[BS],delete t[oq],delete t[lq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jL(e){return e.tag===5||e.tag===3||e.tag===4}function mM(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=I_));else if(n!==4&&(e=e.child,e!==null))for(tT(e,t,r),e=e.sibling;e!==null;)tT(e,t,r),e=e.sibling}function rT(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(rT(e,t,r),e=e.sibling;e!==null;)rT(e,t,r),e=e.sibling}var es=null,mo=!1;function Lc(e,t,r){for(r=r.child;r!==null;)AL(e,t,r),r=r.sibling}function AL(e,t,r){if(il&&typeof il.onCommitFiberUnmount=="function")try{il.onCommitFiberUnmount(Eb,r)}catch{}switch(r.tag){case 5:ms||Wp(r,t);case 6:var n=es,a=mo;es=null,Lc(e,t,r),es=n,mo=a,es!==null&&(mo?(e=es,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):es.removeChild(r.stateNode));break;case 18:es!==null&&(mo?(e=es,r=r.stateNode,e.nodeType===8?s2(e.parentNode,r):e.nodeType===1&&s2(e,r),Sy(e)):s2(es,r.stateNode));break;case 4:n=es,a=mo,es=r.stateNode.containerInfo,mo=!0,Lc(e,t,r),es=n,mo=a;break;case 0:case 11:case 14:case 15:if(!ms&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var u=a,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&JS(r,t,h),a=a.next}while(a!==n)}Lc(e,t,r);break;case 1:if(!ms&&(Wp(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){Hn(r,t,o)}Lc(e,t,r);break;case 21:Lc(e,t,r);break;case 22:r.mode&1?(ms=(n=ms)||r.memoizedState!==null,Lc(e,t,r),ms=n):Lc(e,t,r);break;default:Lc(e,t,r)}}function gM(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Tq),t.forEach(function(n){var a=Rq.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function so(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var u=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:es=o.stateNode,mo=!1;break e;case 3:es=o.stateNode.containerInfo,mo=!0;break e;case 4:es=o.stateNode.containerInfo,mo=!0;break e}o=o.return}if(es===null)throw Error(mt(160));AL(u,h,a),es=null,mo=!1;var _=a.alternate;_!==null&&(_.return=null),a.return=null}catch(T){Hn(a,t,T)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ML(t,e),t=t.sibling}function ML(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(so(t,e),Ho(e),n&4){try{ey(3,e,e.return),Ob(3,e)}catch(F){Hn(e,e.return,F)}try{ey(5,e,e.return)}catch(F){Hn(e,e.return,F)}}break;case 1:so(t,e),Ho(e),n&512&&r!==null&&Wp(r,r.return);break;case 5:if(so(t,e),Ho(e),n&512&&r!==null&&Wp(r,r.return),e.flags&32){var a=e.stateNode;try{vy(a,"")}catch(F){Hn(e,e.return,F)}}if(n&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,h=r!==null?r.memoizedProps:u,o=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&JD(a,u),CS(o,h);var T=CS(o,u);for(h=0;h<_.length;h+=2){var P=_[h],E=_[h+1];P==="style"?iO(a,E):P==="dangerouslySetInnerHTML"?rO(a,E):P==="children"?vy(a,E):Ik(a,P,E,T)}switch(o){case"input":bS(a,u);break;case"textarea":eO(a,u);break;case"select":var M=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var I=u.value;I!=null?Jp(a,!!u.multiple,I,!1):M!==!!u.multiple&&(u.defaultValue!=null?Jp(a,!!u.multiple,u.defaultValue,!0):Jp(a,!!u.multiple,u.multiple?[]:"",!1))}a[Ey]=u}catch(F){Hn(e,e.return,F)}}break;case 6:if(so(t,e),Ho(e),n&4){if(e.stateNode===null)throw Error(mt(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(F){Hn(e,e.return,F)}}break;case 3:if(so(t,e),Ho(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Sy(t.containerInfo)}catch(F){Hn(e,e.return,F)}break;case 4:so(t,e),Ho(e);break;case 13:so(t,e),Ho(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(hC=Jn())),n&4&&gM(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(ms=(T=ms)||P,so(t,e),ms=T):so(t,e),Ho(e),n&8192){if(T=e.memoizedState!==null,(e.stateNode.isHidden=T)&&!P&&e.mode&1)for(Rt=e,P=e.child;P!==null;){for(E=Rt=P;Rt!==null;){switch(M=Rt,I=M.child,M.tag){case 0:case 11:case 14:case 15:ey(4,M,M.return);break;case 1:Wp(M,M.return);var z=M.stateNode;if(typeof z.componentWillUnmount=="function"){n=M,r=M.return;try{t=n,z.props=t.memoizedProps,z.state=t.memoizedState,z.componentWillUnmount()}catch(F){Hn(n,r,F)}}break;case 5:Wp(M,M.return);break;case 22:if(M.memoizedState!==null){xM(E);continue}}I!==null?(I.return=M,Rt=I):xM(E)}P=P.sibling}e:for(P=null,E=e;;){if(E.tag===5){if(P===null){P=E;try{a=E.stateNode,T?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=E.stateNode,_=E.memoizedProps.style,h=_!=null&&_.hasOwnProperty("display")?_.display:null,o.style.display=nO("display",h))}catch(F){Hn(e,e.return,F)}}}else if(E.tag===6){if(P===null)try{E.stateNode.nodeValue=T?"":E.memoizedProps}catch(F){Hn(e,e.return,F)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;P===E&&(P=null),E=E.return}P===E&&(P=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:so(t,e),Ho(e),n&4&&gM(e);break;case 21:break;default:so(t,e),Ho(e)}}function Ho(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(jL(r)){var n=r;break e}r=r.return}throw Error(mt(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(vy(a,""),n.flags&=-33);var u=mM(e);rT(e,u,a);break;case 3:case 4:var h=n.stateNode.containerInfo,o=mM(e);tT(e,o,h);break;default:throw Error(mt(161))}}catch(_){Hn(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Cq(e,t,r){Rt=e,NL(e)}function NL(e,t,r){for(var n=(e.mode&1)!==0;Rt!==null;){var a=Rt,u=a.child;if(a.tag===22&&n){var h=a.memoizedState!==null||S0;if(!h){var o=a.alternate,_=o!==null&&o.memoizedState!==null||ms;o=S0;var T=ms;if(S0=h,(ms=_)&&!T)for(Rt=a;Rt!==null;)h=Rt,_=h.child,h.tag===22&&h.memoizedState!==null?vM(a):_!==null?(_.return=h,Rt=_):vM(a);for(;u!==null;)Rt=u,NL(u),u=u.sibling;Rt=a,S0=o,ms=T}yM(e)}else a.subtreeFlags&8772&&u!==null?(u.return=a,Rt=u):yM(e)}}function yM(e){for(;Rt!==null;){var t=Rt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ms||Ob(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!ms)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:co(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&tM(t,u,n);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tM(t,h,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var T=t.alternate;if(T!==null){var P=T.memoizedState;if(P!==null){var E=P.dehydrated;E!==null&&Sy(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(mt(163))}ms||t.flags&512&&eT(t)}catch(M){Hn(t,t.return,M)}}if(t===e){Rt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Rt=r;break}Rt=t.return}}function xM(e){for(;Rt!==null;){var t=Rt;if(t===e){Rt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Rt=r;break}Rt=t.return}}function vM(e){for(;Rt!==null;){var t=Rt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ob(4,t)}catch(_){Hn(t,r,_)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(_){Hn(t,a,_)}}var u=t.return;try{eT(t)}catch(_){Hn(t,u,_)}break;case 5:var h=t.return;try{eT(t)}catch(_){Hn(t,h,_)}}}catch(_){Hn(t,t.return,_)}if(t===e){Rt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Rt=o;break}Rt=t.return}}var Pq=Math.ceil,q_=sc.ReactCurrentDispatcher,uC=sc.ReactCurrentOwner,Va=sc.ReactCurrentBatchConfig,jr=0,Gi=null,gi=null,ts=0,ca=0,Gp=Eu(0),Ei=0,Ry=null,ih=0,Lb=0,dC=0,ty=null,Us=null,hC=0,kf=1/0,ql=null,W_=!1,nT=null,pu=null,T0=!1,su=null,G_=0,ry=0,iT=null,o_=-1,l_=0;function As(){return jr&6?Jn():o_!==-1?o_:o_=Jn()}function fu(e){return e.mode&1?jr&2&&ts!==0?ts&-ts:uq.transition!==null?(l_===0&&(l_=gO()),l_):(e=Kr,e!==0||(e=window.event,e=e===void 0?16:SO(e.type)),e):1}function So(e,t,r,n){if(50<ry)throw ry=0,iT=null,Error(mt(185));ax(e,r,n),(!(jr&2)||e!==Gi)&&(e===Gi&&(!(jr&2)&&(Lb|=r),Ei===4&&Yc(e,ts)),Ks(e,n),r===1&&jr===0&&!(t.mode&1)&&(kf=Jn()+500,Ib&&ju()))}function Ks(e,t){var r=e.callbackNode;uU(e,t);var n=j_(e,e===Gi?ts:0);if(n===0)r!==null&&EA(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&EA(r),t===1)e.tag===0?cq(_M.bind(null,e)):$O(_M.bind(null,e)),sq(function(){!(jr&6)&&ju()}),r=null;else{switch(yO(n)){case 1:r=Fk;break;case 4:r=fO;break;case 16:r=E_;break;case 536870912:r=mO;break;default:r=E_}r=BL(r,IL.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function IL(e,t){if(o_=-1,l_=0,jr&6)throw Error(mt(327));var r=e.callbackNode;if(sf()&&e.callbackNode!==r)return null;var n=j_(e,e===Gi?ts:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=H_(e,n);else{t=n;var a=jr;jr|=2;var u=DL();(Gi!==e||ts!==t)&&(ql=null,kf=Jn()+500,Yd(e,t));do try{Aq();break}catch(o){RL(e,o)}while(!0);Qk(),q_.current=u,jr=a,gi!==null?t=0:(Gi=null,ts=0,t=Ei)}if(t!==0){if(t===2&&(a=MS(e),a!==0&&(n=a,t=sT(e,a))),t===1)throw r=Ry,Yd(e,0),Yc(e,n),Ks(e,Jn()),r;if(t===6)Yc(e,n);else{if(a=e.current.alternate,!(n&30)&&!Eq(a)&&(t=H_(e,n),t===2&&(u=MS(e),u!==0&&(n=u,t=sT(e,u))),t===1))throw r=Ry,Yd(e,0),Yc(e,n),Ks(e,Jn()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(mt(345));case 2:jd(e,Us,ql);break;case 3:if(Yc(e,n),(n&130023424)===n&&(t=hC+500-Jn(),10<t)){if(j_(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){As(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=zS(jd.bind(null,e,Us,ql),t);break}jd(e,Us,ql);break;case 4:if(Yc(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var h=31-wo(n);u=1<<h,h=t[h],h>a&&(a=h),n&=~u}if(n=a,n=Jn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pq(n/1960))-n,10<n){e.timeoutHandle=zS(jd.bind(null,e,Us,ql),n);break}jd(e,Us,ql);break;case 5:jd(e,Us,ql);break;default:throw Error(mt(329))}}}return Ks(e,Jn()),e.callbackNode===r?IL.bind(null,e):null}function sT(e,t){var r=ty;return e.current.memoizedState.isDehydrated&&(Yd(e,t).flags|=256),e=H_(e,t),e!==2&&(t=Us,Us=r,t!==null&&aT(t)),e}function aT(e){Us===null?Us=e:Us.push.apply(Us,e)}function Eq(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],u=a.getSnapshot;a=a.value;try{if(!To(u(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yc(e,t){for(t&=~dC,t&=~Lb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-wo(t),n=1<<r;e[r]=-1,t&=~n}}function _M(e){if(jr&6)throw Error(mt(327));sf();var t=j_(e,0);if(!(t&1))return Ks(e,Jn()),null;var r=H_(e,t);if(e.tag!==0&&r===2){var n=MS(e);n!==0&&(t=n,r=sT(e,n))}if(r===1)throw r=Ry,Yd(e,0),Yc(e,t),Ks(e,Jn()),r;if(r===6)throw Error(mt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jd(e,Us,ql),Ks(e,Jn()),null}function pC(e,t){var r=jr;jr|=1;try{return e(t)}finally{jr=r,jr===0&&(kf=Jn()+500,Ib&&ju())}}function sh(e){su!==null&&su.tag===0&&!(jr&6)&&sf();var t=jr;jr|=1;var r=Va.transition,n=Kr;try{if(Va.transition=null,Kr=1,e)return e()}finally{Kr=n,Va.transition=r,jr=t,!(jr&6)&&ju()}}function fC(){ca=Gp.current,xn(Gp)}function Yd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,iq(r)),gi!==null)for(r=gi.return;r!==null;){var n=r;switch(Zk(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&R_();break;case 3:Sf(),xn(Hs),xn(ys),nC();break;case 5:rC(n);break;case 4:Sf();break;case 13:xn(jn);break;case 19:xn(jn);break;case 10:Xk(n.type._context);break;case 22:case 23:fC()}r=r.return}if(Gi=e,gi=e=mu(e.current,null),ts=ca=t,Ei=0,Ry=null,dC=Lb=ih=0,Us=ty=null,Fd!==null){for(t=0;t<Fd.length;t++)if(r=Fd[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,u=r.pending;if(u!==null){var h=u.next;u.next=a,n.next=h}r.pending=n}Fd=null}return e}function RL(e,t){do{var r=gi;try{if(Qk(),i_.current=U_,$_){for(var n=Mn.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}$_=!1}if(nh=0,qi=Pi=Mn=null,Jg=!1,My=0,uC.current=null,r===null||r.return===null){Ei=1,Ry=t,gi=null;break}e:{var u=e,h=r.return,o=r,_=t;if(t=ts,o.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var T=_,P=o,E=P.tag;if(!(P.mode&1)&&(E===0||E===11||E===15)){var M=P.alternate;M?(P.updateQueue=M.updateQueue,P.memoizedState=M.memoizedState,P.lanes=M.lanes):(P.updateQueue=null,P.memoizedState=null)}var I=oM(h);if(I!==null){I.flags&=-257,lM(I,h,o,u,t),I.mode&1&&aM(u,T,t),t=I,_=T;var z=t.updateQueue;if(z===null){var F=new Set;F.add(_),t.updateQueue=F}else z.add(_);break e}else{if(!(t&1)){aM(u,T,t),mC();break e}_=Error(mt(426))}}else if(Sn&&o.mode&1){var D=oM(h);if(D!==null){!(D.flags&65536)&&(D.flags|=256),lM(D,h,o,u,t),Kk(Tf(_,o));break e}}u=_=Tf(_,o),Ei!==4&&(Ei=2),ty===null?ty=[u]:ty.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var q=yL(u,_,t);eM(u,q);break e;case 1:o=_;var $=u.type,W=u.stateNode;if(!(u.flags&128)&&(typeof $.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(pu===null||!pu.has(W)))){u.flags|=65536,t&=-t,u.lanes|=t;var te=xL(u,o,t);eM(u,te);break e}}u=u.return}while(u!==null)}LL(r)}catch(se){t=se,gi===r&&r!==null&&(gi=r=r.return);continue}break}while(!0)}function DL(){var e=q_.current;return q_.current=U_,e===null?U_:e}function mC(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Gi===null||!(ih&268435455)&&!(Lb&268435455)||Yc(Gi,ts)}function H_(e,t){var r=jr;jr|=2;var n=DL();(Gi!==e||ts!==t)&&(ql=null,Yd(e,t));do try{jq();break}catch(a){RL(e,a)}while(!0);if(Qk(),jr=r,q_.current=n,gi!==null)throw Error(mt(261));return Gi=null,ts=0,Ei}function jq(){for(;gi!==null;)OL(gi)}function Aq(){for(;gi!==null&&!tU();)OL(gi)}function OL(e){var t=zL(e.alternate,e,ca);e.memoizedProps=e.pendingProps,t===null?LL(e):gi=t,uC.current=null}function LL(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Sq(r,t),r!==null){r.flags&=32767,gi=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ei=6,gi=null;return}}else if(r=wq(r,t,ca),r!==null){gi=r;return}if(t=t.sibling,t!==null){gi=t;return}gi=t=e}while(t!==null);Ei===0&&(Ei=5)}function jd(e,t,r){var n=Kr,a=Va.transition;try{Va.transition=null,Kr=1,Mq(e,t,r,n)}finally{Va.transition=a,Kr=n}return null}function Mq(e,t,r,n){do sf();while(su!==null);if(jr&6)throw Error(mt(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(mt(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(dU(e,u),e===Gi&&(gi=Gi=null,ts=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||T0||(T0=!0,BL(E_,function(){return sf(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Va.transition,Va.transition=null;var h=Kr;Kr=1;var o=jr;jr|=4,uC.current=null,kq(e,r),ML(r,e),QU(LS),A_=!!OS,LS=OS=null,e.current=r,Cq(r),rU(),jr=o,Kr=h,Va.transition=u}else e.current=r;if(T0&&(T0=!1,su=e,G_=a),u=e.pendingLanes,u===0&&(pu=null),sU(r.stateNode),Ks(e,Jn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(W_)throw W_=!1,e=nT,nT=null,e;return G_&1&&e.tag!==0&&sf(),u=e.pendingLanes,u&1?e===iT?ry++:(ry=0,iT=e):ry=0,ju(),null}function sf(){if(su!==null){var e=yO(G_),t=Va.transition,r=Kr;try{if(Va.transition=null,Kr=16>e?16:e,su===null)var n=!1;else{if(e=su,su=null,G_=0,jr&6)throw Error(mt(331));var a=jr;for(jr|=4,Rt=e.current;Rt!==null;){var u=Rt,h=u.child;if(Rt.flags&16){var o=u.deletions;if(o!==null){for(var _=0;_<o.length;_++){var T=o[_];for(Rt=T;Rt!==null;){var P=Rt;switch(P.tag){case 0:case 11:case 15:ey(8,P,u)}var E=P.child;if(E!==null)E.return=P,Rt=E;else for(;Rt!==null;){P=Rt;var M=P.sibling,I=P.return;if(EL(P),P===T){Rt=null;break}if(M!==null){M.return=I,Rt=M;break}Rt=I}}}var z=u.alternate;if(z!==null){var F=z.child;if(F!==null){z.child=null;do{var D=F.sibling;F.sibling=null,F=D}while(F!==null)}}Rt=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,Rt=h;else e:for(;Rt!==null;){if(u=Rt,u.flags&2048)switch(u.tag){case 0:case 11:case 15:ey(9,u,u.return)}var q=u.sibling;if(q!==null){q.return=u.return,Rt=q;break e}Rt=u.return}}var $=e.current;for(Rt=$;Rt!==null;){h=Rt;var W=h.child;if(h.subtreeFlags&2064&&W!==null)W.return=h,Rt=W;else e:for(h=$;Rt!==null;){if(o=Rt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ob(9,o)}}catch(se){Hn(o,o.return,se)}if(o===h){Rt=null;break e}var te=o.sibling;if(te!==null){te.return=o.return,Rt=te;break e}Rt=o.return}}if(jr=a,ju(),il&&typeof il.onPostCommitFiberRoot=="function")try{il.onPostCommitFiberRoot(Eb,e)}catch{}n=!0}return n}finally{Kr=r,Va.transition=t}}return!1}function bM(e,t,r){t=Tf(r,t),t=yL(e,t,1),e=hu(e,t,1),t=As(),e!==null&&(ax(e,1,t),Ks(e,t))}function Hn(e,t,r){if(e.tag===3)bM(e,e,r);else for(;t!==null;){if(t.tag===3){bM(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(pu===null||!pu.has(n))){e=Tf(r,e),e=xL(t,e,1),t=hu(t,e,1),e=As(),t!==null&&(ax(t,1,e),Ks(t,e));break}}t=t.return}}function Nq(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=As(),e.pingedLanes|=e.suspendedLanes&r,Gi===e&&(ts&r)===r&&(Ei===4||Ei===3&&(ts&130023424)===ts&&500>Jn()-hC?Yd(e,0):dC|=r),Ks(e,t)}function FL(e,t){t===0&&(e.mode&1?(t=f0,f0<<=1,!(f0&130023424)&&(f0=4194304)):t=1);var r=As();e=Jl(e,t),e!==null&&(ax(e,t,r),Ks(e,r))}function Iq(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),FL(e,r)}function Rq(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(mt(314))}n!==null&&n.delete(t),FL(e,r)}var zL;zL=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hs.current)qs=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return qs=!1,bq(e,t,r);qs=!!(e.flags&131072)}else qs=!1,Sn&&t.flags&1048576&&UO(t,L_,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;a_(e,t),e=t.pendingProps;var a=_f(t,ys.current);nf(t,r),a=sC(null,t,n,e,a,r);var u=aC();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Zs(n)?(u=!0,D_(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eC(t),a.updater=Db,t.stateNode=a,a._reactInternals=t,GS(t,n,e,r),t=KS(null,t,n,!0,u,r)):(t.tag=0,Sn&&u&&Hk(t),Ts(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(a_(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Oq(n),e=co(n,e),a){case 0:t=ZS(null,t,n,e,r);break e;case 1:t=dM(null,t,n,e,r);break e;case 11:t=cM(null,t,n,e,r);break e;case 14:t=uM(null,t,n,co(n.type,e),r);break e}throw Error(mt(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:co(n,a),ZS(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:co(n,a),dM(e,t,n,a,r);case 3:e:{if(wL(t),e===null)throw Error(mt(387));n=t.pendingProps,u=t.memoizedState,a=u.element,KO(e,t),B_(t,n,null,r);var h=t.memoizedState;if(n=h.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=Tf(Error(mt(423)),t),t=hM(e,t,n,r,a);break e}else if(n!==a){a=Tf(Error(mt(424)),t),t=hM(e,t,n,r,a);break e}else for(pa=du(t.stateNode.containerInfo.firstChild),fa=t,Sn=!0,yo=null,r=HO(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bf(),n===a){t=ec(e,t,r);break e}Ts(e,t,n,r)}t=t.child}return t;case 5:return YO(t),e===null&&US(t),n=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,h=a.children,FS(n,a)?h=null:u!==null&&FS(n,u)&&(t.flags|=32),bL(e,t),Ts(e,t,h,r),t.child;case 6:return e===null&&US(t),null;case 13:return SL(e,t,r);case 4:return tC(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=wf(t,null,n,r):Ts(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:co(n,a),cM(e,t,n,a,r);case 7:return Ts(e,t,t.pendingProps,r),t.child;case 8:return Ts(e,t,t.pendingProps.children,r),t.child;case 12:return Ts(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,u=t.memoizedProps,h=a.value,dn(F_,n._currentValue),n._currentValue=h,u!==null)if(To(u.value,h)){if(u.children===a.children&&!Hs.current){t=ec(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){h=u.child;for(var _=o.firstContext;_!==null;){if(_.context===n){if(u.tag===1){_=Yl(-1,r&-r),_.tag=2;var T=u.updateQueue;if(T!==null){T=T.shared;var P=T.pending;P===null?_.next=_:(_.next=P.next,P.next=_),T.pending=_}}u.lanes|=r,_=u.alternate,_!==null&&(_.lanes|=r),qS(u.return,r,t),o.lanes|=r;break}_=_.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(mt(341));h.lanes|=r,o=h.alternate,o!==null&&(o.lanes|=r),qS(h,r,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Ts(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,nf(t,r),a=$a(a),n=n(a),t.flags|=1,Ts(e,t,n,r),t.child;case 14:return n=t.type,a=co(n,t.pendingProps),a=co(n.type,a),uM(e,t,n,a,r);case 15:return vL(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:co(n,a),a_(e,t),t.tag=1,Zs(n)?(e=!0,D_(t)):e=!1,nf(t,r),gL(t,n,a),GS(t,n,a,r),KS(null,t,n,!0,e,r);case 19:return TL(e,t,r);case 22:return _L(e,t,r)}throw Error(mt(156,t.tag))};function BL(e,t){return pO(e,t)}function Dq(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(e,t,r,n){return new Dq(e,t,r,n)}function gC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Oq(e){if(typeof e=="function")return gC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dk)return 11;if(e===Ok)return 14}return 2}function mu(e,t){var r=e.alternate;return r===null?(r=za(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function c_(e,t,r,n,a,u){var h=2;if(n=e,typeof e=="function")gC(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Op:return Qd(r.children,a,u,t);case Rk:h=8,a|=8;break;case gS:return e=za(12,r,t,a|2),e.elementType=gS,e.lanes=u,e;case yS:return e=za(13,r,t,a),e.elementType=yS,e.lanes=u,e;case xS:return e=za(19,r,t,a),e.elementType=xS,e.lanes=u,e;case YD:return Fb(r,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ZD:h=10;break e;case KD:h=9;break e;case Dk:h=11;break e;case Ok:h=14;break e;case Gc:h=16,n=null;break e}throw Error(mt(130,e==null?e:typeof e,""))}return t=za(h,r,t,a),t.elementType=e,t.type=n,t.lanes=u,t}function Qd(e,t,r,n){return e=za(7,e,n,t),e.lanes=r,e}function Fb(e,t,r,n){return e=za(22,e,n,t),e.elementType=YD,e.lanes=r,e.stateNode={isHidden:!1},e}function p2(e,t,r){return e=za(6,e,null,t),e.lanes=r,e}function f2(e,t,r){return t=za(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Lq(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z1(0),this.expirationTimes=Z1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z1(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function yC(e,t,r,n,a,u,h,o,_){return e=new Lq(e,t,r,o,_),t===1?(t=1,u===!0&&(t|=8)):t=0,u=za(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},eC(u),e}function Fq(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dp,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function VL(e){if(!e)return bu;e=e._reactInternals;e:{if(fh(e)!==e||e.tag!==1)throw Error(mt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Zs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(mt(171))}if(e.tag===1){var r=e.type;if(Zs(r))return VO(e,r,t)}return t}function $L(e,t,r,n,a,u,h,o,_){return e=yC(r,n,!0,e,a,u,h,o,_),e.context=VL(null),r=e.current,n=As(),a=fu(r),u=Yl(n,a),u.callback=t??null,hu(r,u,a),e.current.lanes=a,ax(e,a,n),Ks(e,n),e}function zb(e,t,r,n){var a=t.current,u=As(),h=fu(a);return r=VL(r),t.context===null?t.context=r:t.pendingContext=r,t=Yl(u,h),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=hu(a,t,h),e!==null&&(So(e,a,h,u),n_(e,a,h)),h}function Z_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wM(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xC(e,t){wM(e,t),(e=e.alternate)&&wM(e,t)}function zq(){return null}var UL=typeof reportError=="function"?reportError:function(e){console.error(e)};function vC(e){this._internalRoot=e}Bb.prototype.render=vC.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(mt(409));zb(e,t,null,null)};Bb.prototype.unmount=vC.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sh(function(){zb(null,e,null,null)}),t[Xl]=null}};function Bb(e){this._internalRoot=e}Bb.prototype.unstable_scheduleHydration=function(e){if(e){var t=_O();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Kc.length&&t!==0&&t<Kc[r].priority;r++);Kc.splice(r,0,e),r===0&&wO(e)}};function _C(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function SM(){}function Bq(e,t,r,n,a){if(a){if(typeof n=="function"){var u=n;n=function(){var T=Z_(h);u.call(T)}}var h=$L(t,n,e,0,null,!1,!1,"",SM);return e._reactRootContainer=h,e[Xl]=h.current,Cy(e.nodeType===8?e.parentNode:e),sh(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var o=n;n=function(){var T=Z_(_);o.call(T)}}var _=yC(e,0,!1,null,null,!1,!1,"",SM);return e._reactRootContainer=_,e[Xl]=_.current,Cy(e.nodeType===8?e.parentNode:e),sh(function(){zb(t,_,r,n)}),_}function $b(e,t,r,n,a){var u=r._reactRootContainer;if(u){var h=u;if(typeof a=="function"){var o=a;a=function(){var _=Z_(h);o.call(_)}}zb(t,h,e,a)}else h=Bq(r,t,e,a,n);return Z_(h)}xO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vg(t.pendingLanes);r!==0&&(zk(t,r|1),Ks(t,Jn()),!(jr&6)&&(kf=Jn()+500,ju()))}break;case 13:sh(function(){var n=Jl(e,1);if(n!==null){var a=As();So(n,e,1,a)}}),xC(e,1)}};Bk=function(e){if(e.tag===13){var t=Jl(e,134217728);if(t!==null){var r=As();So(t,e,134217728,r)}xC(e,134217728)}};vO=function(e){if(e.tag===13){var t=fu(e),r=Jl(e,t);if(r!==null){var n=As();So(r,e,t,n)}xC(e,t)}};_O=function(){return Kr};bO=function(e,t){var r=Kr;try{return Kr=e,t()}finally{Kr=r}};ES=function(e,t,r){switch(t){case"input":if(bS(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Nb(n);if(!a)throw Error(mt(90));XD(n),bS(n,a)}}}break;case"textarea":eO(e,r);break;case"select":t=r.value,t!=null&&Jp(e,!!r.multiple,t,!1)}};oO=pC;lO=sh;var Vq={usingClientEntryPoint:!1,Events:[lx,Bp,Nb,sO,aO,pC]},jg={findFiberByHostInstance:Ld,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$q={bundleType:jg.bundleType,version:jg.version,rendererPackageName:jg.rendererPackageName,rendererConfig:jg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=dO(e),e===null?null:e.stateNode},findFiberByHostInstance:jg.findFiberByHostInstance||zq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var k0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!k0.isDisabled&&k0.supportsFiber)try{Eb=k0.inject($q),il=k0}catch{}}_a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vq;_a.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_C(t))throw Error(mt(200));return Fq(e,t,null,r)};_a.createRoot=function(e,t){if(!_C(e))throw Error(mt(299));var r=!1,n="",a=UL;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=yC(e,1,!1,null,null,r,!1,n,a),e[Xl]=t.current,Cy(e.nodeType===8?e.parentNode:e),new vC(t)};_a.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(mt(188)):(e=Object.keys(e).join(","),Error(mt(268,e)));return e=dO(t),e=e===null?null:e.stateNode,e};_a.flushSync=function(e){return sh(e)};_a.hydrate=function(e,t,r){if(!Vb(t))throw Error(mt(200));return $b(null,e,t,!0,r)};_a.hydrateRoot=function(e,t,r){if(!_C(e))throw Error(mt(405));var n=r!=null&&r.hydratedSources||null,a=!1,u="",h=UL;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=$L(t,null,e,1,r??null,a,!1,u,h),e[Xl]=t.current,Cy(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Bb(t)};_a.render=function(e,t,r){if(!Vb(t))throw Error(mt(200));return $b(null,e,t,!1,r)};_a.unmountComponentAtNode=function(e){if(!Vb(e))throw Error(mt(40));return e._reactRootContainer?(sh(function(){$b(null,null,e,!1,function(){e._reactRootContainer=null,e[Xl]=null})}),!0):!1};_a.unstable_batchedUpdates=pC;_a.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vb(r))throw Error(mt(200));if(e==null||e._reactInternals===void 0)throw Error(mt(38));return $b(e,t,r,!1,n)};_a.version="18.3.1-next-f1338f8080-20240426";function qL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qL)}catch(e){console.error(e)}}qL(),qD.exports=_a;var ux=qD.exports;const WL=kk(ux);var GL,TM=ux;GL=TM.createRoot,TM.hydrateRoot;const Uq=1,qq=1e6;let m2=0;function Wq(){return m2=(m2+1)%Number.MAX_SAFE_INTEGER,m2.toString()}const g2=new Map,kM=e=>{if(g2.has(e))return;const t=setTimeout(()=>{g2.delete(e),ny({type:"REMOVE_TOAST",toastId:e})},qq);g2.set(e,t)},Gq=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Uq)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?kM(r):e.toasts.forEach(n=>{kM(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},u_=[];let d_={toasts:[]};function ny(e){d_=Gq(d_,e),u_.forEach(t=>{t(d_)})}function HL({...e}){const t=Wq(),r=a=>ny({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>ny({type:"DISMISS_TOAST",toastId:t});return ny({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function dx(){const[e,t]=U.useState(d_);return U.useEffect(()=>(u_.push(t),()=>{const r=u_.indexOf(t);r>-1&&u_.splice(r,1)}),[e]),{...e,toast:HL,dismiss:r=>ny({type:"DISMISS_TOAST",toastId:r})}}function gr(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function CM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function ZL(...e){return t=>{let r=!1;const n=e.map(a=>{const u=CM(a,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let a=0;a<n.length;a++){const u=n[a];typeof u=="function"?u():CM(e[a],null)}}}}function In(...e){return U.useCallback(ZL(...e),e)}function Hq(e,t){const r=U.createContext(t),n=u=>{const{children:h,...o}=u,_=U.useMemo(()=>o,Object.values(o));return f.jsx(r.Provider,{value:_,children:h})};n.displayName=e+"Provider";function a(u){const h=U.useContext(r);if(h)return h;if(t!==void 0)return t;throw new Error(`\`${u}\` must be used within \`${e}\``)}return[n,a]}function fl(e,t=[]){let r=[];function n(u,h){const o=U.createContext(h),_=r.length;r=[...r,h];const T=E=>{var q;const{scope:M,children:I,...z}=E,F=((q=M==null?void 0:M[e])==null?void 0:q[_])||o,D=U.useMemo(()=>z,Object.values(z));return f.jsx(F.Provider,{value:D,children:I})};T.displayName=u+"Provider";function P(E,M){var F;const I=((F=M==null?void 0:M[e])==null?void 0:F[_])||o,z=U.useContext(I);if(z)return z;if(h!==void 0)return h;throw new Error(`\`${E}\` must be used within \`${u}\``)}return[T,P]}const a=()=>{const u=r.map(h=>U.createContext(h));return function(o){const _=(o==null?void 0:o[e])||u;return U.useMemo(()=>({[`__scope${e}`]:{...o,[e]:_}}),[o,_])}};return a.scopeName=e,[n,Zq(a,...t)]}function Zq(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(u){const h=n.reduce((o,{useScope:_,scopeName:T})=>{const E=_(u)[`__scope${T}`];return{...o,...E}},{});return U.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function Cf(e){const t=Yq(e),r=U.forwardRef((n,a)=>{const{children:u,...h}=n,o=U.Children.toArray(u),_=o.find(Xq);if(_){const T=_.props.children,P=o.map(E=>E===_?U.Children.count(T)>1?U.Children.only(null):U.isValidElement(T)?T.props.children:null:E);return f.jsx(t,{...h,ref:a,children:U.isValidElement(T)?U.cloneElement(T,void 0,P):null})}return f.jsx(t,{...h,ref:a,children:u})});return r.displayName=`${e}.Slot`,r}var Kq=Cf("Slot");function Yq(e){const t=U.forwardRef((r,n)=>{const{children:a,...u}=r;if(U.isValidElement(a)){const h=eW(a),o=Jq(u,a.props);return a.type!==U.Fragment&&(o.ref=n?ZL(n,h):h),U.cloneElement(a,o)}return U.Children.count(a)>1?U.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var KL=Symbol("radix.slottable");function Qq(e){const t=({children:r})=>f.jsx(f.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=KL,t}function Xq(e){return U.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===KL}function Jq(e,t){const r={...t};for(const n in t){const a=e[n],u=t[n];/^on[A-Z]/.test(n)?a&&u?r[n]=(...o)=>{const _=u(...o);return a(...o),_}:a&&(r[n]=a):n==="style"?r[n]={...a,...u}:n==="className"&&(r[n]=[a,u].filter(Boolean).join(" "))}return{...e,...r}}function eW(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function YL(e){const t=e+"CollectionProvider",[r,n]=fl(t),[a,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=F=>{const{scope:D,children:q}=F,$=ht.useRef(null),W=ht.useRef(new Map).current;return f.jsx(a,{scope:D,itemMap:W,collectionRef:$,children:q})};h.displayName=t;const o=e+"CollectionSlot",_=Cf(o),T=ht.forwardRef((F,D)=>{const{scope:q,children:$}=F,W=u(o,q),te=In(D,W.collectionRef);return f.jsx(_,{ref:te,children:$})});T.displayName=o;const P=e+"CollectionItemSlot",E="data-radix-collection-item",M=Cf(P),I=ht.forwardRef((F,D)=>{const{scope:q,children:$,...W}=F,te=ht.useRef(null),se=In(D,te),he=u(P,q);return ht.useEffect(()=>(he.itemMap.set(te,{ref:te,...W}),()=>void he.itemMap.delete(te))),f.jsx(M,{[E]:"",ref:se,children:$})});I.displayName=P;function z(F){const D=u(e+"CollectionConsumer",F);return ht.useCallback(()=>{const $=D.collectionRef.current;if(!$)return[];const W=Array.from($.querySelectorAll(`[${E}]`));return Array.from(D.itemMap.values()).sort((he,pe)=>W.indexOf(he.ref.current)-W.indexOf(pe.ref.current))},[D.collectionRef,D.itemMap])}return[{Provider:h,Slot:T,ItemSlot:I},z,n]}var tW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dr=tW.reduce((e,t)=>{const r=Cf(`Primitive.${t}`),n=U.forwardRef((a,u)=>{const{asChild:h,...o}=a,_=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(_,{...o,ref:u})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function QL(e,t){e&&ux.flushSync(()=>e.dispatchEvent(t))}function ko(e){const t=U.useRef(e);return U.useEffect(()=>{t.current=e}),U.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function rW(e,t=globalThis==null?void 0:globalThis.document){const r=ko(e);U.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var nW="DismissableLayer",oT="dismissableLayer.update",iW="dismissableLayer.pointerDownOutside",sW="dismissableLayer.focusOutside",PM,XL=U.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hx=U.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:u,onInteractOutside:h,onDismiss:o,..._}=e,T=U.useContext(XL),[P,E]=U.useState(null),M=(P==null?void 0:P.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,I]=U.useState({}),z=In(t,pe=>E(pe)),F=Array.from(T.layers),[D]=[...T.layersWithOutsidePointerEventsDisabled].slice(-1),q=F.indexOf(D),$=P?F.indexOf(P):-1,W=T.layersWithOutsidePointerEventsDisabled.size>0,te=$>=q,se=oW(pe=>{const xe=pe.target,Re=[...T.branches].some(Me=>Me.contains(xe));!te||Re||(a==null||a(pe),h==null||h(pe),pe.defaultPrevented||o==null||o())},M),he=lW(pe=>{const xe=pe.target;[...T.branches].some(Me=>Me.contains(xe))||(u==null||u(pe),h==null||h(pe),pe.defaultPrevented||o==null||o())},M);return rW(pe=>{$===T.layers.size-1&&(n==null||n(pe),!pe.defaultPrevented&&o&&(pe.preventDefault(),o()))},M),U.useEffect(()=>{if(P)return r&&(T.layersWithOutsidePointerEventsDisabled.size===0&&(PM=M.body.style.pointerEvents,M.body.style.pointerEvents="none"),T.layersWithOutsidePointerEventsDisabled.add(P)),T.layers.add(P),EM(),()=>{r&&T.layersWithOutsidePointerEventsDisabled.size===1&&(M.body.style.pointerEvents=PM)}},[P,M,r,T]),U.useEffect(()=>()=>{P&&(T.layers.delete(P),T.layersWithOutsidePointerEventsDisabled.delete(P),EM())},[P,T]),U.useEffect(()=>{const pe=()=>I({});return document.addEventListener(oT,pe),()=>document.removeEventListener(oT,pe)},[]),f.jsx(Dr.div,{..._,ref:z,style:{pointerEvents:W?te?"auto":"none":void 0,...e.style},onFocusCapture:gr(e.onFocusCapture,he.onFocusCapture),onBlurCapture:gr(e.onBlurCapture,he.onBlurCapture),onPointerDownCapture:gr(e.onPointerDownCapture,se.onPointerDownCapture)})});hx.displayName=nW;var aW="DismissableLayerBranch",JL=U.forwardRef((e,t)=>{const r=U.useContext(XL),n=U.useRef(null),a=In(t,n);return U.useEffect(()=>{const u=n.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),f.jsx(Dr.div,{...e,ref:a})});JL.displayName=aW;function oW(e,t=globalThis==null?void 0:globalThis.document){const r=ko(e),n=U.useRef(!1),a=U.useRef(()=>{});return U.useEffect(()=>{const u=o=>{if(o.target&&!n.current){let _=function(){e3(iW,r,T,{discrete:!0})};const T={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=_,t.addEventListener("click",a.current,{once:!0})):_()}else t.removeEventListener("click",a.current);n.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",u),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function lW(e,t=globalThis==null?void 0:globalThis.document){const r=ko(e),n=U.useRef(!1);return U.useEffect(()=>{const a=u=>{u.target&&!n.current&&e3(sW,r,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function EM(){const e=new CustomEvent(oT);document.dispatchEvent(e)}function e3(e,t,r,{discrete:n}){const a=r.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?QL(a,u):a.dispatchEvent(u)}var cW=hx,uW=JL,tc=globalThis!=null&&globalThis.document?U.useLayoutEffect:()=>{},dW="Portal",Ub=U.forwardRef((e,t)=>{var o;const{container:r,...n}=e,[a,u]=U.useState(!1);tc(()=>u(!0),[]);const h=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return h?WL.createPortal(f.jsx(Dr.div,{...n,ref:t}),h):null});Ub.displayName=dW;function hW(e,t){return U.useReducer((r,n)=>t[r][n]??r,e)}var ml=e=>{const{present:t,children:r}=e,n=pW(t),a=typeof r=="function"?r({present:n.isPresent}):U.Children.only(r),u=In(n.ref,fW(a));return typeof r=="function"||n.isPresent?U.cloneElement(a,{ref:u}):null};ml.displayName="Presence";function pW(e){const[t,r]=U.useState(),n=U.useRef(null),a=U.useRef(e),u=U.useRef("none"),h=e?"mounted":"unmounted",[o,_]=hW(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return U.useEffect(()=>{const T=C0(n.current);u.current=o==="mounted"?T:"none"},[o]),tc(()=>{const T=n.current,P=a.current;if(P!==e){const M=u.current,I=C0(T);e?_("MOUNT"):I==="none"||(T==null?void 0:T.display)==="none"?_("UNMOUNT"):_(P&&M!==I?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,_]),tc(()=>{if(t){let T;const P=t.ownerDocument.defaultView??window,E=I=>{const F=C0(n.current).includes(I.animationName);if(I.target===t&&F&&(_("ANIMATION_END"),!a.current)){const D=t.style.animationFillMode;t.style.animationFillMode="forwards",T=P.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=D)})}},M=I=>{I.target===t&&(u.current=C0(n.current))};return t.addEventListener("animationstart",M),t.addEventListener("animationcancel",E),t.addEventListener("animationend",E),()=>{P.clearTimeout(T),t.removeEventListener("animationstart",M),t.removeEventListener("animationcancel",E),t.removeEventListener("animationend",E)}}else _("ANIMATION_END")},[t,_]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:U.useCallback(T=>{n.current=T?getComputedStyle(T):null,r(T)},[])}}function C0(e){return(e==null?void 0:e.animationName)||"none"}function fW(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var mW=Ak[" useInsertionEffect ".trim().toString()]||tc;function qf({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,u,h]=gW({defaultProp:t,onChange:r}),o=e!==void 0,_=o?e:a;{const P=U.useRef(e!==void 0);U.useEffect(()=>{const E=P.current;E!==o&&console.warn(`${n} is changing from ${E?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),P.current=o},[o,n])}const T=U.useCallback(P=>{var E;if(o){const M=yW(P)?P(e):P;M!==e&&((E=h.current)==null||E.call(h,M))}else u(P)},[o,e,u,h]);return[_,T]}function gW({defaultProp:e,onChange:t}){const[r,n]=U.useState(e),a=U.useRef(r),u=U.useRef(t);return mW(()=>{u.current=t},[t]),U.useEffect(()=>{var h;a.current!==r&&((h=u.current)==null||h.call(u,r),a.current=r)},[r,a]),[r,n,u]}function yW(e){return typeof e=="function"}var xW=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),vW="VisuallyHidden",qb=U.forwardRef((e,t)=>f.jsx(Dr.span,{...e,ref:t,style:{...xW,...e.style}}));qb.displayName=vW;var _W=qb,bC="ToastProvider",[wC,bW,wW]=YL("Toast"),[t3,Cfe]=fl("Toast",[wW]),[SW,Wb]=t3(bC),r3=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:u=50,children:h}=e,[o,_]=U.useState(null),[T,P]=U.useState(0),E=U.useRef(!1),M=U.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${bC}\`. Expected non-empty \`string\`.`),f.jsx(wC.Provider,{scope:t,children:f.jsx(SW,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:u,toastCount:T,viewport:o,onViewportChange:_,onToastAdd:U.useCallback(()=>P(I=>I+1),[]),onToastRemove:U.useCallback(()=>P(I=>I-1),[]),isFocusedToastEscapeKeyDownRef:E,isClosePausedRef:M,children:h})})};r3.displayName=bC;var n3="ToastViewport",TW=["F8"],lT="toast.viewportPause",cT="toast.viewportResume",i3=U.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=TW,label:a="Notifications ({hotkey})",...u}=e,h=Wb(n3,r),o=bW(r),_=U.useRef(null),T=U.useRef(null),P=U.useRef(null),E=U.useRef(null),M=In(t,E,h.onViewportChange),I=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),z=h.toastCount>0;U.useEffect(()=>{const D=q=>{var W;n.length!==0&&n.every(te=>q[te]||q.code===te)&&((W=E.current)==null||W.focus())};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[n]),U.useEffect(()=>{const D=_.current,q=E.current;if(z&&D&&q){const $=()=>{if(!h.isClosePausedRef.current){const he=new CustomEvent(lT);q.dispatchEvent(he),h.isClosePausedRef.current=!0}},W=()=>{if(h.isClosePausedRef.current){const he=new CustomEvent(cT);q.dispatchEvent(he),h.isClosePausedRef.current=!1}},te=he=>{!D.contains(he.relatedTarget)&&W()},se=()=>{D.contains(document.activeElement)||W()};return D.addEventListener("focusin",$),D.addEventListener("focusout",te),D.addEventListener("pointermove",$),D.addEventListener("pointerleave",se),window.addEventListener("blur",$),window.addEventListener("focus",W),()=>{D.removeEventListener("focusin",$),D.removeEventListener("focusout",te),D.removeEventListener("pointermove",$),D.removeEventListener("pointerleave",se),window.removeEventListener("blur",$),window.removeEventListener("focus",W)}}},[z,h.isClosePausedRef]);const F=U.useCallback(({tabbingDirection:D})=>{const $=o().map(W=>{const te=W.ref.current,se=[te,...LW(te)];return D==="forwards"?se:se.reverse()});return(D==="forwards"?$.reverse():$).flat()},[o]);return U.useEffect(()=>{const D=E.current;if(D){const q=$=>{var se,he,pe;const W=$.altKey||$.ctrlKey||$.metaKey;if($.key==="Tab"&&!W){const xe=document.activeElement,Re=$.shiftKey;if($.target===D&&Re){(se=T.current)==null||se.focus();return}const Oe=F({tabbingDirection:Re?"backwards":"forwards"}),Ye=Oe.findIndex(Ge=>Ge===xe);y2(Oe.slice(Ye+1))?$.preventDefault():Re?(he=T.current)==null||he.focus():(pe=P.current)==null||pe.focus()}};return D.addEventListener("keydown",q),()=>D.removeEventListener("keydown",q)}},[o,F]),f.jsxs(uW,{ref:_,role:"region","aria-label":a.replace("{hotkey}",I),tabIndex:-1,style:{pointerEvents:z?void 0:"none"},children:[z&&f.jsx(uT,{ref:T,onFocusFromOutsideViewport:()=>{const D=F({tabbingDirection:"forwards"});y2(D)}}),f.jsx(wC.Slot,{scope:r,children:f.jsx(Dr.ol,{tabIndex:-1,...u,ref:M})}),z&&f.jsx(uT,{ref:P,onFocusFromOutsideViewport:()=>{const D=F({tabbingDirection:"backwards"});y2(D)}})]})});i3.displayName=n3;var s3="ToastFocusProxy",uT=U.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,u=Wb(s3,r);return f.jsx(qb,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:h=>{var T;const o=h.relatedTarget;!((T=u.viewport)!=null&&T.contains(o))&&n()}})});uT.displayName=s3;var px="Toast",kW="toast.swipeStart",CW="toast.swipeMove",PW="toast.swipeCancel",EW="toast.swipeEnd",a3=U.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:u,...h}=e,[o,_]=qf({prop:n,defaultProp:a??!0,onChange:u,caller:px});return f.jsx(ml,{present:r||o,children:f.jsx(MW,{open:o,...h,ref:t,onClose:()=>_(!1),onPause:ko(e.onPause),onResume:ko(e.onResume),onSwipeStart:gr(e.onSwipeStart,T=>{T.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:gr(e.onSwipeMove,T=>{const{x:P,y:E}=T.detail.delta;T.currentTarget.setAttribute("data-swipe","move"),T.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${P}px`),T.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${E}px`)}),onSwipeCancel:gr(e.onSwipeCancel,T=>{T.currentTarget.setAttribute("data-swipe","cancel"),T.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),T.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),T.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),T.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:gr(e.onSwipeEnd,T=>{const{x:P,y:E}=T.detail.delta;T.currentTarget.setAttribute("data-swipe","end"),T.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),T.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),T.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${P}px`),T.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${E}px`),_(!1)})})})});a3.displayName=px;var[jW,AW]=t3(px,{onClose(){}}),MW=U.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:u,onClose:h,onEscapeKeyDown:o,onPause:_,onResume:T,onSwipeStart:P,onSwipeMove:E,onSwipeCancel:M,onSwipeEnd:I,...z}=e,F=Wb(px,r),[D,q]=U.useState(null),$=In(t,Ge=>q(Ge)),W=U.useRef(null),te=U.useRef(null),se=a||F.duration,he=U.useRef(0),pe=U.useRef(se),xe=U.useRef(0),{onToastAdd:Re,onToastRemove:Me}=F,pt=ko(()=>{var rt;(D==null?void 0:D.contains(document.activeElement))&&((rt=F.viewport)==null||rt.focus()),h()}),Oe=U.useCallback(Ge=>{!Ge||Ge===1/0||(window.clearTimeout(xe.current),he.current=new Date().getTime(),xe.current=window.setTimeout(pt,Ge))},[pt]);U.useEffect(()=>{const Ge=F.viewport;if(Ge){const rt=()=>{Oe(pe.current),T==null||T()},nt=()=>{const Ve=new Date().getTime()-he.current;pe.current=pe.current-Ve,window.clearTimeout(xe.current),_==null||_()};return Ge.addEventListener(lT,nt),Ge.addEventListener(cT,rt),()=>{Ge.removeEventListener(lT,nt),Ge.removeEventListener(cT,rt)}}},[F.viewport,se,_,T,Oe]),U.useEffect(()=>{u&&!F.isClosePausedRef.current&&Oe(se)},[u,se,F.isClosePausedRef,Oe]),U.useEffect(()=>(Re(),()=>Me()),[Re,Me]);const Ye=U.useMemo(()=>D?p3(D):null,[D]);return F.viewport?f.jsxs(f.Fragment,{children:[Ye&&f.jsx(NW,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:Ye}),f.jsx(jW,{scope:r,onClose:pt,children:ux.createPortal(f.jsx(wC.ItemSlot,{scope:r,children:f.jsx(cW,{asChild:!0,onEscapeKeyDown:gr(o,()=>{F.isFocusedToastEscapeKeyDownRef.current||pt(),F.isFocusedToastEscapeKeyDownRef.current=!1}),children:f.jsx(Dr.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":F.swipeDirection,...z,ref:$,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:gr(e.onKeyDown,Ge=>{Ge.key==="Escape"&&(o==null||o(Ge.nativeEvent),Ge.nativeEvent.defaultPrevented||(F.isFocusedToastEscapeKeyDownRef.current=!0,pt()))}),onPointerDown:gr(e.onPointerDown,Ge=>{Ge.button===0&&(W.current={x:Ge.clientX,y:Ge.clientY})}),onPointerMove:gr(e.onPointerMove,Ge=>{if(!W.current)return;const rt=Ge.clientX-W.current.x,nt=Ge.clientY-W.current.y,Ve=!!te.current,_e=["left","right"].includes(F.swipeDirection),Le=["left","up"].includes(F.swipeDirection)?Math.min:Math.max,ft=_e?Le(0,rt):0,yt=_e?0:Le(0,nt),wt=Ge.pointerType==="touch"?10:2,Lt={x:ft,y:yt},Wt={originalEvent:Ge,delta:Lt};Ve?(te.current=Lt,P0(CW,E,Wt,{discrete:!1})):jM(Lt,F.swipeDirection,wt)?(te.current=Lt,P0(kW,P,Wt,{discrete:!1}),Ge.target.setPointerCapture(Ge.pointerId)):(Math.abs(rt)>wt||Math.abs(nt)>wt)&&(W.current=null)}),onPointerUp:gr(e.onPointerUp,Ge=>{const rt=te.current,nt=Ge.target;if(nt.hasPointerCapture(Ge.pointerId)&&nt.releasePointerCapture(Ge.pointerId),te.current=null,W.current=null,rt){const Ve=Ge.currentTarget,_e={originalEvent:Ge,delta:rt};jM(rt,F.swipeDirection,F.swipeThreshold)?P0(EW,I,_e,{discrete:!0}):P0(PW,M,_e,{discrete:!0}),Ve.addEventListener("click",Le=>Le.preventDefault(),{once:!0})}})})})}),F.viewport)})]}):null}),NW=e=>{const{__scopeToast:t,children:r,...n}=e,a=Wb(px,t),[u,h]=U.useState(!1),[o,_]=U.useState(!1);return DW(()=>h(!0)),U.useEffect(()=>{const T=window.setTimeout(()=>_(!0),1e3);return()=>window.clearTimeout(T)},[]),o?null:f.jsx(Ub,{asChild:!0,children:f.jsx(qb,{...n,children:u&&f.jsxs(f.Fragment,{children:[a.label," ",r]})})})},IW="ToastTitle",o3=U.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return f.jsx(Dr.div,{...n,ref:t})});o3.displayName=IW;var RW="ToastDescription",l3=U.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return f.jsx(Dr.div,{...n,ref:t})});l3.displayName=RW;var c3="ToastAction",u3=U.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?f.jsx(h3,{altText:r,asChild:!0,children:f.jsx(SC,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${c3}\`. Expected non-empty \`string\`.`),null)});u3.displayName=c3;var d3="ToastClose",SC=U.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=AW(d3,r);return f.jsx(h3,{asChild:!0,children:f.jsx(Dr.button,{type:"button",...n,ref:t,onClick:gr(e.onClick,a.onClose)})})});SC.displayName=d3;var h3=U.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return f.jsx(Dr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function p3(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),OW(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",u=n.dataset.radixToastAnnounceExclude==="";if(!a)if(u){const h=n.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...p3(n))}}),t}function P0(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?QL(a,u):a.dispatchEvent(u)}var jM=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),u=n>a;return t==="left"||t==="right"?u&&n>r:!u&&a>r};function DW(e=()=>{}){const t=ko(e);tc(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function OW(e){return e.nodeType===e.ELEMENT_NODE}function LW(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function y2(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var FW=r3,f3=i3,m3=a3,g3=o3,y3=l3,x3=u3,v3=SC;function _3(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_3(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function b3(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_3(e))&&(n&&(n+=" "),n+=t);return n}const AM=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,MM=b3,Gb=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return MM(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:u}=t,h=Object.keys(a).map(T=>{const P=r==null?void 0:r[T],E=u==null?void 0:u[T];if(P===null)return null;const M=AM(P)||AM(E);return a[T][M]}),o=r&&Object.entries(r).reduce((T,P)=>{let[E,M]=P;return M===void 0||(T[E]=M),T},{}),_=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((T,P)=>{let{class:E,className:M,...I}=P;return Object.entries(I).every(z=>{let[F,D]=z;return Array.isArray(D)?D.includes({...u,...o}[F]):{...u,...o}[F]===D})?[...T,E,M]:T},[]);return MM(e,h,_,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w3=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=U.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:u,iconNode:h,...o},_)=>U.createElement("svg",{ref:_,...BW,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:w3("lucide",a),...o},[...h.map(([T,P])=>U.createElement(T,P)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=(e,t)=>{const r=U.forwardRef(({className:n,...a},u)=>U.createElement(VW,{ref:u,iconNode:t,className:w3(`lucide-${zW(e)}`,n),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=Zt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=Zt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=Zt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Zt("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=Zt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=Zt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=Zt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Zt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=Zt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pf=Zt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Zt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=Zt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=Zt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=Zt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=Zt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=Zt("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=Zt("Dna",[["path",{d:"m10 16 1.5 1.5",key:"11lckj"}],["path",{d:"m14 8-1.5-1.5",key:"1ohn8i"}],["path",{d:"M15 2c-1.798 1.998-2.518 3.995-2.807 5.993",key:"80uv8i"}],["path",{d:"m16.5 10.5 1 1",key:"696xn5"}],["path",{d:"m17 6-2.891-2.891",key:"xu6p2f"}],["path",{d:"M2 15c6.667-6 13.333 0 20-6",key:"1pyr53"}],["path",{d:"m20 9 .891.891",key:"3xwk7g"}],["path",{d:"M3.109 14.109 4 15",key:"q76aoh"}],["path",{d:"m6.5 12.5 1 1",key:"cs35ky"}],["path",{d:"m7 18 2.891 2.891",key:"1sisit"}],["path",{d:"M9 22c1.798-1.998 2.518-3.995 2.807-5.993",key:"q3hbxp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=Zt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=Zt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=Zt("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Zt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=Zt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=Zt("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=Zt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=Zt("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=Zt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=Zt("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Zt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=Zt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=Zt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=Zt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=Zt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=Zt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=Zt("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=Zt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=Zt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=Zt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=Zt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=Zt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=Zt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=Zt("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=Zt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=Zt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=Zt("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=Zt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=Zt("Sprout",[["path",{d:"M7 20h10",key:"e6iznv"}],["path",{d:"M10 20c5.5-2.5.8-6.4 3-10",key:"161w41"}],["path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z",key:"9gtqwd"}],["path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z",key:"bkxnd2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=Zt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=Zt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=Zt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=Zt("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Zt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Zt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Zt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PC="-",l9=e=>{const t=u9(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:h=>{const o=h.split(PC);return o[0]===""&&o.length!==1&&o.shift(),D3(o,t)||c9(h)},getConflictingClassGroupIds:(h,o)=>{const _=r[h]||[];return o&&n[h]?[..._,...n[h]]:_}}},D3=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?D3(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const u=e.join(PC);return(h=t.validators.find(({validator:o})=>o(u)))==null?void 0:h.classGroupId},OM=/^\[(.+)\]$/,c9=e=>{if(OM.test(e)){const t=OM.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},u9=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return h9(Object.entries(e.classGroups),r).forEach(([u,h])=>{mT(h,n,u,t)}),n},mT=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const u=a===""?t:LM(t,a);u.classGroupId=r;return}if(typeof a=="function"){if(d9(a)){mT(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([u,h])=>{mT(h,LM(t,u),r,n)})})},LM=(e,t)=>{let r=e;return t.split(PC).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},d9=e=>e.isThemeGetter,h9=(e,t)=>t?e.map(([r,n])=>{const a=n.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([h,o])=>[t+h,o])):u);return[r,a]}):e,p9=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(u,h)=>{r.set(u,h),t++,t>e&&(t=0,n=r,r=new Map)};return{get(u){let h=r.get(u);if(h!==void 0)return h;if((h=n.get(u))!==void 0)return a(u,h),h},set(u,h){r.has(u)?r.set(u,h):a(u,h)}}},O3="!",f9=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],u=t.length,h=o=>{const _=[];let T=0,P=0,E;for(let D=0;D<o.length;D++){let q=o[D];if(T===0){if(q===a&&(n||o.slice(D,D+u)===t)){_.push(o.slice(P,D)),P=D+u;continue}if(q==="/"){E=D;continue}}q==="["?T++:q==="]"&&T--}const M=_.length===0?o:o.substring(P),I=M.startsWith(O3),z=I?M.substring(1):M,F=E&&E>P?E-P:void 0;return{modifiers:_,hasImportantModifier:I,baseClassName:z,maybePostfixModifierPosition:F}};return r?o=>r({className:o,parseClassName:h}):h},m9=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},g9=e=>({cache:p9(e.cacheSize),parseClassName:f9(e),...l9(e)}),y9=/\s+/,x9=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,u=[],h=e.trim().split(y9);let o="";for(let _=h.length-1;_>=0;_-=1){const T=h[_],{modifiers:P,hasImportantModifier:E,baseClassName:M,maybePostfixModifierPosition:I}=r(T);let z=!!I,F=n(z?M.substring(0,I):M);if(!F){if(!z){o=T+(o.length>0?" "+o:o);continue}if(F=n(M),!F){o=T+(o.length>0?" "+o:o);continue}z=!1}const D=m9(P).join(":"),q=E?D+O3:D,$=q+F;if(u.includes($))continue;u.push($);const W=a(F,z);for(let te=0;te<W.length;++te){const se=W[te];u.push(q+se)}o=T+(o.length>0?" "+o:o)}return o};function v9(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=L3(t))&&(n&&(n+=" "),n+=r);return n}const L3=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=L3(e[n]))&&(r&&(r+=" "),r+=t);return r};function _9(e,...t){let r,n,a,u=h;function h(_){const T=t.reduce((P,E)=>E(P),e());return r=g9(T),n=r.cache.get,a=r.cache.set,u=o,o(_)}function o(_){const T=n(_);if(T)return T;const P=x9(_,r);return a(_,P),P}return function(){return u(v9.apply(null,arguments))}}const gn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},F3=/^\[(?:([a-z-]+):)?(.+)\]$/i,b9=/^\d+\/\d+$/,w9=new Set(["px","full","screen"]),S9=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,T9=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,k9=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C9=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,P9=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bl=e=>af(e)||w9.has(e)||b9.test(e),Fc=e=>Wf(e,"length",D9),af=e=>!!e&&!Number.isNaN(Number(e)),x2=e=>Wf(e,"number",af),Ag=e=>!!e&&Number.isInteger(Number(e)),E9=e=>e.endsWith("%")&&af(e.slice(0,-1)),mr=e=>F3.test(e),zc=e=>S9.test(e),j9=new Set(["length","size","percentage"]),A9=e=>Wf(e,j9,z3),M9=e=>Wf(e,"position",z3),N9=new Set(["image","url"]),I9=e=>Wf(e,N9,L9),R9=e=>Wf(e,"",O9),Mg=()=>!0,Wf=(e,t,r)=>{const n=F3.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},D9=e=>T9.test(e)&&!k9.test(e),z3=()=>!1,O9=e=>C9.test(e),L9=e=>P9.test(e),F9=()=>{const e=gn("colors"),t=gn("spacing"),r=gn("blur"),n=gn("brightness"),a=gn("borderColor"),u=gn("borderRadius"),h=gn("borderSpacing"),o=gn("borderWidth"),_=gn("contrast"),T=gn("grayscale"),P=gn("hueRotate"),E=gn("invert"),M=gn("gap"),I=gn("gradientColorStops"),z=gn("gradientColorStopPositions"),F=gn("inset"),D=gn("margin"),q=gn("opacity"),$=gn("padding"),W=gn("saturate"),te=gn("scale"),se=gn("sepia"),he=gn("skew"),pe=gn("space"),xe=gn("translate"),Re=()=>["auto","contain","none"],Me=()=>["auto","hidden","clip","visible","scroll"],pt=()=>["auto",mr,t],Oe=()=>[mr,t],Ye=()=>["",Bl,Fc],Ge=()=>["auto",af,mr],rt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],nt=()=>["solid","dashed","dotted","double","none"],Ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>["start","end","center","between","around","evenly","stretch"],Le=()=>["","0",mr],ft=()=>["auto","avoid","all","avoid-page","page","left","right","column"],yt=()=>[af,mr];return{cacheSize:500,separator:":",theme:{colors:[Mg],spacing:[Bl,Fc],blur:["none","",zc,mr],brightness:yt(),borderColor:[e],borderRadius:["none","","full",zc,mr],borderSpacing:Oe(),borderWidth:Ye(),contrast:yt(),grayscale:Le(),hueRotate:yt(),invert:Le(),gap:Oe(),gradientColorStops:[e],gradientColorStopPositions:[E9,Fc],inset:pt(),margin:pt(),opacity:yt(),padding:Oe(),saturate:yt(),scale:yt(),sepia:Le(),skew:yt(),space:Oe(),translate:Oe()},classGroups:{aspect:[{aspect:["auto","square","video",mr]}],container:["container"],columns:[{columns:[zc]}],"break-after":[{"break-after":ft()}],"break-before":[{"break-before":ft()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...rt(),mr]}],overflow:[{overflow:Me()}],"overflow-x":[{"overflow-x":Me()}],"overflow-y":[{"overflow-y":Me()}],overscroll:[{overscroll:Re()}],"overscroll-x":[{"overscroll-x":Re()}],"overscroll-y":[{"overscroll-y":Re()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[F]}],"inset-x":[{"inset-x":[F]}],"inset-y":[{"inset-y":[F]}],start:[{start:[F]}],end:[{end:[F]}],top:[{top:[F]}],right:[{right:[F]}],bottom:[{bottom:[F]}],left:[{left:[F]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ag,mr]}],basis:[{basis:pt()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mr]}],grow:[{grow:Le()}],shrink:[{shrink:Le()}],order:[{order:["first","last","none",Ag,mr]}],"grid-cols":[{"grid-cols":[Mg]}],"col-start-end":[{col:["auto",{span:["full",Ag,mr]},mr]}],"col-start":[{"col-start":Ge()}],"col-end":[{"col-end":Ge()}],"grid-rows":[{"grid-rows":[Mg]}],"row-start-end":[{row:["auto",{span:[Ag,mr]},mr]}],"row-start":[{"row-start":Ge()}],"row-end":[{"row-end":Ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mr]}],gap:[{gap:[M]}],"gap-x":[{"gap-x":[M]}],"gap-y":[{"gap-y":[M]}],"justify-content":[{justify:["normal",..._e()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",..._e(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[..._e(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[$]}],px:[{px:[$]}],py:[{py:[$]}],ps:[{ps:[$]}],pe:[{pe:[$]}],pt:[{pt:[$]}],pr:[{pr:[$]}],pb:[{pb:[$]}],pl:[{pl:[$]}],m:[{m:[D]}],mx:[{mx:[D]}],my:[{my:[D]}],ms:[{ms:[D]}],me:[{me:[D]}],mt:[{mt:[D]}],mr:[{mr:[D]}],mb:[{mb:[D]}],ml:[{ml:[D]}],"space-x":[{"space-x":[pe]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[pe]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mr,t]}],"min-w":[{"min-w":[mr,t,"min","max","fit"]}],"max-w":[{"max-w":[mr,t,"none","full","min","max","fit","prose",{screen:[zc]},zc]}],h:[{h:[mr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",zc,Fc]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",x2]}],"font-family":[{font:[Mg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mr]}],"line-clamp":[{"line-clamp":["none",af,x2]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Bl,mr]}],"list-image":[{"list-image":["none",mr]}],"list-style-type":[{list:["none","disc","decimal",mr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[q]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[q]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...nt(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Bl,Fc]}],"underline-offset":[{"underline-offset":["auto",Bl,mr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Oe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[q]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...rt(),M9]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",A9]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},I9]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[z]}],"gradient-via-pos":[{via:[z]}],"gradient-to-pos":[{to:[z]}],"gradient-from":[{from:[I]}],"gradient-via":[{via:[I]}],"gradient-to":[{to:[I]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[q]}],"border-style":[{border:[...nt(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[q]}],"divide-style":[{divide:nt()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...nt()]}],"outline-offset":[{"outline-offset":[Bl,mr]}],"outline-w":[{outline:[Bl,Fc]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ye()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[q]}],"ring-offset-w":[{"ring-offset":[Bl,Fc]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",zc,R9]}],"shadow-color":[{shadow:[Mg]}],opacity:[{opacity:[q]}],"mix-blend":[{"mix-blend":[...Ve(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Ve()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[_]}],"drop-shadow":[{"drop-shadow":["","none",zc,mr]}],grayscale:[{grayscale:[T]}],"hue-rotate":[{"hue-rotate":[P]}],invert:[{invert:[E]}],saturate:[{saturate:[W]}],sepia:[{sepia:[se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[_]}],"backdrop-grayscale":[{"backdrop-grayscale":[T]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[P]}],"backdrop-invert":[{"backdrop-invert":[E]}],"backdrop-opacity":[{"backdrop-opacity":[q]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mr]}],duration:[{duration:yt()}],ease:[{ease:["linear","in","out","in-out",mr]}],delay:[{delay:yt()}],animate:[{animate:["none","spin","ping","pulse","bounce",mr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[te]}],"scale-x":[{"scale-x":[te]}],"scale-y":[{"scale-y":[te]}],rotate:[{rotate:[Ag,mr]}],"translate-x":[{"translate-x":[xe]}],"translate-y":[{"translate-y":[xe]}],"skew-x":[{"skew-x":[he]}],"skew-y":[{"skew-y":[he]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Oe()}],"scroll-mx":[{"scroll-mx":Oe()}],"scroll-my":[{"scroll-my":Oe()}],"scroll-ms":[{"scroll-ms":Oe()}],"scroll-me":[{"scroll-me":Oe()}],"scroll-mt":[{"scroll-mt":Oe()}],"scroll-mr":[{"scroll-mr":Oe()}],"scroll-mb":[{"scroll-mb":Oe()}],"scroll-ml":[{"scroll-ml":Oe()}],"scroll-p":[{"scroll-p":Oe()}],"scroll-px":[{"scroll-px":Oe()}],"scroll-py":[{"scroll-py":Oe()}],"scroll-ps":[{"scroll-ps":Oe()}],"scroll-pe":[{"scroll-pe":Oe()}],"scroll-pt":[{"scroll-pt":Oe()}],"scroll-pr":[{"scroll-pr":Oe()}],"scroll-pb":[{"scroll-pb":Oe()}],"scroll-pl":[{"scroll-pl":Oe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Bl,Fc,x2]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},z9=_9(F9);function St(...e){return z9(b3(e))}const B9=FW,B3=U.forwardRef(({className:e,...t},r)=>f.jsx(f3,{ref:r,className:St("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));B3.displayName=f3.displayName;const V9=Gb("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),V3=U.forwardRef(({className:e,variant:t,...r},n)=>f.jsx(m3,{ref:n,className:St(V9({variant:t}),e),...r}));V3.displayName=m3.displayName;const $9=U.forwardRef(({className:e,...t},r)=>f.jsx(x3,{ref:r,className:St("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",e),...t}));$9.displayName=x3.displayName;const $3=U.forwardRef(({className:e,...t},r)=>f.jsx(v3,{ref:r,className:St("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:f.jsx(CC,{className:"h-4 w-4"})}));$3.displayName=v3.displayName;const U3=U.forwardRef(({className:e,...t},r)=>f.jsx(g3,{ref:r,className:St("text-sm font-semibold",e),...t}));U3.displayName=g3.displayName;const q3=U.forwardRef(({className:e,...t},r)=>f.jsx(y3,{ref:r,className:St("text-sm opacity-90",e),...t}));q3.displayName=y3.displayName;function U9(){const{toasts:e}=dx();return f.jsxs(B9,{children:[e.map(function({id:t,title:r,description:n,action:a,...u}){return f.jsxs(V3,{...u,children:[f.jsxs("div",{className:"grid gap-1",children:[r&&f.jsx(U3,{children:r}),n&&f.jsx(q3,{children:n})]}),a,f.jsx($3,{})]},t)}),f.jsx(B3,{})]})}var Y_=["light","dark"],EC="(prefers-color-scheme: dark)",q9=typeof window>"u",jC=U.createContext(void 0),W9={setTheme:e=>{},themes:[]},W3=()=>{var e;return(e=U.useContext(jC))!=null?e:W9},G9=e=>U.useContext(jC)?e.children:U.createElement(Z9,{...e}),H9=["light","dark"],Z9=({forcedTheme:e,disableTransitionOnChange:t=!1,enableSystem:r=!0,enableColorScheme:n=!0,storageKey:a="theme",themes:u=H9,defaultTheme:h=r?"system":"light",attribute:o="data-theme",value:_,children:T,nonce:P})=>{let[E,M]=U.useState(()=>FM(a,h)),[I,z]=U.useState(()=>FM(a)),F=_?Object.values(_):u,D=U.useCallback(te=>{let se=te;if(!se)return;te==="system"&&r&&(se=zM());let he=_?_[se]:se,pe=t?Y9():null,xe=document.documentElement;if(o==="class"?(xe.classList.remove(...F),he&&xe.classList.add(he)):he?xe.setAttribute(o,he):xe.removeAttribute(o),n){let Re=Y_.includes(h)?h:null,Me=Y_.includes(se)?se:Re;xe.style.colorScheme=Me}pe==null||pe()},[]),q=U.useCallback(te=>{let se=typeof te=="function"?te(te):te;M(se);try{localStorage.setItem(a,se)}catch{}},[e]),$=U.useCallback(te=>{let se=zM(te);z(se),E==="system"&&r&&!e&&D("system")},[E,e]);U.useEffect(()=>{let te=window.matchMedia(EC);return te.addListener($),$(te),()=>te.removeListener($)},[$]),U.useEffect(()=>{let te=se=>{if(se.key!==a)return;let he=se.newValue||h;q(he)};return window.addEventListener("storage",te),()=>window.removeEventListener("storage",te)},[q]),U.useEffect(()=>{D(e??E)},[e,E]);let W=U.useMemo(()=>({theme:E,setTheme:q,forcedTheme:e,resolvedTheme:E==="system"?I:E,themes:r?[...u,"system"]:u,systemTheme:r?I:void 0}),[E,q,e,I,r,u]);return U.createElement(jC.Provider,{value:W},U.createElement(K9,{forcedTheme:e,disableTransitionOnChange:t,enableSystem:r,enableColorScheme:n,storageKey:a,themes:u,defaultTheme:h,attribute:o,value:_,children:T,attrs:F,nonce:P}),T)},K9=U.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:u,value:h,attrs:o,nonce:_})=>{let T=u==="system",P=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(z=>`'${z}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,E=a?Y_.includes(u)&&u?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${u}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",M=(z,F=!1,D=!0)=>{let q=h?h[z]:z,$=F?z+"|| ''":`'${q}'`,W="";return a&&D&&!F&&Y_.includes(z)&&(W+=`d.style.colorScheme = '${z}';`),r==="class"?F||q?W+=`c.add(${$})`:W+="null":q&&(W+=`d[s](n,${$})`),W},I=e?`!function(){${P}${M(e)}}()`:n?`!function(){try{${P}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${T})){var t='${EC}',m=window.matchMedia(t);if(m.media!==t||m.matches){${M("dark")}}else{${M("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${M(h?"x[e]":"e",!0)}}${T?"":"else{"+M(u,!1,!1)+"}"}${E}}catch(e){}}()`:`!function(){try{${P}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${M(h?"x[e]":"e",!0)}}else{${M(u,!1,!1)};}${E}}catch(t){}}();`;return U.createElement("script",{nonce:_,dangerouslySetInnerHTML:{__html:I}})}),FM=(e,t)=>{if(q9)return;let r;try{r=localStorage.getItem(e)||void 0}catch{}return r||t},Y9=()=>{let e=document.createElement("style");return e.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},zM=e=>(e||(e=window.matchMedia(EC)),e.matches?"dark":"light"),Q9=e=>{switch(e){case"success":return e7;case"info":return r7;case"warning":return t7;case"error":return n7;default:return null}},X9=Array(12).fill(0),J9=({visible:e,className:t})=>ht.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},ht.createElement("div",{className:"sonner-spinner"},X9.map((r,n)=>ht.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),e7=ht.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ht.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),t7=ht.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ht.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),r7=ht.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ht.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),n7=ht.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ht.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),i7=ht.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ht.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ht.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),s7=()=>{let[e,t]=ht.useState(document.hidden);return ht.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},gT=1,a7=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:gT++,u=this.toasts.find(o=>o.id===a),h=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),u?this.toasts=this.toasts.map(o=>o.id===a?(this.publish({...o,...e,id:a,title:r}),{...o,...e,id:a,dismissible:h,title:r}):o):this.addToast({title:r,...n,dismissible:h,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,u,h=n.then(async _=>{if(u=["resolve",_],ht.isValidElement(_))a=!1,this.create({id:r,type:"default",message:_});else if(l7(_)&&!_.ok){a=!1;let T=typeof t.error=="function"?await t.error(`HTTP error! status: ${_.status}`):t.error,P=typeof t.description=="function"?await t.description(`HTTP error! status: ${_.status}`):t.description;this.create({id:r,type:"error",message:T,description:P})}else if(t.success!==void 0){a=!1;let T=typeof t.success=="function"?await t.success(_):t.success,P=typeof t.description=="function"?await t.description(_):t.description;this.create({id:r,type:"success",message:T,description:P})}}).catch(async _=>{if(u=["reject",_],t.error!==void 0){a=!1;let T=typeof t.error=="function"?await t.error(_):t.error,P=typeof t.description=="function"?await t.description(_):t.description;this.create({id:r,type:"error",message:T,description:P})}}).finally(()=>{var _;a&&(this.dismiss(r),r=void 0),(_=t.finally)==null||_.call(t)}),o=()=>new Promise((_,T)=>h.then(()=>u[0]==="reject"?T(u[1]):_(u[1])).catch(T));return typeof r!="string"&&typeof r!="number"?{unwrap:o}:Object.assign(r,{unwrap:o})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||gT++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},$s=new a7,o7=(e,t)=>{let r=(t==null?void 0:t.id)||gT++;return $s.addToast({title:e,...t,id:r}),r},l7=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",c7=o7,u7=()=>$s.toasts,d7=()=>$s.getActiveToasts();Object.assign(c7,{success:$s.success,info:$s.info,warning:$s.warning,error:$s.error,custom:$s.custom,message:$s.message,promise:$s.promise,dismiss:$s.dismiss,loading:$s.loading},{getHistory:u7,getToasts:d7});function h7(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}h7(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function j0(e){return e.label!==void 0}var p7=3,f7="32px",m7="16px",BM=4e3,g7=356,y7=14,x7=20,v7=200;function ao(...e){return e.filter(Boolean).join(" ")}function _7(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var b7=e=>{var t,r,n,a,u,h,o,_,T,P,E;let{invert:M,toast:I,unstyled:z,interacting:F,setHeights:D,visibleToasts:q,heights:$,index:W,toasts:te,expanded:se,removeToast:he,defaultRichColors:pe,closeButton:xe,style:Re,cancelButtonStyle:Me,actionButtonStyle:pt,className:Oe="",descriptionClassName:Ye="",duration:Ge,position:rt,gap:nt,loadingIcon:Ve,expandByDefault:_e,classNames:Le,icons:ft,closeButtonAriaLabel:yt="Close toast",pauseWhenPageIsHidden:wt}=e,[Lt,Wt]=ht.useState(null),[wr,kr]=ht.useState(null),[er,Yr]=ht.useState(!1),[Zn,Rn]=ht.useState(!1),[ri,vn]=ht.useState(!1),[Ni,Cr]=ht.useState(!1),[ni,xi]=ht.useState(!1),[Nr,vi]=ht.useState(0),[Dn,Ee]=ht.useState(0),Be=ht.useRef(I.duration||Ge||BM),He=ht.useRef(null),xt=ht.useRef(null),vt=W===0,dt=W+1<=q,Tt=I.type,or=I.dismissible!==!1,vr=I.className||"",Tn=I.descriptionClassName||"",ii=ht.useMemo(()=>$.findIndex(Ne=>Ne.toastId===I.id)||0,[$,I.id]),_i=ht.useMemo(()=>{var Ne;return(Ne=I.closeButton)!=null?Ne:xe},[I.closeButton,xe]),Rs=ht.useMemo(()=>I.duration||Ge||BM,[I.duration,Ge]),Kn=ht.useRef(0),nn=ht.useRef(0),Te=ht.useRef(0),Q=ht.useRef(null),[ee,ie]=rt.split("-"),ge=ht.useMemo(()=>$.reduce((Ne,De,ct)=>ct>=ii?Ne:Ne+De.height,0),[$,ii]),be=s7(),Ie=I.invert||M,oe=Tt==="loading";nn.current=ht.useMemo(()=>ii*nt+ge,[ii,ge]),ht.useEffect(()=>{Be.current=Rs},[Rs]),ht.useEffect(()=>{Yr(!0)},[]),ht.useEffect(()=>{let Ne=xt.current;if(Ne){let De=Ne.getBoundingClientRect().height;return Ee(De),D(ct=>[{toastId:I.id,height:De,position:I.position},...ct]),()=>D(ct=>ct.filter(kt=>kt.toastId!==I.id))}},[D,I.id]),ht.useLayoutEffect(()=>{if(!er)return;let Ne=xt.current,De=Ne.style.height;Ne.style.height="auto";let ct=Ne.getBoundingClientRect().height;Ne.style.height=De,Ee(ct),D(kt=>kt.find(Ft=>Ft.toastId===I.id)?kt.map(Ft=>Ft.toastId===I.id?{...Ft,height:ct}:Ft):[{toastId:I.id,height:ct,position:I.position},...kt])},[er,I.title,I.description,D,I.id]);let je=ht.useCallback(()=>{Rn(!0),vi(nn.current),D(Ne=>Ne.filter(De=>De.toastId!==I.id)),setTimeout(()=>{he(I)},v7)},[I,he,D,nn]);ht.useEffect(()=>{if(I.promise&&Tt==="loading"||I.duration===1/0||I.type==="loading")return;let Ne;return se||F||wt&&be?(()=>{if(Te.current<Kn.current){let De=new Date().getTime()-Kn.current;Be.current=Be.current-De}Te.current=new Date().getTime()})():Be.current!==1/0&&(Kn.current=new Date().getTime(),Ne=setTimeout(()=>{var De;(De=I.onAutoClose)==null||De.call(I,I),je()},Be.current)),()=>clearTimeout(Ne)},[se,F,I,Tt,wt,be,je]),ht.useEffect(()=>{I.delete&&je()},[je,I.delete]);function We(){var Ne,De,ct;return ft!=null&&ft.loading?ht.createElement("div",{className:ao(Le==null?void 0:Le.loader,(Ne=I==null?void 0:I.classNames)==null?void 0:Ne.loader,"sonner-loader"),"data-visible":Tt==="loading"},ft.loading):Ve?ht.createElement("div",{className:ao(Le==null?void 0:Le.loader,(De=I==null?void 0:I.classNames)==null?void 0:De.loader,"sonner-loader"),"data-visible":Tt==="loading"},Ve):ht.createElement(J9,{className:ao(Le==null?void 0:Le.loader,(ct=I==null?void 0:I.classNames)==null?void 0:ct.loader),visible:Tt==="loading"})}return ht.createElement("li",{tabIndex:0,ref:xt,className:ao(Oe,vr,Le==null?void 0:Le.toast,(t=I==null?void 0:I.classNames)==null?void 0:t.toast,Le==null?void 0:Le.default,Le==null?void 0:Le[Tt],(r=I==null?void 0:I.classNames)==null?void 0:r[Tt]),"data-sonner-toast":"","data-rich-colors":(n=I.richColors)!=null?n:pe,"data-styled":!(I.jsx||I.unstyled||z),"data-mounted":er,"data-promise":!!I.promise,"data-swiped":ni,"data-removed":Zn,"data-visible":dt,"data-y-position":ee,"data-x-position":ie,"data-index":W,"data-front":vt,"data-swiping":ri,"data-dismissible":or,"data-type":Tt,"data-invert":Ie,"data-swipe-out":Ni,"data-swipe-direction":wr,"data-expanded":!!(se||_e&&er),style:{"--index":W,"--toasts-before":W,"--z-index":te.length-W,"--offset":`${Zn?Nr:nn.current}px`,"--initial-height":_e?"auto":`${Dn}px`,...Re,...I.style},onDragEnd:()=>{vn(!1),Wt(null),Q.current=null},onPointerDown:Ne=>{oe||!or||(He.current=new Date,vi(nn.current),Ne.target.setPointerCapture(Ne.pointerId),Ne.target.tagName!=="BUTTON"&&(vn(!0),Q.current={x:Ne.clientX,y:Ne.clientY}))},onPointerUp:()=>{var Ne,De,ct,kt;if(Ni||!or)return;Q.current=null;let Ft=Number(((Ne=xt.current)==null?void 0:Ne.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Pr=Number(((De=xt.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Yt=new Date().getTime()-((ct=He.current)==null?void 0:ct.getTime()),nr=Lt==="x"?Ft:Pr,_r=Math.abs(nr)/Yt;if(Math.abs(nr)>=x7||_r>.11){vi(nn.current),(kt=I.onDismiss)==null||kt.call(I,I),kr(Lt==="x"?Ft>0?"right":"left":Pr>0?"down":"up"),je(),Cr(!0),xi(!1);return}vn(!1),Wt(null)},onPointerMove:Ne=>{var De,ct,kt,Ft;if(!Q.current||!or||((De=window.getSelection())==null?void 0:De.toString().length)>0)return;let Pr=Ne.clientY-Q.current.y,Yt=Ne.clientX-Q.current.x,nr=(ct=e.swipeDirections)!=null?ct:_7(rt);!Lt&&(Math.abs(Yt)>1||Math.abs(Pr)>1)&&Wt(Math.abs(Yt)>Math.abs(Pr)?"x":"y");let _r={x:0,y:0};Lt==="y"?(nr.includes("top")||nr.includes("bottom"))&&(nr.includes("top")&&Pr<0||nr.includes("bottom")&&Pr>0)&&(_r.y=Pr):Lt==="x"&&(nr.includes("left")||nr.includes("right"))&&(nr.includes("left")&&Yt<0||nr.includes("right")&&Yt>0)&&(_r.x=Yt),(Math.abs(_r.x)>0||Math.abs(_r.y)>0)&&xi(!0),(kt=xt.current)==null||kt.style.setProperty("--swipe-amount-x",`${_r.x}px`),(Ft=xt.current)==null||Ft.style.setProperty("--swipe-amount-y",`${_r.y}px`)}},_i&&!I.jsx?ht.createElement("button",{"aria-label":yt,"data-disabled":oe,"data-close-button":!0,onClick:oe||!or?()=>{}:()=>{var Ne;je(),(Ne=I.onDismiss)==null||Ne.call(I,I)},className:ao(Le==null?void 0:Le.closeButton,(a=I==null?void 0:I.classNames)==null?void 0:a.closeButton)},(u=ft==null?void 0:ft.close)!=null?u:i7):null,I.jsx||U.isValidElement(I.title)?I.jsx?I.jsx:typeof I.title=="function"?I.title():I.title:ht.createElement(ht.Fragment,null,Tt||I.icon||I.promise?ht.createElement("div",{"data-icon":"",className:ao(Le==null?void 0:Le.icon,(h=I==null?void 0:I.classNames)==null?void 0:h.icon)},I.promise||I.type==="loading"&&!I.icon?I.icon||We():null,I.type!=="loading"?I.icon||(ft==null?void 0:ft[Tt])||Q9(Tt):null):null,ht.createElement("div",{"data-content":"",className:ao(Le==null?void 0:Le.content,(o=I==null?void 0:I.classNames)==null?void 0:o.content)},ht.createElement("div",{"data-title":"",className:ao(Le==null?void 0:Le.title,(_=I==null?void 0:I.classNames)==null?void 0:_.title)},typeof I.title=="function"?I.title():I.title),I.description?ht.createElement("div",{"data-description":"",className:ao(Ye,Tn,Le==null?void 0:Le.description,(T=I==null?void 0:I.classNames)==null?void 0:T.description)},typeof I.description=="function"?I.description():I.description):null),U.isValidElement(I.cancel)?I.cancel:I.cancel&&j0(I.cancel)?ht.createElement("button",{"data-button":!0,"data-cancel":!0,style:I.cancelButtonStyle||Me,onClick:Ne=>{var De,ct;j0(I.cancel)&&or&&((ct=(De=I.cancel).onClick)==null||ct.call(De,Ne),je())},className:ao(Le==null?void 0:Le.cancelButton,(P=I==null?void 0:I.classNames)==null?void 0:P.cancelButton)},I.cancel.label):null,U.isValidElement(I.action)?I.action:I.action&&j0(I.action)?ht.createElement("button",{"data-button":!0,"data-action":!0,style:I.actionButtonStyle||pt,onClick:Ne=>{var De,ct;j0(I.action)&&((ct=(De=I.action).onClick)==null||ct.call(De,Ne),!Ne.defaultPrevented&&je())},className:ao(Le==null?void 0:Le.actionButton,(E=I==null?void 0:I.classNames)==null?void 0:E.actionButton)},I.action.label):null))};function VM(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function w7(e,t){let r={};return[e,t].forEach((n,a)=>{let u=a===1,h=u?"--mobile-offset":"--offset",o=u?m7:f7;function _(T){["top","right","bottom","left"].forEach(P=>{r[`${h}-${P}`]=typeof T=="number"?`${T}px`:T})}typeof n=="number"||typeof n=="string"?_(n):typeof n=="object"?["top","right","bottom","left"].forEach(T=>{n[T]===void 0?r[`${h}-${T}`]=o:r[`${h}-${T}`]=typeof n[T]=="number"?`${n[T]}px`:n[T]}):_(o)}),r}var S7=U.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:u,closeButton:h,className:o,offset:_,mobileOffset:T,theme:P="light",richColors:E,duration:M,style:I,visibleToasts:z=p7,toastOptions:F,dir:D=VM(),gap:q=y7,loadingIcon:$,icons:W,containerAriaLabel:te="Notifications",pauseWhenPageIsHidden:se}=e,[he,pe]=ht.useState([]),xe=ht.useMemo(()=>Array.from(new Set([n].concat(he.filter(wt=>wt.position).map(wt=>wt.position)))),[he,n]),[Re,Me]=ht.useState([]),[pt,Oe]=ht.useState(!1),[Ye,Ge]=ht.useState(!1),[rt,nt]=ht.useState(P!=="system"?P:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ve=ht.useRef(null),_e=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Le=ht.useRef(null),ft=ht.useRef(!1),yt=ht.useCallback(wt=>{pe(Lt=>{var Wt;return(Wt=Lt.find(wr=>wr.id===wt.id))!=null&&Wt.delete||$s.dismiss(wt.id),Lt.filter(({id:wr})=>wr!==wt.id)})},[]);return ht.useEffect(()=>$s.subscribe(wt=>{if(wt.dismiss){pe(Lt=>Lt.map(Wt=>Wt.id===wt.id?{...Wt,delete:!0}:Wt));return}setTimeout(()=>{WL.flushSync(()=>{pe(Lt=>{let Wt=Lt.findIndex(wr=>wr.id===wt.id);return Wt!==-1?[...Lt.slice(0,Wt),{...Lt[Wt],...wt},...Lt.slice(Wt+1)]:[wt,...Lt]})})})}),[]),ht.useEffect(()=>{if(P!=="system"){nt(P);return}if(P==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?nt("dark"):nt("light")),typeof window>"u")return;let wt=window.matchMedia("(prefers-color-scheme: dark)");try{wt.addEventListener("change",({matches:Lt})=>{nt(Lt?"dark":"light")})}catch{wt.addListener(({matches:Wt})=>{try{nt(Wt?"dark":"light")}catch(wr){console.error(wr)}})}},[P]),ht.useEffect(()=>{he.length<=1&&Oe(!1)},[he]),ht.useEffect(()=>{let wt=Lt=>{var Wt,wr;a.every(kr=>Lt[kr]||Lt.code===kr)&&(Oe(!0),(Wt=Ve.current)==null||Wt.focus()),Lt.code==="Escape"&&(document.activeElement===Ve.current||(wr=Ve.current)!=null&&wr.contains(document.activeElement))&&Oe(!1)};return document.addEventListener("keydown",wt),()=>document.removeEventListener("keydown",wt)},[a]),ht.useEffect(()=>{if(Ve.current)return()=>{Le.current&&(Le.current.focus({preventScroll:!0}),Le.current=null,ft.current=!1)}},[Ve.current]),ht.createElement("section",{ref:t,"aria-label":`${te} ${_e}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},xe.map((wt,Lt)=>{var Wt;let[wr,kr]=wt.split("-");return he.length?ht.createElement("ol",{key:wt,dir:D==="auto"?VM():D,tabIndex:-1,ref:Ve,className:o,"data-sonner-toaster":!0,"data-theme":rt,"data-y-position":wr,"data-lifted":pt&&he.length>1&&!u,"data-x-position":kr,style:{"--front-toast-height":`${((Wt=Re[0])==null?void 0:Wt.height)||0}px`,"--width":`${g7}px`,"--gap":`${q}px`,...I,...w7(_,T)},onBlur:er=>{ft.current&&!er.currentTarget.contains(er.relatedTarget)&&(ft.current=!1,Le.current&&(Le.current.focus({preventScroll:!0}),Le.current=null))},onFocus:er=>{er.target instanceof HTMLElement&&er.target.dataset.dismissible==="false"||ft.current||(ft.current=!0,Le.current=er.relatedTarget)},onMouseEnter:()=>Oe(!0),onMouseMove:()=>Oe(!0),onMouseLeave:()=>{Ye||Oe(!1)},onDragEnd:()=>Oe(!1),onPointerDown:er=>{er.target instanceof HTMLElement&&er.target.dataset.dismissible==="false"||Ge(!0)},onPointerUp:()=>Ge(!1)},he.filter(er=>!er.position&&Lt===0||er.position===wt).map((er,Yr)=>{var Zn,Rn;return ht.createElement(b7,{key:er.id,icons:W,index:Yr,toast:er,defaultRichColors:E,duration:(Zn=F==null?void 0:F.duration)!=null?Zn:M,className:F==null?void 0:F.className,descriptionClassName:F==null?void 0:F.descriptionClassName,invert:r,visibleToasts:z,closeButton:(Rn=F==null?void 0:F.closeButton)!=null?Rn:h,interacting:Ye,position:wt,style:F==null?void 0:F.style,unstyled:F==null?void 0:F.unstyled,classNames:F==null?void 0:F.classNames,cancelButtonStyle:F==null?void 0:F.cancelButtonStyle,actionButtonStyle:F==null?void 0:F.actionButtonStyle,removeToast:yt,toasts:he.filter(ri=>ri.position==er.position),heights:Re.filter(ri=>ri.position==er.position),setHeights:Me,expandByDefault:u,gap:q,loadingIcon:$,expanded:pt,pauseWhenPageIsHidden:se,swipeDirections:e.swipeDirections})})):null}))});const T7=({...e})=>{const{theme:t="system"}=W3();return f.jsx(S7,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var k7=Ak[" useId ".trim().toString()]||(()=>{}),C7=0;function sy(e){const[t,r]=U.useState(k7());return tc(()=>{r(n=>n??String(C7++))},[e]),t?`radix-${t}`:""}const P7=["top","right","bottom","left"],wu=Math.min,ua=Math.max,Q_=Math.round,A0=Math.floor,al=e=>({x:e,y:e}),E7={left:"right",right:"left",bottom:"top",top:"bottom"},j7={start:"end",end:"start"};function yT(e,t,r){return ua(e,wu(t,r))}function rc(e,t){return typeof e=="function"?e(t):e}function nc(e){return e.split("-")[0]}function Gf(e){return e.split("-")[1]}function AC(e){return e==="x"?"y":"x"}function MC(e){return e==="y"?"height":"width"}const A7=new Set(["top","bottom"]);function el(e){return A7.has(nc(e))?"y":"x"}function NC(e){return AC(el(e))}function M7(e,t,r){r===void 0&&(r=!1);const n=Gf(e),a=NC(e),u=MC(a);let h=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=X_(h)),[h,X_(h)]}function N7(e){const t=X_(e);return[xT(e),t,xT(t)]}function xT(e){return e.replace(/start|end/g,t=>j7[t])}const $M=["left","right"],UM=["right","left"],I7=["top","bottom"],R7=["bottom","top"];function D7(e,t,r){switch(e){case"top":case"bottom":return r?t?UM:$M:t?$M:UM;case"left":case"right":return t?I7:R7;default:return[]}}function O7(e,t,r,n){const a=Gf(e);let u=D7(nc(e),r==="start",n);return a&&(u=u.map(h=>h+"-"+a),t&&(u=u.concat(u.map(xT)))),u}function X_(e){return e.replace(/left|right|bottom|top/g,t=>E7[t])}function L7(e){return{top:0,right:0,bottom:0,left:0,...e}}function G3(e){return typeof e!="number"?L7(e):{top:e,right:e,bottom:e,left:e}}function J_(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function qM(e,t,r){let{reference:n,floating:a}=e;const u=el(t),h=NC(t),o=MC(h),_=nc(t),T=u==="y",P=n.x+n.width/2-a.width/2,E=n.y+n.height/2-a.height/2,M=n[o]/2-a[o]/2;let I;switch(_){case"top":I={x:P,y:n.y-a.height};break;case"bottom":I={x:P,y:n.y+n.height};break;case"right":I={x:n.x+n.width,y:E};break;case"left":I={x:n.x-a.width,y:E};break;default:I={x:n.x,y:n.y}}switch(Gf(t)){case"start":I[h]-=M*(r&&T?-1:1);break;case"end":I[h]+=M*(r&&T?-1:1);break}return I}const F7=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:u=[],platform:h}=r,o=u.filter(Boolean),_=await(h.isRTL==null?void 0:h.isRTL(t));let T=await h.getElementRects({reference:e,floating:t,strategy:a}),{x:P,y:E}=qM(T,n,_),M=n,I={},z=0;for(let F=0;F<o.length;F++){const{name:D,fn:q}=o[F],{x:$,y:W,data:te,reset:se}=await q({x:P,y:E,initialPlacement:n,placement:M,strategy:a,middlewareData:I,rects:T,platform:h,elements:{reference:e,floating:t}});P=$??P,E=W??E,I={...I,[D]:{...I[D],...te}},se&&z<=50&&(z++,typeof se=="object"&&(se.placement&&(M=se.placement),se.rects&&(T=se.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:a}):se.rects),{x:P,y:E}=qM(T,M,_)),F=-1)}return{x:P,y:E,placement:M,strategy:a,middlewareData:I}};async function Dy(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:u,rects:h,elements:o,strategy:_}=e,{boundary:T="clippingAncestors",rootBoundary:P="viewport",elementContext:E="floating",altBoundary:M=!1,padding:I=0}=rc(t,e),z=G3(I),D=o[M?E==="floating"?"reference":"floating":E],q=J_(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(D)))==null||r?D:D.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(o.floating)),boundary:T,rootBoundary:P,strategy:_})),$=E==="floating"?{x:n,y:a,width:h.floating.width,height:h.floating.height}:h.reference,W=await(u.getOffsetParent==null?void 0:u.getOffsetParent(o.floating)),te=await(u.isElement==null?void 0:u.isElement(W))?await(u.getScale==null?void 0:u.getScale(W))||{x:1,y:1}:{x:1,y:1},se=J_(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:$,offsetParent:W,strategy:_}):$);return{top:(q.top-se.top+z.top)/te.y,bottom:(se.bottom-q.bottom+z.bottom)/te.y,left:(q.left-se.left+z.left)/te.x,right:(se.right-q.right+z.right)/te.x}}const z7=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:u,platform:h,elements:o,middlewareData:_}=t,{element:T,padding:P=0}=rc(e,t)||{};if(T==null)return{};const E=G3(P),M={x:r,y:n},I=NC(a),z=MC(I),F=await h.getDimensions(T),D=I==="y",q=D?"top":"left",$=D?"bottom":"right",W=D?"clientHeight":"clientWidth",te=u.reference[z]+u.reference[I]-M[I]-u.floating[z],se=M[I]-u.reference[I],he=await(h.getOffsetParent==null?void 0:h.getOffsetParent(T));let pe=he?he[W]:0;(!pe||!await(h.isElement==null?void 0:h.isElement(he)))&&(pe=o.floating[W]||u.floating[z]);const xe=te/2-se/2,Re=pe/2-F[z]/2-1,Me=wu(E[q],Re),pt=wu(E[$],Re),Oe=Me,Ye=pe-F[z]-pt,Ge=pe/2-F[z]/2+xe,rt=yT(Oe,Ge,Ye),nt=!_.arrow&&Gf(a)!=null&&Ge!==rt&&u.reference[z]/2-(Ge<Oe?Me:pt)-F[z]/2<0,Ve=nt?Ge<Oe?Ge-Oe:Ge-Ye:0;return{[I]:M[I]+Ve,data:{[I]:rt,centerOffset:Ge-rt-Ve,...nt&&{alignmentOffset:Ve}},reset:nt}}}),B7=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:u,rects:h,initialPlacement:o,platform:_,elements:T}=t,{mainAxis:P=!0,crossAxis:E=!0,fallbackPlacements:M,fallbackStrategy:I="bestFit",fallbackAxisSideDirection:z="none",flipAlignment:F=!0,...D}=rc(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const q=nc(a),$=el(o),W=nc(o)===o,te=await(_.isRTL==null?void 0:_.isRTL(T.floating)),se=M||(W||!F?[X_(o)]:N7(o)),he=z!=="none";!M&&he&&se.push(...O7(o,F,z,te));const pe=[o,...se],xe=await Dy(t,D),Re=[];let Me=((n=u.flip)==null?void 0:n.overflows)||[];if(P&&Re.push(xe[q]),E){const Ge=M7(a,h,te);Re.push(xe[Ge[0]],xe[Ge[1]])}if(Me=[...Me,{placement:a,overflows:Re}],!Re.every(Ge=>Ge<=0)){var pt,Oe;const Ge=(((pt=u.flip)==null?void 0:pt.index)||0)+1,rt=pe[Ge];if(rt&&(!(E==="alignment"?$!==el(rt):!1)||Me.every(_e=>_e.overflows[0]>0&&el(_e.placement)===$)))return{data:{index:Ge,overflows:Me},reset:{placement:rt}};let nt=(Oe=Me.filter(Ve=>Ve.overflows[0]<=0).sort((Ve,_e)=>Ve.overflows[1]-_e.overflows[1])[0])==null?void 0:Oe.placement;if(!nt)switch(I){case"bestFit":{var Ye;const Ve=(Ye=Me.filter(_e=>{if(he){const Le=el(_e.placement);return Le===$||Le==="y"}return!0}).map(_e=>[_e.placement,_e.overflows.filter(Le=>Le>0).reduce((Le,ft)=>Le+ft,0)]).sort((_e,Le)=>_e[1]-Le[1])[0])==null?void 0:Ye[0];Ve&&(nt=Ve);break}case"initialPlacement":nt=o;break}if(a!==nt)return{reset:{placement:nt}}}return{}}}};function WM(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function GM(e){return P7.some(t=>e[t]>=0)}const V7=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=rc(e,t);switch(n){case"referenceHidden":{const u=await Dy(t,{...a,elementContext:"reference"}),h=WM(u,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:GM(h)}}}case"escaped":{const u=await Dy(t,{...a,altBoundary:!0}),h=WM(u,r.floating);return{data:{escapedOffsets:h,escaped:GM(h)}}}default:return{}}}}},H3=new Set(["left","top"]);async function $7(e,t){const{placement:r,platform:n,elements:a}=e,u=await(n.isRTL==null?void 0:n.isRTL(a.floating)),h=nc(r),o=Gf(r),_=el(r)==="y",T=H3.has(h)?-1:1,P=u&&_?-1:1,E=rc(t,e);let{mainAxis:M,crossAxis:I,alignmentAxis:z}=typeof E=="number"?{mainAxis:E,crossAxis:0,alignmentAxis:null}:{mainAxis:E.mainAxis||0,crossAxis:E.crossAxis||0,alignmentAxis:E.alignmentAxis};return o&&typeof z=="number"&&(I=o==="end"?z*-1:z),_?{x:I*P,y:M*T}:{x:M*T,y:I*P}}const U7=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:u,placement:h,middlewareData:o}=t,_=await $7(t,e);return h===((r=o.offset)==null?void 0:r.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+_.x,y:u+_.y,data:{..._,placement:h}}}}},q7=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:o={fn:D=>{let{x:q,y:$}=D;return{x:q,y:$}}},..._}=rc(e,t),T={x:r,y:n},P=await Dy(t,_),E=el(nc(a)),M=AC(E);let I=T[M],z=T[E];if(u){const D=M==="y"?"top":"left",q=M==="y"?"bottom":"right",$=I+P[D],W=I-P[q];I=yT($,I,W)}if(h){const D=E==="y"?"top":"left",q=E==="y"?"bottom":"right",$=z+P[D],W=z-P[q];z=yT($,z,W)}const F=o.fn({...t,[M]:I,[E]:z});return{...F,data:{x:F.x-r,y:F.y-n,enabled:{[M]:u,[E]:h}}}}}},W7=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:u,middlewareData:h}=t,{offset:o=0,mainAxis:_=!0,crossAxis:T=!0}=rc(e,t),P={x:r,y:n},E=el(a),M=AC(E);let I=P[M],z=P[E];const F=rc(o,t),D=typeof F=="number"?{mainAxis:F,crossAxis:0}:{mainAxis:0,crossAxis:0,...F};if(_){const W=M==="y"?"height":"width",te=u.reference[M]-u.floating[W]+D.mainAxis,se=u.reference[M]+u.reference[W]-D.mainAxis;I<te?I=te:I>se&&(I=se)}if(T){var q,$;const W=M==="y"?"width":"height",te=H3.has(nc(a)),se=u.reference[E]-u.floating[W]+(te&&((q=h.offset)==null?void 0:q[E])||0)+(te?0:D.crossAxis),he=u.reference[E]+u.reference[W]+(te?0:(($=h.offset)==null?void 0:$[E])||0)-(te?D.crossAxis:0);z<se?z=se:z>he&&(z=he)}return{[M]:I,[E]:z}}}},G7=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:u,platform:h,elements:o}=t,{apply:_=()=>{},...T}=rc(e,t),P=await Dy(t,T),E=nc(a),M=Gf(a),I=el(a)==="y",{width:z,height:F}=u.floating;let D,q;E==="top"||E==="bottom"?(D=E,q=M===(await(h.isRTL==null?void 0:h.isRTL(o.floating))?"start":"end")?"left":"right"):(q=E,D=M==="end"?"top":"bottom");const $=F-P.top-P.bottom,W=z-P.left-P.right,te=wu(F-P[D],$),se=wu(z-P[q],W),he=!t.middlewareData.shift;let pe=te,xe=se;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(xe=W),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(pe=$),he&&!M){const Me=ua(P.left,0),pt=ua(P.right,0),Oe=ua(P.top,0),Ye=ua(P.bottom,0);I?xe=z-2*(Me!==0||pt!==0?Me+pt:ua(P.left,P.right)):pe=F-2*(Oe!==0||Ye!==0?Oe+Ye:ua(P.top,P.bottom))}await _({...t,availableWidth:xe,availableHeight:pe});const Re=await h.getDimensions(o.floating);return z!==Re.width||F!==Re.height?{reset:{rects:!0}}:{}}}};function Zb(){return typeof window<"u"}function Hf(e){return Z3(e)?(e.nodeName||"").toLowerCase():"#document"}function ma(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function gl(e){var t;return(t=(Z3(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Z3(e){return Zb()?e instanceof Node||e instanceof ma(e).Node:!1}function Co(e){return Zb()?e instanceof Element||e instanceof ma(e).Element:!1}function ul(e){return Zb()?e instanceof HTMLElement||e instanceof ma(e).HTMLElement:!1}function HM(e){return!Zb()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ma(e).ShadowRoot}const H7=new Set(["inline","contents"]);function gx(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Po(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!H7.has(a)}const Z7=new Set(["table","td","th"]);function K7(e){return Z7.has(Hf(e))}const Y7=[":popover-open",":modal"];function Kb(e){return Y7.some(t=>{try{return e.matches(t)}catch{return!1}})}const Q7=["transform","translate","scale","rotate","perspective"],X7=["transform","translate","scale","rotate","perspective","filter"],J7=["paint","layout","strict","content"];function IC(e){const t=RC(),r=Co(e)?Po(e):e;return Q7.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||X7.some(n=>(r.willChange||"").includes(n))||J7.some(n=>(r.contain||"").includes(n))}function eG(e){let t=Su(e);for(;ul(t)&&!Ef(t);){if(IC(t))return t;if(Kb(t))return null;t=Su(t)}return null}function RC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tG=new Set(["html","body","#document"]);function Ef(e){return tG.has(Hf(e))}function Po(e){return ma(e).getComputedStyle(e)}function Yb(e){return Co(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Su(e){if(Hf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||HM(e)&&e.host||gl(e);return HM(t)?t.host:t}function K3(e){const t=Su(e);return Ef(t)?e.ownerDocument?e.ownerDocument.body:e.body:ul(t)&&gx(t)?t:K3(t)}function Oy(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=K3(e),u=a===((n=e.ownerDocument)==null?void 0:n.body),h=ma(a);if(u){const o=vT(h);return t.concat(h,h.visualViewport||[],gx(a)?a:[],o&&r?Oy(o):[])}return t.concat(a,Oy(a,[],r))}function vT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Y3(e){const t=Po(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=ul(e),u=a?e.offsetWidth:r,h=a?e.offsetHeight:n,o=Q_(r)!==u||Q_(n)!==h;return o&&(r=u,n=h),{width:r,height:n,$:o}}function DC(e){return Co(e)?e:e.contextElement}function of(e){const t=DC(e);if(!ul(t))return al(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:u}=Y3(t);let h=(u?Q_(r.width):r.width)/n,o=(u?Q_(r.height):r.height)/a;return(!h||!Number.isFinite(h))&&(h=1),(!o||!Number.isFinite(o))&&(o=1),{x:h,y:o}}const rG=al(0);function Q3(e){const t=ma(e);return!RC()||!t.visualViewport?rG:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function nG(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ma(e)?!1:t}function ah(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),u=DC(e);let h=al(1);t&&(n?Co(n)&&(h=of(n)):h=of(e));const o=nG(u,r,n)?Q3(u):al(0);let _=(a.left+o.x)/h.x,T=(a.top+o.y)/h.y,P=a.width/h.x,E=a.height/h.y;if(u){const M=ma(u),I=n&&Co(n)?ma(n):n;let z=M,F=vT(z);for(;F&&n&&I!==z;){const D=of(F),q=F.getBoundingClientRect(),$=Po(F),W=q.left+(F.clientLeft+parseFloat($.paddingLeft))*D.x,te=q.top+(F.clientTop+parseFloat($.paddingTop))*D.y;_*=D.x,T*=D.y,P*=D.x,E*=D.y,_+=W,T+=te,z=ma(F),F=vT(z)}}return J_({width:P,height:E,x:_,y:T})}function OC(e,t){const r=Yb(e).scrollLeft;return t?t.left+r:ah(gl(e)).left+r}function X3(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),a=n.left+t.scrollLeft-(r?0:OC(e,n)),u=n.top+t.scrollTop;return{x:a,y:u}}function iG(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const u=a==="fixed",h=gl(n),o=t?Kb(t.floating):!1;if(n===h||o&&u)return r;let _={scrollLeft:0,scrollTop:0},T=al(1);const P=al(0),E=ul(n);if((E||!E&&!u)&&((Hf(n)!=="body"||gx(h))&&(_=Yb(n)),ul(n))){const I=ah(n);T=of(n),P.x=I.x+n.clientLeft,P.y=I.y+n.clientTop}const M=h&&!E&&!u?X3(h,_,!0):al(0);return{width:r.width*T.x,height:r.height*T.y,x:r.x*T.x-_.scrollLeft*T.x+P.x+M.x,y:r.y*T.y-_.scrollTop*T.y+P.y+M.y}}function sG(e){return Array.from(e.getClientRects())}function aG(e){const t=gl(e),r=Yb(e),n=e.ownerDocument.body,a=ua(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),u=ua(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let h=-r.scrollLeft+OC(e);const o=-r.scrollTop;return Po(n).direction==="rtl"&&(h+=ua(t.clientWidth,n.clientWidth)-a),{width:a,height:u,x:h,y:o}}function oG(e,t){const r=ma(e),n=gl(e),a=r.visualViewport;let u=n.clientWidth,h=n.clientHeight,o=0,_=0;if(a){u=a.width,h=a.height;const T=RC();(!T||T&&t==="fixed")&&(o=a.offsetLeft,_=a.offsetTop)}return{width:u,height:h,x:o,y:_}}const lG=new Set(["absolute","fixed"]);function cG(e,t){const r=ah(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,u=ul(e)?of(e):al(1),h=e.clientWidth*u.x,o=e.clientHeight*u.y,_=a*u.x,T=n*u.y;return{width:h,height:o,x:_,y:T}}function ZM(e,t,r){let n;if(t==="viewport")n=oG(e,r);else if(t==="document")n=aG(gl(e));else if(Co(t))n=cG(t,r);else{const a=Q3(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return J_(n)}function J3(e,t){const r=Su(e);return r===t||!Co(r)||Ef(r)?!1:Po(r).position==="fixed"||J3(r,t)}function uG(e,t){const r=t.get(e);if(r)return r;let n=Oy(e,[],!1).filter(o=>Co(o)&&Hf(o)!=="body"),a=null;const u=Po(e).position==="fixed";let h=u?Su(e):e;for(;Co(h)&&!Ef(h);){const o=Po(h),_=IC(h);!_&&o.position==="fixed"&&(a=null),(u?!_&&!a:!_&&o.position==="static"&&!!a&&lG.has(a.position)||gx(h)&&!_&&J3(e,h))?n=n.filter(P=>P!==h):a=o,h=Su(h)}return t.set(e,n),n}function dG(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const h=[...r==="clippingAncestors"?Kb(t)?[]:uG(t,this._c):[].concat(r),n],o=h[0],_=h.reduce((T,P)=>{const E=ZM(t,P,a);return T.top=ua(E.top,T.top),T.right=wu(E.right,T.right),T.bottom=wu(E.bottom,T.bottom),T.left=ua(E.left,T.left),T},ZM(t,o,a));return{width:_.right-_.left,height:_.bottom-_.top,x:_.left,y:_.top}}function hG(e){const{width:t,height:r}=Y3(e);return{width:t,height:r}}function pG(e,t,r){const n=ul(t),a=gl(t),u=r==="fixed",h=ah(e,!0,u,t);let o={scrollLeft:0,scrollTop:0};const _=al(0);function T(){_.x=OC(a)}if(n||!n&&!u)if((Hf(t)!=="body"||gx(a))&&(o=Yb(t)),n){const I=ah(t,!0,u,t);_.x=I.x+t.clientLeft,_.y=I.y+t.clientTop}else a&&T();u&&!n&&a&&T();const P=a&&!n&&!u?X3(a,o):al(0),E=h.left+o.scrollLeft-_.x-P.x,M=h.top+o.scrollTop-_.y-P.y;return{x:E,y:M,width:h.width,height:h.height}}function v2(e){return Po(e).position==="static"}function KM(e,t){if(!ul(e)||Po(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return gl(e)===r&&(r=r.ownerDocument.body),r}function e5(e,t){const r=ma(e);if(Kb(e))return r;if(!ul(e)){let a=Su(e);for(;a&&!Ef(a);){if(Co(a)&&!v2(a))return a;a=Su(a)}return r}let n=KM(e,t);for(;n&&K7(n)&&v2(n);)n=KM(n,t);return n&&Ef(n)&&v2(n)&&!IC(n)?r:n||eG(e)||r}const fG=async function(e){const t=this.getOffsetParent||e5,r=this.getDimensions,n=await r(e.floating);return{reference:pG(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mG(e){return Po(e).direction==="rtl"}const gG={convertOffsetParentRelativeRectToViewportRelativeRect:iG,getDocumentElement:gl,getClippingRect:dG,getOffsetParent:e5,getElementRects:fG,getClientRects:sG,getDimensions:hG,getScale:of,isElement:Co,isRTL:mG};function t5(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function yG(e,t){let r=null,n;const a=gl(e);function u(){var o;clearTimeout(n),(o=r)==null||o.disconnect(),r=null}function h(o,_){o===void 0&&(o=!1),_===void 0&&(_=1),u();const T=e.getBoundingClientRect(),{left:P,top:E,width:M,height:I}=T;if(o||t(),!M||!I)return;const z=A0(E),F=A0(a.clientWidth-(P+M)),D=A0(a.clientHeight-(E+I)),q=A0(P),W={rootMargin:-z+"px "+-F+"px "+-D+"px "+-q+"px",threshold:ua(0,wu(1,_))||1};let te=!0;function se(he){const pe=he[0].intersectionRatio;if(pe!==_){if(!te)return h();pe?h(!1,pe):n=setTimeout(()=>{h(!1,1e-7)},1e3)}pe===1&&!t5(T,e.getBoundingClientRect())&&h(),te=!1}try{r=new IntersectionObserver(se,{...W,root:a.ownerDocument})}catch{r=new IntersectionObserver(se,W)}r.observe(e)}return h(!0),u}function xG(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:_=!1}=n,T=DC(e),P=a||u?[...T?Oy(T):[],...Oy(t)]:[];P.forEach(q=>{a&&q.addEventListener("scroll",r,{passive:!0}),u&&q.addEventListener("resize",r)});const E=T&&o?yG(T,r):null;let M=-1,I=null;h&&(I=new ResizeObserver(q=>{let[$]=q;$&&$.target===T&&I&&(I.unobserve(t),cancelAnimationFrame(M),M=requestAnimationFrame(()=>{var W;(W=I)==null||W.observe(t)})),r()}),T&&!_&&I.observe(T),I.observe(t));let z,F=_?ah(e):null;_&&D();function D(){const q=ah(e);F&&!t5(F,q)&&r(),F=q,z=requestAnimationFrame(D)}return r(),()=>{var q;P.forEach($=>{a&&$.removeEventListener("scroll",r),u&&$.removeEventListener("resize",r)}),E==null||E(),(q=I)==null||q.disconnect(),I=null,_&&cancelAnimationFrame(z)}}const vG=U7,_G=q7,bG=B7,wG=G7,SG=V7,YM=z7,TG=W7,kG=(e,t,r)=>{const n=new Map,a={platform:gG,...r},u={...a.platform,_c:n};return F7(e,t,{...a,platform:u})};var CG=typeof document<"u",PG=function(){},h_=CG?U.useLayoutEffect:PG;function eb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!eb(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const u=a[n];if(!(u==="_owner"&&e.$$typeof)&&!eb(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function r5(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function QM(e,t){const r=r5(e);return Math.round(t*r)/r}function _2(e){const t=U.useRef(e);return h_(()=>{t.current=e}),t}function EG(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:u,floating:h}={},transform:o=!0,whileElementsMounted:_,open:T}=e,[P,E]=U.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[M,I]=U.useState(n);eb(M,n)||I(n);const[z,F]=U.useState(null),[D,q]=U.useState(null),$=U.useCallback(_e=>{_e!==he.current&&(he.current=_e,F(_e))},[]),W=U.useCallback(_e=>{_e!==pe.current&&(pe.current=_e,q(_e))},[]),te=u||z,se=h||D,he=U.useRef(null),pe=U.useRef(null),xe=U.useRef(P),Re=_!=null,Me=_2(_),pt=_2(a),Oe=_2(T),Ye=U.useCallback(()=>{if(!he.current||!pe.current)return;const _e={placement:t,strategy:r,middleware:M};pt.current&&(_e.platform=pt.current),kG(he.current,pe.current,_e).then(Le=>{const ft={...Le,isPositioned:Oe.current!==!1};Ge.current&&!eb(xe.current,ft)&&(xe.current=ft,ux.flushSync(()=>{E(ft)}))})},[M,t,r,pt,Oe]);h_(()=>{T===!1&&xe.current.isPositioned&&(xe.current.isPositioned=!1,E(_e=>({..._e,isPositioned:!1})))},[T]);const Ge=U.useRef(!1);h_(()=>(Ge.current=!0,()=>{Ge.current=!1}),[]),h_(()=>{if(te&&(he.current=te),se&&(pe.current=se),te&&se){if(Me.current)return Me.current(te,se,Ye);Ye()}},[te,se,Ye,Me,Re]);const rt=U.useMemo(()=>({reference:he,floating:pe,setReference:$,setFloating:W}),[$,W]),nt=U.useMemo(()=>({reference:te,floating:se}),[te,se]),Ve=U.useMemo(()=>{const _e={position:r,left:0,top:0};if(!nt.floating)return _e;const Le=QM(nt.floating,P.x),ft=QM(nt.floating,P.y);return o?{..._e,transform:"translate("+Le+"px, "+ft+"px)",...r5(nt.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Le,top:ft}},[r,o,nt.floating,P.x,P.y]);return U.useMemo(()=>({...P,update:Ye,refs:rt,elements:nt,floatingStyles:Ve}),[P,Ye,rt,nt,Ve])}const jG=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?YM({element:n.current,padding:a}).fn(r):{}:n?YM({element:n,padding:a}).fn(r):{}}}},AG=(e,t)=>({...vG(e),options:[e,t]}),MG=(e,t)=>({..._G(e),options:[e,t]}),NG=(e,t)=>({...TG(e),options:[e,t]}),IG=(e,t)=>({...bG(e),options:[e,t]}),RG=(e,t)=>({...wG(e),options:[e,t]}),DG=(e,t)=>({...SG(e),options:[e,t]}),OG=(e,t)=>({...jG(e),options:[e,t]});var LG="Arrow",n5=U.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...u}=e;return f.jsx(Dr.svg,{...u,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});n5.displayName=LG;var FG=n5;function LC(e){const[t,r]=U.useState(void 0);return tc(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const u=a[0];let h,o;if("borderBoxSize"in u){const _=u.borderBoxSize,T=Array.isArray(_)?_[0]:_;h=T.inlineSize,o=T.blockSize}else h=e.offsetWidth,o=e.offsetHeight;r({width:h,height:o})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var FC="Popper",[i5,Qb]=fl(FC),[zG,s5]=i5(FC),a5=e=>{const{__scopePopper:t,children:r}=e,[n,a]=U.useState(null);return f.jsx(zG,{scope:t,anchor:n,onAnchorChange:a,children:r})};a5.displayName=FC;var o5="PopperAnchor",l5=U.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,u=s5(o5,r),h=U.useRef(null),o=In(t,h);return U.useEffect(()=>{u.onAnchorChange((n==null?void 0:n.current)||h.current)}),n?null:f.jsx(Dr.div,{...a,ref:o})});l5.displayName=o5;var zC="PopperContent",[BG,VG]=i5(zC),c5=U.forwardRef((e,t)=>{var er,Yr,Zn,Rn,ri,vn;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:u="center",alignOffset:h=0,arrowPadding:o=0,avoidCollisions:_=!0,collisionBoundary:T=[],collisionPadding:P=0,sticky:E="partial",hideWhenDetached:M=!1,updatePositionStrategy:I="optimized",onPlaced:z,...F}=e,D=s5(zC,r),[q,$]=U.useState(null),W=In(t,Ni=>$(Ni)),[te,se]=U.useState(null),he=LC(te),pe=(he==null?void 0:he.width)??0,xe=(he==null?void 0:he.height)??0,Re=n+(u!=="center"?"-"+u:""),Me=typeof P=="number"?P:{top:0,right:0,bottom:0,left:0,...P},pt=Array.isArray(T)?T:[T],Oe=pt.length>0,Ye={padding:Me,boundary:pt.filter(UG),altBoundary:Oe},{refs:Ge,floatingStyles:rt,placement:nt,isPositioned:Ve,middlewareData:_e}=EG({strategy:"fixed",placement:Re,whileElementsMounted:(...Ni)=>xG(...Ni,{animationFrame:I==="always"}),elements:{reference:D.anchor},middleware:[AG({mainAxis:a+xe,alignmentAxis:h}),_&&MG({mainAxis:!0,crossAxis:!1,limiter:E==="partial"?NG():void 0,...Ye}),_&&IG({...Ye}),RG({...Ye,apply:({elements:Ni,rects:Cr,availableWidth:ni,availableHeight:xi})=>{const{width:Nr,height:vi}=Cr.reference,Dn=Ni.floating.style;Dn.setProperty("--radix-popper-available-width",`${ni}px`),Dn.setProperty("--radix-popper-available-height",`${xi}px`),Dn.setProperty("--radix-popper-anchor-width",`${Nr}px`),Dn.setProperty("--radix-popper-anchor-height",`${vi}px`)}}),te&&OG({element:te,padding:o}),qG({arrowWidth:pe,arrowHeight:xe}),M&&DG({strategy:"referenceHidden",...Ye})]}),[Le,ft]=h5(nt),yt=ko(z);tc(()=>{Ve&&(yt==null||yt())},[Ve,yt]);const wt=(er=_e.arrow)==null?void 0:er.x,Lt=(Yr=_e.arrow)==null?void 0:Yr.y,Wt=((Zn=_e.arrow)==null?void 0:Zn.centerOffset)!==0,[wr,kr]=U.useState();return tc(()=>{q&&kr(window.getComputedStyle(q).zIndex)},[q]),f.jsx("div",{ref:Ge.setFloating,"data-radix-popper-content-wrapper":"",style:{...rt,transform:Ve?rt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:wr,"--radix-popper-transform-origin":[(Rn=_e.transformOrigin)==null?void 0:Rn.x,(ri=_e.transformOrigin)==null?void 0:ri.y].join(" "),...((vn=_e.hide)==null?void 0:vn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:f.jsx(BG,{scope:r,placedSide:Le,onArrowChange:se,arrowX:wt,arrowY:Lt,shouldHideArrow:Wt,children:f.jsx(Dr.div,{"data-side":Le,"data-align":ft,...F,ref:W,style:{...F.style,animation:Ve?void 0:"none"}})})})});c5.displayName=zC;var u5="PopperArrow",$G={top:"bottom",right:"left",bottom:"top",left:"right"},d5=U.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,u=VG(u5,n),h=$G[u.placedSide];return f.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:f.jsx(FG,{...a,ref:r,style:{...a.style,display:"block"}})})});d5.displayName=u5;function UG(e){return e!==null}var qG=e=>({name:"transformOrigin",options:e,fn(t){var D,q,$;const{placement:r,rects:n,middlewareData:a}=t,h=((D=a.arrow)==null?void 0:D.centerOffset)!==0,o=h?0:e.arrowWidth,_=h?0:e.arrowHeight,[T,P]=h5(r),E={start:"0%",center:"50%",end:"100%"}[P],M=(((q=a.arrow)==null?void 0:q.x)??0)+o/2,I=((($=a.arrow)==null?void 0:$.y)??0)+_/2;let z="",F="";return T==="bottom"?(z=h?E:`${M}px`,F=`${-_}px`):T==="top"?(z=h?E:`${M}px`,F=`${n.floating.height+_}px`):T==="right"?(z=`${-_}px`,F=h?E:`${I}px`):T==="left"&&(z=`${n.floating.width+_}px`,F=h?E:`${I}px`),{data:{x:z,y:F}}}});function h5(e){const[t,r="center"]=e.split("-");return[t,r]}var WG=a5,BC=l5,p5=c5,f5=d5,[Xb,Pfe]=fl("Tooltip",[Qb]),VC=Qb(),m5="TooltipProvider",GG=700,XM="tooltip.open",[HG,g5]=Xb(m5),y5=e=>{const{__scopeTooltip:t,delayDuration:r=GG,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:u}=e,h=U.useRef(!0),o=U.useRef(!1),_=U.useRef(0);return U.useEffect(()=>{const T=_.current;return()=>window.clearTimeout(T)},[]),f.jsx(HG,{scope:t,isOpenDelayedRef:h,delayDuration:r,onOpen:U.useCallback(()=>{window.clearTimeout(_.current),h.current=!1},[]),onClose:U.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>h.current=!0,n)},[n]),isPointerInTransitRef:o,onPointerInTransitChange:U.useCallback(T=>{o.current=T},[]),disableHoverableContent:a,children:u})};y5.displayName=m5;var x5="Tooltip",[Efe,Jb]=Xb(x5),_T="TooltipTrigger",ZG=U.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Jb(_T,r),u=g5(_T,r),h=VC(r),o=U.useRef(null),_=In(t,o,a.onTriggerChange),T=U.useRef(!1),P=U.useRef(!1),E=U.useCallback(()=>T.current=!1,[]);return U.useEffect(()=>()=>document.removeEventListener("pointerup",E),[E]),f.jsx(BC,{asChild:!0,...h,children:f.jsx(Dr.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:_,onPointerMove:gr(e.onPointerMove,M=>{M.pointerType!=="touch"&&!P.current&&!u.isPointerInTransitRef.current&&(a.onTriggerEnter(),P.current=!0)}),onPointerLeave:gr(e.onPointerLeave,()=>{a.onTriggerLeave(),P.current=!1}),onPointerDown:gr(e.onPointerDown,()=>{a.open&&a.onClose(),T.current=!0,document.addEventListener("pointerup",E,{once:!0})}),onFocus:gr(e.onFocus,()=>{T.current||a.onOpen()}),onBlur:gr(e.onBlur,a.onClose),onClick:gr(e.onClick,a.onClose)})})});ZG.displayName=_T;var KG="TooltipPortal",[jfe,YG]=Xb(KG,{forceMount:void 0}),jf="TooltipContent",v5=U.forwardRef((e,t)=>{const r=YG(jf,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...u}=e,h=Jb(jf,e.__scopeTooltip);return f.jsx(ml,{present:n||h.open,children:h.disableHoverableContent?f.jsx(_5,{side:a,...u,ref:t}):f.jsx(QG,{side:a,...u,ref:t})})}),QG=U.forwardRef((e,t)=>{const r=Jb(jf,e.__scopeTooltip),n=g5(jf,e.__scopeTooltip),a=U.useRef(null),u=In(t,a),[h,o]=U.useState(null),{trigger:_,onClose:T}=r,P=a.current,{onPointerInTransitChange:E}=n,M=U.useCallback(()=>{o(null),E(!1)},[E]),I=U.useCallback((z,F)=>{const D=z.currentTarget,q={x:z.clientX,y:z.clientY},$=rH(q,D.getBoundingClientRect()),W=nH(q,$),te=iH(F.getBoundingClientRect()),se=aH([...W,...te]);o(se),E(!0)},[E]);return U.useEffect(()=>()=>M(),[M]),U.useEffect(()=>{if(_&&P){const z=D=>I(D,P),F=D=>I(D,_);return _.addEventListener("pointerleave",z),P.addEventListener("pointerleave",F),()=>{_.removeEventListener("pointerleave",z),P.removeEventListener("pointerleave",F)}}},[_,P,I,M]),U.useEffect(()=>{if(h){const z=F=>{const D=F.target,q={x:F.clientX,y:F.clientY},$=(_==null?void 0:_.contains(D))||(P==null?void 0:P.contains(D)),W=!sH(q,h);$?M():W&&(M(),T())};return document.addEventListener("pointermove",z),()=>document.removeEventListener("pointermove",z)}},[_,P,h,T,M]),f.jsx(_5,{...e,ref:u})}),[XG,JG]=Xb(x5,{isInside:!1}),eH=Qq("TooltipContent"),_5=U.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:u,onPointerDownOutside:h,...o}=e,_=Jb(jf,r),T=VC(r),{onClose:P}=_;return U.useEffect(()=>(document.addEventListener(XM,P),()=>document.removeEventListener(XM,P)),[P]),U.useEffect(()=>{if(_.trigger){const E=M=>{const I=M.target;I!=null&&I.contains(_.trigger)&&P()};return window.addEventListener("scroll",E,{capture:!0}),()=>window.removeEventListener("scroll",E,{capture:!0})}},[_.trigger,P]),f.jsx(hx,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:E=>E.preventDefault(),onDismiss:P,children:f.jsxs(p5,{"data-state":_.stateAttribute,...T,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(eH,{children:n}),f.jsx(XG,{scope:r,isInside:!0,children:f.jsx(_W,{id:_.contentId,role:"tooltip",children:a||n})})]})})});v5.displayName=jf;var b5="TooltipArrow",tH=U.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=VC(r);return JG(b5,r).isInside?null:f.jsx(f5,{...a,...n,ref:t})});tH.displayName=b5;function rH(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,n,a,u)){case u:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function nH(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function iH(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function sH(e,t){const{x:r,y:n}=e;let a=!1;for(let u=0,h=t.length-1;u<t.length;h=u++){const o=t[u],_=t[h],T=o.x,P=o.y,E=_.x,M=_.y;P>n!=M>n&&r<(E-T)*(n-P)/(M-P)+T&&(a=!a)}return a}function aH(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),oH(t)}function oH(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const u=t[t.length-1],h=t[t.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const u=r[r.length-1],h=r[r.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var lH=y5,w5=v5;const cH=lH,uH=U.forwardRef(({className:e,sideOffset:t=4,...r},n)=>f.jsx(w5,{ref:n,sideOffset:t,className:St("z-50 overflow-hidden rounded-lg border border-border/60 bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-lg","dark:border-border/40 dark:bg-popover/98 dark:shadow-xl dark:shadow-black/20","animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));uH.displayName=w5.displayName;var ew=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tw=typeof window>"u"||"Deno"in globalThis;function uo(){}function dH(e,t){return typeof e=="function"?e(t):e}function hH(e){return typeof e=="number"&&e>=0&&e!==1/0}function pH(e,t){return Math.max(e+(t||0)-Date.now(),0)}function bT(e,t){return typeof e=="function"?e(t):e}function fH(e,t){return typeof e=="function"?e(t):e}function JM(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:u,queryKey:h,stale:o}=e;if(h){if(n){if(t.queryHash!==$C(h,t.options))return!1}else if(!Fy(t.queryKey,h))return!1}if(r!=="all"){const _=t.isActive();if(r==="active"&&!_||r==="inactive"&&_)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||u&&!u(t))}function eN(e,t){const{exact:r,status:n,predicate:a,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(Ly(t.options.mutationKey)!==Ly(u))return!1}else if(!Fy(t.options.mutationKey,u))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function $C(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ly)(e)}function Ly(e){return JSON.stringify(e,(t,r)=>wT(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Fy(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Fy(e[r],t[r])):!1}function S5(e,t){if(e===t)return e;const r=tN(e)&&tN(t);if(r||wT(e)&&wT(t)){const n=r?e:Object.keys(e),a=n.length,u=r?t:Object.keys(t),h=u.length,o=r?[]:{},_=new Set(n);let T=0;for(let P=0;P<h;P++){const E=r?P:u[P];(!r&&_.has(E)||r)&&e[E]===void 0&&t[E]===void 0?(o[E]=void 0,T++):(o[E]=S5(e[E],t[E]),o[E]===e[E]&&e[E]!==void 0&&T++)}return a===h&&T===a?e:o}return t}function tN(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function wT(e){if(!rN(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!rN(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function rN(e){return Object.prototype.toString.call(e)==="[object Object]"}function mH(e){return new Promise(t=>{setTimeout(t,e)})}function gH(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?S5(e,t):t}function yH(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function xH(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var UC=Symbol();function T5(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===UC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var qd,Jc,df,TD,vH=(TD=class extends ew{constructor(){super();Ir(this,qd);Ir(this,Jc);Ir(this,df);dr(this,df,t=>{if(!tw&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){tt(this,Jc)||this.setEventListener(tt(this,df))}onUnsubscribe(){var t;this.hasListeners()||((t=tt(this,Jc))==null||t.call(this),dr(this,Jc,void 0))}setEventListener(t){var r;dr(this,df,t),(r=tt(this,Jc))==null||r.call(this),dr(this,Jc,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){tt(this,qd)!==t&&(dr(this,qd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof tt(this,qd)=="boolean"?tt(this,qd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},qd=new WeakMap,Jc=new WeakMap,df=new WeakMap,TD),k5=new vH,hf,eu,pf,kD,_H=(kD=class extends ew{constructor(){super();Ir(this,hf,!0);Ir(this,eu);Ir(this,pf);dr(this,pf,t=>{if(!tw&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){tt(this,eu)||this.setEventListener(tt(this,pf))}onUnsubscribe(){var t;this.hasListeners()||((t=tt(this,eu))==null||t.call(this),dr(this,eu,void 0))}setEventListener(t){var r;dr(this,pf,t),(r=tt(this,eu))==null||r.call(this),dr(this,eu,t(this.setOnline.bind(this)))}setOnline(t){tt(this,hf)!==t&&(dr(this,hf,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return tt(this,hf)}},hf=new WeakMap,eu=new WeakMap,pf=new WeakMap,kD),tb=new _H;function bH(){let e,t;const r=new Promise((a,u)=>{e=a,t=u});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}function wH(e){return Math.min(1e3*2**e,3e4)}function C5(e){return(e??"online")==="online"?tb.isOnline():!0}var P5=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function b2(e){return e instanceof P5}function E5(e){let t=!1,r=0,n=!1,a;const u=bH(),h=F=>{var D;n||(M(new P5(F)),(D=e.abort)==null||D.call(e))},o=()=>{t=!0},_=()=>{t=!1},T=()=>k5.isFocused()&&(e.networkMode==="always"||tb.isOnline())&&e.canRun(),P=()=>C5(e.networkMode)&&e.canRun(),E=F=>{var D;n||(n=!0,(D=e.onSuccess)==null||D.call(e,F),a==null||a(),u.resolve(F))},M=F=>{var D;n||(n=!0,(D=e.onError)==null||D.call(e,F),a==null||a(),u.reject(F))},I=()=>new Promise(F=>{var D;a=q=>{(n||T())&&F(q)},(D=e.onPause)==null||D.call(e)}).then(()=>{var F;a=void 0,n||(F=e.onContinue)==null||F.call(e)}),z=()=>{if(n)return;let F;const D=r===0?e.initialPromise:void 0;try{F=D??e.fn()}catch(q){F=Promise.reject(q)}Promise.resolve(F).then(E).catch(q=>{var he;if(n)return;const $=e.retry??(tw?0:3),W=e.retryDelay??wH,te=typeof W=="function"?W(r,q):W,se=$===!0||typeof $=="number"&&r<$||typeof $=="function"&&$(r,q);if(t||!se){M(q);return}r++,(he=e.onFail)==null||he.call(e,r,q),mH(te).then(()=>T()?void 0:I()).then(()=>{t?M(q):z()})})};return{promise:u,cancel:h,continue:()=>(a==null||a(),u),cancelRetry:o,continueRetry:_,canStart:P,start:()=>(P()?z():I().then(z),u)}}var SH=e=>setTimeout(e,0);function TH(){let e=[],t=0,r=o=>{o()},n=o=>{o()},a=SH;const u=o=>{t?e.push(o):a(()=>{r(o)})},h=()=>{const o=e;e=[],o.length&&a(()=>{n(()=>{o.forEach(_=>{r(_)})})})};return{batch:o=>{let _;t++;try{_=o()}finally{t--,t||h()}return _},batchCalls:o=>(..._)=>{u(()=>{o(..._)})},schedule:u,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{a=o}}}var Ps=TH(),Wd,CD,j5=(CD=class{constructor(){Ir(this,Wd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hH(this.gcTime)&&dr(this,Wd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(tw?1/0:5*60*1e3))}clearGcTimeout(){tt(this,Wd)&&(clearTimeout(tt(this,Wd)),dr(this,Wd,void 0))}},Wd=new WeakMap,CD),ff,Gd,Ia,Hd,fs,nx,Zd,po,Ul,PD,kH=(PD=class extends j5{constructor(t){super();Ir(this,po);Ir(this,ff);Ir(this,Gd);Ir(this,Ia);Ir(this,Hd);Ir(this,fs);Ir(this,nx);Ir(this,Zd);dr(this,Zd,!1),dr(this,nx,t.defaultOptions),this.setOptions(t.options),this.observers=[],dr(this,Hd,t.client),dr(this,Ia,tt(this,Hd).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,dr(this,ff,PH(this.options)),this.state=t.state??tt(this,ff),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=tt(this,fs))==null?void 0:t.promise}setOptions(t){this.options={...tt(this,nx),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&tt(this,Ia).remove(this)}setData(t,r){const n=gH(this.state.data,t,this.options);return ds(this,po,Ul).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){ds(this,po,Ul).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=tt(this,fs))==null?void 0:n.promise;return(a=tt(this,fs))==null||a.cancel(t),r?r.then(uo).catch(uo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(tt(this,ff))}isActive(){return this.observers.some(t=>fH(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===UC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>bT(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!pH(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=tt(this,fs))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=tt(this,fs))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),tt(this,Ia).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(tt(this,fs)&&(tt(this,Zd)?tt(this,fs).cancel({revert:!0}):tt(this,fs).cancelRetry()),this.scheduleGc()),tt(this,Ia).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ds(this,po,Ul).call(this,{type:"invalidate"})}fetch(t,r){var T,P,E;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(tt(this,fs))return tt(this,fs).continueRetry(),tt(this,fs).promise}if(t&&this.setOptions(t),!this.options.queryFn){const M=this.observers.find(I=>I.options.queryFn);M&&this.setOptions(M.options)}const n=new AbortController,a=M=>{Object.defineProperty(M,"signal",{enumerable:!0,get:()=>(dr(this,Zd,!0),n.signal)})},u=()=>{const M=T5(this.options,r),z=(()=>{const F={client:tt(this,Hd),queryKey:this.queryKey,meta:this.meta};return a(F),F})();return dr(this,Zd,!1),this.options.persister?this.options.persister(M,z,this):M(z)},o=(()=>{const M={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:tt(this,Hd),state:this.state,fetchFn:u};return a(M),M})();(T=this.options.behavior)==null||T.onFetch(o,this),dr(this,Gd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((P=o.fetchOptions)==null?void 0:P.meta))&&ds(this,po,Ul).call(this,{type:"fetch",meta:(E=o.fetchOptions)==null?void 0:E.meta});const _=M=>{var I,z,F,D;b2(M)&&M.silent||ds(this,po,Ul).call(this,{type:"error",error:M}),b2(M)||((z=(I=tt(this,Ia).config).onError)==null||z.call(I,M,this),(D=(F=tt(this,Ia).config).onSettled)==null||D.call(F,this.state.data,M,this)),this.scheduleGc()};return dr(this,fs,E5({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:n.abort.bind(n),onSuccess:M=>{var I,z,F,D;if(M===void 0){_(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(M)}catch(q){_(q);return}(z=(I=tt(this,Ia).config).onSuccess)==null||z.call(I,M,this),(D=(F=tt(this,Ia).config).onSettled)==null||D.call(F,M,this.state.error,this),this.scheduleGc()},onError:_,onFail:(M,I)=>{ds(this,po,Ul).call(this,{type:"failed",failureCount:M,error:I})},onPause:()=>{ds(this,po,Ul).call(this,{type:"pause"})},onContinue:()=>{ds(this,po,Ul).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),tt(this,fs).start()}},ff=new WeakMap,Gd=new WeakMap,Ia=new WeakMap,Hd=new WeakMap,fs=new WeakMap,nx=new WeakMap,Zd=new WeakMap,po=new WeakSet,Ul=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...CH(n.data,this.options),fetchMeta:t.meta??null};case"success":return dr(this,Gd,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return b2(a)&&a.revert&&tt(this,Gd)?{...tt(this,Gd),fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Ps.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),tt(this,Ia).notify({query:this,type:"updated",action:t})})},PD);function CH(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:C5(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function PH(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Yo,ED,EH=(ED=class extends ew{constructor(t={}){super();Ir(this,Yo);this.config=t,dr(this,Yo,new Map)}build(t,r,n){const a=r.queryKey,u=r.queryHash??$C(a,r);let h=this.get(u);return h||(h=new kH({client:t,queryKey:a,queryHash:u,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(h)),h}add(t){tt(this,Yo).has(t.queryHash)||(tt(this,Yo).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=tt(this,Yo).get(t.queryHash);r&&(t.destroy(),r===t&&tt(this,Yo).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ps.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return tt(this,Yo).get(t)}getAll(){return[...tt(this,Yo).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>JM(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>JM(t,n)):r}notify(t){Ps.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ps.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ps.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Yo=new WeakMap,ED),Qo,Ss,Kd,Xo,$c,jD,jH=(jD=class extends j5{constructor(t){super();Ir(this,Xo);Ir(this,Qo);Ir(this,Ss);Ir(this,Kd);this.mutationId=t.mutationId,dr(this,Ss,t.mutationCache),dr(this,Qo,[]),this.state=t.state||AH(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){tt(this,Qo).includes(t)||(tt(this,Qo).push(t),this.clearGcTimeout(),tt(this,Ss).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){dr(this,Qo,tt(this,Qo).filter(r=>r!==t)),this.scheduleGc(),tt(this,Ss).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){tt(this,Qo).length||(this.state.status==="pending"?this.scheduleGc():tt(this,Ss).remove(this))}continue(){var t;return((t=tt(this,Kd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,h,o,_,T,P,E,M,I,z,F,D,q,$,W,te,se,he,pe,xe;const r=()=>{ds(this,Xo,$c).call(this,{type:"continue"})};dr(this,Kd,E5({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Re,Me)=>{ds(this,Xo,$c).call(this,{type:"failed",failureCount:Re,error:Me})},onPause:()=>{ds(this,Xo,$c).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>tt(this,Ss).canRun(this)}));const n=this.state.status==="pending",a=!tt(this,Kd).canStart();try{if(n)r();else{ds(this,Xo,$c).call(this,{type:"pending",variables:t,isPaused:a}),await((h=(u=tt(this,Ss).config).onMutate)==null?void 0:h.call(u,t,this));const Me=await((_=(o=this.options).onMutate)==null?void 0:_.call(o,t));Me!==this.state.context&&ds(this,Xo,$c).call(this,{type:"pending",context:Me,variables:t,isPaused:a})}const Re=await tt(this,Kd).start();return await((P=(T=tt(this,Ss).config).onSuccess)==null?void 0:P.call(T,Re,t,this.state.context,this)),await((M=(E=this.options).onSuccess)==null?void 0:M.call(E,Re,t,this.state.context)),await((z=(I=tt(this,Ss).config).onSettled)==null?void 0:z.call(I,Re,null,this.state.variables,this.state.context,this)),await((D=(F=this.options).onSettled)==null?void 0:D.call(F,Re,null,t,this.state.context)),ds(this,Xo,$c).call(this,{type:"success",data:Re}),Re}catch(Re){try{throw await(($=(q=tt(this,Ss).config).onError)==null?void 0:$.call(q,Re,t,this.state.context,this)),await((te=(W=this.options).onError)==null?void 0:te.call(W,Re,t,this.state.context)),await((he=(se=tt(this,Ss).config).onSettled)==null?void 0:he.call(se,void 0,Re,this.state.variables,this.state.context,this)),await((xe=(pe=this.options).onSettled)==null?void 0:xe.call(pe,void 0,Re,t,this.state.context)),Re}finally{ds(this,Xo,$c).call(this,{type:"error",error:Re})}}finally{tt(this,Ss).runNext(this)}}},Qo=new WeakMap,Ss=new WeakMap,Kd=new WeakMap,Xo=new WeakSet,$c=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ps.batch(()=>{tt(this,Qo).forEach(n=>{n.onMutationUpdate(t)}),tt(this,Ss).notify({mutation:this,type:"updated",action:t})})},jD);function AH(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Hl,fo,ix,AD,MH=(AD=class extends ew{constructor(t={}){super();Ir(this,Hl);Ir(this,fo);Ir(this,ix);this.config=t,dr(this,Hl,new Set),dr(this,fo,new Map),dr(this,ix,0)}build(t,r,n){const a=new jH({mutationCache:this,mutationId:++l0(this,ix)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){tt(this,Hl).add(t);const r=M0(t);if(typeof r=="string"){const n=tt(this,fo).get(r);n?n.push(t):tt(this,fo).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(tt(this,Hl).delete(t)){const r=M0(t);if(typeof r=="string"){const n=tt(this,fo).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&tt(this,fo).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=M0(t);if(typeof r=="string"){const n=tt(this,fo).get(r),a=n==null?void 0:n.find(u=>u.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=M0(t);if(typeof r=="string"){const a=(n=tt(this,fo).get(r))==null?void 0:n.find(u=>u!==t&&u.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ps.batch(()=>{tt(this,Hl).forEach(t=>{this.notify({type:"removed",mutation:t})}),tt(this,Hl).clear(),tt(this,fo).clear()})}getAll(){return Array.from(tt(this,Hl))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>eN(r,n))}findAll(t={}){return this.getAll().filter(r=>eN(t,r))}notify(t){Ps.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ps.batch(()=>Promise.all(t.map(r=>r.continue().catch(uo))))}},Hl=new WeakMap,fo=new WeakMap,ix=new WeakMap,AD);function M0(e){var t;return(t=e.options.scope)==null?void 0:t.id}function nN(e){return{onFetch:(t,r)=>{var P,E,M,I,z;const n=t.options,a=(M=(E=(P=t.fetchOptions)==null?void 0:P.meta)==null?void 0:E.fetchMore)==null?void 0:M.direction,u=((I=t.state.data)==null?void 0:I.pages)||[],h=((z=t.state.data)==null?void 0:z.pageParams)||[];let o={pages:[],pageParams:[]},_=0;const T=async()=>{let F=!1;const D=W=>{Object.defineProperty(W,"signal",{enumerable:!0,get:()=>(t.signal.aborted?F=!0:t.signal.addEventListener("abort",()=>{F=!0}),t.signal)})},q=T5(t.options,t.fetchOptions),$=async(W,te,se)=>{if(F)return Promise.reject();if(te==null&&W.pages.length)return Promise.resolve(W);const pe=(()=>{const pt={client:t.client,queryKey:t.queryKey,pageParam:te,direction:se?"backward":"forward",meta:t.options.meta};return D(pt),pt})(),xe=await q(pe),{maxPages:Re}=t.options,Me=se?xH:yH;return{pages:Me(W.pages,xe,Re),pageParams:Me(W.pageParams,te,Re)}};if(a&&u.length){const W=a==="backward",te=W?NH:iN,se={pages:u,pageParams:h},he=te(n,se);o=await $(se,he,W)}else{const W=e??u.length;do{const te=_===0?h[0]??n.initialPageParam:iN(n,o);if(_>0&&te==null)break;o=await $(o,te),_++}while(_<W)}return o};t.options.persister?t.fetchFn=()=>{var F,D;return(D=(F=t.options).persister)==null?void 0:D.call(F,T,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=T}}}function iN(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function NH(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var Un,tu,ru,mf,gf,nu,yf,xf,MD,IH=(MD=class{constructor(e={}){Ir(this,Un);Ir(this,tu);Ir(this,ru);Ir(this,mf);Ir(this,gf);Ir(this,nu);Ir(this,yf);Ir(this,xf);dr(this,Un,e.queryCache||new EH),dr(this,tu,e.mutationCache||new MH),dr(this,ru,e.defaultOptions||{}),dr(this,mf,new Map),dr(this,gf,new Map),dr(this,nu,0)}mount(){l0(this,nu)._++,tt(this,nu)===1&&(dr(this,yf,k5.subscribe(async e=>{e&&(await this.resumePausedMutations(),tt(this,Un).onFocus())})),dr(this,xf,tb.subscribe(async e=>{e&&(await this.resumePausedMutations(),tt(this,Un).onOnline())})))}unmount(){var e,t;l0(this,nu)._--,tt(this,nu)===0&&((e=tt(this,yf))==null||e.call(this),dr(this,yf,void 0),(t=tt(this,xf))==null||t.call(this),dr(this,xf,void 0))}isFetching(e){return tt(this,Un).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return tt(this,tu).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=tt(this,Un).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=tt(this,Un).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(bT(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return tt(this,Un).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=tt(this,Un).get(n.queryHash),u=a==null?void 0:a.state.data,h=dH(t,u);if(h!==void 0)return tt(this,Un).build(this,n).setData(h,{...r,manual:!0})}setQueriesData(e,t,r){return Ps.batch(()=>tt(this,Un).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=tt(this,Un).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=tt(this,Un);Ps.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=tt(this,Un);return Ps.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ps.batch(()=>tt(this,Un).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(uo).catch(uo)}invalidateQueries(e,t={}){return Ps.batch(()=>(tt(this,Un).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ps.batch(()=>tt(this,Un).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let u=a.fetch(void 0,r);return r.throwOnError||(u=u.catch(uo)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(n).then(uo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=tt(this,Un).build(this,t);return r.isStaleByTime(bT(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(uo).catch(uo)}fetchInfiniteQuery(e){return e.behavior=nN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(uo).catch(uo)}ensureInfiniteQueryData(e){return e.behavior=nN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return tb.isOnline()?tt(this,tu).resumePausedMutations():Promise.resolve()}getQueryCache(){return tt(this,Un)}getMutationCache(){return tt(this,tu)}getDefaultOptions(){return tt(this,ru)}setDefaultOptions(e){dr(this,ru,e)}setQueryDefaults(e,t){tt(this,mf).set(Ly(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...tt(this,mf).values()],r={};return t.forEach(n=>{Fy(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){tt(this,gf).set(Ly(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...tt(this,gf).values()],r={};return t.forEach(n=>{Fy(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...tt(this,ru).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=$C(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===UC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...tt(this,ru).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){tt(this,Un).clear(),tt(this,tu).clear()}},Un=new WeakMap,tu=new WeakMap,ru=new WeakMap,mf=new WeakMap,gf=new WeakMap,nu=new WeakMap,yf=new WeakMap,xf=new WeakMap,MD),RH=U.createContext(void 0),DH=({client:e,children:t})=>(U.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx(RH.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(this,arguments)}var au;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(au||(au={}));const sN="popstate";function OH(e){e===void 0&&(e={});function t(n,a){let{pathname:u,search:h,hash:o}=n.location;return ST("",{pathname:u,search:h,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:rb(a)}return FH(t,r,null,e)}function ei(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function A5(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LH(){return Math.random().toString(36).substr(2,8)}function aN(e,t){return{usr:e.state,key:e.key,idx:t}}function ST(e,t,r,n){return r===void 0&&(r=null),zy({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zf(t):t,{state:r,key:t&&t.key||n||LH()})}function rb(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Zf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function FH(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:u=!1}=n,h=a.history,o=au.Pop,_=null,T=P();T==null&&(T=0,h.replaceState(zy({},h.state,{idx:T}),""));function P(){return(h.state||{idx:null}).idx}function E(){o=au.Pop;let D=P(),q=D==null?null:D-T;T=D,_&&_({action:o,location:F.location,delta:q})}function M(D,q){o=au.Push;let $=ST(F.location,D,q);T=P()+1;let W=aN($,T),te=F.createHref($);try{h.pushState(W,"",te)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;a.location.assign(te)}u&&_&&_({action:o,location:F.location,delta:1})}function I(D,q){o=au.Replace;let $=ST(F.location,D,q);T=P();let W=aN($,T),te=F.createHref($);h.replaceState(W,"",te),u&&_&&_({action:o,location:F.location,delta:0})}function z(D){let q=a.location.origin!=="null"?a.location.origin:a.location.href,$=typeof D=="string"?D:rb(D);return $=$.replace(/ $/,"%20"),ei(q,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,q)}let F={get action(){return o},get location(){return e(a,h)},listen(D){if(_)throw new Error("A history only accepts one active listener");return a.addEventListener(sN,E),_=D,()=>{a.removeEventListener(sN,E),_=null}},createHref(D){return t(a,D)},createURL:z,encodeLocation(D){let q=z(D);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:M,replace:I,go(D){return h.go(D)}};return F}var oN;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(oN||(oN={}));function zH(e,t,r){return r===void 0&&(r="/"),BH(e,t,r,!1)}function BH(e,t,r,n){let a=typeof t=="string"?Zf(t):t,u=qC(a.pathname||"/",r);if(u==null)return null;let h=M5(e);VH(h);let o=null;for(let _=0;o==null&&_<h.length;++_){let T=XH(u);o=YH(h[_],T,n)}return o}function M5(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(u,h,o)=>{let _={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};_.relativePath.startsWith("/")&&(ei(_.relativePath.startsWith(n),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(n.length));let T=yu([n,_.relativePath]),P=r.concat(_);u.children&&u.children.length>0&&(ei(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+T+'".')),M5(u.children,t,P,T)),!(u.path==null&&!u.index)&&t.push({path:T,score:ZH(T,u.index),routesMeta:P})};return e.forEach((u,h)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))a(u,h);else for(let _ of N5(u.path))a(u,h,_)}),t}function N5(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),u=r.replace(/\?$/,"");if(n.length===0)return a?[u,""]:[u];let h=N5(n.join("/")),o=[];return o.push(...h.map(_=>_===""?u:[u,_].join("/"))),a&&o.push(...h),o.map(_=>e.startsWith("/")&&_===""?"/":_)}function VH(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:KH(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $H=/^:[\w-]+$/,UH=3,qH=2,WH=1,GH=10,HH=-2,lN=e=>e==="*";function ZH(e,t){let r=e.split("/"),n=r.length;return r.some(lN)&&(n+=HH),t&&(n+=qH),r.filter(a=>!lN(a)).reduce((a,u)=>a+($H.test(u)?UH:u===""?WH:GH),n)}function KH(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function YH(e,t,r){let{routesMeta:n}=e,a={},u="/",h=[];for(let o=0;o<n.length;++o){let _=n[o],T=o===n.length-1,P=u==="/"?t:t.slice(u.length)||"/",E=cN({path:_.relativePath,caseSensitive:_.caseSensitive,end:T},P),M=_.route;if(!E&&T&&r&&!n[n.length-1].route.index&&(E=cN({path:_.relativePath,caseSensitive:_.caseSensitive,end:!1},P)),!E)return null;Object.assign(a,E.params),h.push({params:a,pathname:yu([u,E.pathname]),pathnameBase:rZ(yu([u,E.pathnameBase])),route:M}),E.pathnameBase!=="/"&&(u=yu([u,E.pathnameBase]))}return h}function cN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=QH(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:n.reduce((T,P,E)=>{let{paramName:M,isOptional:I}=P;if(M==="*"){let F=o[E]||"";h=u.slice(0,u.length-F.length).replace(/(.)\/+$/,"$1")}const z=o[E];return I&&!z?T[M]=void 0:T[M]=(z||"").replace(/%2F/g,"/"),T},{}),pathname:u,pathnameBase:h,pattern:e}}function QH(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),A5(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,o,_)=>(n.push({paramName:o,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function XH(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return A5(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qC(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function JH(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Zf(e):e;return{pathname:r?r.startsWith("/")?r:eZ(r,t):t,search:nZ(n),hash:iZ(a)}}function eZ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function w2(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tZ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function WC(e,t){let r=tZ(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function GC(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Zf(e):(a=zy({},e),ei(!a.pathname||!a.pathname.includes("?"),w2("?","pathname","search",a)),ei(!a.pathname||!a.pathname.includes("#"),w2("#","pathname","hash",a)),ei(!a.search||!a.search.includes("#"),w2("#","search","hash",a)));let u=e===""||a.pathname==="",h=u?"/":a.pathname,o;if(h==null)o=r;else{let E=t.length-1;if(!n&&h.startsWith("..")){let M=h.split("/");for(;M[0]==="..";)M.shift(),E-=1;a.pathname=M.join("/")}o=E>=0?t[E]:"/"}let _=JH(a,o),T=h&&h!=="/"&&h.endsWith("/"),P=(u||h===".")&&r.endsWith("/");return!_.pathname.endsWith("/")&&(T||P)&&(_.pathname+="/"),_}const yu=e=>e.join("/").replace(/\/\/+/g,"/"),rZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sZ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const I5=["post","put","patch","delete"];new Set(I5);const aZ=["get",...I5];new Set(aZ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function By(){return By=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},By.apply(this,arguments)}const HC=U.createContext(null),oZ=U.createContext(null),Au=U.createContext(null),rw=U.createContext(null),ac=U.createContext({outlet:null,matches:[],isDataRoute:!1}),R5=U.createContext(null);function lZ(e,t){let{relative:r}=t===void 0?{}:t;Kf()||ei(!1);let{basename:n,navigator:a}=U.useContext(Au),{hash:u,pathname:h,search:o}=L5(e,{relative:r}),_=h;return n!=="/"&&(_=h==="/"?n:yu([n,h])),a.createHref({pathname:_,search:o,hash:u})}function Kf(){return U.useContext(rw)!=null}function oc(){return Kf()||ei(!1),U.useContext(rw).location}function D5(e){U.useContext(Au).static||U.useLayoutEffect(e)}function Yf(){let{isDataRoute:e}=U.useContext(ac);return e?bZ():cZ()}function cZ(){Kf()||ei(!1);let e=U.useContext(HC),{basename:t,future:r,navigator:n}=U.useContext(Au),{matches:a}=U.useContext(ac),{pathname:u}=oc(),h=JSON.stringify(WC(a,r.v7_relativeSplatPath)),o=U.useRef(!1);return D5(()=>{o.current=!0}),U.useCallback(function(T,P){if(P===void 0&&(P={}),!o.current)return;if(typeof T=="number"){n.go(T);return}let E=GC(T,JSON.parse(h),u,P.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:yu([t,E.pathname])),(P.replace?n.replace:n.push)(E,P.state,P)},[t,n,h,u,e])}function O5(){let{matches:e}=U.useContext(ac),t=e[e.length-1];return t?t.params:{}}function L5(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=U.useContext(Au),{matches:a}=U.useContext(ac),{pathname:u}=oc(),h=JSON.stringify(WC(a,n.v7_relativeSplatPath));return U.useMemo(()=>GC(e,JSON.parse(h),u,r==="path"),[e,h,u,r])}function uZ(e,t){return dZ(e,t)}function dZ(e,t,r,n){Kf()||ei(!1);let{navigator:a}=U.useContext(Au),{matches:u}=U.useContext(ac),h=u[u.length-1],o=h?h.params:{};h&&h.pathname;let _=h?h.pathnameBase:"/";h&&h.route;let T=oc(),P;if(t){var E;let D=typeof t=="string"?Zf(t):t;_==="/"||(E=D.pathname)!=null&&E.startsWith(_)||ei(!1),P=D}else P=T;let M=P.pathname||"/",I=M;if(_!=="/"){let D=_.replace(/^\//,"").split("/");I="/"+M.replace(/^\//,"").split("/").slice(D.length).join("/")}let z=zH(e,{pathname:I}),F=gZ(z&&z.map(D=>Object.assign({},D,{params:Object.assign({},o,D.params),pathname:yu([_,a.encodeLocation?a.encodeLocation(D.pathname).pathname:D.pathname]),pathnameBase:D.pathnameBase==="/"?_:yu([_,a.encodeLocation?a.encodeLocation(D.pathnameBase).pathname:D.pathnameBase])})),u,r,n);return t&&F?U.createElement(rw.Provider,{value:{location:By({pathname:"/",search:"",hash:"",state:null,key:"default"},P),navigationType:au.Pop}},F):F}function hZ(){let e=_Z(),t=sZ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},t),r?U.createElement("pre",{style:a},r):null,null)}const pZ=U.createElement(hZ,null);class fZ extends U.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?U.createElement(ac.Provider,{value:this.props.routeContext},U.createElement(R5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mZ(e){let{routeContext:t,match:r,children:n}=e,a=U.useContext(HC);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),U.createElement(ac.Provider,{value:t},n)}function gZ(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var u;if(!r)return null;if(r.errors)e=r.matches;else if((u=n)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let P=h.findIndex(E=>E.route.id&&(o==null?void 0:o[E.route.id])!==void 0);P>=0||ei(!1),h=h.slice(0,Math.min(h.length,P+1))}let _=!1,T=-1;if(r&&n&&n.v7_partialHydration)for(let P=0;P<h.length;P++){let E=h[P];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(T=P),E.route.id){let{loaderData:M,errors:I}=r,z=E.route.loader&&M[E.route.id]===void 0&&(!I||I[E.route.id]===void 0);if(E.route.lazy||z){_=!0,T>=0?h=h.slice(0,T+1):h=[h[0]];break}}}return h.reduceRight((P,E,M)=>{let I,z=!1,F=null,D=null;r&&(I=o&&E.route.id?o[E.route.id]:void 0,F=E.route.errorElement||pZ,_&&(T<0&&M===0?(z=!0,D=null):T===M&&(z=!0,D=E.route.hydrateFallbackElement||null)));let q=t.concat(h.slice(0,M+1)),$=()=>{let W;return I?W=F:z?W=D:E.route.Component?W=U.createElement(E.route.Component,null):E.route.element?W=E.route.element:W=P,U.createElement(mZ,{match:E,routeContext:{outlet:P,matches:q,isDataRoute:r!=null},children:W})};return r&&(E.route.ErrorBoundary||E.route.errorElement||M===0)?U.createElement(fZ,{location:r.location,revalidation:r.revalidation,component:F,error:I,children:$(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):$()},null)}var F5=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(F5||{}),nb=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nb||{});function yZ(e){let t=U.useContext(HC);return t||ei(!1),t}function xZ(e){let t=U.useContext(oZ);return t||ei(!1),t}function vZ(e){let t=U.useContext(ac);return t||ei(!1),t}function z5(e){let t=vZ(),r=t.matches[t.matches.length-1];return r.route.id||ei(!1),r.route.id}function _Z(){var e;let t=U.useContext(R5),r=xZ(nb.UseRouteError),n=z5(nb.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function bZ(){let{router:e}=yZ(F5.UseNavigateStable),t=z5(nb.UseNavigateStable),r=U.useRef(!1);return D5(()=>{r.current=!0}),U.useCallback(function(a,u){u===void 0&&(u={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,By({fromRouteId:t},u)))},[e,t])}function wZ(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function SZ(e){let{to:t,replace:r,state:n,relative:a}=e;Kf()||ei(!1);let{future:u,static:h}=U.useContext(Au),{matches:o}=U.useContext(ac),{pathname:_}=oc(),T=Yf(),P=GC(t,WC(o,u.v7_relativeSplatPath),_,a==="path"),E=JSON.stringify(P);return U.useEffect(()=>T(JSON.parse(E),{replace:r,state:n,relative:a}),[T,E,a,r,n]),null}function ki(e){ei(!1)}function TZ(e){let{basename:t="/",children:r=null,location:n,navigationType:a=au.Pop,navigator:u,static:h=!1,future:o}=e;Kf()&&ei(!1);let _=t.replace(/^\/*/,"/"),T=U.useMemo(()=>({basename:_,navigator:u,static:h,future:By({v7_relativeSplatPath:!1},o)}),[_,o,u,h]);typeof n=="string"&&(n=Zf(n));let{pathname:P="/",search:E="",hash:M="",state:I=null,key:z="default"}=n,F=U.useMemo(()=>{let D=qC(P,_);return D==null?null:{location:{pathname:D,search:E,hash:M,state:I,key:z},navigationType:a}},[_,P,E,M,I,z,a]);return F==null?null:U.createElement(Au.Provider,{value:T},U.createElement(rw.Provider,{children:r,value:F}))}function kZ(e){let{children:t,location:r}=e;return uZ(TT(t),r)}new Promise(()=>{});function TT(e,t){t===void 0&&(t=[]);let r=[];return U.Children.forEach(e,(n,a)=>{if(!U.isValidElement(n))return;let u=[...t,a];if(n.type===U.Fragment){r.push.apply(r,TT(n.props.children,u));return}n.type!==ki&&ei(!1),!n.props.index||!n.props.children||ei(!1);let h={id:n.props.id||u.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(h.children=TT(n.props.children,u)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kT(){return kT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kT.apply(this,arguments)}function CZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function PZ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function EZ(e,t){return e.button===0&&(!t||t==="_self")&&!PZ(e)}const jZ=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],AZ="6";try{window.__reactRouterVersion=AZ}catch{}const MZ="startTransition",uN=Ak[MZ];function NZ(e){let{basename:t,children:r,future:n,window:a}=e,u=U.useRef();u.current==null&&(u.current=OH({window:a,v5Compat:!0}));let h=u.current,[o,_]=U.useState({action:h.action,location:h.location}),{v7_startTransition:T}=n||{},P=U.useCallback(E=>{T&&uN?uN(()=>_(E)):_(E)},[_,T]);return U.useLayoutEffect(()=>h.listen(P),[h,P]),U.useEffect(()=>wZ(n),[n]),U.createElement(TZ,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:h,future:n})}const IZ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RZ=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gt=U.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:u,replace:h,state:o,target:_,to:T,preventScrollReset:P,viewTransition:E}=t,M=CZ(t,jZ),{basename:I}=U.useContext(Au),z,F=!1;if(typeof T=="string"&&RZ.test(T)&&(z=T,IZ))try{let W=new URL(window.location.href),te=T.startsWith("//")?new URL(W.protocol+T):new URL(T),se=qC(te.pathname,I);te.origin===W.origin&&se!=null?T=se+te.search+te.hash:F=!0}catch{}let D=lZ(T,{relative:a}),q=DZ(T,{replace:h,state:o,target:_,preventScrollReset:P,relative:a,viewTransition:E});function $(W){n&&n(W),W.defaultPrevented||q(W)}return U.createElement("a",kT({},M,{href:z||D,onClick:F||u?n:$,ref:r,target:_}))});var dN;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(dN||(dN={}));var hN;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hN||(hN={}));function DZ(e,t){let{target:r,replace:n,state:a,preventScrollReset:u,relative:h,viewTransition:o}=t===void 0?{}:t,_=Yf(),T=oc(),P=L5(e,{relative:h});return U.useCallback(E=>{if(EZ(E,r)){E.preventDefault();let M=n!==void 0?n:rb(T)===rb(P);_(e,{replace:M,state:a,preventScrollReset:u,relative:h,viewTransition:o})}},[T,_,P,n,a,r,e,u,h,o])}const ZC=U.createContext({});function Qf(e){const t=U.useRef(null);return t.current===null&&(t.current=e()),t.current}const KC=typeof window<"u",nw=KC?U.useLayoutEffect:U.useEffect,iw=U.createContext(null);function YC(e,t){e.indexOf(t)===-1&&e.push(t)}function QC(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const dl=(e,t,r)=>r>t?t:r<e?e:r;let Af=()=>{};const ic={},B5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function V5(e){return typeof e=="object"&&e!==null}const $5=e=>/^0[^.\s]+$/u.test(e);function XC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Ys=e=>e,OZ=(e,t)=>r=>t(e(r)),yx=(...e)=>e.reduce(OZ),Mf=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class JC{constructor(){this.subscriptions=[]}add(t){return YC(this.subscriptions,t),()=>QC(this.subscriptions,t)}notify(t,r,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,n);else for(let u=0;u<a;u++){const h=this.subscriptions[u];h&&h(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ol=e=>e*1e3,Ba=e=>e/1e3;function eP(e,t){return t?e*(1e3/t):0}const U5=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,LZ=1e-7,FZ=12;function zZ(e,t,r,n,a){let u,h,o=0;do h=t+(r-t)/2,u=U5(h,n,a)-e,u>0?r=h:t=h;while(Math.abs(u)>LZ&&++o<FZ);return h}function xx(e,t,r,n){if(e===t&&r===n)return Ys;const a=u=>zZ(u,0,1,e,r);return u=>u===0||u===1?u:U5(a(u),t,n)}const q5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,W5=e=>t=>1-e(1-t),G5=xx(.33,1.53,.69,.99),tP=W5(G5),H5=q5(tP),Z5=e=>(e*=2)<1?.5*tP(e):.5*(2-Math.pow(2,-10*(e-1))),rP=e=>1-Math.sin(Math.acos(e)),K5=W5(rP),Y5=q5(rP),BZ=xx(.42,0,1,1),VZ=xx(0,0,.58,1),Q5=xx(.42,0,.58,1),$Z=e=>Array.isArray(e)&&typeof e[0]!="number",X5=e=>Array.isArray(e)&&typeof e[0]=="number",pN={linear:Ys,easeIn:BZ,easeInOut:Q5,easeOut:VZ,circIn:rP,circInOut:Y5,circOut:K5,backIn:tP,backInOut:H5,backOut:G5,anticipate:Z5},UZ=e=>typeof e=="string",fN=e=>{if(X5(e)){Af(e.length===4);const[t,r,n,a]=e;return xx(t,r,n,a)}else if(UZ(e))return Af(pN[e]!==void 0),pN[e];return e},N0=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],mN={value:null,addProjectionMetrics:null};function qZ(e,t){let r=new Set,n=new Set,a=!1,u=!1;const h=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},_=0;function T(E){h.has(E)&&(P.schedule(E),e()),_++,E(o)}const P={schedule:(E,M=!1,I=!1)=>{const F=I&&a?r:n;return M&&h.add(E),F.has(E)||F.add(E),E},cancel:E=>{n.delete(E),h.delete(E)},process:E=>{if(o=E,a){u=!0;return}a=!0,[r,n]=[n,r],r.forEach(T),t&&mN.value&&mN.value.frameloop[t].push(_),_=0,r.clear(),a=!1,u&&(u=!1,P.process(E))}};return P}const WZ=40;function J5(e,t){let r=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},u=()=>r=!0,h=N0.reduce((W,te)=>(W[te]=qZ(u,t?te:void 0),W),{}),{setup:o,read:_,resolveKeyframes:T,preUpdate:P,update:E,preRender:M,render:I,postRender:z}=h,F=()=>{const W=ic.useManualTiming?a.timestamp:performance.now();r=!1,ic.useManualTiming||(a.delta=n?1e3/60:Math.max(Math.min(W-a.timestamp,WZ),1)),a.timestamp=W,a.isProcessing=!0,o.process(a),_.process(a),T.process(a),P.process(a),E.process(a),M.process(a),I.process(a),z.process(a),a.isProcessing=!1,r&&t&&(n=!1,e(F))},D=()=>{r=!0,n=!0,a.isProcessing||e(F)};return{schedule:N0.reduce((W,te)=>{const se=h[te];return W[te]=(he,pe=!1,xe=!1)=>(r||D(),se.schedule(he,pe,xe)),W},{}),cancel:W=>{for(let te=0;te<N0.length;te++)h[N0[te]].cancel(W)},state:a,steps:h}}const{schedule:Br,cancel:Eo,state:Ui,steps:S2}=J5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ys,!0);let p_;function GZ(){p_=void 0}const Ws={now:()=>(p_===void 0&&Ws.set(Ui.isProcessing||ic.useManualTiming?Ui.timestamp:performance.now()),p_),set:e=>{p_=e,queueMicrotask(GZ)}},e4=e=>t=>typeof t=="string"&&t.startsWith(e),nP=e4("--"),HZ=e4("var(--"),iP=e=>HZ(e)?ZZ.test(e.split("/*")[0].trim()):!1,ZZ=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xf={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Vy={...Xf,transform:e=>dl(0,1,e)},I0={...Xf,default:1},ay=e=>Math.round(e*1e5)/1e5,sP=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function KZ(e){return e==null}const YZ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,aP=(e,t)=>r=>!!(typeof r=="string"&&YZ.test(r)&&r.startsWith(e)||t&&!KZ(r)&&Object.prototype.hasOwnProperty.call(r,t)),t4=(e,t,r)=>n=>{if(typeof n!="string")return n;const[a,u,h,o]=n.match(sP);return{[e]:parseFloat(a),[t]:parseFloat(u),[r]:parseFloat(h),alpha:o!==void 0?parseFloat(o):1}},QZ=e=>dl(0,255,e),T2={...Xf,transform:e=>Math.round(QZ(e))},Bd={test:aP("rgb","red"),parse:t4("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+T2.transform(e)+", "+T2.transform(t)+", "+T2.transform(r)+", "+ay(Vy.transform(n))+")"};function XZ(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const CT={test:aP("#"),parse:XZ,transform:Bd.transform},vx=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Uc=vx("deg"),ll=vx("%"),tr=vx("px"),JZ=vx("vh"),eK=vx("vw"),gN={...ll,parse:e=>ll.parse(e)/100,transform:e=>ll.transform(e*100)},Hp={test:aP("hsl","hue"),parse:t4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+ll.transform(ay(t))+", "+ll.transform(ay(r))+", "+ay(Vy.transform(n))+")"},pi={test:e=>Bd.test(e)||CT.test(e)||Hp.test(e),parse:e=>Bd.test(e)?Bd.parse(e):Hp.test(e)?Hp.parse(e):CT.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Bd.transform(e):Hp.transform(e),getAnimatableNone:e=>{const t=pi.parse(e);return t.alpha=0,pi.transform(t)}},tK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rK(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(sP))==null?void 0:t.length)||0)+(((r=e.match(tK))==null?void 0:r.length)||0)>0}const r4="number",n4="color",nK="var",iK="var(",yN="${}",sK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function $y(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},a=[];let u=0;const o=t.replace(sK,_=>(pi.test(_)?(n.color.push(u),a.push(n4),r.push(pi.parse(_))):_.startsWith(iK)?(n.var.push(u),a.push(nK),r.push(_)):(n.number.push(u),a.push(r4),r.push(parseFloat(_))),++u,yN)).split(yN);return{values:r,split:o,indexes:n,types:a}}function i4(e){return $y(e).values}function s4(e){const{split:t,types:r}=$y(e),n=t.length;return a=>{let u="";for(let h=0;h<n;h++)if(u+=t[h],a[h]!==void 0){const o=r[h];o===r4?u+=ay(a[h]):o===n4?u+=pi.transform(a[h]):u+=a[h]}return u}}const aK=e=>typeof e=="number"?0:pi.test(e)?pi.getAnimatableNone(e):e;function oK(e){const t=i4(e);return s4(e)(t.map(aK))}const Tu={test:rK,parse:i4,createTransformer:s4,getAnimatableNone:oK};function k2(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function lK({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let a=0,u=0,h=0;if(!t)a=u=h=r;else{const o=r<.5?r*(1+t):r+t-r*t,_=2*r-o;a=k2(_,o,e+1/3),u=k2(_,o,e),h=k2(_,o,e-1/3)}return{red:Math.round(a*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:n}}function ib(e,t){return r=>r>0?t:e}const An=(e,t,r)=>e+(t-e)*r,C2=(e,t,r)=>{const n=e*e,a=r*(t*t-n)+n;return a<0?0:Math.sqrt(a)},cK=[CT,Bd,Hp],uK=e=>cK.find(t=>t.test(e));function xN(e){const t=uK(e);if(!t)return!1;let r=t.parse(e);return t===Hp&&(r=lK(r)),r}const vN=(e,t)=>{const r=xN(e),n=xN(t);if(!r||!n)return ib(e,t);const a={...r};return u=>(a.red=C2(r.red,n.red,u),a.green=C2(r.green,n.green,u),a.blue=C2(r.blue,n.blue,u),a.alpha=An(r.alpha,n.alpha,u),Bd.transform(a))},PT=new Set(["none","hidden"]);function dK(e,t){return PT.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function hK(e,t){return r=>An(e,t,r)}function oP(e){return typeof e=="number"?hK:typeof e=="string"?iP(e)?ib:pi.test(e)?vN:mK:Array.isArray(e)?a4:typeof e=="object"?pi.test(e)?vN:pK:ib}function a4(e,t){const r=[...e],n=r.length,a=e.map((u,h)=>oP(u)(u,t[h]));return u=>{for(let h=0;h<n;h++)r[h]=a[h](u);return r}}function pK(e,t){const r={...e,...t},n={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(n[a]=oP(e[a])(e[a],t[a]));return a=>{for(const u in n)r[u]=n[u](a);return r}}function fK(e,t){const r=[],n={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const u=t.types[a],h=e.indexes[u][n[u]],o=e.values[h]??0;r[a]=o,n[u]++}return r}const mK=(e,t)=>{const r=Tu.createTransformer(t),n=$y(e),a=$y(t);return n.indexes.var.length===a.indexes.var.length&&n.indexes.color.length===a.indexes.color.length&&n.indexes.number.length>=a.indexes.number.length?PT.has(e)&&!a.values.length||PT.has(t)&&!n.values.length?dK(e,t):yx(a4(fK(n,a),a.values),r):ib(e,t)};function o4(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?An(e,t,r):oP(e)(e,t)}const gK=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Br.update(t,r),stop:()=>Eo(t),now:()=>Ui.isProcessing?Ui.timestamp:Ws.now()}},l4=(e,t,r=10)=>{let n="";const a=Math.max(Math.round(t/r),2);for(let u=0;u<a;u++)n+=Math.round(e(u/(a-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},sb=2e4;function lP(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<sb;)t+=r,n=e.next(t);return t>=sb?1/0:t}function yK(e,t=100,r){const n=r({...e,keyframes:[0,t]}),a=Math.min(lP(n),sb);return{type:"keyframes",ease:u=>n.next(a*u).value/t,duration:Ba(a)}}const xK=5;function c4(e,t,r){const n=Math.max(t-xK,0);return eP(r-e(n),t-n)}const Wn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},P2=.001;function vK({duration:e=Wn.duration,bounce:t=Wn.bounce,velocity:r=Wn.velocity,mass:n=Wn.mass}){let a,u,h=1-t;h=dl(Wn.minDamping,Wn.maxDamping,h),e=dl(Wn.minDuration,Wn.maxDuration,Ba(e)),h<1?(a=T=>{const P=T*h,E=P*e,M=P-r,I=ET(T,h),z=Math.exp(-E);return P2-M/I*z},u=T=>{const E=T*h*e,M=E*r+r,I=Math.pow(h,2)*Math.pow(T,2)*e,z=Math.exp(-E),F=ET(Math.pow(T,2),h);return(-a(T)+P2>0?-1:1)*((M-I)*z)/F}):(a=T=>{const P=Math.exp(-T*e),E=(T-r)*e+1;return-P2+P*E},u=T=>{const P=Math.exp(-T*e),E=(r-T)*(e*e);return P*E});const o=5/e,_=bK(a,u,o);if(e=ol(e),isNaN(_))return{stiffness:Wn.stiffness,damping:Wn.damping,duration:e};{const T=Math.pow(_,2)*n;return{stiffness:T,damping:h*2*Math.sqrt(n*T),duration:e}}}const _K=12;function bK(e,t,r){let n=r;for(let a=1;a<_K;a++)n=n-e(n)/t(n);return n}function ET(e,t){return e*Math.sqrt(1-t*t)}const wK=["duration","bounce"],SK=["stiffness","damping","mass"];function _N(e,t){return t.some(r=>e[r]!==void 0)}function TK(e){let t={velocity:Wn.velocity,stiffness:Wn.stiffness,damping:Wn.damping,mass:Wn.mass,isResolvedFromDuration:!1,...e};if(!_N(e,SK)&&_N(e,wK))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),a=n*n,u=2*dl(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:Wn.mass,stiffness:a,damping:u}}else{const r=vK(e);t={...t,...r,mass:Wn.mass},t.isResolvedFromDuration=!0}return t}function ab(e=Wn.visualDuration,t=Wn.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:a}=r;const u=r.keyframes[0],h=r.keyframes[r.keyframes.length-1],o={done:!1,value:u},{stiffness:_,damping:T,mass:P,duration:E,velocity:M,isResolvedFromDuration:I}=TK({...r,velocity:-Ba(r.velocity||0)}),z=M||0,F=T/(2*Math.sqrt(_*P)),D=h-u,q=Ba(Math.sqrt(_/P)),$=Math.abs(D)<5;n||(n=$?Wn.restSpeed.granular:Wn.restSpeed.default),a||(a=$?Wn.restDelta.granular:Wn.restDelta.default);let W;if(F<1){const se=ET(q,F);W=he=>{const pe=Math.exp(-F*q*he);return h-pe*((z+F*q*D)/se*Math.sin(se*he)+D*Math.cos(se*he))}}else if(F===1)W=se=>h-Math.exp(-q*se)*(D+(z+q*D)*se);else{const se=q*Math.sqrt(F*F-1);W=he=>{const pe=Math.exp(-F*q*he),xe=Math.min(se*he,300);return h-pe*((z+F*q*D)*Math.sinh(xe)+se*D*Math.cosh(xe))/se}}const te={calculatedDuration:I&&E||null,next:se=>{const he=W(se);if(I)o.done=se>=E;else{let pe=se===0?z:0;F<1&&(pe=se===0?ol(z):c4(W,se,he));const xe=Math.abs(pe)<=n,Re=Math.abs(h-he)<=a;o.done=xe&&Re}return o.value=o.done?h:he,o},toString:()=>{const se=Math.min(lP(te),sb),he=l4(pe=>te.next(se*pe).value,se,30);return se+"ms "+he},toTransition:()=>{}};return te}ab.applyToOptions=e=>{const t=yK(e,100,ab);return e.ease=t.ease,e.duration=ol(t.duration),e.type="keyframes",e};function jT({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:u=500,modifyTarget:h,min:o,max:_,restDelta:T=.5,restSpeed:P}){const E=e[0],M={done:!1,value:E},I=xe=>o!==void 0&&xe<o||_!==void 0&&xe>_,z=xe=>o===void 0?_:_===void 0||Math.abs(o-xe)<Math.abs(_-xe)?o:_;let F=r*t;const D=E+F,q=h===void 0?D:h(D);q!==D&&(F=q-E);const $=xe=>-F*Math.exp(-xe/n),W=xe=>q+$(xe),te=xe=>{const Re=$(xe),Me=W(xe);M.done=Math.abs(Re)<=T,M.value=M.done?q:Me};let se,he;const pe=xe=>{I(M.value)&&(se=xe,he=ab({keyframes:[M.value,z(M.value)],velocity:c4(W,xe,M.value),damping:a,stiffness:u,restDelta:T,restSpeed:P}))};return pe(0),{calculatedDuration:null,next:xe=>{let Re=!1;return!he&&se===void 0&&(Re=!0,te(xe),pe(xe)),se!==void 0&&xe>=se?he.next(xe-se):(!Re&&te(xe),M)}}}function kK(e,t,r){const n=[],a=r||ic.mix||o4,u=e.length-1;for(let h=0;h<u;h++){let o=a(e[h],e[h+1]);if(t){const _=Array.isArray(t)?t[h]||Ys:t;o=yx(_,o)}n.push(o)}return n}function cP(e,t,{clamp:r=!0,ease:n,mixer:a}={}){const u=e.length;if(Af(u===t.length),u===1)return()=>t[0];if(u===2&&t[0]===t[1])return()=>t[1];const h=e[0]===e[1];e[0]>e[u-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=kK(t,n,a),_=o.length,T=P=>{if(h&&P<e[0])return t[0];let E=0;if(_>1)for(;E<e.length-2&&!(P<e[E+1]);E++);const M=Mf(e[E],e[E+1],P);return o[E](M)};return r?P=>T(dl(e[0],e[u-1],P)):T}function CK(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const a=Mf(0,t,n);e.push(An(r,1,a))}}function u4(e){const t=[0];return CK(t,e.length-1),t}function PK(e,t){return e.map(r=>r*t)}function EK(e,t){return e.map(()=>t||Q5).splice(0,e.length-1)}function oy({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const a=$Z(n)?n.map(fN):fN(n),u={done:!1,value:t[0]},h=PK(r&&r.length===t.length?r:u4(t),e),o=cP(h,t,{ease:Array.isArray(a)?a:EK(t,a)});return{calculatedDuration:e,next:_=>(u.value=o(_),u.done=_>=e,u)}}const jK=e=>e!==null;function uP(e,{repeat:t,repeatType:r="loop"},n,a=1){const u=e.filter(jK),o=a<0||t&&r!=="loop"&&t%2===1?0:u.length-1;return!o||n===void 0?u[o]:n}const AK={decay:jT,inertia:jT,tween:oy,keyframes:oy,spring:ab};function d4(e){typeof e.type=="string"&&(e.type=AK[e.type])}class dP{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const MK=e=>e/100;class sw extends dP{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,a;const{motionValue:r}=this.options;r&&r.updatedAt!==Ws.now()&&this.tick(Ws.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(n=this.options).onStop)==null||a.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;d4(t);const{type:r=oy,repeat:n=0,repeatDelay:a=0,repeatType:u,velocity:h=0}=t;let{keyframes:o}=t;const _=r||oy;_!==oy&&typeof o[0]!="number"&&(this.mixKeyframes=yx(MK,o4(o[0],o[1])),o=[0,100]);const T=_({...t,keyframes:o});u==="mirror"&&(this.mirroredGenerator=_({...t,keyframes:[...o].reverse(),velocity:-h})),T.calculatedDuration===null&&(T.calculatedDuration=lP(T));const{calculatedDuration:P}=T;this.calculatedDuration=P,this.resolvedDuration=P+a,this.totalDuration=this.resolvedDuration*(n+1)-a,this.generator=T}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:a,mixKeyframes:u,mirroredGenerator:h,resolvedDuration:o,calculatedDuration:_}=this;if(this.startTime===null)return n.next(0);const{delay:T=0,keyframes:P,repeat:E,repeatType:M,repeatDelay:I,type:z,onUpdate:F,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const q=this.currentTime-T*(this.playbackSpeed>=0?1:-1),$=this.playbackSpeed>=0?q<0:q>a;this.currentTime=Math.max(q,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let W=this.currentTime,te=n;if(E){const xe=Math.min(this.currentTime,a)/o;let Re=Math.floor(xe),Me=xe%1;!Me&&xe>=1&&(Me=1),Me===1&&Re--,Re=Math.min(Re,E+1),!!(Re%2)&&(M==="reverse"?(Me=1-Me,I&&(Me-=I/o)):M==="mirror"&&(te=h)),W=dl(0,1,Me)*o}const se=$?{done:!1,value:P[0]}:te.next(W);u&&(se.value=u(se.value));let{done:he}=se;!$&&_!==null&&(he=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const pe=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&he);return pe&&z!==jT&&(se.value=uP(P,this.options,D,this.speed)),F&&F(se.value),pe&&this.finish(),se}then(t,r){return this.finished.then(t,r)}get duration(){return Ba(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ba(t)}get time(){return Ba(this.currentTime)}set time(t){var r;t=ol(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Ws.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Ba(this.currentTime))}play(){var a,u;if(this.isStopped)return;const{driver:t=gK,startTime:r}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),(u=(a=this.options).onPlay)==null||u.call(a);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ws.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function NK(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Vd=e=>e*180/Math.PI,AT=e=>{const t=Vd(Math.atan2(e[1],e[0]));return MT(t)},IK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:AT,rotateZ:AT,skewX:e=>Vd(Math.atan(e[1])),skewY:e=>Vd(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},MT=e=>(e=e%360,e<0&&(e+=360),e),bN=AT,wN=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),SN=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),RK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wN,scaleY:SN,scale:e=>(wN(e)+SN(e))/2,rotateX:e=>MT(Vd(Math.atan2(e[6],e[5]))),rotateY:e=>MT(Vd(Math.atan2(-e[2],e[0]))),rotateZ:bN,rotate:bN,skewX:e=>Vd(Math.atan(e[4])),skewY:e=>Vd(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function NT(e){return e.includes("scale")?1:0}function IT(e,t){if(!e||e==="none")return NT(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,a;if(r)n=RK,a=r;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=IK,a=o}if(!a)return NT(t);const u=n[t],h=a[1].split(",").map(OK);return typeof u=="function"?u(h):h[u]}const DK=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return IT(r,t)};function OK(e){return parseFloat(e.trim())}const Jf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],em=new Set(Jf),TN=e=>e===Xf||e===tr,LK=new Set(["x","y","z"]),FK=Jf.filter(e=>!LK.has(e));function zK(e){const t=[];return FK.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const Jd={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>IT(t,"x"),y:(e,{transform:t})=>IT(t,"y")};Jd.translateX=Jd.x;Jd.translateY=Jd.y;const eh=new Set;let RT=!1,DT=!1,OT=!1;function h4(){if(DT){const e=Array.from(eh).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const a=zK(n);a.length&&(r.set(n,a),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const a=r.get(n);a&&a.forEach(([u,h])=>{var o;(o=n.getValue(u))==null||o.set(h)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}DT=!1,RT=!1,eh.forEach(e=>e.complete(OT)),eh.clear()}function p4(){eh.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(DT=!0)})}function BK(){OT=!0,p4(),h4(),OT=!1}class hP{constructor(t,r,n,a,u,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=a,this.element=u,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(eh.add(this),RT||(RT=!0,Br.read(p4),Br.resolveKeyframes(h4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:a}=this;if(t[0]===null){const u=a==null?void 0:a.get(),h=t[t.length-1];if(u!==void 0)t[0]=u;else if(n&&r){const o=n.readValue(r,h);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=h),a&&u===void 0&&a.set(t[0])}NK(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),eh.delete(this)}cancel(){this.state==="scheduled"&&(eh.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VK=e=>e.startsWith("--");function $K(e,t,r){VK(t)?e.style.setProperty(t,r):e.style[t]=r}const f4=XC(()=>window.ScrollTimeline!==void 0),UK={};function qK(e,t){const r=XC(e);return()=>UK[t]??r()}const m4=qK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ug=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,kN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ug([0,.65,.55,1]),circOut:Ug([.55,0,1,.45]),backIn:Ug([.31,.01,.66,-.59]),backOut:Ug([.33,1.53,.69,.99])};function g4(e,t){if(e)return typeof e=="function"?m4()?l4(e,t):"ease-out":X5(e)?Ug(e):Array.isArray(e)?e.map(r=>g4(r,t)||kN.easeOut):kN[e]}function WK(e,t,r,{delay:n=0,duration:a=300,repeat:u=0,repeatType:h="loop",ease:o="easeOut",times:_}={},T=void 0){const P={[t]:r};_&&(P.offset=_);const E=g4(o,a);Array.isArray(E)&&(P.easing=E);const M={delay:n,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"};return T&&(M.pseudoElement=T),e.animate(P,M)}function y4(e){return typeof e=="function"&&"applyToOptions"in e}function GK({type:e,...t}){return y4(e)&&m4()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class HK extends dP{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:a,pseudoElement:u,allowFlatten:h=!1,finalKeyframe:o,onComplete:_}=t;this.isPseudoElement=!!u,this.allowFlatten=h,this.options=t,Af(typeof t.type!="string");const T=GK(t);this.animation=WK(r,n,a,T,u),T.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!u){const P=uP(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(P):$K(r,n,P),this.animation.cancel()}_==null||_(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return Ba(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ba(t)}get time(){return Ba(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ol(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&f4()?(this.animation.timeline=t,Ys):r(this)}}const x4={anticipate:Z5,backInOut:H5,circInOut:Y5};function ZK(e){return e in x4}function KK(e){typeof e.ease=="string"&&ZK(e.ease)&&(e.ease=x4[e.ease])}const CN=10;class YK extends HK{constructor(t){KK(t),d4(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:a,element:u,...h}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const o=new sw({...h,autoplay:!1}),_=ol(this.finishedTime??this.time);r.setWithVelocity(o.sample(_-CN).value,o.sample(_).value,CN),o.stop()}}const PN=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Tu.test(e)||e==="0")&&!e.startsWith("url("));function QK(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function XK(e,t,r,n){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const u=e[e.length-1],h=PN(a,t),o=PN(u,t);return!h||!o?!1:QK(e)||(r==="spring"||y4(r))&&n}function LT(e){e.duration=0,e.type="keyframes"}const JK=new Set(["opacity","clipPath","filter","transform"]),eY=XC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tY(e){var P;const{motionValue:t,name:r,repeatDelay:n,repeatType:a,damping:u,type:h}=e;if(!(((P=t==null?void 0:t.owner)==null?void 0:P.current)instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:T}=t.owner.getProps();return eY()&&r&&JK.has(r)&&(r!=="transform"||!T)&&!_&&!n&&a!=="mirror"&&u!==0&&h!=="inertia"}const rY=40;class nY extends dP{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:a=0,repeatDelay:u=0,repeatType:h="loop",keyframes:o,name:_,motionValue:T,element:P,...E}){var z;super(),this.stop=()=>{var F,D;this._animation&&(this._animation.stop(),(F=this.stopTimeline)==null||F.call(this)),(D=this.keyframeResolver)==null||D.cancel()},this.createdAt=Ws.now();const M={autoplay:t,delay:r,type:n,repeat:a,repeatDelay:u,repeatType:h,name:_,motionValue:T,element:P,...E},I=(P==null?void 0:P.KeyframeResolver)||hP;this.keyframeResolver=new I(o,(F,D,q)=>this.onKeyframesResolved(F,D,M,!q),_,T,P),(z=this.keyframeResolver)==null||z.scheduleResolve()}onKeyframesResolved(t,r,n,a){this.keyframeResolver=void 0;const{name:u,type:h,velocity:o,delay:_,isHandoff:T,onUpdate:P}=n;this.resolvedAt=Ws.now(),XK(t,u,h,o)||((ic.instantAnimations||!_)&&(P==null||P(uP(t,n,r))),t[0]=t[t.length-1],LT(n),n.repeat=0);const M={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>rY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},I=!T&&tY(M)?new YK({...M,element:M.motionValue.owner.current}):new sw(M);I.finished.then(()=>this.notifyFinished()).catch(Ys),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),BK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const iY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function sY(e){const t=iY.exec(e);if(!t)return[,];const[,r,n,a]=t;return[`--${r??n}`,a]}function v4(e,t,r=1){const[n,a]=sY(e);if(!n)return;const u=window.getComputedStyle(t).getPropertyValue(n);if(u){const h=u.trim();return B5(h)?parseFloat(h):h}return iP(a)?v4(a,t,r+1):a}function pP(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const _4=new Set(["width","height","top","left","right","bottom",...Jf]),aY={test:e=>e==="auto",parse:e=>e},b4=e=>t=>t.test(e),w4=[Xf,tr,ll,Uc,eK,JZ,aY],EN=e=>w4.find(b4(e));function oY(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$5(e):!0}const lY=new Set(["brightness","contrast","saturate","opacity"]);function cY(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(sP)||[];if(!n)return e;const a=r.replace(n,"");let u=lY.has(t)?1:0;return n!==r&&(u*=100),t+"("+u+a+")"}const uY=/\b([a-z-]*)\(.*?\)/gu,FT={...Tu,getAnimatableNone:e=>{const t=e.match(uY);return t?t.map(cY).join(" "):e}},jN={...Xf,transform:Math.round},dY={rotate:Uc,rotateX:Uc,rotateY:Uc,rotateZ:Uc,scale:I0,scaleX:I0,scaleY:I0,scaleZ:I0,skew:Uc,skewX:Uc,skewY:Uc,distance:tr,translateX:tr,translateY:tr,translateZ:tr,x:tr,y:tr,z:tr,perspective:tr,transformPerspective:tr,opacity:Vy,originX:gN,originY:gN,originZ:tr},fP={borderWidth:tr,borderTopWidth:tr,borderRightWidth:tr,borderBottomWidth:tr,borderLeftWidth:tr,borderRadius:tr,radius:tr,borderTopLeftRadius:tr,borderTopRightRadius:tr,borderBottomRightRadius:tr,borderBottomLeftRadius:tr,width:tr,maxWidth:tr,height:tr,maxHeight:tr,top:tr,right:tr,bottom:tr,left:tr,padding:tr,paddingTop:tr,paddingRight:tr,paddingBottom:tr,paddingLeft:tr,margin:tr,marginTop:tr,marginRight:tr,marginBottom:tr,marginLeft:tr,backgroundPositionX:tr,backgroundPositionY:tr,...dY,zIndex:jN,fillOpacity:Vy,strokeOpacity:Vy,numOctaves:jN},hY={...fP,color:pi,backgroundColor:pi,outlineColor:pi,fill:pi,stroke:pi,borderColor:pi,borderTopColor:pi,borderRightColor:pi,borderBottomColor:pi,borderLeftColor:pi,filter:FT,WebkitFilter:FT},S4=e=>hY[e];function T4(e,t){let r=S4(e);return r!==FT&&(r=Tu),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const pY=new Set(["auto","none","0"]);function fY(e,t,r){let n=0,a;for(;n<e.length&&!a;){const u=e[n];typeof u=="string"&&!pY.has(u)&&$y(u).values.length&&(a=e[n]),n++}if(a&&r)for(const u of t)e[u]=T4(r,a)}class mY extends hP{constructor(t,r,n,a,u){super(t,r,n,a,u,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let _=0;_<t.length;_++){let T=t[_];if(typeof T=="string"&&(T=T.trim(),iP(T))){const P=v4(T,r.current);P!==void 0&&(t[_]=P),_===t.length-1&&(this.finalKeyframe=T)}}if(this.resolveNoneKeyframes(),!_4.has(n)||t.length!==2)return;const[a,u]=t,h=EN(a),o=EN(u);if(h!==o)if(TN(h)&&TN(o))for(let _=0;_<t.length;_++){const T=t[_];typeof T=="string"&&(t[_]=parseFloat(T))}else Jd[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let a=0;a<t.length;a++)(t[a]===null||oY(t[a]))&&n.push(a);n.length&&fY(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Jd[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(n,a).jump(a,!1)}measureEndState(){var o;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const a=t.getValue(r);a&&a.jump(this.measuredOrigin,!1);const u=n.length-1,h=n[u];n[u]=Jd[r](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([_,T])=>{t.getValue(_).set(T)}),this.resolveNoneKeyframes()}}function mP(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const a=document.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const k4=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function gP(e){return V5(e)&&"offsetHeight"in e}const AN=30,gY=e=>!isNaN(parseFloat(e)),ly={current:void 0};class yY{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var u;const a=Ws.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((u=this.events.change)==null||u.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Ws.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=gY(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new JC);const n=this.events[t].add(r);return t==="change"?()=>{n(),Br.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return ly.current&&ly.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Ws.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>AN)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,AN);return eP(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bo(e,t){return new yY(e,t)}const{schedule:yP,cancel:Afe}=J5(queueMicrotask,!1),lo={x:!1,y:!1};function C4(){return lo.x||lo.y}function xY(e){return e==="x"||e==="y"?lo[e]?null:(lo[e]=!0,()=>{lo[e]=!1}):lo.x||lo.y?null:(lo.x=lo.y=!0,()=>{lo.x=lo.y=!1})}function P4(e,t){const r=mP(e),n=new AbortController,a={passive:!0,...t,signal:n.signal};return[r,a,()=>n.abort()]}function MN(e){return!(e.pointerType==="touch"||C4())}function vY(e,t,r={}){const[n,a,u]=P4(e,r),h=o=>{if(!MN(o))return;const{target:_}=o,T=t(_,o);if(typeof T!="function"||!_)return;const P=E=>{MN(E)&&(T(E),_.removeEventListener("pointerleave",P))};_.addEventListener("pointerleave",P,a)};return n.forEach(o=>{o.addEventListener("pointerenter",h,a)}),u}const E4=(e,t)=>t?e===t?!0:E4(e,t.parentElement):!1,xP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,_Y=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bY(e){return _Y.has(e.tagName)||e.tabIndex!==-1}const f_=new WeakSet;function NN(e){return t=>{t.key==="Enter"&&e(t)}}function E2(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const wY=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=NN(()=>{if(f_.has(r))return;E2(r,"down");const a=NN(()=>{E2(r,"up")}),u=()=>E2(r,"cancel");r.addEventListener("keyup",a,t),r.addEventListener("blur",u,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function IN(e){return xP(e)&&!C4()}function SY(e,t,r={}){const[n,a,u]=P4(e,r),h=o=>{const _=o.currentTarget;if(!IN(o))return;f_.add(_);const T=t(_,o),P=(I,z)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",M),f_.has(_)&&f_.delete(_),IN(I)&&typeof T=="function"&&T(I,{success:z})},E=I=>{P(I,_===window||_===document||r.useGlobalTarget||E4(_,I.target))},M=I=>{P(I,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",M,a)};return n.forEach(o=>{(r.useGlobalTarget?window:o).addEventListener("pointerdown",h,a),gP(o)&&(o.addEventListener("focus",T=>wY(T,a)),!bY(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),u}function vP(e){return V5(e)&&"ownerSVGElement"in e}const m_=new WeakMap;let qc;const j4=(e,t,r)=>(n,a)=>a&&a[0]?a[0][e+"Size"]:vP(n)&&"getBBox"in n?n.getBBox()[t]:n[r],TY=j4("inline","width","offsetWidth"),kY=j4("block","height","offsetHeight");function CY({target:e,borderBoxSize:t}){var r;(r=m_.get(e))==null||r.forEach(n=>{n(e,{get width(){return TY(e,t)},get height(){return kY(e,t)}})})}function PY(e){e.forEach(CY)}function EY(){typeof ResizeObserver>"u"||(qc=new ResizeObserver(PY))}function jY(e,t){qc||EY();const r=mP(e);return r.forEach(n=>{let a=m_.get(n);a||(a=new Set,m_.set(n,a)),a.add(t),qc==null||qc.observe(n)}),()=>{r.forEach(n=>{const a=m_.get(n);a==null||a.delete(t),a!=null&&a.size||qc==null||qc.unobserve(n)})}}const g_=new Set;let Zp;function AY(){Zp=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};g_.forEach(t=>t(e))},window.addEventListener("resize",Zp)}function MY(e){return g_.add(e),Zp||AY(),()=>{g_.delete(e),!g_.size&&typeof Zp=="function"&&(window.removeEventListener("resize",Zp),Zp=void 0)}}function NY(e,t){return typeof e=="function"?MY(e):jY(e,t)}function A4(e,t){let r;const n=()=>{const{currentTime:a}=t,h=(a===null?0:a.value)/100;r!==h&&e(h),r=h};return Br.preUpdate(n,!0),()=>Eo(n)}function IY(e){return vP(e)&&e.tagName==="svg"}function RY(...e){const t=!Array.isArray(e[0]),r=t?0:-1,n=e[0+r],a=e[1+r],u=e[2+r],h=e[3+r],o=cP(a,u,h);return t?o(n):o}const Wi=e=>!!(e&&e.getVelocity);function DY(e,t,r){const n=e.get();let a=null,u=n,h;const o=typeof n=="string"?n.replace(/[\d.-]/g,""):void 0,_=()=>{a&&(a.stop(),a=null)},T=()=>{_(),a=new sw({keyframes:[DN(e.get()),DN(u)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:h})};if(e.attach((P,E)=>{u=P,h=M=>E(RN(M,o)),Br.postRender(T)},_),Wi(t)){const P=t.on("change",M=>e.set(RN(M,o))),E=e.on("destroy",P);return()=>{P(),E()}}return _}function RN(e,t){return t?e+t:e}function DN(e){return typeof e=="number"?e:parseFloat(e)}const OY=[...w4,pi,Tu],LY=e=>OY.find(b4(e)),_x=U.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function ON(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function FY(...e){return t=>{let r=!1;const n=e.map(a=>{const u=ON(a,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let a=0;a<n.length;a++){const u=n[a];typeof u=="function"?u():ON(e[a],null)}}}}function zY(...e){return U.useCallback(FY(...e),e)}class BY extends U.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,a=gP(n)&&n.offsetWidth||0,u=this.props.sizeRef.current;u.height=r.offsetHeight||0,u.width=r.offsetWidth||0,u.top=r.offsetTop,u.left=r.offsetLeft,u.right=a-u.width-u.left}return null}componentDidUpdate(){}render(){return this.props.children}}function VY({children:e,isPresent:t,anchorX:r,root:n}){const a=U.useId(),u=U.useRef(null),h=U.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:o}=U.useContext(_x),_=zY(u,e==null?void 0:e.ref);return U.useInsertionEffect(()=>{const{width:T,height:P,top:E,left:M,right:I}=h.current;if(t||!u.current||!T||!P)return;const z=r==="left"?`left: ${M}`:`right: ${I}`;u.current.dataset.motionPopId=a;const F=document.createElement("style");o&&(F.nonce=o);const D=n??document.head;return D.appendChild(F),F.sheet&&F.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${T}px !important;
            height: ${P}px !important;
            ${z}px !important;
            top: ${E}px !important;
          }
        `),()=>{D.contains(F)&&D.removeChild(F)}},[t]),f.jsx(BY,{isPresent:t,childRef:u,sizeRef:h,children:U.cloneElement(e,{ref:_})})}const $Y=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:u,mode:h,anchorX:o,root:_})=>{const T=Qf(UY),P=U.useId();let E=!0,M=U.useMemo(()=>(E=!1,{id:P,initial:t,isPresent:r,custom:a,onExitComplete:I=>{T.set(I,!0);for(const z of T.values())if(!z)return;n&&n()},register:I=>(T.set(I,!1),()=>T.delete(I))}),[r,T,n]);return u&&E&&(M={...M}),U.useMemo(()=>{T.forEach((I,z)=>T.set(z,!1))},[r]),U.useEffect(()=>{!r&&!T.size&&n&&n()},[r]),h==="popLayout"&&(e=f.jsx(VY,{isPresent:r,anchorX:o,root:_,children:e})),f.jsx(iw.Provider,{value:M,children:e})};function UY(){return new Map}function M4(e=!0){const t=U.useContext(iw);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:a}=t,u=U.useId();U.useEffect(()=>{if(e)return a(u)},[e]);const h=U.useCallback(()=>e&&n&&n(u),[u,n,e]);return!r&&n?[!1,h]:[!0]}const R0=e=>e.key||"";function LN(e){const t=[];return U.Children.forEach(e,r=>{U.isValidElement(r)&&t.push(r)}),t}const oh=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:a=!0,mode:u="sync",propagate:h=!1,anchorX:o="left",root:_})=>{const[T,P]=M4(h),E=U.useMemo(()=>LN(e),[e]),M=h&&!T?[]:E.map(R0),I=U.useRef(!0),z=U.useRef(E),F=Qf(()=>new Map),[D,q]=U.useState(E),[$,W]=U.useState(E);nw(()=>{I.current=!1,z.current=E;for(let he=0;he<$.length;he++){const pe=R0($[he]);M.includes(pe)?F.delete(pe):F.get(pe)!==!0&&F.set(pe,!1)}},[$,M.length,M.join("-")]);const te=[];if(E!==D){let he=[...E];for(let pe=0;pe<$.length;pe++){const xe=$[pe],Re=R0(xe);M.includes(Re)||(he.splice(pe,0,xe),te.push(xe))}return u==="wait"&&te.length&&(he=te),W(LN(he)),q(E),null}const{forceRender:se}=U.useContext(ZC);return f.jsx(f.Fragment,{children:$.map(he=>{const pe=R0(he),xe=h&&!T?!1:E===$||M.includes(pe),Re=()=>{if(F.has(pe))F.set(pe,!0);else return;let Me=!0;F.forEach(pt=>{pt||(Me=!1)}),Me&&(se==null||se(),W(z.current),h&&(P==null||P()),n&&n())};return f.jsx($Y,{isPresent:xe,initial:!I.current||r?void 0:!1,custom:t,presenceAffectsLayout:a,mode:u,root:_,onExitComplete:xe?void 0:Re,anchorX:o,children:he},pe)})})},N4=U.createContext({strict:!1}),FN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nf={};for(const e in FN)Nf[e]={isEnabled:t=>FN[e].some(r=>!!t[r])};function qY(e){for(const t in e)Nf[t]={...Nf[t],...e[t]}}const WY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ob(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||WY.has(e)}let I4=e=>!ob(e);function GY(e){typeof e=="function"&&(I4=t=>t.startsWith("on")?!ob(t):e(t))}try{GY(require("@emotion/is-prop-valid").default)}catch{}function HY(e,t,r){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(I4(a)||r===!0&&ob(a)||!t&&!ob(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}const aw=U.createContext({});function ow(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Uy(e){return typeof e=="string"||Array.isArray(e)}const _P=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bP=["initial",..._P];function lw(e){return ow(e.animate)||bP.some(t=>Uy(e[t]))}function R4(e){return!!(lw(e)||e.variants)}function ZY(e,t){if(lw(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Uy(r)?r:void 0,animate:Uy(n)?n:void 0}}return e.inherit!==!1?t:{}}function KY(e){const{initial:t,animate:r}=ZY(e,U.useContext(aw));return U.useMemo(()=>({initial:t,animate:r}),[zN(t),zN(r)])}function zN(e){return Array.isArray(e)?e.join(" "):e}const qy={};function YY(e){for(const t in e)qy[t]=e[t],nP(t)&&(qy[t].isCSSVariable=!0)}function D4(e,{layout:t,layoutId:r}){return em.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!qy[e]||e==="opacity")}const QY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},XY=Jf.length;function JY(e,t,r){let n="",a=!0;for(let u=0;u<XY;u++){const h=Jf[u],o=e[h];if(o===void 0)continue;let _=!0;if(typeof o=="number"?_=o===(h.startsWith("scale")?1:0):_=parseFloat(o)===0,!_||r){const T=k4(o,fP[h]);if(!_){a=!1;const P=QY[h]||h;n+=`${P}(${T}) `}r&&(t[h]=T)}}return n=n.trim(),r?n=r(t,a?"":n):a&&(n="none"),n}function wP(e,t,r){const{style:n,vars:a,transformOrigin:u}=e;let h=!1,o=!1;for(const _ in t){const T=t[_];if(em.has(_)){h=!0;continue}else if(nP(_)){a[_]=T;continue}else{const P=k4(T,fP[_]);_.startsWith("origin")?(o=!0,u[_]=P):n[_]=P}}if(t.transform||(h||r?n.transform=JY(t,e.transform,r):n.transform&&(n.transform="none")),o){const{originX:_="50%",originY:T="50%",originZ:P=0}=u;n.transformOrigin=`${_} ${T} ${P}`}}const SP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function O4(e,t,r){for(const n in t)!Wi(t[n])&&!D4(n,r)&&(e[n]=t[n])}function eQ({transformTemplate:e},t){return U.useMemo(()=>{const r=SP();return wP(r,t,e),Object.assign({},r.vars,r.style)},[t])}function tQ(e,t){const r=e.style||{},n={};return O4(n,r,e),Object.assign(n,eQ(e,t)),n}function rQ(e,t){const r={},n=tQ(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const nQ={offset:"stroke-dashoffset",array:"stroke-dasharray"},iQ={offset:"strokeDashoffset",array:"strokeDasharray"};function sQ(e,t,r=1,n=0,a=!0){e.pathLength=1;const u=a?nQ:iQ;e[u.offset]=tr.transform(-n);const h=tr.transform(t),o=tr.transform(r);e[u.array]=`${h} ${o}`}function L4(e,{attrX:t,attrY:r,attrScale:n,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...o},_,T,P){if(wP(e,o,T),_){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:M}=e;E.transform&&(M.transform=E.transform,delete E.transform),(M.transform||E.transformOrigin)&&(M.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),M.transform&&(M.transformBox=(P==null?void 0:P.transformBox)??"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),r!==void 0&&(E.y=r),n!==void 0&&(E.scale=n),a!==void 0&&sQ(E,a,u,h,!1)}const F4=()=>({...SP(),attrs:{}}),z4=e=>typeof e=="string"&&e.toLowerCase()==="svg";function aQ(e,t,r,n){const a=U.useMemo(()=>{const u=F4();return L4(u,t,z4(n),e.transformTemplate,e.style),{...u.attrs,style:{...u.style}}},[t]);if(e.style){const u={};O4(u,e.style,e),a.style={...u,...a.style}}return a}const oQ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function TP(e){return typeof e!="string"||e.includes("-")?!1:!!(oQ.indexOf(e)>-1||/[A-Z]/u.test(e))}function lQ(e,t,r,{latestValues:n},a,u=!1){const o=(TP(e)?aQ:rQ)(t,n,a,e),_=HY(t,typeof e=="string",u),T=e!==U.Fragment?{..._,...o,ref:r}:{},{children:P}=t,E=U.useMemo(()=>Wi(P)?P.get():P,[P]);return U.createElement(e,{...T,children:E})}function BN(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function kP(e,t,r,n){if(typeof t=="function"){const[a,u]=BN(n);t=t(r!==void 0?r:e.custom,a,u)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,u]=BN(n);t=t(r!==void 0?r:e.custom,a,u)}return t}function y_(e){return Wi(e)?e.get():e}function cQ({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,a){return{latestValues:uQ(r,n,a,e),renderState:t()}}function uQ(e,t,r,n){const a={},u=n(e,{});for(const M in u)a[M]=y_(u[M]);let{initial:h,animate:o}=e;const _=lw(e),T=R4(e);t&&T&&!_&&e.inherit!==!1&&(h===void 0&&(h=t.initial),o===void 0&&(o=t.animate));let P=r?r.initial===!1:!1;P=P||h===!1;const E=P?o:h;if(E&&typeof E!="boolean"&&!ow(E)){const M=Array.isArray(E)?E:[E];for(let I=0;I<M.length;I++){const z=kP(e,M[I]);if(z){const{transitionEnd:F,transition:D,...q}=z;for(const $ in q){let W=q[$];if(Array.isArray(W)){const te=P?W.length-1:0;W=W[te]}W!==null&&(a[$]=W)}for(const $ in F)a[$]=F[$]}}}return a}const B4=e=>(t,r)=>{const n=U.useContext(aw),a=U.useContext(iw),u=()=>cQ(e,t,n,a);return r?u():Qf(u)};function CP(e,t,r){var u;const{style:n}=e,a={};for(const h in n)(Wi(n[h])||t.style&&Wi(t.style[h])||D4(h,e)||((u=r==null?void 0:r.getValue(h))==null?void 0:u.liveStyle)!==void 0)&&(a[h]=n[h]);return a}const dQ=B4({scrapeMotionValuesFromProps:CP,createRenderState:SP});function V4(e,t,r){const n=CP(e,t,r);for(const a in e)if(Wi(e[a])||Wi(t[a])){const u=Jf.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;n[u]=e[a]}return n}const hQ=B4({scrapeMotionValuesFromProps:V4,createRenderState:F4}),pQ=Symbol.for("motionComponentSymbol");function Kp(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function fQ(e,t,r){return U.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):Kp(r)&&(r.current=n))},[t])}const PP=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mQ="framerAppearId",$4="data-"+PP(mQ),U4=U.createContext({});function gQ(e,t,r,n,a){var F,D;const{visualElement:u}=U.useContext(aw),h=U.useContext(N4),o=U.useContext(iw),_=U.useContext(_x).reducedMotion,T=U.useRef(null);n=n||h.renderer,!T.current&&n&&(T.current=n(e,{visualState:t,parent:u,props:r,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:_}));const P=T.current,E=U.useContext(U4);P&&!P.projection&&a&&(P.type==="html"||P.type==="svg")&&yQ(T.current,r,a,E);const M=U.useRef(!1);U.useInsertionEffect(()=>{P&&M.current&&P.update(r,o)});const I=r[$4],z=U.useRef(!!I&&!((F=window.MotionHandoffIsComplete)!=null&&F.call(window,I))&&((D=window.MotionHasOptimisedAnimation)==null?void 0:D.call(window,I)));return nw(()=>{P&&(M.current=!0,window.MotionIsMounted=!0,P.updateFeatures(),P.scheduleRenderMicrotask(),z.current&&P.animationState&&P.animationState.animateChanges())}),U.useEffect(()=>{P&&(!z.current&&P.animationState&&P.animationState.animateChanges(),z.current&&(queueMicrotask(()=>{var q;(q=window.MotionHandoffMarkAsComplete)==null||q.call(window,I)}),z.current=!1),P.enteringChildren=void 0)}),P}function yQ(e,t,r,n){const{layoutId:a,layout:u,drag:h,dragConstraints:o,layoutScroll:_,layoutRoot:T,layoutCrossfade:P}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:q4(e.parent)),e.projection.setOptions({layoutId:a,layout:u,alwaysMeasureLayout:!!h||o&&Kp(o),visualElement:e,animationType:typeof u=="string"?u:"both",initialPromotionConfig:n,crossfade:P,layoutScroll:_,layoutRoot:T})}function q4(e){if(e)return e.options.allowProjection!==!1?e.projection:q4(e.parent)}function j2(e,{forwardMotionProps:t=!1}={},r,n){r&&qY(r);const a=TP(e)?hQ:dQ;function u(o,_){let T;const P={...U.useContext(_x),...o,layoutId:xQ(o)},{isStatic:E}=P,M=KY(o),I=a(o,E);if(!E&&KC){vQ();const z=_Q(P);T=z.MeasureLayout,M.visualElement=gQ(e,I,P,n,z.ProjectionNode)}return f.jsxs(aw.Provider,{value:M,children:[T&&M.visualElement?f.jsx(T,{visualElement:M.visualElement,...P}):null,lQ(e,o,fQ(I,M.visualElement,_),I,E,t)]})}u.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const h=U.forwardRef(u);return h[pQ]=e,h}function xQ({layoutId:e}){const t=U.useContext(ZC).id;return t&&e!==void 0?t+"-"+e:e}function vQ(e,t){U.useContext(N4).strict}function _Q(e){const{drag:t,layout:r}=Nf;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function bQ(e,t){if(typeof Proxy>"u")return j2;const r=new Map,n=(u,h)=>j2(u,h,e,t),a=(u,h)=>n(u,h);return new Proxy(a,{get:(u,h)=>h==="create"?n:(r.has(h)||r.set(h,j2(h,void 0,e,t)),r.get(h))})}function W4({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function wQ({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function SQ(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function A2(e){return e===void 0||e===1}function zT({scale:e,scaleX:t,scaleY:r}){return!A2(e)||!A2(t)||!A2(r)}function Ad(e){return zT(e)||G4(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function G4(e){return VN(e.x)||VN(e.y)}function VN(e){return e&&e!=="0%"}function lb(e,t,r){const n=e-r,a=t*n;return r+a}function $N(e,t,r,n,a){return a!==void 0&&(e=lb(e,a,n)),lb(e,r,n)+t}function BT(e,t=0,r=1,n,a){e.min=$N(e.min,t,r,n,a),e.max=$N(e.max,t,r,n,a)}function H4(e,{x:t,y:r}){BT(e.x,t.translate,t.scale,t.originPoint),BT(e.y,r.translate,r.scale,r.originPoint)}const UN=.999999999999,qN=1.0000000000001;function TQ(e,t,r,n=!1){const a=r.length;if(!a)return;t.x=t.y=1;let u,h;for(let o=0;o<a;o++){u=r[o],h=u.projectionDelta;const{visualElement:_}=u.options;_&&_.props.style&&_.props.style.display==="contents"||(n&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Qp(e,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,H4(e,h)),n&&Ad(u.latestValues)&&Qp(e,u.latestValues))}t.x<qN&&t.x>UN&&(t.x=1),t.y<qN&&t.y>UN&&(t.y=1)}function Yp(e,t){e.min=e.min+t,e.max=e.max+t}function WN(e,t,r,n,a=.5){const u=An(e.min,e.max,a);BT(e,t,r,u,n)}function Qp(e,t){WN(e.x,t.x,t.scaleX,t.scale,t.originX),WN(e.y,t.y,t.scaleY,t.scale,t.originY)}function Z4(e,t){return W4(SQ(e.getBoundingClientRect(),t))}function kQ(e,t,r){const n=Z4(e,r),{scroll:a}=t;return a&&(Yp(n.x,a.offset.x),Yp(n.y,a.offset.y)),n}const GN=()=>({translate:0,scale:1,origin:0,originPoint:0}),Xp=()=>({x:GN(),y:GN()}),HN=()=>({min:0,max:0}),Xn=()=>({x:HN(),y:HN()}),VT={current:null},K4={current:!1};function CQ(){if(K4.current=!0,!!KC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>VT.current=e.matches;e.addEventListener("change",t),t()}else VT.current=!1}const PQ=new WeakMap;function EQ(e,t,r){for(const n in t){const a=t[n],u=r[n];if(Wi(a))e.addValue(n,a);else if(Wi(u))e.addValue(n,bo(a,{owner:e}));else if(u!==a)if(e.hasValue(n)){const h=e.getValue(n);h.liveStyle===!0?h.jump(a):h.hasAnimated||h.set(a)}else{const h=e.getStaticValue(n);e.addValue(n,bo(h!==void 0?h:a,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const ZN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jQ{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:a,blockInitialAnimation:u,visualState:h},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=hP,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const M=Ws.now();this.renderScheduledAt<M&&(this.renderScheduledAt=M,Br.render(this.render,!1,!0))};const{latestValues:_,renderState:T}=h;this.latestValues=_,this.baseTarget={..._},this.initialValues=r.initial?{..._}:{},this.renderState=T,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!u,this.isControllingVariants=lw(r),this.isVariantNode=R4(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:P,...E}=this.scrapeMotionValuesFromProps(r,{},this);for(const M in E){const I=E[M];_[M]!==void 0&&Wi(I)&&I.set(_[M])}}mount(t){var r;this.current=t,PQ.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,a)=>this.bindToMotionValue(a,n)),K4.current||CQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:VT.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Eo(this.notifyUpdate),Eo(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=em.has(t);n&&this.onBindTransform&&this.onBindTransform();const a=r.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&Br.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let u;window.MotionCheckAppearSync&&(u=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),u&&u(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Nf){const r=Nf[t];if(!r)continue;const{isEnabled:n,Feature:a}=r;if(!this.features[t]&&a&&n(this.props)&&(this.features[t]=new a(this)),this.features[t]){const u=this.features[t];u.isMounted?u.update():(u.mount(),u.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Xn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<ZN.length;n++){const a=ZN[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const u="on"+a,h=t[u];h&&(this.propEventSubscriptions[a]=this.on(a,h))}this.prevMotionValues=EQ(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=bo(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(B5(n)||$5(n))?n=parseFloat(n):!LY(n)&&Tu.test(r)&&(n=T4(t,r)),this.setBaseTarget(t,Wi(n)?n.get():n)),Wi(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var u;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const h=kP(this.props,r,(u=this.presenceContext)==null?void 0:u.custom);h&&(n=h[t])}if(r&&n!==void 0)return n;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Wi(a)?a:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new JC),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){yP.render(this.render)}}class Y4 extends jQ{constructor(){super(...arguments),this.KeyframeResolver=mY}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Wi(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Q4(e,{style:t,vars:r},n,a){const u=e.style;let h;for(h in t)u[h]=t[h];a==null||a.applyProjectionStyles(u,n);for(h in r)u.setProperty(h,r[h])}function AQ(e){return window.getComputedStyle(e)}class MQ extends Y4{constructor(){super(...arguments),this.type="html",this.renderInstance=Q4}readValueFromInstance(t,r){var n;if(em.has(r))return(n=this.projection)!=null&&n.isProjecting?NT(r):DK(t,r);{const a=AQ(t),u=(nP(r)?a.getPropertyValue(r):a[r])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Z4(t,r)}build(t,r,n){wP(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return CP(t,r,n)}}const X4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function NQ(e,t,r,n){Q4(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(X4.has(a)?a:PP(a),t.attrs[a])}class IQ extends Y4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Xn}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(em.has(r)){const n=S4(r);return n&&n.default||0}return r=X4.has(r)?r:PP(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return V4(t,r,n)}build(t,r,n){L4(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,a){NQ(t,r,n,a)}mount(t){this.isSVGTag=z4(t.tagName),super.mount(t)}}const RQ=(e,t)=>TP(e)?new IQ(t):new MQ(t,{allowProjection:e!==U.Fragment});function lf(e,t,r){const n=e.getProps();return kP(n,t,r!==void 0?r:n.custom,e)}const $T=e=>Array.isArray(e);function DQ(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,bo(r))}function OQ(e){return $T(e)?e[e.length-1]||0:e}function LQ(e,t){const r=lf(e,t);let{transitionEnd:n={},transition:a={},...u}=r||{};u={...u,...n};for(const h in u){const o=OQ(u[h]);DQ(e,h,o)}}function FQ(e){return!!(Wi(e)&&e.add)}function UT(e,t){const r=e.getValue("willChange");if(FQ(r))return r.add(t);if(!r&&ic.WillChange){const n=new ic.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function J4(e){return e.props[$4]}const zQ=e=>e!==null;function BQ(e,{repeat:t,repeatType:r="loop"},n){const a=e.filter(zQ),u=t&&r!=="loop"&&t%2===1?0:a.length-1;return!u||n===void 0?a[u]:n}const VQ={type:"spring",stiffness:500,damping:25,restSpeed:10},$Q=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),UQ={type:"keyframes",duration:.8},qQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WQ=(e,{keyframes:t})=>t.length>2?UQ:em.has(e)?e.startsWith("scale")?$Q(t[1]):VQ:qQ;function GQ({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:u,repeatType:h,repeatDelay:o,from:_,elapsed:T,...P}){return!!Object.keys(P).length}const EP=(e,t,r,n={},a,u)=>h=>{const o=pP(n,e)||{},_=o.delay||n.delay||0;let{elapsed:T=0}=n;T=T-ol(_);const P={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-T,onUpdate:M=>{t.set(M),o.onUpdate&&o.onUpdate(M)},onComplete:()=>{h(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:u?void 0:a};GQ(o)||Object.assign(P,WQ(e,P)),P.duration&&(P.duration=ol(P.duration)),P.repeatDelay&&(P.repeatDelay=ol(P.repeatDelay)),P.from!==void 0&&(P.keyframes[0]=P.from);let E=!1;if((P.type===!1||P.duration===0&&!P.repeatDelay)&&(LT(P),P.delay===0&&(E=!0)),(ic.instantAnimations||ic.skipAnimations)&&(E=!0,LT(P),P.delay=0),P.allowFlatten=!o.type&&!o.ease,E&&!u&&t.get()!==void 0){const M=BQ(P.keyframes,o);if(M!==void 0){Br.update(()=>{P.onUpdate(M),P.onComplete()});return}}return o.isSync?new sw(P):new nY(P)};function HQ({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function eF(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:u=e.getDefaultTransition(),transitionEnd:h,...o}=t;n&&(u=n);const _=[],T=a&&e.animationState&&e.animationState.getState()[a];for(const P in o){const E=e.getValue(P,e.latestValues[P]??null),M=o[P];if(M===void 0||T&&HQ(T,P))continue;const I={delay:r,...pP(u||{},P)},z=E.get();if(z!==void 0&&!E.isAnimating&&!Array.isArray(M)&&M===z&&!I.velocity)continue;let F=!1;if(window.MotionHandoffAnimation){const q=J4(e);if(q){const $=window.MotionHandoffAnimation(q,P,Br);$!==null&&(I.startTime=$,F=!0)}}UT(e,P),E.start(EP(P,E,M,e.shouldReduceMotion&&_4.has(P)?{type:!1}:I,e,F));const D=E.animation;D&&_.push(D)}return h&&Promise.all(_).then(()=>{Br.update(()=>{h&&LQ(e,h)})}),_}function tF(e,t,r,n=0,a=1){const u=Array.from(e).sort((T,P)=>T.sortNodePosition(P)).indexOf(t),h=e.size,o=(h-1)*n;return typeof r=="function"?r(u,h):a===1?u*n:o-u*n}function qT(e,t,r={}){var _;const n=lf(e,t,r.type==="exit"?(_=e.presenceContext)==null?void 0:_.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);const u=n?()=>Promise.all(eF(e,n,r)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(T=0)=>{const{delayChildren:P=0,staggerChildren:E,staggerDirection:M}=a;return ZQ(e,t,T,P,E,M,r)}:()=>Promise.resolve(),{when:o}=a;if(o){const[T,P]=o==="beforeChildren"?[u,h]:[h,u];return T().then(()=>P())}else return Promise.all([u(),h(r.delay)])}function ZQ(e,t,r=0,n=0,a=0,u=1,h){const o=[];for(const _ of e.variantChildren)_.notify("AnimationStart",t),o.push(qT(_,t,{...h,delay:r+(typeof n=="function"?0:n)+tF(e.variantChildren,_,n,a,u)}).then(()=>_.notify("AnimationComplete",t)));return Promise.all(o)}function KQ(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(u=>qT(e,u,r));n=Promise.all(a)}else if(typeof t=="string")n=qT(e,t,r);else{const a=typeof t=="function"?lf(e,t,r.custom):t;n=Promise.all(eF(e,a,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function rF(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const YQ=bP.length;function nF(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?nF(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<YQ;r++){const n=bP[r],a=e.props[n];(Uy(a)||a===!1)&&(t[n]=a)}return t}const QQ=[..._P].reverse(),XQ=_P.length;function JQ(e){return t=>Promise.all(t.map(({animation:r,options:n})=>KQ(e,r,n)))}function eX(e){let t=JQ(e),r=KN(),n=!0;const a=_=>(T,P)=>{var M;const E=lf(e,P,_==="exit"?(M=e.presenceContext)==null?void 0:M.custom:void 0);if(E){const{transition:I,transitionEnd:z,...F}=E;T={...T,...F,...z}}return T};function u(_){t=_(e)}function h(_){const{props:T}=e,P=nF(e.parent)||{},E=[],M=new Set;let I={},z=1/0;for(let D=0;D<XQ;D++){const q=QQ[D],$=r[q],W=T[q]!==void 0?T[q]:P[q],te=Uy(W),se=q===_?$.isActive:null;se===!1&&(z=D);let he=W===P[q]&&W!==T[q]&&te;if(he&&n&&e.manuallyAnimateOnMount&&(he=!1),$.protectedKeys={...I},!$.isActive&&se===null||!W&&!$.prevProp||ow(W)||typeof W=="boolean")continue;const pe=tX($.prevProp,W);let xe=pe||q===_&&$.isActive&&!he&&te||D>z&&te,Re=!1;const Me=Array.isArray(W)?W:[W];let pt=Me.reduce(a(q),{});se===!1&&(pt={});const{prevResolvedValues:Oe={}}=$,Ye={...Oe,...pt},Ge=Ve=>{xe=!0,M.has(Ve)&&(Re=!0,M.delete(Ve)),$.needsAnimating[Ve]=!0;const _e=e.getValue(Ve);_e&&(_e.liveStyle=!1)};for(const Ve in Ye){const _e=pt[Ve],Le=Oe[Ve];if(I.hasOwnProperty(Ve))continue;let ft=!1;$T(_e)&&$T(Le)?ft=!rF(_e,Le):ft=_e!==Le,ft?_e!=null?Ge(Ve):M.add(Ve):_e!==void 0&&M.has(Ve)?Ge(Ve):$.protectedKeys[Ve]=!0}$.prevProp=W,$.prevResolvedValues=pt,$.isActive&&(I={...I,...pt}),n&&e.blockInitialAnimation&&(xe=!1);const rt=he&&pe;xe&&(!rt||Re)&&E.push(...Me.map(Ve=>{const _e={type:q};if(typeof Ve=="string"&&n&&!rt&&e.manuallyAnimateOnMount&&e.parent){const{parent:Le}=e,ft=lf(Le,Ve);if(Le.enteringChildren&&ft){const{delayChildren:yt}=ft.transition||{};_e.delay=tF(Le.enteringChildren,e,yt)}}return{animation:Ve,options:_e}}))}if(M.size){const D={};if(typeof T.initial!="boolean"){const q=lf(e,Array.isArray(T.initial)?T.initial[0]:T.initial);q&&q.transition&&(D.transition=q.transition)}M.forEach(q=>{const $=e.getBaseTarget(q),W=e.getValue(q);W&&(W.liveStyle=!0),D[q]=$??null}),E.push({animation:D})}let F=!!E.length;return n&&(T.initial===!1||T.initial===T.animate)&&!e.manuallyAnimateOnMount&&(F=!1),n=!1,F?t(E):Promise.resolve()}function o(_,T){var E;if(r[_].isActive===T)return Promise.resolve();(E=e.variantChildren)==null||E.forEach(M=>{var I;return(I=M.animationState)==null?void 0:I.setActive(_,T)}),r[_].isActive=T;const P=h(_);for(const M in r)r[M].protectedKeys={};return P}return{animateChanges:h,setActive:o,setAnimateFunction:u,getState:()=>r,reset:()=>{r=KN()}}}function tX(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!rF(t,e):!1}function kd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KN(){return{animate:kd(!0),whileInView:kd(),whileHover:kd(),whileTap:kd(),whileDrag:kd(),whileFocus:kd(),exit:kd()}}class Mu{constructor(t){this.isMounted=!1,this.node=t}update(){}}class rX extends Mu{constructor(t){super(t),t.animationState||(t.animationState=eX(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();ow(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let nX=0;class iX extends Mu{constructor(){super(...arguments),this.id=nX++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const sX={animation:{Feature:rX},exit:{Feature:iX}};function Wy(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function bx(e){return{point:{x:e.pageX,y:e.pageY}}}const aX=e=>t=>xP(t)&&e(t,bx(t));function cy(e,t,r,n){return Wy(e,t,aX(r),n)}const iF=1e-4,oX=1-iF,lX=1+iF,sF=.01,cX=0-sF,uX=0+sF;function js(e){return e.max-e.min}function dX(e,t,r){return Math.abs(e-t)<=r}function YN(e,t,r,n=.5){e.origin=n,e.originPoint=An(t.min,t.max,e.origin),e.scale=js(r)/js(t),e.translate=An(r.min,r.max,e.origin)-e.originPoint,(e.scale>=oX&&e.scale<=lX||isNaN(e.scale))&&(e.scale=1),(e.translate>=cX&&e.translate<=uX||isNaN(e.translate))&&(e.translate=0)}function uy(e,t,r,n){YN(e.x,t.x,r.x,n?n.originX:void 0),YN(e.y,t.y,r.y,n?n.originY:void 0)}function QN(e,t,r){e.min=r.min+t.min,e.max=e.min+js(t)}function hX(e,t,r){QN(e.x,t.x,r.x),QN(e.y,t.y,r.y)}function XN(e,t,r){e.min=t.min-r.min,e.max=e.min+js(t)}function dy(e,t,r){XN(e.x,t.x,r.x),XN(e.y,t.y,r.y)}function Na(e){return[e("x"),e("y")]}const aF=({current:e})=>e?e.ownerDocument.defaultView:null,JN=(e,t)=>Math.abs(e-t);function pX(e,t){const r=JN(e.x,t.x),n=JN(e.y,t.y);return Math.sqrt(r**2+n**2)}class oF{constructor(t,r,{transformPagePoint:n,contextWindow:a=window,dragSnapToOrigin:u=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=N2(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,z=pX(M.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!z)return;const{point:F}=M,{timestamp:D}=Ui;this.history.push({...F,timestamp:D});const{onStart:q,onMove:$}=this.handlers;I||(q&&q(this.lastMoveEvent,M),this.startEvent=this.lastMoveEvent),$&&$(this.lastMoveEvent,M)},this.handlePointerMove=(M,I)=>{this.lastMoveEvent=M,this.lastMoveEventInfo=M2(I,this.transformPagePoint),Br.update(this.updatePoint,!0)},this.handlePointerUp=(M,I)=>{this.end();const{onEnd:z,onSessionEnd:F,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const q=N2(M.type==="pointercancel"?this.lastMoveEventInfo:M2(I,this.transformPagePoint),this.history);this.startEvent&&z&&z(M,q),F&&F(M,q)},!xP(t))return;this.dragSnapToOrigin=u,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=h,this.contextWindow=a||window;const o=bx(t),_=M2(o,this.transformPagePoint),{point:T}=_,{timestamp:P}=Ui;this.history=[{...T,timestamp:P}];const{onSessionStart:E}=r;E&&E(t,N2(_,this.history)),this.removeListeners=yx(cy(this.contextWindow,"pointermove",this.handlePointerMove),cy(this.contextWindow,"pointerup",this.handlePointerUp),cy(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Eo(this.updatePoint)}}function M2(e,t){return t?{point:t(e.point)}:e}function eI(e,t){return{x:e.x-t.x,y:e.y-t.y}}function N2({point:e},t){return{point:e,delta:eI(e,lF(t)),offset:eI(e,fX(t)),velocity:mX(t,.1)}}function fX(e){return e[0]}function lF(e){return e[e.length-1]}function mX(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const a=lF(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>ol(t)));)r--;if(!n)return{x:0,y:0};const u=Ba(a.timestamp-n.timestamp);if(u===0)return{x:0,y:0};const h={x:(a.x-n.x)/u,y:(a.y-n.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function gX(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?An(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?An(r,e,n.max):Math.min(e,r)),e}function tI(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function yX(e,{top:t,left:r,bottom:n,right:a}){return{x:tI(e.x,r,a),y:tI(e.y,t,n)}}function rI(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function xX(e,t){return{x:rI(e.x,t.x),y:rI(e.y,t.y)}}function vX(e,t){let r=.5;const n=js(e),a=js(t);return a>n?r=Mf(t.min,t.max-n,e.min):n>a&&(r=Mf(e.min,e.max-a,t.min)),dl(0,1,r)}function _X(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const WT=.35;function bX(e=WT){return e===!1?e=0:e===!0&&(e=WT),{x:nI(e,"left","right"),y:nI(e,"top","bottom")}}function nI(e,t,r){return{min:iI(e,t),max:iI(e,r)}}function iI(e,t){return typeof e=="number"?e:e[t]||0}const wX=new WeakMap;class SX{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Xn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const u=E=>{const{dragSnapToOrigin:M}=this.getProps();M?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(bx(E).point)},h=(E,M)=>{const{drag:I,dragPropagation:z,onDragStart:F}=this.getProps();if(I&&!z&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xY(I),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=M,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Na(q=>{let $=this.getAxisMotionValue(q).get()||0;if(ll.test($)){const{projection:W}=this.visualElement;if(W&&W.layout){const te=W.layout.layoutBox[q];te&&($=js(te)*(parseFloat($)/100))}}this.originPoint[q]=$}),F&&Br.postRender(()=>F(E,M)),UT(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},o=(E,M)=>{this.latestPointerEvent=E,this.latestPanInfo=M;const{dragPropagation:I,dragDirectionLock:z,onDirectionLock:F,onDrag:D}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:q}=M;if(z&&this.currentDirection===null){this.currentDirection=TX(q),this.currentDirection!==null&&F&&F(this.currentDirection);return}this.updateAxis("x",M.point,q),this.updateAxis("y",M.point,q),this.visualElement.render(),D&&D(E,M)},_=(E,M)=>{this.latestPointerEvent=E,this.latestPanInfo=M,this.stop(E,M),this.latestPointerEvent=null,this.latestPanInfo=null},T=()=>Na(E=>{var M;return this.getAnimationState(E)==="paused"&&((M=this.getAxisMotionValue(E).animation)==null?void 0:M.play())}),{dragSnapToOrigin:P}=this.getProps();this.panSession=new oF(t,{onSessionStart:u,onStart:h,onMove:o,onSessionEnd:_,resumeAnimation:T},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:P,distanceThreshold:n,contextWindow:aF(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,a=r||this.latestPanInfo,u=this.isDragging;if(this.cancel(),!u||!a||!n)return;const{velocity:h}=a;this.startAnimation(h);const{onDragEnd:o}=this.getProps();o&&Br.postRender(()=>o(n,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:a}=this.getProps();if(!n||!D0(t,a,this.currentDirection))return;const u=this.getAxisMotionValue(t);let h=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(h=gX(h,this.constraints[t],this.elastic[t])),u.set(h)}resolveConstraints(){var u;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(u=this.visualElement.projection)==null?void 0:u.layout,a=this.constraints;t&&Kp(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=yX(n.layoutBox,t):this.constraints=!1,this.elastic=bX(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Na(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=_X(n.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Kp(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const u=kQ(n,a.root,this.visualElement.getTransformPagePoint());let h=xX(a.layout.layoutBox,u);if(r){const o=r(wQ(h));this.hasMutatedConstraints=!!o,o&&(h=W4(o))}return h}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:a,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:o}=this.getProps(),_=this.constraints||{},T=Na(P=>{if(!D0(P,r,this.currentDirection))return;let E=_&&_[P]||{};h&&(E={min:0,max:0});const M=a?200:1e6,I=a?40:1e7,z={type:"inertia",velocity:n?t[P]:0,bounceStiffness:M,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...u,...E};return this.startAxisValueAnimation(P,z)});return Promise.all(T).then(o)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return UT(this.visualElement,t),n.start(EP(t,n,0,r,this.visualElement,!1))}stopAnimation(){Na(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Na(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),a=n[r];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Na(r=>{const{drag:n}=this.getProps();if(!D0(r,n,this.currentDirection))return;const{projection:a}=this.visualElement,u=this.getAxisMotionValue(r);if(a&&a.layout){const{min:h,max:o}=a.layout.layoutBox[r];u.set(t[r]-An(h,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Kp(r)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Na(h=>{const o=this.getAxisMotionValue(h);if(o&&this.constraints!==!1){const _=o.get();a[h]=vX({min:_,max:_},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Na(h=>{if(!D0(h,t,null))return;const o=this.getAxisMotionValue(h),{min:_,max:T}=this.constraints[h];o.set(An(_,T,a[h]))})}addListeners(){if(!this.visualElement.current)return;wX.set(this.visualElement,this);const t=this.visualElement.current,r=cy(t,"pointerdown",_=>{const{drag:T,dragListener:P=!0}=this.getProps();T&&P&&this.start(_)}),n=()=>{const{dragConstraints:_}=this.getProps();Kp(_)&&_.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,u=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Br.read(n);const h=Wy(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:_,hasLayoutChanged:T})=>{this.isDragging&&T&&(Na(P=>{const E=this.getAxisMotionValue(P);E&&(this.originPoint[P]+=_[P].translate,E.set(E.get()+_[P].translate))}),this.visualElement.render())});return()=>{h(),r(),u(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:u=!1,dragElastic:h=WT,dragMomentum:o=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:a,dragConstraints:u,dragElastic:h,dragMomentum:o}}}function D0(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function TX(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class kX extends Mu{constructor(t){super(t),this.removeGroupControls=Ys,this.removeListeners=Ys,this.controls=new SX(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ys}unmount(){this.removeGroupControls(),this.removeListeners()}}const sI=e=>(t,r)=>{e&&Br.postRender(()=>e(t,r))};class CX extends Mu{constructor(){super(...arguments),this.removePointerDownListener=Ys}onPointerDown(t){this.session=new oF(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:aF(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:sI(t),onStart:sI(r),onMove:n,onEnd:(u,h)=>{delete this.session,a&&Br.postRender(()=>a(u,h))}}}mount(){this.removePointerDownListener=cy(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const x_={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function aI(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ng={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(tr.test(e))e=parseFloat(e);else return e;const r=aI(e,t.target.x),n=aI(e,t.target.y);return`${r}% ${n}%`}},PX={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,a=Tu.parse(e);if(a.length>5)return n;const u=Tu.createTransformer(e),h=typeof a[0]!="number"?1:0,o=r.x.scale*t.x,_=r.y.scale*t.y;a[0+h]/=o,a[1+h]/=_;const T=An(o,_,.5);return typeof a[2+h]=="number"&&(a[2+h]/=T),typeof a[3+h]=="number"&&(a[3+h]/=T),u(a)}};let I2=!1;class EX extends U.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:a}=this.props,{projection:u}=t;YY(jX),u&&(r.group&&r.group.add(u),n&&n.register&&a&&n.register(u),I2&&u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),x_.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:a,isPresent:u}=this.props,{projection:h}=n;return h&&(h.isPresent=u,I2=!0,a||t.layoutDependency!==r||r===void 0||t.isPresent!==u?h.willUpdate():this.safeToRemove(),t.isPresent!==u&&(u?h.promote():h.relegate()||Br.postRender(()=>{const o=h.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),yP.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:a}=t;I2=!0,a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cF(e){const[t,r]=M4(),n=U.useContext(ZC);return f.jsx(EX,{...e,layoutGroup:n,switchLayoutGroup:U.useContext(U4),isPresent:t,safeToRemove:r})}const jX={borderRadius:{...Ng,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ng,borderTopRightRadius:Ng,borderBottomLeftRadius:Ng,borderBottomRightRadius:Ng,boxShadow:PX};function AX(e,t,r){const n=Wi(e)?e:bo(e);return n.start(EP("",n,t,r)),n.animation}const MX=(e,t)=>e.depth-t.depth;class NX{constructor(){this.children=[],this.isDirty=!1}add(t){YC(this.children,t),this.isDirty=!0}remove(t){QC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(MX),this.isDirty=!1,this.children.forEach(t)}}function IX(e,t){const r=Ws.now(),n=({timestamp:a})=>{const u=a-r;u>=t&&(Eo(n),e(u-t))};return Br.setup(n,!0),()=>Eo(n)}const uF=["TopLeft","TopRight","BottomLeft","BottomRight"],RX=uF.length,oI=e=>typeof e=="string"?parseFloat(e):e,lI=e=>typeof e=="number"||tr.test(e);function DX(e,t,r,n,a,u){a?(e.opacity=An(0,r.opacity??1,OX(n)),e.opacityExit=An(t.opacity??1,0,LX(n))):u&&(e.opacity=An(t.opacity??1,r.opacity??1,n));for(let h=0;h<RX;h++){const o=`border${uF[h]}Radius`;let _=cI(t,o),T=cI(r,o);if(_===void 0&&T===void 0)continue;_||(_=0),T||(T=0),_===0||T===0||lI(_)===lI(T)?(e[o]=Math.max(An(oI(_),oI(T),n),0),(ll.test(T)||ll.test(_))&&(e[o]+="%")):e[o]=T}(t.rotate||r.rotate)&&(e.rotate=An(t.rotate||0,r.rotate||0,n))}function cI(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const OX=dF(0,.5,K5),LX=dF(.5,.95,Ys);function dF(e,t,r){return n=>n<e?0:n>t?1:r(Mf(e,t,n))}function uI(e,t){e.min=t.min,e.max=t.max}function Ma(e,t){uI(e.x,t.x),uI(e.y,t.y)}function dI(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function hI(e,t,r,n,a){return e-=t,e=lb(e,1/r,n),a!==void 0&&(e=lb(e,1/a,n)),e}function FX(e,t=0,r=1,n=.5,a,u=e,h=e){if(ll.test(t)&&(t=parseFloat(t),t=An(h.min,h.max,t/100)-h.min),typeof t!="number")return;let o=An(u.min,u.max,n);e===u&&(o-=t),e.min=hI(e.min,t,r,o,a),e.max=hI(e.max,t,r,o,a)}function pI(e,t,[r,n,a],u,h){FX(e,t[r],t[n],t[a],t.scale,u,h)}const zX=["x","scaleX","originX"],BX=["y","scaleY","originY"];function fI(e,t,r,n){pI(e.x,t,zX,r?r.x:void 0,n?n.x:void 0),pI(e.y,t,BX,r?r.y:void 0,n?n.y:void 0)}function mI(e){return e.translate===0&&e.scale===1}function hF(e){return mI(e.x)&&mI(e.y)}function gI(e,t){return e.min===t.min&&e.max===t.max}function VX(e,t){return gI(e.x,t.x)&&gI(e.y,t.y)}function yI(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pF(e,t){return yI(e.x,t.x)&&yI(e.y,t.y)}function xI(e){return js(e.x)/js(e.y)}function vI(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class $X{constructor(){this.members=[]}add(t){YC(this.members,t),t.scheduleRender()}remove(t){if(QC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let n;for(let a=r;a>=0;a--){const u=this.members[a];if(u.isPresent!==!1){n=u;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function UX(e,t,r){let n="";const a=e.x.translate/t.x,u=e.y.translate/t.y,h=(r==null?void 0:r.z)||0;if((a||u||h)&&(n=`translate3d(${a}px, ${u}px, ${h}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:T,rotate:P,rotateX:E,rotateY:M,skewX:I,skewY:z}=r;T&&(n=`perspective(${T}px) ${n}`),P&&(n+=`rotate(${P}deg) `),E&&(n+=`rotateX(${E}deg) `),M&&(n+=`rotateY(${M}deg) `),I&&(n+=`skewX(${I}deg) `),z&&(n+=`skewY(${z}deg) `)}const o=e.x.scale*t.x,_=e.y.scale*t.y;return(o!==1||_!==1)&&(n+=`scale(${o}, ${_})`),n||"none"}const R2=["","X","Y","Z"],qX=1e3;let WX=0;function D2(e,t,r,n){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),n&&(n[e]=0))}function fF(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=J4(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:u}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Br,!(a||u))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&fF(n)}function mF({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(h={},o=t==null?void 0:t()){this.id=WX++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZX),this.nodes.forEach(XX),this.nodes.forEach(JX),this.nodes.forEach(KX)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new NX)}addEventListener(h,o){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new JC),this.eventHandlers.get(h).add(o)}notifyListeners(h,...o){const _=this.eventHandlers.get(h);_&&_.notify(...o)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=vP(h)&&!IY(h),this.instance=h;const{layoutId:o,layout:_,visualElement:T}=this.options;if(T&&!T.current&&T.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(_||o)&&(this.isLayoutDirty=!0),e){let P,E=0;const M=()=>this.root.updateBlockedByResize=!1;Br.read(()=>{E=window.innerWidth}),e(h,()=>{const I=window.innerWidth;I!==E&&(E=I,this.root.updateBlockedByResize=!0,P&&P(),P=IX(M,250),x_.hasAnimatedSinceResize&&(x_.hasAnimatedSinceResize=!1,this.nodes.forEach(wI)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&T&&(o||_)&&this.addEventListener("didUpdate",({delta:P,hasLayoutChanged:E,hasRelativeLayoutChanged:M,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const z=this.options.transition||T.getDefaultTransition()||iJ,{onLayoutAnimationStart:F,onLayoutAnimationComplete:D}=T.getProps(),q=!this.targetLayout||!pF(this.targetLayout,I),$=!E&&M;if(this.options.layoutRoot||this.resumeFrom||$||E&&(q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const W={...pP(z,"layout"),onPlay:F,onComplete:D};(T.shouldReduceMotion||this.options.layoutRoot)&&(W.delay=0,W.type=!1),this.startAnimation(W),this.setAnimationOrigin(P,$)}else E||wI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Eo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(eJ),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let P=0;P<this.path.length;P++){const E=this.path[P];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:o,layout:_}=this.options;if(o===void 0&&!_)return;const T=this.getTransformTemplate();this.prevTransformTemplateValue=T?T(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(_I);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(bI);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QX),this.nodes.forEach(GX),this.nodes.forEach(HX)):this.nodes.forEach(bI),this.clearAllSnapshots();const o=Ws.now();Ui.delta=dl(0,1e3/60,o-Ui.timestamp),Ui.timestamp=o,Ui.isProcessing=!0,S2.update.process(Ui),S2.preRender.process(Ui),S2.render.process(Ui),Ui.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,yP.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(YX),this.sharedNodes.forEach(tJ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Br.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Br.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!js(this.snapshot.measuredBox.x)&&!js(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Xn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(o=!1),o&&this.instance){const _=n(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:_,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!a)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!hF(this.projectionDelta),_=this.getTransformTemplate(),T=_?_(this.latestValues,""):void 0,P=T!==this.prevTransformTemplateValue;h&&this.instance&&(o||Ad(this.latestValues)||P)&&(a(this.instance,T),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const o=this.measurePageBox();let _=this.removeElementScroll(o);return h&&(_=this.removeTransform(_)),sJ(_),{animationId:this.root.animationId,measuredBox:o,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){var T;const{visualElement:h}=this.options;if(!h)return Xn();const o=h.measureViewportBox();if(!(((T=this.scroll)==null?void 0:T.wasRoot)||this.path.some(aJ))){const{scroll:P}=this.root;P&&(Yp(o.x,P.offset.x),Yp(o.y,P.offset.y))}return o}removeElementScroll(h){var _;const o=Xn();if(Ma(o,h),(_=this.scroll)!=null&&_.wasRoot)return o;for(let T=0;T<this.path.length;T++){const P=this.path[T],{scroll:E,options:M}=P;P!==this.root&&E&&M.layoutScroll&&(E.wasRoot&&Ma(o,h),Yp(o.x,E.offset.x),Yp(o.y,E.offset.y))}return o}applyTransform(h,o=!1){const _=Xn();Ma(_,h);for(let T=0;T<this.path.length;T++){const P=this.path[T];!o&&P.options.layoutScroll&&P.scroll&&P!==P.root&&Qp(_,{x:-P.scroll.offset.x,y:-P.scroll.offset.y}),Ad(P.latestValues)&&Qp(_,P.latestValues)}return Ad(this.latestValues)&&Qp(_,this.latestValues),_}removeTransform(h){const o=Xn();Ma(o,h);for(let _=0;_<this.path.length;_++){const T=this.path[_];if(!T.instance||!Ad(T.latestValues))continue;zT(T.latestValues)&&T.updateSnapshot();const P=Xn(),E=T.measurePageBox();Ma(P,E),fI(o,T.latestValues,T.snapshot?T.snapshot.layoutBox:void 0,P)}return Ad(this.latestValues)&&fI(o,this.latestValues),o}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ui.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var M;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const _=!!this.resumingFrom||this!==o;if(!(h||_&&this.isSharedProjectionDirty||this.isProjectionDirty||(M=this.parent)!=null&&M.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:P,layoutId:E}=this.options;if(!(!this.layout||!(P||E))){if(this.resolvedRelativeTargetAt=Ui.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),dy(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Xn(),this.targetWithTransforms=Xn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hX(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ma(this.target,this.layout.layoutBox),H4(this.target,this.targetDelta)):Ma(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Xn(),this.relativeTargetOrigin=Xn(),dy(this.relativeTargetOrigin,this.target,I.target),Ma(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zT(this.parent.latestValues)||G4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var z;const h=this.getLead(),o=!!this.resumingFrom||this!==h;let _=!0;if((this.isProjectionDirty||(z=this.parent)!=null&&z.isProjectionDirty)&&(_=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(_=!1),this.resolvedRelativeTargetAt===Ui.timestamp&&(_=!1),_)return;const{layout:T,layoutId:P}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(T||P))return;Ma(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,M=this.treeScale.y;TQ(this.layoutCorrected,this.treeScale,this.path,o),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=Xn());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dI(this.prevProjectionDelta.x,this.projectionDelta.x),dI(this.prevProjectionDelta.y,this.projectionDelta.y)),uy(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==M||!vI(this.projectionDelta.x,this.prevProjectionDelta.x)||!vI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),h){const _=this.getStack();_&&_.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Xp(),this.projectionDelta=Xp(),this.projectionDeltaWithTransform=Xp()}setAnimationOrigin(h,o=!1){const _=this.snapshot,T=_?_.latestValues:{},P={...this.latestValues},E=Xp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const M=Xn(),I=_?_.source:void 0,z=this.layout?this.layout.source:void 0,F=I!==z,D=this.getStack(),q=!D||D.members.length<=1,$=!!(F&&!q&&this.options.crossfade===!0&&!this.path.some(nJ));this.animationProgress=0;let W;this.mixTargetDelta=te=>{const se=te/1e3;SI(E.x,h.x,se),SI(E.y,h.y,se),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(dy(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rJ(this.relativeTarget,this.relativeTargetOrigin,M,se),W&&VX(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=Xn()),Ma(W,this.relativeTarget)),F&&(this.animationValues=P,DX(P,T,this.latestValues,se,$,q)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=se},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var o,_,T;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(T=(_=this.resumingFrom)==null?void 0:_.currentAnimation)==null||T.stop(),this.pendingAnimation&&(Eo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Br.update(()=>{x_.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=bo(0)),this.currentAnimation=AX(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:P=>{this.mixTargetDelta(P),h.onUpdate&&h.onUpdate(P)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(qX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:o,target:_,layout:T,latestValues:P}=h;if(!(!o||!_||!T)){if(this!==h&&this.layout&&T&&gF(this.options.animationType,this.layout.layoutBox,T.layoutBox)){_=this.target||Xn();const E=js(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+E;const M=js(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+M}Ma(o,_),Qp(o,P),uy(this.projectionDeltaWithTransform,this.layoutCorrected,o,P)}}registerSharedNode(h,o){this.sharedNodes.has(h)||this.sharedNodes.set(h,new $X),this.sharedNodes.get(h).add(o);const T=o.options.initialPromotionConfig;o.promote({transition:T?T.transition:void 0,preserveFollowOpacity:T&&T.shouldPreserveFollowOpacity?T.shouldPreserveFollowOpacity(o):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var o;const{layoutId:h}=this.options;return h?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:h}=this.options;return h?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:o,preserveFollowOpacity:_}={}){const T=this.getStack();T&&T.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let o=!1;const{latestValues:_}=h;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(o=!0),!o)return;const T={};_.z&&D2("z",h,T,this.animationValues);for(let P=0;P<R2.length;P++)D2(`rotate${R2[P]}`,h,T,this.animationValues),D2(`skew${R2[P]}`,h,T,this.animationValues);h.render();for(const P in T)h.setStaticValue(P,T[P]),this.animationValues&&(this.animationValues[P]=T[P]);h.scheduleRender()}applyProjectionStyles(h,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const _=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=y_(o==null?void 0:o.pointerEvents)||"",h.transform=_?_(this.latestValues,""):"none";return}const T=this.getLead();if(!this.projectionDelta||!this.layout||!T.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=y_(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ad(this.latestValues)&&(h.transform=_?_({},""):"none",this.hasProjected=!1);return}h.visibility="";const P=T.animationValues||T.latestValues;this.applyTransformsToTarget();let E=UX(this.projectionDeltaWithTransform,this.treeScale,P);_&&(E=_(P,E)),h.transform=E;const{x:M,y:I}=this.projectionDelta;h.transformOrigin=`${M.origin*100}% ${I.origin*100}% 0`,T.animationValues?h.opacity=T===this?P.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:P.opacityExit:h.opacity=T===this?P.opacity!==void 0?P.opacity:"":P.opacityExit!==void 0?P.opacityExit:0;for(const z in qy){if(P[z]===void 0)continue;const{correct:F,applyTo:D,isCSSVariable:q}=qy[z],$=E==="none"?P[z]:F(P[z],T);if(D){const W=D.length;for(let te=0;te<W;te++)h[D[te]]=$}else q?this.options.visualElement.renderState.vars[z]=$:h[z]=$}this.options.layoutId&&(h.pointerEvents=T===this?y_(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var o;return(o=h.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(_I),this.root.sharedNodes.clear()}}}function GX(e){e.updateLayout()}function HX(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:u}=e.options,h=t.source!==e.layout.source;u==="size"?Na(E=>{const M=h?t.measuredBox[E]:t.layoutBox[E],I=js(M);M.min=n[E].min,M.max=M.min+I}):gF(u,t.layoutBox,n)&&Na(E=>{const M=h?t.measuredBox[E]:t.layoutBox[E],I=js(n[E]);M.max=M.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+I)});const o=Xp();uy(o,n,t.layoutBox);const _=Xp();h?uy(_,e.applyTransform(a,!0),t.measuredBox):uy(_,n,t.layoutBox);const T=!hF(o);let P=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:M,layout:I}=E;if(M&&I){const z=Xn();dy(z,t.layoutBox,M.layoutBox);const F=Xn();dy(F,n,I.layoutBox),pF(z,F)||(P=!0),E.options.layoutRoot&&(e.relativeTarget=F,e.relativeTargetOrigin=z,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:_,layoutDelta:o,hasLayoutChanged:T,hasRelativeLayoutChanged:P})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function ZX(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function KX(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function YX(e){e.clearSnapshot()}function _I(e){e.clearMeasurements()}function bI(e){e.isLayoutDirty=!1}function QX(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function wI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function XX(e){e.resolveTargetDelta()}function JX(e){e.calcProjection()}function eJ(e){e.resetSkewAndRotation()}function tJ(e){e.removeLeadSnapshot()}function SI(e,t,r){e.translate=An(t.translate,0,r),e.scale=An(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function TI(e,t,r,n){e.min=An(t.min,r.min,n),e.max=An(t.max,r.max,n)}function rJ(e,t,r,n){TI(e.x,t.x,r.x,n),TI(e.y,t.y,r.y,n)}function nJ(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const iJ={duration:.45,ease:[.4,0,.1,1]},kI=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),CI=kI("applewebkit/")&&!kI("chrome/")?Math.round:Ys;function PI(e){e.min=CI(e.min),e.max=CI(e.max)}function sJ(e){PI(e.x),PI(e.y)}function gF(e,t,r){return e==="position"||e==="preserve-aspect"&&!dX(xI(t),xI(r),.2)}function aJ(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const oJ=mF({attachResizeListener:(e,t)=>Wy(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),O2={current:void 0},yF=mF({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!O2.current){const e=new oJ({});e.mount(window),e.setOptions({layoutScroll:!0}),O2.current=e}return O2.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lJ={pan:{Feature:CX},drag:{Feature:kX,ProjectionNode:yF,MeasureLayout:cF}};function EI(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const a="onHover"+r,u=n[a];u&&Br.postRender(()=>u(t,bx(t)))}class cJ extends Mu{mount(){const{current:t}=this.node;t&&(this.unmount=vY(t,(r,n)=>(EI(this.node,n,"Start"),a=>EI(this.node,a,"End"))))}unmount(){}}class uJ extends Mu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=yx(Wy(this.node.current,"focus",()=>this.onFocus()),Wy(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function jI(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const a="onTap"+(r==="End"?"":r),u=n[a];u&&Br.postRender(()=>u(t,bx(t)))}class dJ extends Mu{mount(){const{current:t}=this.node;t&&(this.unmount=SY(t,(r,n)=>(jI(this.node,n,"Start"),(a,{success:u})=>jI(this.node,a,u?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const GT=new WeakMap,L2=new WeakMap,hJ=e=>{const t=GT.get(e.target);t&&t(e)},pJ=e=>{e.forEach(hJ)};function fJ({root:e,...t}){const r=e||document;L2.has(r)||L2.set(r,{});const n=L2.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(pJ,{root:e,...t})),n[a]}function mJ(e,t,r){const n=fJ(t);return GT.set(e,r),n.observe(e),()=>{GT.delete(e),n.unobserve(e)}}const gJ={some:0,all:1};class yJ extends Mu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:a="some",once:u}=t,h={root:r?r.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:gJ[a]},o=_=>{const{isIntersecting:T}=_;if(this.isInView===T||(this.isInView=T,u&&!T&&this.hasEnteredView))return;T&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",T);const{onViewportEnter:P,onViewportLeave:E}=this.node.getProps(),M=T?P:E;M&&M(_)};return mJ(this.node.current,h,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(xJ(t,r))&&this.startObserver()}unmount(){}}function xJ({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const vJ={inView:{Feature:yJ},tap:{Feature:dJ},focus:{Feature:uJ},hover:{Feature:cJ}},_J={layout:{ProjectionNode:yF,MeasureLayout:cF}},bJ={...sX,...vJ,...lJ,..._J},ir=bQ(bJ,RQ),wJ=50,AI=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),SJ=()=>({time:0,x:AI(),y:AI()}),TJ={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function MI(e,t,r,n){const a=r[t],{length:u,position:h}=TJ[t],o=a.current,_=r.time;a.current=e[`scroll${h}`],a.scrollLength=e[`scroll${u}`]-e[`client${u}`],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=Mf(0,a.scrollLength,a.current);const T=n-_;a.velocity=T>wJ?0:eP(a.current-o,T)}function kJ(e,t,r){MI(e,"x",t,r),MI(e,"y",t,r),t.time=r}function CJ(e,t){const r={x:0,y:0};let n=e;for(;n&&n!==t;)if(gP(n))r.x+=n.offsetLeft,r.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const a=n.getBoundingClientRect();n=n.parentElement;const u=n.getBoundingClientRect();r.x+=a.left-u.left,r.y+=a.top-u.top}else if(n instanceof SVGGraphicsElement){const{x:a,y:u}=n.getBBox();r.x+=a,r.y+=u;let h=null,o=n.parentNode;for(;!h;)o.tagName==="svg"&&(h=o),o=n.parentNode;n=h}else break;return r}const HT={start:0,center:.5,end:1};function NI(e,t,r=0){let n=0;if(e in HT&&(e=HT[e]),typeof e=="string"){const a=parseFloat(e);e.endsWith("px")?n=a:e.endsWith("%")?e=a/100:e.endsWith("vw")?n=a/100*document.documentElement.clientWidth:e.endsWith("vh")?n=a/100*document.documentElement.clientHeight:e=a}return typeof e=="number"&&(n=t*e),r+n}const PJ=[0,0];function EJ(e,t,r,n){let a=Array.isArray(e)?e:PJ,u=0,h=0;return typeof e=="number"?a=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?a=e.split(" "):a=[e,HT[e]?e:"0"]),u=NI(a[0],r,n),h=NI(a[1],t),u-h}const jJ={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},AJ={x:0,y:0};function MJ(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function NJ(e,t,r){const{offset:n=jJ.All}=r,{target:a=e,axis:u="y"}=r,h=u==="y"?"height":"width",o=a!==e?CJ(a,e):AJ,_=a===e?{width:e.scrollWidth,height:e.scrollHeight}:MJ(a),T={width:e.clientWidth,height:e.clientHeight};t[u].offset.length=0;let P=!t[u].interpolate;const E=n.length;for(let M=0;M<E;M++){const I=EJ(n[M],T[h],_[h],o[u]);!P&&I!==t[u].interpolatorOffsets[M]&&(P=!0),t[u].offset[M]=I}P&&(t[u].interpolate=cP(t[u].offset,u4(n),{clamp:!1}),t[u].interpolatorOffsets=[...t[u].offset]),t[u].progress=dl(0,1,t[u].interpolate(t[u].current))}function IJ(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)r.x.targetOffset+=n.offsetLeft,r.y.targetOffset+=n.offsetTop,n=n.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function RJ(e,t,r,n={}){return{measure:a=>{IJ(e,n.target,r),kJ(e,r,a),(n.offset||n.target)&&NJ(e,r,n)},notify:()=>t(r)}}const Ig=new WeakMap,II=new WeakMap,F2=new WeakMap,RI=e=>e===document.scrollingElement?window:e;function xF(e,{container:t=document.scrollingElement,...r}={}){if(!t)return Ys;let n=F2.get(t);n||(n=new Set,F2.set(t,n));const a=SJ(),u=RJ(t,e,a,r);if(n.add(u),!Ig.has(t)){const o=()=>{for(const E of n)E.measure(Ui.timestamp);Br.preUpdate(_)},_=()=>{for(const E of n)E.notify()},T=()=>Br.read(o);Ig.set(t,T);const P=RI(t);window.addEventListener("resize",T,{passive:!0}),t!==document.documentElement&&II.set(t,NY(t,T)),P.addEventListener("scroll",T,{passive:!0}),T()}const h=Ig.get(t);return Br.read(h,!1,!0),()=>{var T;Eo(h);const o=F2.get(t);if(!o||(o.delete(u),o.size))return;const _=Ig.get(t);Ig.delete(t),_&&(RI(t).removeEventListener("scroll",_),(T=II.get(t))==null||T(),window.removeEventListener("resize",_))}}const DI=new Map;function DJ(e){const t={value:0},r=xF(n=>{t.value=n[e.axis].progress*100},e);return{currentTime:t,cancel:r}}function vF({source:e,container:t,...r}){const{axis:n}=r;e&&(t=e);const a=DI.get(t)??new Map;DI.set(t,a);const u=r.target??"self",h=a.get(u)??{},o=n+(r.offset??[]).join(",");return h[o]||(h[o]=!r.target&&f4()?new ScrollTimeline({source:t,axis:n}):DJ({container:t,...r})),h[o]}function OJ(e,t){const r=vF(t);return e.attachTimeline({timeline:t.target?void 0:r,observe:n=>(n.pause(),A4(a=>{n.time=n.iterationDuration*a},r))})}function LJ(e){return e.length===2}function FJ(e,t){return LJ(e)?xF(r=>{e(r[t.axis].progress,r)},t):A4(e,vF(t))}function zJ(e,{axis:t="y",container:r=document.scrollingElement,...n}={}){if(!r)return Ys;const a={axis:t,container:r,...n};return typeof e=="function"?FJ(e,a):OJ(e,a)}const BJ=()=>({scrollX:bo(0),scrollY:bo(0),scrollXProgress:bo(0),scrollYProgress:bo(0)}),O0=e=>e?!e.current:!1;function Nu({container:e,target:t,...r}={}){const n=Qf(BJ),a=U.useRef(null),u=U.useRef(!1),h=U.useCallback(()=>(a.current=zJ((o,{x:_,y:T})=>{n.scrollX.set(_.current),n.scrollXProgress.set(_.progress),n.scrollY.set(T.current),n.scrollYProgress.set(T.progress)},{...r,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0}),()=>{var o;(o=a.current)==null||o.call(a)}),[e,t,JSON.stringify(r.offset)]);return nw(()=>{if(u.current=!1,O0(e)||O0(t)){u.current=!0;return}else return h()},[h]),U.useEffect(()=>{if(u.current)return Af(!O0(e)),Af(!O0(t)),h()},[h]),n}function _F(e){const t=Qf(()=>bo(e)),{isStatic:r}=U.useContext(_x);if(r){const[,n]=U.useState(e);U.useEffect(()=>t.on("change",n),[])}return t}function bF(e,t){const r=_F(t()),n=()=>r.set(t());return n(),nw(()=>{const a=()=>Br.preRender(n,!1,!0),u=e.map(h=>h.on("change",a));return()=>{u.forEach(h=>h()),Eo(n)}}),r}function VJ(e){ly.current=[],e();const t=bF(ly.current,e);return ly.current=void 0,t}function gs(e,t,r,n){if(typeof e=="function")return VJ(e);const a=typeof t=="function"?t:RY(t,r,n);return Array.isArray(e)?OI(e,a):OI([e],([u])=>a(u))}function OI(e,t){const r=Qf(()=>[]);return bF(e,()=>{r.length=0;const n=e.length;for(let a=0;a<n;a++)r[a]=e[a].get();return t(r)})}function $J(e,t={}){const{isStatic:r}=U.useContext(_x),n=()=>Wi(e)?e.get():e;if(r)return gs(n);const a=_F(n());return U.useInsertionEffect(()=>DY(a,e,t),[a,JSON.stringify(t)]),a}const UJ={some:0,all:1};function qJ(e,t,{root:r,margin:n,amount:a="some"}={}){const u=mP(e),h=new WeakMap,o=T=>{T.forEach(P=>{const E=h.get(P.target);if(P.isIntersecting!==!!E)if(P.isIntersecting){const M=t(P.target,P);typeof M=="function"?h.set(P.target,M):_.unobserve(P.target)}else typeof E=="function"&&(E(P),h.delete(P.target))})},_=new IntersectionObserver(o,{root:r,rootMargin:n,threshold:typeof a=="number"?a:UJ[a]});return u.forEach(T=>_.observe(T)),()=>_.disconnect()}function WJ(e,{root:t,margin:r,amount:n,once:a=!1,initial:u=!1}={}){const[h,o]=U.useState(u);return U.useEffect(()=>{if(!e.current||a&&h)return;const _=()=>(o(!0),a?void 0:()=>o(!1)),T={root:t&&t.current||void 0,margin:r,amount:n};return qJ(e.current,_,T)},[t,e,r,a,n]),h}function GJ({children:e,defaultTheme:t="dark",storageKey:r="healing-buds-theme",attribute:n="class",enableSystem:a=!0,disableTransitionOnChange:u=!1}){return f.jsx(G9,{attribute:n,defaultTheme:t,storageKey:r,enableSystem:a,disableTransitionOnChange:u,children:e})}const HJ=()=>{const{pathname:e}=oc();return U.useEffect(()=>{const t=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},50);return()=>clearTimeout(t)},[e]),null},jP=""+new URL("hb-logo-white-new-CFUfU4lZ.png",import.meta.url).href;var wx=e=>e.type==="checkbox",$d=e=>e instanceof Date,ks=e=>e==null;const wF=e=>typeof e=="object";var ti=e=>!ks(e)&&!Array.isArray(e)&&wF(e)&&!$d(e),ZJ=e=>ti(e)&&e.target?wx(e.target)?e.target.checked:e.target.value:e,KJ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,YJ=(e,t)=>e.has(KJ(t)),QJ=e=>{const t=e.constructor&&e.constructor.prototype;return ti(t)&&t.hasOwnProperty("isPrototypeOf")},AP=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function $i(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(AP&&(e instanceof Blob||n))&&(r||ti(e)))if(t=r?[]:{},!r&&!QJ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=$i(e[a]));else return e;return t}var cw=e=>/^\w*$/.test(e),fi=e=>e===void 0,MP=e=>Array.isArray(e)?e.filter(Boolean):[],NP=e=>MP(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Dt=(e,t,r)=>{if(!t||!ti(e))return r;const n=(cw(t)?[t]:NP(t)).reduce((a,u)=>ks(a)?a:a[u],e);return fi(n)||n===e?fi(e[t])?r:e[t]:n},Ko=e=>typeof e=="boolean",rn=(e,t,r)=>{let n=-1;const a=cw(t)?[t]:NP(t),u=a.length,h=u-1;for(;++n<u;){const o=a[n];let _=r;if(n!==h){const T=e[o];_=ti(T)||Array.isArray(T)?T:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=_,e=e[o]}};const LI={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},xo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Vl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},XJ=ht.createContext(null);XJ.displayName="HookFormContext";var JJ=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const u in e)Object.defineProperty(a,u,{get:()=>{const h=u;return t._proxyFormState[h]!==xo.all&&(t._proxyFormState[h]=!n||xo.all),e[h]}});return a};const eee=typeof window<"u"?ht.useLayoutEffect:ht.useEffect;var tl=e=>typeof e=="string",tee=(e,t,r,n,a)=>tl(e)?(n&&t.watch.add(e),Dt(r,e,a)):Array.isArray(e)?e.map(u=>(n&&t.watch.add(u),Dt(r,u))):(n&&(t.watchAll=!0),r),ZT=e=>ks(e)||!wF(e);function Qc(e,t,r=new WeakSet){if(ZT(e)||ZT(t))return e===t;if($d(e)&&$d(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const u of n){const h=e[u];if(!a.includes(u))return!1;if(u!=="ref"){const o=t[u];if($d(h)&&$d(o)||ti(h)&&ti(o)||Array.isArray(h)&&Array.isArray(o)?!Qc(h,o,r):h!==o)return!1}}return!0}var SF=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},hy=e=>Array.isArray(e)?e:[e],FI=()=>{let e=[];return{get observers(){return e},next:a=>{for(const u of e)u.next&&u.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(u=>u!==a)}}),unsubscribe:()=>{e=[]}}},Vs=e=>ti(e)&&!Object.keys(e).length,IP=e=>e.type==="file",vo=e=>typeof e=="function",cb=e=>{if(!AP)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},TF=e=>e.type==="select-multiple",RP=e=>e.type==="radio",ree=e=>RP(e)||wx(e),z2=e=>cb(e)&&e.isConnected;function nee(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=fi(e)?n++:e[t[n++]];return e}function iee(e){for(const t in e)if(e.hasOwnProperty(t)&&!fi(e[t]))return!1;return!0}function di(e,t){const r=Array.isArray(t)?t:cw(t)?[t]:NP(t),n=r.length===1?e:nee(e,r),a=r.length-1,u=r[a];return n&&delete n[u],a!==0&&(ti(n)&&Vs(n)||Array.isArray(n)&&iee(n))&&di(e,r.slice(0,-1)),e}var kF=e=>{for(const t in e)if(vo(e[t]))return!0;return!1};function ub(e,t={}){const r=Array.isArray(e);if(ti(e)||r)for(const n in e)Array.isArray(e[n])||ti(e[n])&&!kF(e[n])?(t[n]=Array.isArray(e[n])?[]:{},ub(e[n],t[n])):ks(e[n])||(t[n]=!0);return t}function CF(e,t,r){const n=Array.isArray(e);if(ti(e)||n)for(const a in e)Array.isArray(e[a])||ti(e[a])&&!kF(e[a])?fi(t)||ZT(r[a])?r[a]=Array.isArray(e[a])?ub(e[a],[]):{...ub(e[a])}:CF(e[a],ks(t)?{}:t[a],r[a]):r[a]=!Qc(e[a],t[a]);return r}var Rg=(e,t)=>CF(e,t,ub(t));const zI={value:!1,isValid:!1},BI={value:!0,isValid:!0};var PF=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!fi(e[0].attributes.value)?fi(e[0].value)||e[0].value===""?BI:{value:e[0].value,isValid:!0}:BI:zI}return zI},EF=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>fi(e)?e:t?e===""?NaN:e&&+e:r&&tl(e)?new Date(e):n?n(e):e;const VI={isValid:!1,value:null};var jF=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,VI):VI;function $I(e){const t=e.ref;return IP(t)?t.files:RP(t)?jF(e.refs).value:TF(t)?[...t.selectedOptions].map(({value:r})=>r):wx(t)?PF(e.refs).value:EF(fi(t.value)?e.ref.value:t.value,e)}var see=(e,t,r,n)=>{const a={};for(const u of e){const h=Dt(t,u);h&&rn(a,u,h._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},db=e=>e instanceof RegExp,Dg=e=>fi(e)?e:db(e)?e.source:ti(e)?db(e.value)?e.value.source:e.value:e,UI=e=>({isOnSubmit:!e||e===xo.onSubmit,isOnBlur:e===xo.onBlur,isOnChange:e===xo.onChange,isOnAll:e===xo.all,isOnTouch:e===xo.onTouched});const qI="AsyncFunction";var aee=e=>!!e&&!!e.validate&&!!(vo(e.validate)&&e.validate.constructor.name===qI||ti(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===qI)),oee=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),WI=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const py=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const u=Dt(e,a);if(u){const{_f:h,...o}=u;if(h){if(h.refs&&h.refs[0]&&t(h.refs[0],a)&&!n)return!0;if(h.ref&&t(h.ref,h.name)&&!n)return!0;if(py(o,t))break}else if(ti(o)&&py(o,t))break}}};function GI(e,t,r){const n=Dt(e,r);if(n||cw(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const u=a.join("."),h=Dt(t,u),o=Dt(e,u);if(h&&!Array.isArray(h)&&r!==u)return{name:r};if(o&&o.type)return{name:u,error:o};if(o&&o.root&&o.root.type)return{name:`${u}.root`,error:o.root};a.pop()}return{name:r}}var lee=(e,t,r,n)=>{r(e);const{name:a,...u}=e;return Vs(u)||Object.keys(u).length>=Object.keys(t).length||Object.keys(u).find(h=>t[h]===(!n||xo.all))},cee=(e,t,r)=>!e||!t||e===t||hy(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),uee=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,dee=(e,t)=>!MP(Dt(e,t)).length&&di(e,t),hee=(e,t,r)=>{const n=hy(Dt(e,r));return rn(n,"root",t[r]),rn(e,r,n),e},v_=e=>tl(e);function HI(e,t,r="validate"){if(v_(e)||Array.isArray(e)&&e.every(v_)||Ko(e)&&!e)return{type:r,message:v_(e)?e:"",ref:t}}var vp=e=>ti(e)&&!db(e)?e:{value:e,message:""},ZI=async(e,t,r,n,a,u)=>{const{ref:h,refs:o,required:_,maxLength:T,minLength:P,min:E,max:M,pattern:I,validate:z,name:F,valueAsNumber:D,mount:q}=e._f,$=Dt(r,F);if(!q||t.has(F))return{};const W=o?o[0]:h,te=Oe=>{a&&W.reportValidity&&(W.setCustomValidity(Ko(Oe)?"":Oe||""),W.reportValidity())},se={},he=RP(h),pe=wx(h),xe=he||pe,Re=(D||IP(h))&&fi(h.value)&&fi($)||cb(h)&&h.value===""||$===""||Array.isArray($)&&!$.length,Me=SF.bind(null,F,n,se),pt=(Oe,Ye,Ge,rt=Vl.maxLength,nt=Vl.minLength)=>{const Ve=Oe?Ye:Ge;se[F]={type:Oe?rt:nt,message:Ve,ref:h,...Me(Oe?rt:nt,Ve)}};if(u?!Array.isArray($)||!$.length:_&&(!xe&&(Re||ks($))||Ko($)&&!$||pe&&!PF(o).isValid||he&&!jF(o).isValid)){const{value:Oe,message:Ye}=v_(_)?{value:!!_,message:_}:vp(_);if(Oe&&(se[F]={type:Vl.required,message:Ye,ref:W,...Me(Vl.required,Ye)},!n))return te(Ye),se}if(!Re&&(!ks(E)||!ks(M))){let Oe,Ye;const Ge=vp(M),rt=vp(E);if(!ks($)&&!isNaN($)){const nt=h.valueAsNumber||$&&+$;ks(Ge.value)||(Oe=nt>Ge.value),ks(rt.value)||(Ye=nt<rt.value)}else{const nt=h.valueAsDate||new Date($),Ve=ft=>new Date(new Date().toDateString()+" "+ft),_e=h.type=="time",Le=h.type=="week";tl(Ge.value)&&$&&(Oe=_e?Ve($)>Ve(Ge.value):Le?$>Ge.value:nt>new Date(Ge.value)),tl(rt.value)&&$&&(Ye=_e?Ve($)<Ve(rt.value):Le?$<rt.value:nt<new Date(rt.value))}if((Oe||Ye)&&(pt(!!Oe,Ge.message,rt.message,Vl.max,Vl.min),!n))return te(se[F].message),se}if((T||P)&&!Re&&(tl($)||u&&Array.isArray($))){const Oe=vp(T),Ye=vp(P),Ge=!ks(Oe.value)&&$.length>+Oe.value,rt=!ks(Ye.value)&&$.length<+Ye.value;if((Ge||rt)&&(pt(Ge,Oe.message,Ye.message),!n))return te(se[F].message),se}if(I&&!Re&&tl($)){const{value:Oe,message:Ye}=vp(I);if(db(Oe)&&!$.match(Oe)&&(se[F]={type:Vl.pattern,message:Ye,ref:h,...Me(Vl.pattern,Ye)},!n))return te(Ye),se}if(z){if(vo(z)){const Oe=await z($,r),Ye=HI(Oe,W);if(Ye&&(se[F]={...Ye,...Me(Vl.validate,Ye.message)},!n))return te(Ye.message),se}else if(ti(z)){let Oe={};for(const Ye in z){if(!Vs(Oe)&&!n)break;const Ge=HI(await z[Ye]($,r),W,Ye);Ge&&(Oe={...Ge,...Me(Ye,Ge.message)},te(Ge.message),n&&(se[F]=Oe))}if(!Vs(Oe)&&(se[F]={ref:W,...Oe},!n))return se}}return te(!0),se};const pee={mode:xo.onSubmit,reValidateMode:xo.onChange,shouldFocusError:!0};function fee(e={}){let t={...pee,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=ti(t.defaultValues)||ti(t.values)?$i(t.defaultValues||t.values)||{}:{},u=t.shouldUnregister?{}:$i(a),h={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},_,T=0;const P={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let E={...P};const M={array:FI(),state:FI()},I=t.criteriaMode===xo.all,z=Ee=>Be=>{clearTimeout(T),T=setTimeout(Ee,Be)},F=async Ee=>{if(!t.disabled&&(P.isValid||E.isValid||Ee)){const Be=t.resolver?Vs((await pe()).errors):await Re(n,!0);Be!==r.isValid&&M.state.next({isValid:Be})}},D=(Ee,Be)=>{!t.disabled&&(P.isValidating||P.validatingFields||E.isValidating||E.validatingFields)&&((Ee||Array.from(o.mount)).forEach(He=>{He&&(Be?rn(r.validatingFields,He,Be):di(r.validatingFields,He))}),M.state.next({validatingFields:r.validatingFields,isValidating:!Vs(r.validatingFields)}))},q=(Ee,Be=[],He,xt,vt=!0,dt=!0)=>{if(xt&&He&&!t.disabled){if(h.action=!0,dt&&Array.isArray(Dt(n,Ee))){const Tt=He(Dt(n,Ee),xt.argA,xt.argB);vt&&rn(n,Ee,Tt)}if(dt&&Array.isArray(Dt(r.errors,Ee))){const Tt=He(Dt(r.errors,Ee),xt.argA,xt.argB);vt&&rn(r.errors,Ee,Tt),dee(r.errors,Ee)}if((P.touchedFields||E.touchedFields)&&dt&&Array.isArray(Dt(r.touchedFields,Ee))){const Tt=He(Dt(r.touchedFields,Ee),xt.argA,xt.argB);vt&&rn(r.touchedFields,Ee,Tt)}(P.dirtyFields||E.dirtyFields)&&(r.dirtyFields=Rg(a,u)),M.state.next({name:Ee,isDirty:pt(Ee,Be),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else rn(u,Ee,Be)},$=(Ee,Be)=>{rn(r.errors,Ee,Be),M.state.next({errors:r.errors})},W=Ee=>{r.errors=Ee,M.state.next({errors:r.errors,isValid:!1})},te=(Ee,Be,He,xt)=>{const vt=Dt(n,Ee);if(vt){const dt=Dt(u,Ee,fi(He)?Dt(a,Ee):He);fi(dt)||xt&&xt.defaultChecked||Be?rn(u,Ee,Be?dt:$I(vt._f)):Ge(Ee,dt),h.mount&&F()}},se=(Ee,Be,He,xt,vt)=>{let dt=!1,Tt=!1;const or={name:Ee};if(!t.disabled){if(!He||xt){(P.isDirty||E.isDirty)&&(Tt=r.isDirty,r.isDirty=or.isDirty=pt(),dt=Tt!==or.isDirty);const vr=Qc(Dt(a,Ee),Be);Tt=!!Dt(r.dirtyFields,Ee),vr?di(r.dirtyFields,Ee):rn(r.dirtyFields,Ee,!0),or.dirtyFields=r.dirtyFields,dt=dt||(P.dirtyFields||E.dirtyFields)&&Tt!==!vr}if(He){const vr=Dt(r.touchedFields,Ee);vr||(rn(r.touchedFields,Ee,He),or.touchedFields=r.touchedFields,dt=dt||(P.touchedFields||E.touchedFields)&&vr!==He)}dt&&vt&&M.state.next(or)}return dt?or:{}},he=(Ee,Be,He,xt)=>{const vt=Dt(r.errors,Ee),dt=(P.isValid||E.isValid)&&Ko(Be)&&r.isValid!==Be;if(t.delayError&&He?(_=z(()=>$(Ee,He)),_(t.delayError)):(clearTimeout(T),_=null,He?rn(r.errors,Ee,He):di(r.errors,Ee)),(He?!Qc(vt,He):vt)||!Vs(xt)||dt){const Tt={...xt,...dt&&Ko(Be)?{isValid:Be}:{},errors:r.errors,name:Ee};r={...r,...Tt},M.state.next(Tt)}},pe=async Ee=>{D(Ee,!0);const Be=await t.resolver(u,t.context,see(Ee||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return D(Ee),Be},xe=async Ee=>{const{errors:Be}=await pe(Ee);if(Ee)for(const He of Ee){const xt=Dt(Be,He);xt?rn(r.errors,He,xt):di(r.errors,He)}else r.errors=Be;return Be},Re=async(Ee,Be,He={valid:!0})=>{for(const xt in Ee){const vt=Ee[xt];if(vt){const{_f:dt,...Tt}=vt;if(dt){const or=o.array.has(dt.name),vr=vt._f&&aee(vt._f);vr&&P.validatingFields&&D([xt],!0);const Tn=await ZI(vt,o.disabled,u,I,t.shouldUseNativeValidation&&!Be,or);if(vr&&P.validatingFields&&D([xt]),Tn[dt.name]&&(He.valid=!1,Be))break;!Be&&(Dt(Tn,dt.name)?or?hee(r.errors,Tn,dt.name):rn(r.errors,dt.name,Tn[dt.name]):di(r.errors,dt.name))}!Vs(Tt)&&await Re(Tt,Be,He)}}return He.valid},Me=()=>{for(const Ee of o.unMount){const Be=Dt(n,Ee);Be&&(Be._f.refs?Be._f.refs.every(He=>!z2(He)):!z2(Be._f.ref))&&er(Ee)}o.unMount=new Set},pt=(Ee,Be)=>!t.disabled&&(Ee&&Be&&rn(u,Ee,Be),!Qc(ft(),a)),Oe=(Ee,Be,He)=>tee(Ee,o,{...h.mount?u:fi(Be)?a:tl(Ee)?{[Ee]:Be}:Be},He,Be),Ye=Ee=>MP(Dt(h.mount?u:a,Ee,t.shouldUnregister?Dt(a,Ee,[]):[])),Ge=(Ee,Be,He={})=>{const xt=Dt(n,Ee);let vt=Be;if(xt){const dt=xt._f;dt&&(!dt.disabled&&rn(u,Ee,EF(Be,dt)),vt=cb(dt.ref)&&ks(Be)?"":Be,TF(dt.ref)?[...dt.ref.options].forEach(Tt=>Tt.selected=vt.includes(Tt.value)):dt.refs?wx(dt.ref)?dt.refs.forEach(Tt=>{(!Tt.defaultChecked||!Tt.disabled)&&(Array.isArray(vt)?Tt.checked=!!vt.find(or=>or===Tt.value):Tt.checked=vt===Tt.value||!!vt)}):dt.refs.forEach(Tt=>Tt.checked=Tt.value===vt):IP(dt.ref)?dt.ref.value="":(dt.ref.value=vt,dt.ref.type||M.state.next({name:Ee,values:$i(u)})))}(He.shouldDirty||He.shouldTouch)&&se(Ee,vt,He.shouldTouch,He.shouldDirty,!0),He.shouldValidate&&Le(Ee)},rt=(Ee,Be,He)=>{for(const xt in Be){if(!Be.hasOwnProperty(xt))return;const vt=Be[xt],dt=Ee+"."+xt,Tt=Dt(n,dt);(o.array.has(Ee)||ti(vt)||Tt&&!Tt._f)&&!$d(vt)?rt(dt,vt,He):Ge(dt,vt,He)}},nt=(Ee,Be,He={})=>{const xt=Dt(n,Ee),vt=o.array.has(Ee),dt=$i(Be);rn(u,Ee,dt),vt?(M.array.next({name:Ee,values:$i(u)}),(P.isDirty||P.dirtyFields||E.isDirty||E.dirtyFields)&&He.shouldDirty&&M.state.next({name:Ee,dirtyFields:Rg(a,u),isDirty:pt(Ee,dt)})):xt&&!xt._f&&!ks(dt)?rt(Ee,dt,He):Ge(Ee,dt,He),WI(Ee,o)&&M.state.next({...r,name:Ee}),M.state.next({name:h.mount?Ee:void 0,values:$i(u)})},Ve=async Ee=>{h.mount=!0;const Be=Ee.target;let He=Be.name,xt=!0;const vt=Dt(n,He),dt=vr=>{xt=Number.isNaN(vr)||$d(vr)&&isNaN(vr.getTime())||Qc(vr,Dt(u,He,vr))},Tt=UI(t.mode),or=UI(t.reValidateMode);if(vt){let vr,Tn;const ii=Be.type?$I(vt._f):ZJ(Ee),_i=Ee.type===LI.BLUR||Ee.type===LI.FOCUS_OUT,Rs=!oee(vt._f)&&!t.resolver&&!Dt(r.errors,He)&&!vt._f.deps||uee(_i,Dt(r.touchedFields,He),r.isSubmitted,or,Tt),Kn=WI(He,o,_i);rn(u,He,ii),_i?(vt._f.onBlur&&vt._f.onBlur(Ee),_&&_(0)):vt._f.onChange&&vt._f.onChange(Ee);const nn=se(He,ii,_i),Te=!Vs(nn)||Kn;if(!_i&&M.state.next({name:He,type:Ee.type,values:$i(u)}),Rs)return(P.isValid||E.isValid)&&(t.mode==="onBlur"?_i&&F():_i||F()),Te&&M.state.next({name:He,...Kn?{}:nn});if(!_i&&Kn&&M.state.next({...r}),t.resolver){const{errors:Q}=await pe([He]);if(dt(ii),xt){const ee=GI(r.errors,n,He),ie=GI(Q,n,ee.name||He);vr=ie.error,He=ie.name,Tn=Vs(Q)}}else D([He],!0),vr=(await ZI(vt,o.disabled,u,I,t.shouldUseNativeValidation))[He],D([He]),dt(ii),xt&&(vr?Tn=!1:(P.isValid||E.isValid)&&(Tn=await Re(n,!0)));xt&&(vt._f.deps&&Le(vt._f.deps),he(He,Tn,vr,nn))}},_e=(Ee,Be)=>{if(Dt(r.errors,Be)&&Ee.focus)return Ee.focus(),1},Le=async(Ee,Be={})=>{let He,xt;const vt=hy(Ee);if(t.resolver){const dt=await xe(fi(Ee)?Ee:vt);He=Vs(dt),xt=Ee?!vt.some(Tt=>Dt(dt,Tt)):He}else Ee?(xt=(await Promise.all(vt.map(async dt=>{const Tt=Dt(n,dt);return await Re(Tt&&Tt._f?{[dt]:Tt}:Tt)}))).every(Boolean),!(!xt&&!r.isValid)&&F()):xt=He=await Re(n);return M.state.next({...!tl(Ee)||(P.isValid||E.isValid)&&He!==r.isValid?{}:{name:Ee},...t.resolver||!Ee?{isValid:He}:{},errors:r.errors}),Be.shouldFocus&&!xt&&py(n,_e,Ee?vt:o.mount),xt},ft=Ee=>{const Be={...h.mount?u:a};return fi(Ee)?Be:tl(Ee)?Dt(Be,Ee):Ee.map(He=>Dt(Be,He))},yt=(Ee,Be)=>({invalid:!!Dt((Be||r).errors,Ee),isDirty:!!Dt((Be||r).dirtyFields,Ee),error:Dt((Be||r).errors,Ee),isValidating:!!Dt(r.validatingFields,Ee),isTouched:!!Dt((Be||r).touchedFields,Ee)}),wt=Ee=>{Ee&&hy(Ee).forEach(Be=>di(r.errors,Be)),M.state.next({errors:Ee?r.errors:{}})},Lt=(Ee,Be,He)=>{const xt=(Dt(n,Ee,{_f:{}})._f||{}).ref,vt=Dt(r.errors,Ee)||{},{ref:dt,message:Tt,type:or,...vr}=vt;rn(r.errors,Ee,{...vr,...Be,ref:xt}),M.state.next({name:Ee,errors:r.errors,isValid:!1}),He&&He.shouldFocus&&xt&&xt.focus&&xt.focus()},Wt=(Ee,Be)=>vo(Ee)?M.state.subscribe({next:He=>"values"in He&&Ee(Oe(void 0,Be),He)}):Oe(Ee,Be,!0),wr=Ee=>M.state.subscribe({next:Be=>{cee(Ee.name,Be.name,Ee.exact)&&lee(Be,Ee.formState||P,Nr,Ee.reRenderRoot)&&Ee.callback({values:{...u},...r,...Be,defaultValues:a})}}).unsubscribe,kr=Ee=>(h.mount=!0,E={...E,...Ee.formState},wr({...Ee,formState:E})),er=(Ee,Be={})=>{for(const He of Ee?hy(Ee):o.mount)o.mount.delete(He),o.array.delete(He),Be.keepValue||(di(n,He),di(u,He)),!Be.keepError&&di(r.errors,He),!Be.keepDirty&&di(r.dirtyFields,He),!Be.keepTouched&&di(r.touchedFields,He),!Be.keepIsValidating&&di(r.validatingFields,He),!t.shouldUnregister&&!Be.keepDefaultValue&&di(a,He);M.state.next({values:$i(u)}),M.state.next({...r,...Be.keepDirty?{isDirty:pt()}:{}}),!Be.keepIsValid&&F()},Yr=({disabled:Ee,name:Be})=>{(Ko(Ee)&&h.mount||Ee||o.disabled.has(Be))&&(Ee?o.disabled.add(Be):o.disabled.delete(Be))},Zn=(Ee,Be={})=>{let He=Dt(n,Ee);const xt=Ko(Be.disabled)||Ko(t.disabled);return rn(n,Ee,{...He||{},_f:{...He&&He._f?He._f:{ref:{name:Ee}},name:Ee,mount:!0,...Be}}),o.mount.add(Ee),He?Yr({disabled:Ko(Be.disabled)?Be.disabled:t.disabled,name:Ee}):te(Ee,!0,Be.value),{...xt?{disabled:Be.disabled||t.disabled}:{},...t.progressive?{required:!!Be.required,min:Dg(Be.min),max:Dg(Be.max),minLength:Dg(Be.minLength),maxLength:Dg(Be.maxLength),pattern:Dg(Be.pattern)}:{},name:Ee,onChange:Ve,onBlur:Ve,ref:vt=>{if(vt){Zn(Ee,Be),He=Dt(n,Ee);const dt=fi(vt.value)&&vt.querySelectorAll&&vt.querySelectorAll("input,select,textarea")[0]||vt,Tt=ree(dt),or=He._f.refs||[];if(Tt?or.find(vr=>vr===dt):dt===He._f.ref)return;rn(n,Ee,{_f:{...He._f,...Tt?{refs:[...or.filter(z2),dt,...Array.isArray(Dt(a,Ee))?[{}]:[]],ref:{type:dt.type,name:Ee}}:{ref:dt}}}),te(Ee,!1,void 0,dt)}else He=Dt(n,Ee,{}),He._f&&(He._f.mount=!1),(t.shouldUnregister||Be.shouldUnregister)&&!(YJ(o.array,Ee)&&h.action)&&o.unMount.add(Ee)}}},Rn=()=>t.shouldFocusError&&py(n,_e,o.mount),ri=Ee=>{Ko(Ee)&&(M.state.next({disabled:Ee}),py(n,(Be,He)=>{const xt=Dt(n,He);xt&&(Be.disabled=xt._f.disabled||Ee,Array.isArray(xt._f.refs)&&xt._f.refs.forEach(vt=>{vt.disabled=xt._f.disabled||Ee}))},0,!1))},vn=(Ee,Be)=>async He=>{let xt;He&&(He.preventDefault&&He.preventDefault(),He.persist&&He.persist());let vt=$i(u);if(M.state.next({isSubmitting:!0}),t.resolver){const{errors:dt,values:Tt}=await pe();r.errors=dt,vt=$i(Tt)}else await Re(n);if(o.disabled.size)for(const dt of o.disabled)di(vt,dt);if(di(r.errors,"root"),Vs(r.errors)){M.state.next({errors:{}});try{await Ee(vt,He)}catch(dt){xt=dt}}else Be&&await Be({...r.errors},He),Rn(),setTimeout(Rn);if(M.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vs(r.errors)&&!xt,submitCount:r.submitCount+1,errors:r.errors}),xt)throw xt},Ni=(Ee,Be={})=>{Dt(n,Ee)&&(fi(Be.defaultValue)?nt(Ee,$i(Dt(a,Ee))):(nt(Ee,Be.defaultValue),rn(a,Ee,$i(Be.defaultValue))),Be.keepTouched||di(r.touchedFields,Ee),Be.keepDirty||(di(r.dirtyFields,Ee),r.isDirty=Be.defaultValue?pt(Ee,$i(Dt(a,Ee))):pt()),Be.keepError||(di(r.errors,Ee),P.isValid&&F()),M.state.next({...r}))},Cr=(Ee,Be={})=>{const He=Ee?$i(Ee):a,xt=$i(He),vt=Vs(Ee),dt=vt?a:xt;if(Be.keepDefaultValues||(a=He),!Be.keepValues){if(Be.keepDirtyValues){const Tt=new Set([...o.mount,...Object.keys(Rg(a,u))]);for(const or of Array.from(Tt))Dt(r.dirtyFields,or)?rn(dt,or,Dt(u,or)):nt(or,Dt(dt,or))}else{if(AP&&fi(Ee))for(const Tt of o.mount){const or=Dt(n,Tt);if(or&&or._f){const vr=Array.isArray(or._f.refs)?or._f.refs[0]:or._f.ref;if(cb(vr)){const Tn=vr.closest("form");if(Tn){Tn.reset();break}}}}if(Be.keepFieldsRef)for(const Tt of o.mount)nt(Tt,Dt(dt,Tt));else n={}}u=t.shouldUnregister?Be.keepDefaultValues?$i(a):{}:$i(dt),M.array.next({values:{...dt}}),M.state.next({values:{...dt}})}o={mount:Be.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},h.mount=!P.isValid||!!Be.keepIsValid||!!Be.keepDirtyValues,h.watch=!!t.shouldUnregister,M.state.next({submitCount:Be.keepSubmitCount?r.submitCount:0,isDirty:vt?!1:Be.keepDirty?r.isDirty:!!(Be.keepDefaultValues&&!Qc(Ee,a)),isSubmitted:Be.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:vt?{}:Be.keepDirtyValues?Be.keepDefaultValues&&u?Rg(a,u):r.dirtyFields:Be.keepDefaultValues&&Ee?Rg(a,Ee):Be.keepDirty?r.dirtyFields:{},touchedFields:Be.keepTouched?r.touchedFields:{},errors:Be.keepErrors?r.errors:{},isSubmitSuccessful:Be.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},ni=(Ee,Be)=>Cr(vo(Ee)?Ee(u):Ee,Be),xi=(Ee,Be={})=>{const He=Dt(n,Ee),xt=He&&He._f;if(xt){const vt=xt.refs?xt.refs[0]:xt.ref;vt.focus&&(vt.focus(),Be.shouldSelect&&vo(vt.select)&&vt.select())}},Nr=Ee=>{r={...r,...Ee}},Dn={control:{register:Zn,unregister:er,getFieldState:yt,handleSubmit:vn,setError:Lt,_subscribe:wr,_runSchema:pe,_focusError:Rn,_getWatch:Oe,_getDirty:pt,_setValid:F,_setFieldArray:q,_setDisabledField:Yr,_setErrors:W,_getFieldArray:Ye,_reset:Cr,_resetDefaultValues:()=>vo(t.defaultValues)&&t.defaultValues().then(Ee=>{ni(Ee,t.resetOptions),M.state.next({isLoading:!1})}),_removeUnmounted:Me,_disableForm:ri,_subjects:M,_proxyFormState:P,get _fields(){return n},get _formValues(){return u},get _state(){return h},set _state(Ee){h=Ee},get _defaultValues(){return a},get _names(){return o},set _names(Ee){o=Ee},get _formState(){return r},get _options(){return t},set _options(Ee){t={...t,...Ee}}},subscribe:kr,trigger:Le,register:Zn,handleSubmit:vn,watch:Wt,setValue:nt,getValues:ft,reset:ni,resetField:Ni,clearErrors:wt,unregister:er,setError:Lt,setFocus:xi,getFieldState:yt};return{...Dn,formControl:Dn}}function qg(e={}){const t=ht.useRef(void 0),r=ht.useRef(void 0),[n,a]=ht.useState({isDirty:!1,isValidating:!1,isLoading:vo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vo(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!vo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:h,...o}=fee(e);t.current={...o,formState:n}}const u=t.current.control;return u._options=e,eee(()=>{const h=u._subscribe({formState:u._proxyFormState,callback:()=>a({...u._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),u._formState.isReady=!0,h},[u]),ht.useEffect(()=>u._disableForm(e.disabled),[u,e.disabled]),ht.useEffect(()=>{e.mode&&(u._options.mode=e.mode),e.reValidateMode&&(u._options.reValidateMode=e.reValidateMode)},[u,e.mode,e.reValidateMode]),ht.useEffect(()=>{e.errors&&(u._setErrors(e.errors),u._focusError())},[u,e.errors]),ht.useEffect(()=>{e.shouldUnregister&&u._subjects.state.next({values:u._getWatch()})},[u,e.shouldUnregister]),ht.useEffect(()=>{if(u._proxyFormState.isDirty){const h=u._getDirty();h!==n.isDirty&&u._subjects.state.next({isDirty:h})}},[u,n.isDirty]),ht.useEffect(()=>{e.values&&!Qc(e.values,r.current)?(u._reset(e.values,{keepFieldsRef:!0,...u._options.resetOptions}),r.current=e.values,a(h=>({...h}))):u._resetDefaultValues()},[u,e.values]),ht.useEffect(()=>{u._state.mount||(u._setValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next({...u._formState})),u._removeUnmounted()}),t.current.formState=JJ(n,u),t.current}const KI=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Dt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},AF=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?KI(n.ref,r,e):n.refs&&n.refs.forEach(a=>KI(a,r,e))}},mee=(e,t)=>{t.shouldUseNativeValidation&&AF(e,t);const r={};for(const n in e){const a=Dt(t.fields,n),u=Object.assign(e[n]||{},{ref:a&&a.ref});if(gee(t.names||Object.keys(e),n)){const h=Object.assign({},Dt(r,n));rn(h,"root",u),rn(r,n,h)}else rn(r,n,u)}return r},gee=(e,t)=>e.some(r=>r.startsWith(t+"."));var yee=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,u=n.message,h=n.path.join(".");if(!r[h])if("unionErrors"in n){var o=n.unionErrors[0].errors[0];r[h]={message:o.message,type:o.code}}else r[h]={message:u,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(P){return P.errors.forEach(function(E){return e.push(E)})}),t){var _=r[h].types,T=_&&_[n.code];r[h]=SF(h,t,r,a,T?[].concat(T,n.message):n.message)}e.shift()}return r},Wg=function(e,t,r){return r===void 0&&(r={}),function(n,a,u){try{return Promise.resolve(function(h,o){try{var _=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(T){return u.shouldUseNativeValidation&&AF({},u),{errors:{},values:r.raw?n:T}})}catch(T){return o(T)}return _&&_.then?_.then(void 0,o):_}(0,function(h){if(function(o){return Array.isArray(o==null?void 0:o.errors)}(h))return{values:{},errors:mee(yee(h.errors,!u.shouldUseNativeValidation&&u.criteriaMode==="all"),u)};throw h}))}catch(h){return Promise.reject(h)}}},Rr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const u={};for(const h of a)u[h]=h;return u},e.getValidEnumValues=a=>{const u=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),h={};for(const o of u)h[o]=a[o];return e.objectValues(h)},e.objectValues=a=>e.objectKeys(a).map(function(u){return a[u]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const u=[];for(const h in a)Object.prototype.hasOwnProperty.call(a,h)&&u.push(h);return u},e.find=(a,u)=>{for(const h of a)if(u(h))return h},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,u=" | "){return a.map(h=>typeof h=="string"?`'${h}'`:h).join(u)}e.joinValues=n,e.jsonStringifyReplacer=(a,u)=>typeof u=="bigint"?u.toString():u})(Rr||(Rr={}));var YI;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(YI||(YI={}));const Ot=Rr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Zc=e=>{switch(typeof e){case"undefined":return Ot.undefined;case"string":return Ot.string;case"number":return Number.isNaN(e)?Ot.nan:Ot.number;case"boolean":return Ot.boolean;case"function":return Ot.function;case"bigint":return Ot.bigint;case"symbol":return Ot.symbol;case"object":return Array.isArray(e)?Ot.array:e===null?Ot.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ot.promise:typeof Map<"u"&&e instanceof Map?Ot.map:typeof Set<"u"&&e instanceof Set?Ot.set:typeof Date<"u"&&e instanceof Date?Ot.date:Ot.object;default:return Ot.unknown}},_t=Rr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class hl extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(u){return u.message},n={_errors:[]},a=u=>{for(const h of u.issues)if(h.code==="invalid_union")h.unionErrors.map(a);else if(h.code==="invalid_return_type")a(h.returnTypeError);else if(h.code==="invalid_arguments")a(h.argumentsError);else if(h.path.length===0)n._errors.push(r(h));else{let o=n,_=0;for(;_<h.path.length;){const T=h.path[_];_===h.path.length-1?(o[T]=o[T]||{_errors:[]},o[T]._errors.push(r(h))):o[T]=o[T]||{_errors:[]},o=o[T],_++}}};return a(this),n}static assert(t){if(!(t instanceof hl))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const u=a.path[0];r[u]=r[u]||[],r[u].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}hl.create=e=>new hl(e);const KT=(e,t)=>{let r;switch(e.code){case _t.invalid_type:e.received===Ot.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case _t.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Rr.jsonStringifyReplacer)}`;break;case _t.unrecognized_keys:r=`Unrecognized key(s) in object: ${Rr.joinValues(e.keys,", ")}`;break;case _t.invalid_union:r="Invalid input";break;case _t.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Rr.joinValues(e.options)}`;break;case _t.invalid_enum_value:r=`Invalid enum value. Expected ${Rr.joinValues(e.options)}, received '${e.received}'`;break;case _t.invalid_arguments:r="Invalid function arguments";break;case _t.invalid_return_type:r="Invalid function return type";break;case _t.invalid_date:r="Invalid date";break;case _t.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Rr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case _t.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case _t.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case _t.custom:r="Invalid input";break;case _t.invalid_intersection_types:r="Intersection results could not be merged";break;case _t.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case _t.not_finite:r="Number must be finite";break;default:r=t.defaultError,Rr.assertNever(e)}return{message:r}};let xee=KT;function vee(){return xee}const _ee=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,u=[...r,...a.path||[]],h={...a,path:u};if(a.message!==void 0)return{...a,path:u,message:a.message};let o="";const _=n.filter(T=>!!T).slice().reverse();for(const T of _)o=T(h,{data:t,defaultError:o}).message;return{...a,path:u,message:o}};function At(e,t){const r=vee(),n=_ee({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===KT?void 0:KT].filter(a=>!!a)});e.common.issues.push(n)}class xa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return cr;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const u=await a.key,h=await a.value;n.push({key:u,value:h})}return xa.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:u,value:h}=a;if(u.status==="aborted"||h.status==="aborted")return cr;u.status==="dirty"&&t.dirty(),h.status==="dirty"&&t.dirty(),u.value!=="__proto__"&&(typeof h.value<"u"||a.alwaysSet)&&(n[u.value]=h.value)}return{status:t.value,value:n}}}const cr=Object.freeze({status:"aborted"}),Gg=e=>({status:"dirty",value:e}),qa=e=>({status:"valid",value:e}),QI=e=>e.status==="aborted",XI=e=>e.status==="dirty",If=e=>e.status==="valid",hb=e=>typeof Promise<"u"&&e instanceof Promise;var $t;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})($t||($t={}));class ku{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const JI=(e,t)=>{if(If(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new hl(e.common.issues);return this._error=r,this._error}}};function br(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(h,o)=>{const{message:_}=e;return h.code==="invalid_enum_value"?{message:_??o.defaultError}:typeof o.data>"u"?{message:_??n??o.defaultError}:h.code!=="invalid_type"?{message:o.defaultError}:{message:_??r??o.defaultError}},description:a}}class Mr{get description(){return this._def.description}_getType(t){return Zc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Zc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new xa,ctx:{common:t.parent.common,data:t.data,parsedType:Zc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(hb(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zc(t)},a=this._parseSync({data:t,path:n.path,parent:n});return JI(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zc(t)};if(!this["~standard"].async)try{const u=this._parseSync({data:t,path:[],parent:r});return If(u)?{value:u.value}:{issues:r.common.issues}}catch(u){(a=(n=u==null?void 0:u.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(u=>If(u)?{value:u.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Zc(t)},a=this._parse({data:t,path:n.path,parent:n}),u=await(hb(a)?a:Promise.resolve(a));return JI(n,u)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,u)=>{const h=t(a),o=()=>u.addIssue({code:_t.custom,...n(a)});return typeof Promise<"u"&&h instanceof Promise?h.then(_=>_?!0:(o(),!1)):h?!0:(o(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Df({schema:this,typeName:ur.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return xu.create(this,this._def)}nullable(){return Of.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return cl.create(this)}promise(){return mb.create(this,this._def)}or(t){return pb.create([this,t],this._def)}and(t){return fb.create(this,t,this._def)}transform(t){return new Df({...br(this._def),schema:this,typeName:ur.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new XT({...br(this._def),innerType:this,defaultValue:r,typeName:ur.ZodDefault})}brand(){return new Uee({typeName:ur.ZodBranded,type:this,...br(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new JT({...br(this._def),innerType:this,catchValue:r,typeName:ur.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return DP.create(this,t)}readonly(){return ek.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const bee=/^c[^\s-]{8,}$/i,wee=/^[0-9a-z]+$/,See=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Tee=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,kee=/^[a-z0-9_-]{21}$/i,Cee=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Pee=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Eee=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jee="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let B2;const Aee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Mee=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Nee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Iee=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Ree=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Dee=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,MF="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Oee=new RegExp(`^${MF}$`);function NF(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function Lee(e){return new RegExp(`^${NF(e)}$`)}function Fee(e){let t=`${MF}T${NF(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function zee(e,t){return!!((t==="v4"||!t)&&Aee.test(e)||(t==="v6"||!t)&&Nee.test(e))}function Bee(e,t){if(!Cee.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function Vee(e,t){return!!((t==="v4"||!t)&&Mee.test(e)||(t==="v6"||!t)&&Iee.test(e))}class ou extends Mr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ot.string){const u=this._getOrReturnCtx(t);return At(u,{code:_t.invalid_type,expected:Ot.string,received:u.parsedType}),cr}const n=new xa;let a;for(const u of this._def.checks)if(u.kind==="min")t.data.length<u.value&&(a=this._getOrReturnCtx(t,a),At(a,{code:_t.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="max")t.data.length>u.value&&(a=this._getOrReturnCtx(t,a),At(a,{code:_t.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!1,message:u.message}),n.dirty());else if(u.kind==="length"){const h=t.data.length>u.value,o=t.data.length<u.value;(h||o)&&(a=this._getOrReturnCtx(t,a),h?At(a,{code:_t.too_big,maximum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}):o&&At(a,{code:_t.too_small,minimum:u.value,type:"string",inclusive:!0,exact:!0,message:u.message}),n.dirty())}else if(u.kind==="email")Eee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"email",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="emoji")B2||(B2=new RegExp(jee,"u")),B2.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"emoji",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="uuid")Tee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"uuid",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="nanoid")kee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"nanoid",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid")bee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"cuid",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="cuid2")wee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"cuid2",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="ulid")See.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"ulid",code:_t.invalid_string,message:u.message}),n.dirty());else if(u.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),At(a,{validation:"url",code:_t.invalid_string,message:u.message}),n.dirty()}else u.kind==="regex"?(u.regex.lastIndex=0,u.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"regex",code:_t.invalid_string,message:u.message}),n.dirty())):u.kind==="trim"?t.data=t.data.trim():u.kind==="includes"?t.data.includes(u.value,u.position)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:{includes:u.value,position:u.position},message:u.message}),n.dirty()):u.kind==="toLowerCase"?t.data=t.data.toLowerCase():u.kind==="toUpperCase"?t.data=t.data.toUpperCase():u.kind==="startsWith"?t.data.startsWith(u.value)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:{startsWith:u.value},message:u.message}),n.dirty()):u.kind==="endsWith"?t.data.endsWith(u.value)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:{endsWith:u.value},message:u.message}),n.dirty()):u.kind==="datetime"?Fee(u).test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:"datetime",message:u.message}),n.dirty()):u.kind==="date"?Oee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:"date",message:u.message}),n.dirty()):u.kind==="time"?Lee(u).test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{code:_t.invalid_string,validation:"time",message:u.message}),n.dirty()):u.kind==="duration"?Pee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"duration",code:_t.invalid_string,message:u.message}),n.dirty()):u.kind==="ip"?zee(t.data,u.version)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"ip",code:_t.invalid_string,message:u.message}),n.dirty()):u.kind==="jwt"?Bee(t.data,u.alg)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"jwt",code:_t.invalid_string,message:u.message}),n.dirty()):u.kind==="cidr"?Vee(t.data,u.version)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"cidr",code:_t.invalid_string,message:u.message}),n.dirty()):u.kind==="base64"?Ree.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"base64",code:_t.invalid_string,message:u.message}),n.dirty()):u.kind==="base64url"?Dee.test(t.data)||(a=this._getOrReturnCtx(t,a),At(a,{validation:"base64url",code:_t.invalid_string,message:u.message}),n.dirty()):Rr.assertNever(u);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:_t.invalid_string,...$t.errToObj(n)})}_addCheck(t){return new ou({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...$t.errToObj(t)})}url(t){return this._addCheck({kind:"url",...$t.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...$t.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...$t.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...$t.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...$t.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...$t.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...$t.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...$t.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...$t.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...$t.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...$t.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...$t.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...$t.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...$t.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...$t.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...$t.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...$t.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...$t.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...$t.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...$t.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...$t.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...$t.errToObj(r)})}nonempty(t){return this.min(1,$t.errToObj(t))}trim(){return new ou({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ou({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ou({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ou.create=e=>new ou({checks:[],typeName:ur.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...br(e)});function $ee(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,u=Number.parseInt(e.toFixed(a).replace(".","")),h=Number.parseInt(t.toFixed(a).replace(".",""));return u%h/10**a}class Gy extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ot.number){const u=this._getOrReturnCtx(t);return At(u,{code:_t.invalid_type,expected:Ot.number,received:u.parsedType}),cr}let n;const a=new xa;for(const u of this._def.checks)u.kind==="int"?Rr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),At(n,{code:_t.invalid_type,expected:"integer",received:"float",message:u.message}),a.dirty()):u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.too_small,minimum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),a.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.too_big,maximum:u.value,type:"number",inclusive:u.inclusive,exact:!1,message:u.message}),a.dirty()):u.kind==="multipleOf"?$ee(t.data,u.value)!==0&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.not_multiple_of,multipleOf:u.value,message:u.message}),a.dirty()):u.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),At(n,{code:_t.not_finite,message:u.message}),a.dirty()):Rr.assertNever(u);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,$t.toString(r))}gt(t,r){return this.setLimit("min",t,!1,$t.toString(r))}lte(t,r){return this.setLimit("max",t,!0,$t.toString(r))}lt(t,r){return this.setLimit("max",t,!1,$t.toString(r))}setLimit(t,r,n,a){return new Gy({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:$t.toString(a)}]})}_addCheck(t){return new Gy({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:$t.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:$t.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:$t.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:$t.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:$t.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:$t.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:$t.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:$t.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:$t.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Rr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Gy.create=e=>new Gy({checks:[],typeName:ur.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...br(e)});class Hy extends Mr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ot.bigint)return this._getInvalidInput(t);let n;const a=new xa;for(const u of this._def.checks)u.kind==="min"?(u.inclusive?t.data<u.value:t.data<=u.value)&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.too_small,type:"bigint",minimum:u.value,inclusive:u.inclusive,message:u.message}),a.dirty()):u.kind==="max"?(u.inclusive?t.data>u.value:t.data>=u.value)&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.too_big,type:"bigint",maximum:u.value,inclusive:u.inclusive,message:u.message}),a.dirty()):u.kind==="multipleOf"?t.data%u.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),At(n,{code:_t.not_multiple_of,multipleOf:u.value,message:u.message}),a.dirty()):Rr.assertNever(u);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return At(r,{code:_t.invalid_type,expected:Ot.bigint,received:r.parsedType}),cr}gte(t,r){return this.setLimit("min",t,!0,$t.toString(r))}gt(t,r){return this.setLimit("min",t,!1,$t.toString(r))}lte(t,r){return this.setLimit("max",t,!0,$t.toString(r))}lt(t,r){return this.setLimit("max",t,!1,$t.toString(r))}setLimit(t,r,n,a){return new Hy({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:$t.toString(a)}]})}_addCheck(t){return new Hy({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:$t.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:$t.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:$t.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:$t.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:$t.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Hy.create=e=>new Hy({checks:[],typeName:ur.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...br(e)});class YT extends Mr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ot.boolean){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.boolean,received:n.parsedType}),cr}return qa(t.data)}}YT.create=e=>new YT({typeName:ur.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...br(e)});class Zy extends Mr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ot.date){const u=this._getOrReturnCtx(t);return At(u,{code:_t.invalid_type,expected:Ot.date,received:u.parsedType}),cr}if(Number.isNaN(t.data.getTime())){const u=this._getOrReturnCtx(t);return At(u,{code:_t.invalid_date}),cr}const n=new xa;let a;for(const u of this._def.checks)u.kind==="min"?t.data.getTime()<u.value&&(a=this._getOrReturnCtx(t,a),At(a,{code:_t.too_small,message:u.message,inclusive:!0,exact:!1,minimum:u.value,type:"date"}),n.dirty()):u.kind==="max"?t.data.getTime()>u.value&&(a=this._getOrReturnCtx(t,a),At(a,{code:_t.too_big,message:u.message,inclusive:!0,exact:!1,maximum:u.value,type:"date"}),n.dirty()):Rr.assertNever(u);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Zy({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:$t.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:$t.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Zy.create=e=>new Zy({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ur.ZodDate,...br(e)});class eR extends Mr{_parse(t){if(this._getType(t)!==Ot.symbol){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.symbol,received:n.parsedType}),cr}return qa(t.data)}}eR.create=e=>new eR({typeName:ur.ZodSymbol,...br(e)});class tR extends Mr{_parse(t){if(this._getType(t)!==Ot.undefined){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.undefined,received:n.parsedType}),cr}return qa(t.data)}}tR.create=e=>new tR({typeName:ur.ZodUndefined,...br(e)});class rR extends Mr{_parse(t){if(this._getType(t)!==Ot.null){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.null,received:n.parsedType}),cr}return qa(t.data)}}rR.create=e=>new rR({typeName:ur.ZodNull,...br(e)});class nR extends Mr{constructor(){super(...arguments),this._any=!0}_parse(t){return qa(t.data)}}nR.create=e=>new nR({typeName:ur.ZodAny,...br(e)});class iR extends Mr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return qa(t.data)}}iR.create=e=>new iR({typeName:ur.ZodUnknown,...br(e)});class Cu extends Mr{_parse(t){const r=this._getOrReturnCtx(t);return At(r,{code:_t.invalid_type,expected:Ot.never,received:r.parsedType}),cr}}Cu.create=e=>new Cu({typeName:ur.ZodNever,...br(e)});class sR extends Mr{_parse(t){if(this._getType(t)!==Ot.undefined){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.void,received:n.parsedType}),cr}return qa(t.data)}}sR.create=e=>new sR({typeName:ur.ZodVoid,...br(e)});class cl extends Mr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Ot.array)return At(r,{code:_t.invalid_type,expected:Ot.array,received:r.parsedType}),cr;if(a.exactLength!==null){const h=r.data.length>a.exactLength.value,o=r.data.length<a.exactLength.value;(h||o)&&(At(r,{code:h?_t.too_big:_t.too_small,minimum:o?a.exactLength.value:void 0,maximum:h?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(At(r,{code:_t.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(At(r,{code:_t.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((h,o)=>a.type._parseAsync(new ku(r,h,r.path,o)))).then(h=>xa.mergeArray(n,h));const u=[...r.data].map((h,o)=>a.type._parseSync(new ku(r,h,r.path,o)));return xa.mergeArray(n,u)}get element(){return this._def.type}min(t,r){return new cl({...this._def,minLength:{value:t,message:$t.toString(r)}})}max(t,r){return new cl({...this._def,maxLength:{value:t,message:$t.toString(r)}})}length(t,r){return new cl({...this._def,exactLength:{value:t,message:$t.toString(r)}})}nonempty(t){return this.min(1,t)}}cl.create=(e,t)=>new cl({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ur.ZodArray,...br(t)});function Np(e){if(e instanceof Gn){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=xu.create(Np(n))}return new Gn({...e._def,shape:()=>t})}else return e instanceof cl?new cl({...e._def,type:Np(e.element)}):e instanceof xu?xu.create(Np(e.unwrap())):e instanceof Of?Of.create(Np(e.unwrap())):e instanceof lh?lh.create(e.items.map(t=>Np(t))):e}class Gn extends Mr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Rr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Ot.object){const T=this._getOrReturnCtx(t);return At(T,{code:_t.invalid_type,expected:Ot.object,received:T.parsedType}),cr}const{status:n,ctx:a}=this._processInputParams(t),{shape:u,keys:h}=this._getCached(),o=[];if(!(this._def.catchall instanceof Cu&&this._def.unknownKeys==="strip"))for(const T in a.data)h.includes(T)||o.push(T);const _=[];for(const T of h){const P=u[T],E=a.data[T];_.push({key:{status:"valid",value:T},value:P._parse(new ku(a,E,a.path,T)),alwaysSet:T in a.data})}if(this._def.catchall instanceof Cu){const T=this._def.unknownKeys;if(T==="passthrough")for(const P of o)_.push({key:{status:"valid",value:P},value:{status:"valid",value:a.data[P]}});else if(T==="strict")o.length>0&&(At(a,{code:_t.unrecognized_keys,keys:o}),n.dirty());else if(T!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const T=this._def.catchall;for(const P of o){const E=a.data[P];_.push({key:{status:"valid",value:P},value:T._parse(new ku(a,E,a.path,P)),alwaysSet:P in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const T=[];for(const P of _){const E=await P.key,M=await P.value;T.push({key:E,value:M,alwaysSet:P.alwaysSet})}return T}).then(T=>xa.mergeObjectSync(n,T)):xa.mergeObjectSync(n,_)}get shape(){return this._def.shape()}strict(t){return $t.errToObj,new Gn({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var u,h;const a=((h=(u=this._def).errorMap)==null?void 0:h.call(u,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:$t.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Gn({...this._def,unknownKeys:"strip"})}passthrough(){return new Gn({...this._def,unknownKeys:"passthrough"})}extend(t){return new Gn({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Gn({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ur.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Gn({...this._def,catchall:t})}pick(t){const r={};for(const n of Rr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Gn({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Rr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Gn({...this._def,shape:()=>r})}deepPartial(){return Np(this)}partial(t){const r={};for(const n of Rr.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Gn({...this._def,shape:()=>r})}required(t){const r={};for(const n of Rr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let u=this.shape[n];for(;u instanceof xu;)u=u._def.innerType;r[n]=u}return new Gn({...this._def,shape:()=>r})}keyof(){return IF(Rr.objectKeys(this.shape))}}Gn.create=(e,t)=>new Gn({shape:()=>e,unknownKeys:"strip",catchall:Cu.create(),typeName:ur.ZodObject,...br(t)});Gn.strictCreate=(e,t)=>new Gn({shape:()=>e,unknownKeys:"strict",catchall:Cu.create(),typeName:ur.ZodObject,...br(t)});Gn.lazycreate=(e,t)=>new Gn({shape:e,unknownKeys:"strip",catchall:Cu.create(),typeName:ur.ZodObject,...br(t)});class pb extends Mr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(u){for(const o of u)if(o.result.status==="valid")return o.result;for(const o of u)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;const h=u.map(o=>new hl(o.ctx.common.issues));return At(r,{code:_t.invalid_union,unionErrors:h}),cr}if(r.common.async)return Promise.all(n.map(async u=>{const h={...r,common:{...r.common,issues:[]},parent:null};return{result:await u._parseAsync({data:r.data,path:r.path,parent:h}),ctx:h}})).then(a);{let u;const h=[];for(const _ of n){const T={...r,common:{...r.common,issues:[]},parent:null},P=_._parseSync({data:r.data,path:r.path,parent:T});if(P.status==="valid")return P;P.status==="dirty"&&!u&&(u={result:P,ctx:T}),T.common.issues.length&&h.push(T.common.issues)}if(u)return r.common.issues.push(...u.ctx.common.issues),u.result;const o=h.map(_=>new hl(_));return At(r,{code:_t.invalid_union,unionErrors:o}),cr}}get options(){return this._def.options}}pb.create=(e,t)=>new pb({options:e,typeName:ur.ZodUnion,...br(t)});function QT(e,t){const r=Zc(e),n=Zc(t);if(e===t)return{valid:!0,data:e};if(r===Ot.object&&n===Ot.object){const a=Rr.objectKeys(t),u=Rr.objectKeys(e).filter(o=>a.indexOf(o)!==-1),h={...e,...t};for(const o of u){const _=QT(e[o],t[o]);if(!_.valid)return{valid:!1};h[o]=_.data}return{valid:!0,data:h}}else if(r===Ot.array&&n===Ot.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let u=0;u<e.length;u++){const h=e[u],o=t[u],_=QT(h,o);if(!_.valid)return{valid:!1};a.push(_.data)}return{valid:!0,data:a}}else return r===Ot.date&&n===Ot.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class fb extends Mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(u,h)=>{if(QI(u)||QI(h))return cr;const o=QT(u.value,h.value);return o.valid?((XI(u)||XI(h))&&r.dirty(),{status:r.value,value:o.data}):(At(n,{code:_t.invalid_intersection_types}),cr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([u,h])=>a(u,h)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}fb.create=(e,t,r)=>new fb({left:e,right:t,typeName:ur.ZodIntersection,...br(r)});class lh extends Mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ot.array)return At(n,{code:_t.invalid_type,expected:Ot.array,received:n.parsedType}),cr;if(n.data.length<this._def.items.length)return At(n,{code:_t.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cr;!this._def.rest&&n.data.length>this._def.items.length&&(At(n,{code:_t.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const u=[...n.data].map((h,o)=>{const _=this._def.items[o]||this._def.rest;return _?_._parse(new ku(n,h,n.path,o)):null}).filter(h=>!!h);return n.common.async?Promise.all(u).then(h=>xa.mergeArray(r,h)):xa.mergeArray(r,u)}get items(){return this._def.items}rest(t){return new lh({...this._def,rest:t})}}lh.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new lh({items:e,typeName:ur.ZodTuple,rest:null,...br(t)})};class aR extends Mr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ot.map)return At(n,{code:_t.invalid_type,expected:Ot.map,received:n.parsedType}),cr;const a=this._def.keyType,u=this._def.valueType,h=[...n.data.entries()].map(([o,_],T)=>({key:a._parse(new ku(n,o,n.path,[T,"key"])),value:u._parse(new ku(n,_,n.path,[T,"value"]))}));if(n.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const _ of h){const T=await _.key,P=await _.value;if(T.status==="aborted"||P.status==="aborted")return cr;(T.status==="dirty"||P.status==="dirty")&&r.dirty(),o.set(T.value,P.value)}return{status:r.value,value:o}})}else{const o=new Map;for(const _ of h){const T=_.key,P=_.value;if(T.status==="aborted"||P.status==="aborted")return cr;(T.status==="dirty"||P.status==="dirty")&&r.dirty(),o.set(T.value,P.value)}return{status:r.value,value:o}}}}aR.create=(e,t,r)=>new aR({valueType:t,keyType:e,typeName:ur.ZodMap,...br(r)});class Ky extends Mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ot.set)return At(n,{code:_t.invalid_type,expected:Ot.set,received:n.parsedType}),cr;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(At(n,{code:_t.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(At(n,{code:_t.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const u=this._def.valueType;function h(_){const T=new Set;for(const P of _){if(P.status==="aborted")return cr;P.status==="dirty"&&r.dirty(),T.add(P.value)}return{status:r.value,value:T}}const o=[...n.data.values()].map((_,T)=>u._parse(new ku(n,_,n.path,T)));return n.common.async?Promise.all(o).then(_=>h(_)):h(o)}min(t,r){return new Ky({...this._def,minSize:{value:t,message:$t.toString(r)}})}max(t,r){return new Ky({...this._def,maxSize:{value:t,message:$t.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Ky.create=(e,t)=>new Ky({valueType:e,minSize:null,maxSize:null,typeName:ur.ZodSet,...br(t)});class oR extends Mr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}oR.create=(e,t)=>new oR({getter:e,typeName:ur.ZodLazy,...br(t)});class lR extends Mr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return At(r,{received:r.data,code:_t.invalid_literal,expected:this._def.value}),cr}return{status:"valid",value:t.data}}get value(){return this._def.value}}lR.create=(e,t)=>new lR({value:e,typeName:ur.ZodLiteral,...br(t)});function IF(e,t){return new Rf({values:e,typeName:ur.ZodEnum,...br(t)})}class Rf extends Mr{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return At(r,{expected:Rr.joinValues(n),received:r.parsedType,code:_t.invalid_type}),cr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return At(r,{received:r.data,code:_t.invalid_enum_value,options:n}),cr}return qa(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Rf.create(t,{...this._def,...r})}exclude(t,r=this._def){return Rf.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Rf.create=IF;class cR extends Mr{_parse(t){const r=Rr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ot.string&&n.parsedType!==Ot.number){const a=Rr.objectValues(r);return At(n,{expected:Rr.joinValues(a),received:n.parsedType,code:_t.invalid_type}),cr}if(this._cache||(this._cache=new Set(Rr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Rr.objectValues(r);return At(n,{received:n.data,code:_t.invalid_enum_value,options:a}),cr}return qa(t.data)}get enum(){return this._def.values}}cR.create=(e,t)=>new cR({values:e,typeName:ur.ZodNativeEnum,...br(t)});class mb extends Mr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ot.promise&&r.common.async===!1)return At(r,{code:_t.invalid_type,expected:Ot.promise,received:r.parsedType}),cr;const n=r.parsedType===Ot.promise?r.data:Promise.resolve(r.data);return qa(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}mb.create=(e,t)=>new mb({type:e,typeName:ur.ZodPromise,...br(t)});class Df extends Mr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ur.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,u={addIssue:h=>{At(n,h),h.fatal?r.abort():r.dirty()},get path(){return n.path}};if(u.addIssue=u.addIssue.bind(u),a.type==="preprocess"){const h=a.transform(n.data,u);if(n.common.async)return Promise.resolve(h).then(async o=>{if(r.value==="aborted")return cr;const _=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return _.status==="aborted"?cr:_.status==="dirty"||r.value==="dirty"?Gg(_.value):_});{if(r.value==="aborted")return cr;const o=this._def.schema._parseSync({data:h,path:n.path,parent:n});return o.status==="aborted"?cr:o.status==="dirty"||r.value==="dirty"?Gg(o.value):o}}if(a.type==="refinement"){const h=o=>{const _=a.refinement(o,u);if(n.common.async)return Promise.resolve(_);if(_ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?cr:(o.status==="dirty"&&r.dirty(),h(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?cr:(o.status==="dirty"&&r.dirty(),h(o.value).then(()=>({status:r.value,value:o.value}))))}if(a.type==="transform")if(n.common.async===!1){const h=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!If(h))return cr;const o=a.transform(h.value,u);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(h=>If(h)?Promise.resolve(a.transform(h.value,u)).then(o=>({status:r.value,value:o})):cr);Rr.assertNever(a)}}Df.create=(e,t,r)=>new Df({schema:e,typeName:ur.ZodEffects,effect:t,...br(r)});Df.createWithPreprocess=(e,t,r)=>new Df({schema:t,effect:{type:"preprocess",transform:e},typeName:ur.ZodEffects,...br(r)});class xu extends Mr{_parse(t){return this._getType(t)===Ot.undefined?qa(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}xu.create=(e,t)=>new xu({innerType:e,typeName:ur.ZodOptional,...br(t)});class Of extends Mr{_parse(t){return this._getType(t)===Ot.null?qa(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Of.create=(e,t)=>new Of({innerType:e,typeName:ur.ZodNullable,...br(t)});class XT extends Mr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ot.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}XT.create=(e,t)=>new XT({innerType:e,typeName:ur.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...br(t)});class JT extends Mr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return hb(a)?a.then(u=>({status:"valid",value:u.status==="valid"?u.value:this._def.catchValue({get error(){return new hl(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new hl(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}JT.create=(e,t)=>new JT({innerType:e,typeName:ur.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...br(t)});class uR extends Mr{_parse(t){if(this._getType(t)!==Ot.nan){const n=this._getOrReturnCtx(t);return At(n,{code:_t.invalid_type,expected:Ot.nan,received:n.parsedType}),cr}return{status:"valid",value:t.data}}}uR.create=e=>new uR({typeName:ur.ZodNaN,...br(e)});class Uee extends Mr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class DP extends Mr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const u=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?cr:u.status==="dirty"?(r.dirty(),Gg(u.value)):this._def.out._parseAsync({data:u.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?cr:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new DP({in:t,out:r,typeName:ur.ZodPipeline})}}class ek extends Mr{_parse(t){const r=this._def.innerType._parse(t),n=a=>(If(a)&&(a.value=Object.freeze(a.value)),a);return hb(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}ek.create=(e,t)=>new ek({innerType:e,typeName:ur.ZodReadonly,...br(t)});Gn.lazycreate;var ur;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ur||(ur={}));const mi=ou.create,dR=YT.create,qee=Zy.create;Cu.create;const Wee=cl.create,ch=Gn.create;Gn.strictCreate;pb.create;fb.create;lh.create;const Gee=Rf.create;mb.create;xu.create;Of.create;var V2="focusScope.autoFocusOnMount",$2="focusScope.autoFocusOnUnmount",hR={bubbles:!1,cancelable:!0},Hee="FocusScope",OP=U.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:u,...h}=e,[o,_]=U.useState(null),T=ko(a),P=ko(u),E=U.useRef(null),M=In(t,F=>_(F)),I=U.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;U.useEffect(()=>{if(n){let F=function(W){if(I.paused||!o)return;const te=W.target;o.contains(te)?E.current=te:Wc(E.current,{select:!0})},D=function(W){if(I.paused||!o)return;const te=W.relatedTarget;te!==null&&(o.contains(te)||Wc(E.current,{select:!0}))},q=function(W){if(document.activeElement===document.body)for(const se of W)se.removedNodes.length>0&&Wc(o)};document.addEventListener("focusin",F),document.addEventListener("focusout",D);const $=new MutationObserver(q);return o&&$.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",F),document.removeEventListener("focusout",D),$.disconnect()}}},[n,o,I.paused]),U.useEffect(()=>{if(o){fR.add(I);const F=document.activeElement;if(!o.contains(F)){const q=new CustomEvent(V2,hR);o.addEventListener(V2,T),o.dispatchEvent(q),q.defaultPrevented||(Zee(Jee(RF(o)),{select:!0}),document.activeElement===F&&Wc(o))}return()=>{o.removeEventListener(V2,T),setTimeout(()=>{const q=new CustomEvent($2,hR);o.addEventListener($2,P),o.dispatchEvent(q),q.defaultPrevented||Wc(F??document.body,{select:!0}),o.removeEventListener($2,P),fR.remove(I)},0)}}},[o,T,P,I]);const z=U.useCallback(F=>{if(!r&&!n||I.paused)return;const D=F.key==="Tab"&&!F.altKey&&!F.ctrlKey&&!F.metaKey,q=document.activeElement;if(D&&q){const $=F.currentTarget,[W,te]=Kee($);W&&te?!F.shiftKey&&q===te?(F.preventDefault(),r&&Wc(W,{select:!0})):F.shiftKey&&q===W&&(F.preventDefault(),r&&Wc(te,{select:!0})):q===$&&F.preventDefault()}},[r,n,I.paused]);return f.jsx(Dr.div,{tabIndex:-1,...h,ref:M,onKeyDown:z})});OP.displayName=Hee;function Zee(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Wc(n,{select:t}),document.activeElement!==r)return}function Kee(e){const t=RF(e),r=pR(t,e),n=pR(t.reverse(),e);return[r,n]}function RF(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function pR(e,t){for(const r of e)if(!Yee(r,{upTo:t}))return r}function Yee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Qee(e){return e instanceof HTMLInputElement&&"select"in e}function Wc(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Qee(e)&&t&&e.select()}}var fR=Xee();function Xee(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=mR(e,t),e.unshift(t)},remove(t){var r;e=mR(e,t),(r=e[0])==null||r.resume()}}}function mR(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Jee(e){return e.filter(t=>t.tagName!=="A")}var U2=0;function DF(){U.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??gR()),document.body.insertAdjacentElement("beforeend",e[1]??gR()),U2++,()=>{U2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),U2--}},[])}function gR(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var tk=function(e,t){return tk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},tk(e,t)};function OF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tk(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Oa=function(){return Oa=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Oa.apply(this,arguments)};function Iu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function LF(e,t,r,n){var a=arguments.length,u=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(h=e[o])&&(u=(a<3?h(u):a>3?h(t,r,u):h(t,r))||u);return a>3&&u&&Object.defineProperty(t,r,u),u}function FF(e,t){return function(r,n){t(r,n,e)}}function zF(e,t,r,n,a,u){function h(q){if(q!==void 0&&typeof q!="function")throw new TypeError("Function expected");return q}for(var o=n.kind,_=o==="getter"?"get":o==="setter"?"set":"value",T=!t&&e?n.static?e:e.prototype:null,P=t||(T?Object.getOwnPropertyDescriptor(T,n.name):{}),E,M=!1,I=r.length-1;I>=0;I--){var z={};for(var F in n)z[F]=F==="access"?{}:n[F];for(var F in n.access)z.access[F]=n.access[F];z.addInitializer=function(q){if(M)throw new TypeError("Cannot add initializers after decoration has completed");u.push(h(q||null))};var D=(0,r[I])(o==="accessor"?{get:P.get,set:P.set}:P[_],z);if(o==="accessor"){if(D===void 0)continue;if(D===null||typeof D!="object")throw new TypeError("Object expected");(E=h(D.get))&&(P.get=E),(E=h(D.set))&&(P.set=E),(E=h(D.init))&&a.unshift(E)}else(E=h(D))&&(o==="field"?a.unshift(E):P[_]=E)}T&&Object.defineProperty(T,n.name,P),M=!0}function BF(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function VF(e){return typeof e=="symbol"?e:"".concat(e)}function $F(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function UF(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ut(e,t,r,n){function a(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function o(P){try{T(n.next(P))}catch(E){h(E)}}function _(P){try{T(n.throw(P))}catch(E){h(E)}}function T(P){P.done?u(P.value):a(P.value).then(o,_)}T((n=n.apply(e,t||[])).next())})}function qF(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},n,a,u,h=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return h.next=o(0),h.throw=o(1),h.return=o(2),typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function o(T){return function(P){return _([T,P])}}function _(T){if(n)throw new TypeError("Generator is already executing.");for(;h&&(h=0,T[0]&&(r=0)),r;)try{if(n=1,a&&(u=T[0]&2?a.return:T[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,T[1])).done)return u;switch(a=0,u&&(T=[T[0]&2,u.value]),T[0]){case 0:case 1:u=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,a=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!u||T[1]>u[0]&&T[1]<u[3])){r.label=T[1];break}if(T[0]===6&&r.label<u[1]){r.label=u[1],u=T;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(T);break}u[2]&&r.ops.pop(),r.trys.pop();continue}T=t.call(e,r)}catch(P){T=[6,P],a=0}finally{n=u=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}var uw=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function WF(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&uw(t,e,r)}function gb(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function LP(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,u=[],h;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)u.push(a.value)}catch(o){h={error:o}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(h)throw h.error}}return u}function GF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(LP(arguments[t]));return e}function HF(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var u=arguments[t],h=0,o=u.length;h<o;h++,a++)n[a]=u[h];return n}function FP(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,u;n<a;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))}function Lf(e){return this instanceof Lf?(this.v=e,this):new Lf(e)}function ZF(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,u=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",h),a[Symbol.asyncIterator]=function(){return this},a;function h(I){return function(z){return Promise.resolve(z).then(I,E)}}function o(I,z){n[I]&&(a[I]=function(F){return new Promise(function(D,q){u.push([I,F,D,q])>1||_(I,F)})},z&&(a[I]=z(a[I])))}function _(I,z){try{T(n[I](z))}catch(F){M(u[0][3],F)}}function T(I){I.value instanceof Lf?Promise.resolve(I.value.v).then(P,E):M(u[0][2],I)}function P(I){_("next",I)}function E(I){_("throw",I)}function M(I,z){I(z),u.shift(),u.length&&_(u[0][0],u[0][1])}}function KF(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,u){t[a]=e[a]?function(h){return(r=!r)?{value:Lf(e[a](h)),done:!1}:u?u(h):h}:u}}function YF(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof gb=="function"?gb(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(u){r[u]=e[u]&&function(h){return new Promise(function(o,_){h=e[u](h),a(o,_,h.done,h.value)})}}function a(u,h,o,_){Promise.resolve(_).then(function(T){u({value:T,done:o})},h)}}function QF(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var ete=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},rk=function(e){return rk=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},rk(e)};function XF(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=rk(e),n=0;n<r.length;n++)r[n]!=="default"&&uw(t,e,r[n]);return ete(t,e),t}function JF(e){return e&&e.__esModule?e:{default:e}}function ez(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function tz(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function rz(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function nz(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(u){return Promise.reject(u)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var tte=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function iz(e){function t(u){e.error=e.hasError?new tte(u,e.error,"An error was suppressed during disposal."):u,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var u=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(u).then(a,function(h){return t(h),a()})}else n|=1}catch(h){t(h)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function sz(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,u,h){return n?t?".jsx":".js":a&&(!u||!h)?r:a+u+"."+h.toLowerCase()+"js"}):e}const rte={__extends:OF,__assign:Oa,__rest:Iu,__decorate:LF,__param:FF,__esDecorate:zF,__runInitializers:BF,__propKey:VF,__setFunctionName:$F,__metadata:UF,__awaiter:Ut,__generator:qF,__createBinding:uw,__exportStar:WF,__values:gb,__read:LP,__spread:GF,__spreadArrays:HF,__spreadArray:FP,__await:Lf,__asyncGenerator:ZF,__asyncDelegator:KF,__asyncValues:YF,__makeTemplateObject:QF,__importStar:XF,__importDefault:JF,__classPrivateFieldGet:ez,__classPrivateFieldSet:tz,__classPrivateFieldIn:rz,__addDisposableResource:nz,__disposeResources:iz,__rewriteRelativeImportExtension:sz},nte=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:nz,get __assign(){return Oa},__asyncDelegator:KF,__asyncGenerator:ZF,__asyncValues:YF,__await:Lf,__awaiter:Ut,__classPrivateFieldGet:ez,__classPrivateFieldIn:rz,__classPrivateFieldSet:tz,__createBinding:uw,__decorate:LF,__disposeResources:iz,__esDecorate:zF,__exportStar:WF,__extends:OF,__generator:qF,__importDefault:JF,__importStar:XF,__makeTemplateObject:QF,__metadata:UF,__param:FF,__propKey:VF,__read:LP,__rest:Iu,__rewriteRelativeImportExtension:sz,__runInitializers:BF,__setFunctionName:$F,__spread:GF,__spreadArray:FP,__spreadArrays:HF,__values:gb,default:rte},Symbol.toStringTag,{value:"Module"}));var __="right-scroll-bar-position",b_="width-before-scroll-bar",ite="with-scroll-bars-hidden",ste="--removed-body-scroll-bar-size";function q2(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ate(e,t){var r=U.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var ote=typeof window<"u"?U.useLayoutEffect:U.useEffect,yR=new WeakMap;function lte(e,t){var r=ate(null,function(n){return e.forEach(function(a){return q2(a,n)})});return ote(function(){var n=yR.get(r);if(n){var a=new Set(n),u=new Set(e),h=r.current;a.forEach(function(o){u.has(o)||q2(o,null)}),u.forEach(function(o){a.has(o)||q2(o,h)})}yR.set(r,e)},[e]),r}function cte(e){return e}function ute(e,t){t===void 0&&(t=cte);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(u){var h=t(u,n);return r.push(h),function(){r=r.filter(function(o){return o!==h})}},assignSyncMedium:function(u){for(n=!0;r.length;){var h=r;r=[],h.forEach(u)}r={push:function(o){return u(o)},filter:function(){return r}}},assignMedium:function(u){n=!0;var h=[];if(r.length){var o=r;r=[],o.forEach(u),h=r}var _=function(){var P=h;h=[],P.forEach(u)},T=function(){return Promise.resolve().then(_)};T(),r={push:function(P){h.push(P),T()},filter:function(P){return h=h.filter(P),r}}}};return a}function dte(e){e===void 0&&(e={});var t=ute(null);return t.options=Oa({async:!0,ssr:!1},e),t}var az=function(e){var t=e.sideCar,r=Iu(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return U.createElement(n,Oa({},r))};az.isSideCarExport=!0;function hte(e,t){return e.useMedium(t),az}var oz=dte(),W2=function(){},dw=U.forwardRef(function(e,t){var r=U.useRef(null),n=U.useState({onScrollCapture:W2,onWheelCapture:W2,onTouchMoveCapture:W2}),a=n[0],u=n[1],h=e.forwardProps,o=e.children,_=e.className,T=e.removeScrollBar,P=e.enabled,E=e.shards,M=e.sideCar,I=e.noRelative,z=e.noIsolation,F=e.inert,D=e.allowPinchZoom,q=e.as,$=q===void 0?"div":q,W=e.gapMode,te=Iu(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),se=M,he=lte([r,t]),pe=Oa(Oa({},te),a);return U.createElement(U.Fragment,null,P&&U.createElement(se,{sideCar:oz,removeScrollBar:T,shards:E,noRelative:I,noIsolation:z,inert:F,setCallbacks:u,allowPinchZoom:!!D,lockRef:r,gapMode:W}),h?U.cloneElement(U.Children.only(o),Oa(Oa({},pe),{ref:he})):U.createElement($,Oa({},pe,{className:_,ref:he}),o))});dw.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};dw.classNames={fullWidth:b_,zeroRight:__};var pte=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=pte();return t&&e.setAttribute("nonce",t),e}function mte(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function gte(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var yte=function(){var e=0,t=null;return{add:function(r){e==0&&(t=fte())&&(mte(t,r),gte(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},xte=function(){var e=yte();return function(t,r){U.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},lz=function(){var e=xte(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},vte={left:0,top:0,right:0,gap:0},G2=function(e){return parseInt(e||"",10)||0},_te=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[G2(r),G2(n),G2(a)]},bte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return vte;var t=_te(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},wte=lz(),cf="data-scroll-locked",Ste=function(e,t,r,n){var a=e.left,u=e.top,h=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(ite,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(cf,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(__,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(b_,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(__," .").concat(__,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(b_," .").concat(b_,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(cf,`] {
    `).concat(ste,": ").concat(o,`px;
  }
`)},xR=function(){var e=parseInt(document.body.getAttribute(cf)||"0",10);return isFinite(e)?e:0},Tte=function(){U.useEffect(function(){return document.body.setAttribute(cf,(xR()+1).toString()),function(){var e=xR()-1;e<=0?document.body.removeAttribute(cf):document.body.setAttribute(cf,e.toString())}},[])},kte=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Tte();var u=U.useMemo(function(){return bte(a)},[a]);return U.createElement(wte,{styles:Ste(u,!t,a,r?"":"!important")})},nk=!1;if(typeof window<"u")try{var L0=Object.defineProperty({},"passive",{get:function(){return nk=!0,!0}});window.addEventListener("test",L0,L0),window.removeEventListener("test",L0,L0)}catch{nk=!1}var _p=nk?{passive:!1}:!1,Cte=function(e){return e.tagName==="TEXTAREA"},cz=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Cte(e)&&r[t]==="visible")},Pte=function(e){return cz(e,"overflowY")},Ete=function(e){return cz(e,"overflowX")},vR=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=uz(e,n);if(a){var u=dz(e,n),h=u[1],o=u[2];if(h>o)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},jte=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Ate=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},uz=function(e,t){return e==="v"?Pte(t):Ete(t)},dz=function(e,t){return e==="v"?jte(t):Ate(t)},Mte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Nte=function(e,t,r,n,a){var u=Mte(e,window.getComputedStyle(t).direction),h=u*n,o=r.target,_=t.contains(o),T=!1,P=h>0,E=0,M=0;do{if(!o)break;var I=dz(e,o),z=I[0],F=I[1],D=I[2],q=F-D-u*z;(z||q)&&uz(e,o)&&(E+=q,M+=z);var $=o.parentNode;o=$&&$.nodeType===Node.DOCUMENT_FRAGMENT_NODE?$.host:$}while(!_&&o!==document.body||_&&(t.contains(o)||t===o));return(P&&(Math.abs(E)<1||!a)||!P&&(Math.abs(M)<1||!a))&&(T=!0),T},F0=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_R=function(e){return[e.deltaX,e.deltaY]},bR=function(e){return e&&"current"in e?e.current:e},Ite=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Rte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Dte=0,bp=[];function Ote(e){var t=U.useRef([]),r=U.useRef([0,0]),n=U.useRef(),a=U.useState(Dte++)[0],u=U.useState(lz)[0],h=U.useRef(e);U.useEffect(function(){h.current=e},[e]),U.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var F=FP([e.lockRef.current],(e.shards||[]).map(bR),!0).filter(Boolean);return F.forEach(function(D){return D.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),F.forEach(function(D){return D.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=U.useCallback(function(F,D){if("touches"in F&&F.touches.length===2||F.type==="wheel"&&F.ctrlKey)return!h.current.allowPinchZoom;var q=F0(F),$=r.current,W="deltaX"in F?F.deltaX:$[0]-q[0],te="deltaY"in F?F.deltaY:$[1]-q[1],se,he=F.target,pe=Math.abs(W)>Math.abs(te)?"h":"v";if("touches"in F&&pe==="h"&&he.type==="range")return!1;var xe=vR(pe,he);if(!xe)return!0;if(xe?se=pe:(se=pe==="v"?"h":"v",xe=vR(pe,he)),!xe)return!1;if(!n.current&&"changedTouches"in F&&(W||te)&&(n.current=se),!se)return!0;var Re=n.current||se;return Nte(Re,D,F,Re==="h"?W:te,!0)},[]),_=U.useCallback(function(F){var D=F;if(!(!bp.length||bp[bp.length-1]!==u)){var q="deltaY"in D?_R(D):F0(D),$=t.current.filter(function(se){return se.name===D.type&&(se.target===D.target||D.target===se.shadowParent)&&Ite(se.delta,q)})[0];if($&&$.should){D.cancelable&&D.preventDefault();return}if(!$){var W=(h.current.shards||[]).map(bR).filter(Boolean).filter(function(se){return se.contains(D.target)}),te=W.length>0?o(D,W[0]):!h.current.noIsolation;te&&D.cancelable&&D.preventDefault()}}},[]),T=U.useCallback(function(F,D,q,$){var W={name:F,delta:D,target:q,should:$,shadowParent:Lte(q)};t.current.push(W),setTimeout(function(){t.current=t.current.filter(function(te){return te!==W})},1)},[]),P=U.useCallback(function(F){r.current=F0(F),n.current=void 0},[]),E=U.useCallback(function(F){T(F.type,_R(F),F.target,o(F,e.lockRef.current))},[]),M=U.useCallback(function(F){T(F.type,F0(F),F.target,o(F,e.lockRef.current))},[]);U.useEffect(function(){return bp.push(u),e.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:M}),document.addEventListener("wheel",_,_p),document.addEventListener("touchmove",_,_p),document.addEventListener("touchstart",P,_p),function(){bp=bp.filter(function(F){return F!==u}),document.removeEventListener("wheel",_,_p),document.removeEventListener("touchmove",_,_p),document.removeEventListener("touchstart",P,_p)}},[]);var I=e.removeScrollBar,z=e.inert;return U.createElement(U.Fragment,null,z?U.createElement(u,{styles:Rte(a)}):null,I?U.createElement(kte,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Lte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Fte=hte(oz,Ote);var zP=U.forwardRef(function(e,t){return U.createElement(dw,Oa({},e,{ref:t,sideCar:Fte}))});zP.classNames=dw.classNames;var zte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},wp=new WeakMap,z0=new WeakMap,B0={},H2=0,hz=function(e){return e&&(e.host||hz(e.parentNode))},Bte=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=hz(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Vte=function(e,t,r,n){var a=Bte(t,Array.isArray(e)?e:[e]);B0[r]||(B0[r]=new WeakMap);var u=B0[r],h=[],o=new Set,_=new Set(a),T=function(E){!E||o.has(E)||(o.add(E),T(E.parentNode))};a.forEach(T);var P=function(E){!E||_.has(E)||Array.prototype.forEach.call(E.children,function(M){if(o.has(M))P(M);else try{var I=M.getAttribute(n),z=I!==null&&I!=="false",F=(wp.get(M)||0)+1,D=(u.get(M)||0)+1;wp.set(M,F),u.set(M,D),h.push(M),F===1&&z&&z0.set(M,!0),D===1&&M.setAttribute(r,"true"),z||M.setAttribute(n,"true")}catch(q){console.error("aria-hidden: cannot operate on ",M,q)}})};return P(t),o.clear(),H2++,function(){h.forEach(function(E){var M=wp.get(E)-1,I=u.get(E)-1;wp.set(E,M),u.set(E,I),M||(z0.has(E)||E.removeAttribute(n),z0.delete(E)),I||E.removeAttribute(r)}),H2--,H2||(wp=new WeakMap,wp=new WeakMap,z0=new WeakMap,B0={})}},pz=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=zte(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live]"))),Vte(n,a,r,"aria-hidden")):function(){return null}},hw="Dialog",[fz,Nfe]=fl(hw),[$te,Mo]=fz(hw),mz=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:u,modal:h=!0}=e,o=U.useRef(null),_=U.useRef(null),[T,P]=qf({prop:n,defaultProp:a??!1,onChange:u,caller:hw});return f.jsx($te,{scope:t,triggerRef:o,contentRef:_,contentId:sy(),titleId:sy(),descriptionId:sy(),open:T,onOpenChange:P,onOpenToggle:U.useCallback(()=>P(E=>!E),[P]),modal:h,children:r})};mz.displayName=hw;var gz="DialogTrigger",Ute=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Mo(gz,r),u=In(t,a.triggerRef);return f.jsx(Dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":$P(a.open),...n,ref:u,onClick:gr(e.onClick,a.onOpenToggle)})});Ute.displayName=gz;var BP="DialogPortal",[qte,yz]=fz(BP,{forceMount:void 0}),xz=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,u=Mo(BP,t);return f.jsx(qte,{scope:t,forceMount:r,children:U.Children.map(n,h=>f.jsx(ml,{present:r||u.open,children:f.jsx(Ub,{asChild:!0,container:a,children:h})}))})};xz.displayName=BP;var yb="DialogOverlay",vz=U.forwardRef((e,t)=>{const r=yz(yb,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,u=Mo(yb,e.__scopeDialog);return u.modal?f.jsx(ml,{present:n||u.open,children:f.jsx(Gte,{...a,ref:t})}):null});vz.displayName=yb;var Wte=Cf("DialogOverlay.RemoveScroll"),Gte=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Mo(yb,r);return f.jsx(zP,{as:Wte,allowPinchZoom:!0,shards:[a.contentRef],children:f.jsx(Dr.div,{"data-state":$P(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),uh="DialogContent",_z=U.forwardRef((e,t)=>{const r=yz(uh,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,u=Mo(uh,e.__scopeDialog);return f.jsx(ml,{present:n||u.open,children:u.modal?f.jsx(Hte,{...a,ref:t}):f.jsx(Zte,{...a,ref:t})})});_z.displayName=uh;var Hte=U.forwardRef((e,t)=>{const r=Mo(uh,e.__scopeDialog),n=U.useRef(null),a=In(t,r.contentRef,n);return U.useEffect(()=>{const u=n.current;if(u)return pz(u)},[]),f.jsx(bz,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gr(e.onCloseAutoFocus,u=>{var h;u.preventDefault(),(h=r.triggerRef.current)==null||h.focus()}),onPointerDownOutside:gr(e.onPointerDownOutside,u=>{const h=u.detail.originalEvent,o=h.button===0&&h.ctrlKey===!0;(h.button===2||o)&&u.preventDefault()}),onFocusOutside:gr(e.onFocusOutside,u=>u.preventDefault())})}),Zte=U.forwardRef((e,t)=>{const r=Mo(uh,e.__scopeDialog),n=U.useRef(!1),a=U.useRef(!1);return f.jsx(bz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var h,o;(h=e.onCloseAutoFocus)==null||h.call(e,u),u.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),u.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:u=>{var _,T;(_=e.onInteractOutside)==null||_.call(e,u),u.defaultPrevented||(n.current=!0,u.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const h=u.target;((T=r.triggerRef.current)==null?void 0:T.contains(h))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.current&&u.preventDefault()}})}),bz=U.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:u,...h}=e,o=Mo(uh,r),_=U.useRef(null),T=In(t,_);return DF(),f.jsxs(f.Fragment,{children:[f.jsx(OP,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:u,children:f.jsx(hx,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":$P(o.open),...h,ref:T,onDismiss:()=>o.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(Kte,{titleId:o.titleId}),f.jsx(Qte,{contentRef:_,descriptionId:o.descriptionId})]})]})}),VP="DialogTitle",wz=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Mo(VP,r);return f.jsx(Dr.h2,{id:a.titleId,...n,ref:t})});wz.displayName=VP;var Sz="DialogDescription",Tz=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Mo(Sz,r);return f.jsx(Dr.p,{id:a.descriptionId,...n,ref:t})});Tz.displayName=Sz;var kz="DialogClose",Cz=U.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Mo(kz,r);return f.jsx(Dr.button,{type:"button",...n,ref:t,onClick:gr(e.onClick,()=>a.onOpenChange(!1))})});Cz.displayName=kz;function $P(e){return e?"open":"closed"}var Pz="DialogTitleWarning",[Ife,Ez]=Hq(Pz,{contentName:uh,titleName:VP,docsSlug:"dialog"}),Kte=({titleId:e})=>{const t=Ez(Pz),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return U.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},Yte="DialogDescriptionWarning",Qte=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ez(Yte).contentName}}.`;return U.useEffect(()=>{var u;const a=(u=e.current)==null?void 0:u.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},Xte=mz,Jte=xz,jz=vz,Az=_z,Mz=wz,Nz=Tz,ere=Cz;const tre=Xte,rre=Jte,Iz=U.forwardRef(({className:e,...t},r)=>f.jsx(jz,{ref:r,className:St("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Iz.displayName=jz.displayName;const Rz=U.forwardRef(({className:e,children:t,...r},n)=>f.jsxs(rre,{children:[f.jsx(Iz,{}),f.jsxs(Az,{ref:n,className:St("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/60 bg-background p-6 shadow-xl duration-200","dark:border-border/40 dark:bg-background/98 dark:shadow-2xl dark:shadow-black/30","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",e),...r,children:[t,f.jsxs(ere,{className:"absolute right-4 top-4 rounded-lg p-1 opacity-70 ring-offset-background transition-all hover:bg-muted hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[f.jsx(CC,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rz.displayName=Az.displayName;const Dz=({className:e,...t})=>f.jsx("div",{className:St("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Dz.displayName="DialogHeader";const Oz=U.forwardRef(({className:e,...t},r)=>f.jsx(Mz,{ref:r,className:St("text-lg font-semibold leading-none tracking-tight",e),...t}));Oz.displayName=Mz.displayName;const Lz=U.forwardRef(({className:e,...t},r)=>f.jsx(Nz,{ref:r,className:St("text-sm text-muted-foreground",e),...t}));Lz.displayName=Nz.displayName;const ik=Gb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-medium ring-offset-background transition-all duration-300 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 cursor-pointer select-none",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/25 hover:scale-[1.02] active:scale-[0.97] active:shadow-md",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg active:scale-[0.97]",outline:"border-2 border-border bg-transparent text-foreground hover:bg-muted hover:border-primary/30 hover:shadow-sm active:scale-[0.98]",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-lg hover:scale-[1.02] active:scale-[0.97]",ghost:"hover:bg-muted hover:text-foreground transition-colors active:bg-muted/80",link:"text-primary underline-offset-4 hover:underline hover:text-primary/80",accent:"bg-primary/90 text-primary-foreground hover:bg-primary hover:shadow-xl hover:shadow-primary/30 hover:scale-[1.03] active:scale-[0.97]",glass:"backdrop-blur-2xl bg-gradient-to-br from-white/30 via-white/20 to-white/10 dark:from-white/20 dark:via-white/10 dark:to-white/5 border border-white/40 text-white hover:border-white/60 hover:from-white/40 hover:via-white/30 hover:to-white/20 hover:shadow-xl active:scale-[0.97]","glass-secondary":"backdrop-blur-2xl bg-gradient-to-br from-white/20 via-white/15 to-white/10 dark:from-white/15 dark:via-white/10 dark:to-white/5 border border-white/30 text-white hover:border-white/50 hover:from-white/30 hover:via-white/25 hover:to-white/20 hover:shadow-lg active:scale-[0.97]"},size:{default:"h-10 px-5 py-2",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-8 text-base",xl:"h-14 rounded-2xl px-10 text-base font-semibold",icon:"h-10 w-10 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),Zr=U.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},u)=>{const h=n?Kq:"button";return f.jsx(h,{className:St(ik({variant:t,size:r,className:e})),ref:u,...a})});Zr.displayName="Button";const La=U.forwardRef(({className:e,type:t,...r},n)=>f.jsx("input",{type:t,className:St("flex h-12 w-full rounded-xl border-2 border-input bg-background px-4 py-3 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:border-primary/50 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm hover:border-primary/30",e),ref:n,...r}));La.displayName="Input";var nre="Label",Fz=U.forwardRef((e,t)=>f.jsx(Dr.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Fz.displayName=nre;var zz=Fz;const ire=Gb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),qn=U.forwardRef(({className:e,...t},r)=>f.jsx(zz,{ref:r,className:St(ire(),e),...t}));qn.displayName=zz.displayName;const w_=U.forwardRef(({className:e,...t},r)=>f.jsx("textarea",{className:St("flex min-h-[100px] w-full rounded-xl border-2 border-input bg-background px-4 py-3 text-base ring-offset-background placeholder:text-muted-foreground/60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:border-primary/50 disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 shadow-sm hover:border-primary/30 resize-none leading-relaxed",e),ref:r,...t}));w_.displayName="Textarea";var sre=U.createContext(void 0);function Bz(e){const t=U.useContext(sre);return e||t||"ltr"}var Z2="rovingFocusGroup.onEntryFocus",are={bubbles:!1,cancelable:!0},Sx="RovingFocusGroup",[sk,Vz,ore]=YL(Sx),[lre,$z]=fl(Sx,[ore]),[cre,ure]=lre(Sx),Uz=U.forwardRef((e,t)=>f.jsx(sk.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(sk.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(dre,{...e,ref:t})})}));Uz.displayName=Sx;var dre=U.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:_,onEntryFocus:T,preventScrollOnEntryFocus:P=!1,...E}=e,M=U.useRef(null),I=In(t,M),z=Bz(u),[F,D]=qf({prop:h,defaultProp:o??null,onChange:_,caller:Sx}),[q,$]=U.useState(!1),W=ko(T),te=Vz(r),se=U.useRef(!1),[he,pe]=U.useState(0);return U.useEffect(()=>{const xe=M.current;if(xe)return xe.addEventListener(Z2,W),()=>xe.removeEventListener(Z2,W)},[W]),f.jsx(cre,{scope:r,orientation:n,dir:z,loop:a,currentTabStopId:F,onItemFocus:U.useCallback(xe=>D(xe),[D]),onItemShiftTab:U.useCallback(()=>$(!0),[]),onFocusableItemAdd:U.useCallback(()=>pe(xe=>xe+1),[]),onFocusableItemRemove:U.useCallback(()=>pe(xe=>xe-1),[]),children:f.jsx(Dr.div,{tabIndex:q||he===0?-1:0,"data-orientation":n,...E,ref:I,style:{outline:"none",...e.style},onMouseDown:gr(e.onMouseDown,()=>{se.current=!0}),onFocus:gr(e.onFocus,xe=>{const Re=!se.current;if(xe.target===xe.currentTarget&&Re&&!q){const Me=new CustomEvent(Z2,are);if(xe.currentTarget.dispatchEvent(Me),!Me.defaultPrevented){const pt=te().filter(nt=>nt.focusable),Oe=pt.find(nt=>nt.active),Ye=pt.find(nt=>nt.id===F),rt=[Oe,Ye,...pt].filter(Boolean).map(nt=>nt.ref.current);Gz(rt,P)}}se.current=!1}),onBlur:gr(e.onBlur,()=>$(!1))})})}),qz="RovingFocusGroupItem",Wz=U.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:u,children:h,...o}=e,_=sy(),T=u||_,P=ure(qz,r),E=P.currentTabStopId===T,M=Vz(r),{onFocusableItemAdd:I,onFocusableItemRemove:z,currentTabStopId:F}=P;return U.useEffect(()=>{if(n)return I(),()=>z()},[n,I,z]),f.jsx(sk.ItemSlot,{scope:r,id:T,focusable:n,active:a,children:f.jsx(Dr.span,{tabIndex:E?0:-1,"data-orientation":P.orientation,...o,ref:t,onMouseDown:gr(e.onMouseDown,D=>{n?P.onItemFocus(T):D.preventDefault()}),onFocus:gr(e.onFocus,()=>P.onItemFocus(T)),onKeyDown:gr(e.onKeyDown,D=>{if(D.key==="Tab"&&D.shiftKey){P.onItemShiftTab();return}if(D.target!==D.currentTarget)return;const q=fre(D,P.orientation,P.dir);if(q!==void 0){if(D.metaKey||D.ctrlKey||D.altKey||D.shiftKey)return;D.preventDefault();let W=M().filter(te=>te.focusable).map(te=>te.ref.current);if(q==="last")W.reverse();else if(q==="prev"||q==="next"){q==="prev"&&W.reverse();const te=W.indexOf(D.currentTarget);W=P.loop?mre(W,te+1):W.slice(te+1)}setTimeout(()=>Gz(W))}}),children:typeof h=="function"?h({isCurrentTabStop:E,hasTabStop:F!=null}):h})})});Wz.displayName=qz;var hre={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function pre(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function fre(e,t,r){const n=pre(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return hre[n]}function Gz(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function mre(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var gre=Uz,yre=Wz;function Hz(e){const t=U.useRef({value:e,previous:e});return U.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var UP="Radio",[xre,Zz]=fl(UP),[vre,_re]=xre(UP),Kz=U.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:u,disabled:h,value:o="on",onCheck:_,form:T,...P}=e,[E,M]=U.useState(null),I=In(t,D=>M(D)),z=U.useRef(!1),F=E?T||!!E.closest("form"):!0;return f.jsxs(vre,{scope:r,checked:a,disabled:h,children:[f.jsx(Dr.button,{type:"button",role:"radio","aria-checked":a,"data-state":Jz(a),"data-disabled":h?"":void 0,disabled:h,value:o,...P,ref:I,onClick:gr(e.onClick,D=>{a||_==null||_(),F&&(z.current=D.isPropagationStopped(),z.current||D.stopPropagation())})}),F&&f.jsx(Xz,{control:E,bubbles:!z.current,name:n,value:o,checked:a,required:u,disabled:h,form:T,style:{transform:"translateX(-100%)"}})]})});Kz.displayName=UP;var Yz="RadioIndicator",Qz=U.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,u=_re(Yz,r);return f.jsx(ml,{present:n||u.checked,children:f.jsx(Dr.span,{"data-state":Jz(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t})})});Qz.displayName=Yz;var bre="RadioBubbleInput",Xz=U.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},u)=>{const h=U.useRef(null),o=In(h,u),_=Hz(r),T=LC(t);return U.useEffect(()=>{const P=h.current;if(!P)return;const E=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(E,"checked").set;if(_!==r&&I){const z=new Event("click",{bubbles:n});I.call(P,r),P.dispatchEvent(z)}},[_,r,n]),f.jsx(Dr.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...T,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Xz.displayName=bre;function Jz(e){return e?"checked":"unchecked"}var wre=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pw="RadioGroup",[Sre,Rfe]=fl(pw,[$z,Zz]),e6=$z(),t6=Zz(),[Tre,kre]=Sre(pw),r6=U.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:u,required:h=!1,disabled:o=!1,orientation:_,dir:T,loop:P=!0,onValueChange:E,...M}=e,I=e6(r),z=Bz(T),[F,D]=qf({prop:u,defaultProp:a??null,onChange:E,caller:pw});return f.jsx(Tre,{scope:r,name:n,required:h,disabled:o,value:F,onValueChange:D,children:f.jsx(gre,{asChild:!0,...I,orientation:_,dir:z,loop:P,children:f.jsx(Dr.div,{role:"radiogroup","aria-required":h,"aria-orientation":_,"data-disabled":o?"":void 0,dir:z,...M,ref:t})})})});r6.displayName=pw;var n6="RadioGroupItem",i6=U.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,u=kre(n6,r),h=u.disabled||n,o=e6(r),_=t6(r),T=U.useRef(null),P=In(t,T),E=u.value===a.value,M=U.useRef(!1);return U.useEffect(()=>{const I=F=>{wre.includes(F.key)&&(M.current=!0)},z=()=>M.current=!1;return document.addEventListener("keydown",I),document.addEventListener("keyup",z),()=>{document.removeEventListener("keydown",I),document.removeEventListener("keyup",z)}},[]),f.jsx(yre,{asChild:!0,...o,focusable:!h,active:E,children:f.jsx(Kz,{disabled:h,required:u.required,checked:E,..._,...a,name:u.name,ref:P,onCheck:()=>u.onValueChange(a.value),onKeyDown:gr(I=>{I.key==="Enter"&&I.preventDefault()}),onFocus:gr(a.onFocus,()=>{var I;M.current&&((I=T.current)==null||I.click())})})})});i6.displayName=n6;var Cre="RadioGroupIndicator",s6=U.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=t6(r);return f.jsx(Qz,{...a,...n,ref:t})});s6.displayName=Cre;var a6=r6,o6=i6,Pre=s6;const l6=U.forwardRef(({className:e,...t},r)=>f.jsx(a6,{className:St("grid gap-2",e),...t,ref:r}));l6.displayName=a6.displayName;const ak=U.forwardRef(({className:e,...t},r)=>f.jsx(o6,{ref:r,className:St("aspect-square h-6 w-6 rounded-full border-2 border-primary/40 text-primary ring-offset-background transition-all duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 hover:border-primary/60 cursor-pointer data-[state=checked]:border-primary",e),...t,children:f.jsx(Pre,{className:"flex items-center justify-center",children:f.jsx(WW,{className:"h-3 w-3 fill-primary text-primary"})})}));ak.displayName=o6.displayName;var fw="Checkbox",[Ere,Dfe]=fl(fw),[jre,qP]=Ere(fw);function Are(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:u,form:h,name:o,onCheckedChange:_,required:T,value:P="on",internal_do_not_use_render:E}=e,[M,I]=qf({prop:r,defaultProp:a??!1,onChange:_,caller:fw}),[z,F]=U.useState(null),[D,q]=U.useState(null),$=U.useRef(!1),W=z?!!h||!!z.closest("form"):!0,te={checked:M,disabled:u,setChecked:I,control:z,setControl:F,name:o,form:h,value:P,hasConsumerStoppedPropagationRef:$,required:T,defaultChecked:vu(a)?!1:a,isFormControl:W,bubbleInput:D,setBubbleInput:q};return f.jsx(jre,{scope:t,...te,children:Mre(E)?E(te):n})}var c6="CheckboxTrigger",u6=U.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:u,value:h,disabled:o,checked:_,required:T,setControl:P,setChecked:E,hasConsumerStoppedPropagationRef:M,isFormControl:I,bubbleInput:z}=qP(c6,e),F=In(a,P),D=U.useRef(_);return U.useEffect(()=>{const q=u==null?void 0:u.form;if(q){const $=()=>E(D.current);return q.addEventListener("reset",$),()=>q.removeEventListener("reset",$)}},[u,E]),f.jsx(Dr.button,{type:"button",role:"checkbox","aria-checked":vu(_)?"mixed":_,"aria-required":T,"data-state":m6(_),"data-disabled":o?"":void 0,disabled:o,value:h,...n,ref:F,onKeyDown:gr(t,q=>{q.key==="Enter"&&q.preventDefault()}),onClick:gr(r,q=>{E($=>vu($)?!0:!$),z&&I&&(M.current=q.isPropagationStopped(),M.current||q.stopPropagation())})})});u6.displayName=c6;var WP=U.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:u,required:h,disabled:o,value:_,onCheckedChange:T,form:P,...E}=e;return f.jsx(Are,{__scopeCheckbox:r,checked:a,defaultChecked:u,disabled:o,required:h,onCheckedChange:T,name:n,form:P,value:_,internal_do_not_use_render:({isFormControl:M})=>f.jsxs(f.Fragment,{children:[f.jsx(u6,{...E,ref:t,__scopeCheckbox:r}),M&&f.jsx(f6,{__scopeCheckbox:r})]})})});WP.displayName=fw;var d6="CheckboxIndicator",h6=U.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,u=qP(d6,r);return f.jsx(ml,{present:n||vu(u.checked)||u.checked===!0,children:f.jsx(Dr.span,{"data-state":m6(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});h6.displayName=d6;var p6="CheckboxBubbleInput",f6=U.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:u,defaultChecked:h,required:o,disabled:_,name:T,value:P,form:E,bubbleInput:M,setBubbleInput:I}=qP(p6,e),z=In(r,I),F=Hz(u),D=LC(n);U.useEffect(()=>{const $=M;if(!$)return;const W=window.HTMLInputElement.prototype,se=Object.getOwnPropertyDescriptor(W,"checked").set,he=!a.current;if(F!==u&&se){const pe=new Event("click",{bubbles:he});$.indeterminate=vu(u),se.call($,vu(u)?!1:u),$.dispatchEvent(pe)}},[M,F,u,a]);const q=U.useRef(vu(u)?!1:u);return f.jsx(Dr.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??q.current,required:o,disabled:_,name:T,value:P,form:E,...t,tabIndex:-1,ref:z,style:{...t.style,...D,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});f6.displayName=p6;function Mre(e){return typeof e=="function"}function vu(e){return e==="indeterminate"}function m6(e){return vu(e)?"indeterminate":e?"checked":"unchecked"}const S_=U.forwardRef(({className:e,...t},r)=>f.jsx(WP,{ref:r,className:St("peer h-6 w-6 shrink-0 rounded-lg border-2 border-primary/40 ring-offset-background transition-all duration-200 data-[state=checked]:bg-primary data-[state=checked]:border-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary/30 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 hover:border-primary/60 cursor-pointer",e),...t,children:f.jsx(h6,{className:St("flex items-center justify-center text-current"),children:f.jsx(qW,{className:"h-4 w-4 stroke-[3]"})})}));S_.displayName=WP.displayName;function Ar(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function va(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Cs(e,t){const r=Ar(e);return isNaN(t)?va(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function jo(e,t){const r=Ar(e);if(isNaN(t))return va(e,NaN);if(!t)return r;const n=r.getDate(),a=va(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const u=a.getDate();return n>=u?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const GP=6048e5,Nre=864e5;let Ire={};function Tx(){return Ire}function pl(e,t){var o,_,T,P;const r=Tx(),n=(t==null?void 0:t.weekStartsOn)??((_=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((P=(T=r.locale)==null?void 0:T.options)==null?void 0:P.weekStartsOn)??0,a=Ar(e),u=a.getDay(),h=(u<n?7:0)+u-n;return a.setDate(a.getDate()-h),a.setHours(0,0,0,0),a}function dh(e){return pl(e,{weekStartsOn:1})}function g6(e){const t=Ar(e),r=t.getFullYear(),n=va(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=dh(n),u=va(e,0);u.setFullYear(r,0,4),u.setHours(0,0,0,0);const h=dh(u);return t.getTime()>=a.getTime()?r+1:t.getTime()>=h.getTime()?r:r-1}function Ff(e){const t=Ar(e);return t.setHours(0,0,0,0),t}function xb(e){const t=Ar(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function rl(e,t){const r=Ff(e),n=Ff(t),a=+r-xb(r),u=+n-xb(n);return Math.round((a-u)/Nre)}function Rre(e){const t=g6(e),r=va(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),dh(r)}function ok(e,t){const r=t*7;return Cs(e,r)}function Dre(e,t){return jo(e,t*12)}function Ore(e){let t;return e.forEach(function(r){const n=Ar(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function Lre(e){let t;return e.forEach(r=>{const n=Ar(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function Gs(e,t){const r=Ff(e),n=Ff(t);return+r==+n}function HP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Fre(e){if(!HP(e)&&typeof e!="number")return!1;const t=Ar(e);return!isNaN(Number(t))}function Yy(e,t){const r=Ar(e),n=Ar(t),a=r.getFullYear()-n.getFullYear(),u=r.getMonth()-n.getMonth();return a*12+u}function zre(e,t,r){const n=pl(e,r),a=pl(t,r),u=+n-xb(n),h=+a-xb(a);return Math.round((u-h)/GP)}function ZP(e){const t=Ar(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Qs(e){const t=Ar(e);return t.setDate(1),t.setHours(0,0,0,0),t}function y6(e){const t=Ar(e),r=va(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function KP(e,t){var o,_,T,P;const r=Tx(),n=(t==null?void 0:t.weekStartsOn)??((_=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((P=(T=r.locale)==null?void 0:T.options)==null?void 0:P.weekStartsOn)??0,a=Ar(e),u=a.getDay(),h=(u<n?-7:0)+6-(u-n);return a.setDate(a.getDate()+h),a.setHours(23,59,59,999),a}function x6(e){return KP(e,{weekStartsOn:1})}const Bre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Vre=(e,t,r)=>{let n;const a=Bre[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function K2(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const $re={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ure={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qre={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wre={date:K2({formats:$re,defaultWidth:"full"}),time:K2({formats:Ure,defaultWidth:"full"}),dateTime:K2({formats:qre,defaultWidth:"full"})},Gre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hre=(e,t,r,n)=>Gre[e];function Og(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const h=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):h;a=e.formattingValues[o]||e.formattingValues[h]}else{const h=e.defaultWidth,o=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[o]||e.values[h]}const u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}const Zre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Yre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Qre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Xre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Jre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ene=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},tne={ordinalNumber:ene,era:Og({values:Zre,defaultWidth:"wide"}),quarter:Og({values:Kre,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Og({values:Yre,defaultWidth:"wide"}),day:Og({values:Qre,defaultWidth:"wide"}),dayPeriod:Og({values:Xre,defaultWidth:"wide",formattingValues:Jre,defaultFormattingWidth:"wide"})};function Lg(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],u=t.match(a);if(!u)return null;const h=u[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],_=Array.isArray(o)?nne(o,E=>E.test(h)):rne(o,E=>E.test(h));let T;T=e.valueCallback?e.valueCallback(_):_,T=r.valueCallback?r.valueCallback(T):T;const P=t.slice(h.length);return{value:T,rest:P}}}function rne(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function nne(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function ine(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],u=t.match(e.parsePattern);if(!u)return null;let h=e.valueCallback?e.valueCallback(u[0]):u[0];h=r.valueCallback?r.valueCallback(h):h;const o=t.slice(a.length);return{value:h,rest:o}}}const sne=/^(\d+)(th|st|nd|rd)?/i,ane=/\d+/i,one={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},lne={any:[/^b/i,/^(a|c)/i]},cne={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},une={any:[/1/i,/2/i,/3/i,/4/i]},dne={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hne={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pne={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fne={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mne={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},gne={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yne={ordinalNumber:ine({matchPattern:sne,parsePattern:ane,valueCallback:e=>parseInt(e,10)}),era:Lg({matchPatterns:one,defaultMatchWidth:"wide",parsePatterns:lne,defaultParseWidth:"any"}),quarter:Lg({matchPatterns:cne,defaultMatchWidth:"wide",parsePatterns:une,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Lg({matchPatterns:dne,defaultMatchWidth:"wide",parsePatterns:hne,defaultParseWidth:"any"}),day:Lg({matchPatterns:pne,defaultMatchWidth:"wide",parsePatterns:fne,defaultParseWidth:"any"}),dayPeriod:Lg({matchPatterns:mne,defaultMatchWidth:"any",parsePatterns:gne,defaultParseWidth:"any"})},v6={code:"en-US",formatDistance:Vre,formatLong:Wre,formatRelative:Hre,localize:tne,match:yne,options:{weekStartsOn:0,firstWeekContainsDate:1}};function xne(e){const t=Ar(e);return rl(t,y6(t))+1}function _6(e){const t=Ar(e),r=+dh(t)-+Rre(t);return Math.round(r/GP)+1}function b6(e,t){var P,E,M,I;const r=Ar(e),n=r.getFullYear(),a=Tx(),u=(t==null?void 0:t.firstWeekContainsDate)??((E=(P=t==null?void 0:t.locale)==null?void 0:P.options)==null?void 0:E.firstWeekContainsDate)??a.firstWeekContainsDate??((I=(M=a.locale)==null?void 0:M.options)==null?void 0:I.firstWeekContainsDate)??1,h=va(e,0);h.setFullYear(n+1,0,u),h.setHours(0,0,0,0);const o=pl(h,t),_=va(e,0);_.setFullYear(n,0,u),_.setHours(0,0,0,0);const T=pl(_,t);return r.getTime()>=o.getTime()?n+1:r.getTime()>=T.getTime()?n:n-1}function vne(e,t){var o,_,T,P;const r=Tx(),n=(t==null?void 0:t.firstWeekContainsDate)??((_=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:_.firstWeekContainsDate)??r.firstWeekContainsDate??((P=(T=r.locale)==null?void 0:T.options)==null?void 0:P.firstWeekContainsDate)??1,a=b6(e,t),u=va(e,0);return u.setFullYear(a,0,n),u.setHours(0,0,0,0),pl(u,t)}function w6(e,t){const r=Ar(e),n=+pl(r,t)-+vne(r,t);return Math.round(n/GP)+1}function Hr(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Bc={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Hr(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Hr(r+1,2)},d(e,t){return Hr(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Hr(e.getHours()%12||12,t.length)},H(e,t){return Hr(e.getHours(),t.length)},m(e,t){return Hr(e.getMinutes(),t.length)},s(e,t){return Hr(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Hr(a,t.length)}},Sp={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wR={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Bc.y(e,t)},Y:function(e,t,r,n){const a=b6(e,n),u=a>0?a:1-a;if(t==="YY"){const h=u%100;return Hr(h,2)}return t==="Yo"?r.ordinalNumber(u,{unit:"year"}):Hr(u,t.length)},R:function(e,t){const r=g6(e);return Hr(r,t.length)},u:function(e,t){const r=e.getFullYear();return Hr(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Hr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Hr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Bc.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Hr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=w6(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Hr(a,t.length)},I:function(e,t,r){const n=_6(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Hr(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Bc.d(e,t)},D:function(e,t,r){const n=xne(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Hr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),u=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return Hr(u,2);case"eo":return r.ordinalNumber(u,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),u=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return Hr(u,t.length);case"co":return r.ordinalNumber(u,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Hr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=Sp.noon:n===0?a=Sp.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=Sp.evening:n>=12?a=Sp.afternoon:n>=4?a=Sp.morning:a=Sp.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Bc.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Bc.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Hr(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Hr(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Bc.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Bc.s(e,t)},S:function(e,t){return Bc.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return TR(n);case"XXXX":case"XX":return Md(n);case"XXXXX":case"XXX":default:return Md(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return TR(n);case"xxxx":case"xx":return Md(n);case"xxxxx":case"xxx":default:return Md(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+SR(n,":");case"OOOO":default:return"GMT"+Md(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+SR(n,":");case"zzzz":default:return"GMT"+Md(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Hr(n,t.length)},T:function(e,t,r){const n=e.getTime();return Hr(n,t.length)}};function SR(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),u=n%60;return u===0?r+String(a):r+String(a)+t+Hr(u,2)}function TR(e,t){return e%60===0?(e>0?"-":"+")+Hr(Math.abs(e)/60,2):Md(e,t)}function Md(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Hr(Math.trunc(n/60),2),u=Hr(n%60,2);return r+a+t+u}const kR=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},S6=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},_ne=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return kR(e,t);let u;switch(n){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",kR(n,t)).replace("{{time}}",S6(a,t))},bne={p:S6,P:_ne},wne=/^D+$/,Sne=/^Y+$/,Tne=["D","DD","YY","YYYY"];function kne(e){return wne.test(e)}function Cne(e){return Sne.test(e)}function Pne(e,t,r){const n=Ene(e,t,r);if(console.warn(n),Tne.includes(e))throw new RangeError(n)}function Ene(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const jne=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ane=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Mne=/^'([^]*?)'?$/,Nne=/''/g,Ine=/[a-zA-Z]/;function Ru(e,t,r){var P,E,M,I,z,F,D,q;const n=Tx(),a=(r==null?void 0:r.locale)??n.locale??v6,u=(r==null?void 0:r.firstWeekContainsDate)??((E=(P=r==null?void 0:r.locale)==null?void 0:P.options)==null?void 0:E.firstWeekContainsDate)??n.firstWeekContainsDate??((I=(M=n.locale)==null?void 0:M.options)==null?void 0:I.firstWeekContainsDate)??1,h=(r==null?void 0:r.weekStartsOn)??((F=(z=r==null?void 0:r.locale)==null?void 0:z.options)==null?void 0:F.weekStartsOn)??n.weekStartsOn??((q=(D=n.locale)==null?void 0:D.options)==null?void 0:q.weekStartsOn)??0,o=Ar(e);if(!Fre(o))throw new RangeError("Invalid time value");let _=t.match(Ane).map($=>{const W=$[0];if(W==="p"||W==="P"){const te=bne[W];return te($,a.formatLong)}return $}).join("").match(jne).map($=>{if($==="''")return{isToken:!1,value:"'"};const W=$[0];if(W==="'")return{isToken:!1,value:Rne($)};if(wR[W])return{isToken:!0,value:$};if(W.match(Ine))throw new RangeError("Format string contains an unescaped latin alphabet character `"+W+"`");return{isToken:!1,value:$}});a.localize.preprocessor&&(_=a.localize.preprocessor(o,_));const T={firstWeekContainsDate:u,weekStartsOn:h,locale:a};return _.map($=>{if(!$.isToken)return $.value;const W=$.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Cne(W)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&kne(W))&&Pne(W,t,String(e));const te=wR[W[0]];return te(o,W,a.localize,T)}).join("")}function Rne(e){const t=e.match(Mne);return t?t[1].replace(Nne,"'"):e}function Dne(e){const t=Ar(e),r=t.getFullYear(),n=t.getMonth(),a=va(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function One(e){return Math.trunc(+Ar(e)/1e3)}function Lne(e){const t=Ar(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function Fne(e,t){return zre(Lne(e),Qs(e),t)+1}function lk(e,t){const r=Ar(e),n=Ar(t);return r.getTime()>n.getTime()}function T6(e,t){const r=Ar(e),n=Ar(t);return+r<+n}function YP(e,t){const r=Ar(e),n=Ar(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function zne(e,t){const r=Ar(e),n=Ar(t);return r.getFullYear()===n.getFullYear()}function Y2(e,t){return Cs(e,-t)}function Q2(e,t){const r=Ar(e),n=r.getFullYear(),a=r.getDate(),u=va(e,0);u.setFullYear(n,t,15),u.setHours(0,0,0,0);const h=Dne(u);return r.setMonth(t,Math.min(a,h)),r}function CR(e,t){const r=Ar(e);return isNaN(+r)?va(e,NaN):(r.setFullYear(t),r)}var rr=function(){return rr=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},rr.apply(this,arguments)};function Bne(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function k6(e,t,r){for(var n=0,a=t.length,u;n<a;n++)(u||!(n in t))&&(u||(u=Array.prototype.slice.call(t,0,n)),u[n]=t[n]);return e.concat(u||Array.prototype.slice.call(t))}function kx(e){return e.mode==="multiple"}function Cx(e){return e.mode==="range"}function mw(e){return e.mode==="single"}var Vne={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function $ne(e,t){return Ru(e,"LLLL y",t)}function Une(e,t){return Ru(e,"d",t)}function qne(e,t){return Ru(e,"LLLL",t)}function Wne(e){return"".concat(e)}function Gne(e,t){return Ru(e,"cccccc",t)}function Hne(e,t){return Ru(e,"yyyy",t)}var Zne=Object.freeze({__proto__:null,formatCaption:$ne,formatDay:Une,formatMonthCaption:qne,formatWeekNumber:Wne,formatWeekdayName:Gne,formatYearCaption:Hne}),Kne=function(e,t,r){return Ru(e,"do MMMM (EEEE)",r)},Yne=function(){return"Month: "},Qne=function(){return"Go to next month"},Xne=function(){return"Go to previous month"},Jne=function(e,t){return Ru(e,"cccc",t)},eie=function(e){return"Week n. ".concat(e)},tie=function(){return"Year: "},rie=Object.freeze({__proto__:null,labelDay:Kne,labelMonthDropdown:Yne,labelNext:Qne,labelPrevious:Xne,labelWeekNumber:eie,labelWeekday:Jne,labelYearDropdown:tie});function nie(){var e="buttons",t=Vne,r=v6,n={},a={},u=1,h={},o=new Date;return{captionLayout:e,classNames:t,formatters:Zne,labels:rie,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:u,styles:h,today:o,mode:"default"}}function iie(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,u=e.fromDate,h=e.toDate;return n?u=Qs(n):t&&(u=new Date(t,0,1)),a?h=ZP(a):r&&(h=new Date(r,11,31)),{fromDate:u?Ff(u):void 0,toDate:h?Ff(h):void 0}}var C6=U.createContext(void 0);function sie(e){var t,r=e.initialProps,n=nie(),a=iie(r),u=a.fromDate,h=a.toDate,o=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;o!=="buttons"&&(!u||!h)&&(o="buttons");var _;(mw(r)||kx(r)||Cx(r))&&(_=r.onSelect);var T=rr(rr(rr({},n),r),{captionLayout:o,classNames:rr(rr({},n.classNames),r.classNames),components:rr({},r.components),formatters:rr(rr({},n.formatters),r.formatters),fromDate:u,labels:rr(rr({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:rr(rr({},n.modifiers),r.modifiers),modifiersClassNames:rr(rr({},n.modifiersClassNames),r.modifiersClassNames),onSelect:_,styles:rr(rr({},n.styles),r.styles),toDate:h});return f.jsx(C6.Provider,{value:T,children:e.children})}function hn(){var e=U.useContext(C6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function P6(e){var t=hn(),r=t.locale,n=t.classNames,a=t.styles,u=t.formatters.formatCaption;return f.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:u(e.displayMonth,{locale:r})})}function aie(e){return f.jsx("svg",rr({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:f.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function E6(e){var t,r,n=e.onChange,a=e.value,u=e.children,h=e.caption,o=e.className,_=e.style,T=hn(),P=(r=(t=T.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:aie;return f.jsxs("div",{className:o,style:_,children:[f.jsx("span",{className:T.classNames.vhidden,children:e["aria-label"]}),f.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:T.classNames.dropdown,style:T.styles.dropdown,value:a,onChange:n,children:u}),f.jsxs("div",{className:T.classNames.caption_label,style:T.styles.caption_label,"aria-hidden":"true",children:[h,f.jsx(P,{className:T.classNames.dropdown_icon,style:T.styles.dropdown_icon})]})]})}function oie(e){var t,r=hn(),n=r.fromDate,a=r.toDate,u=r.styles,h=r.locale,o=r.formatters.formatMonthCaption,_=r.classNames,T=r.components,P=r.labels.labelMonthDropdown;if(!n)return f.jsx(f.Fragment,{});if(!a)return f.jsx(f.Fragment,{});var E=[];if(zne(n,a))for(var M=Qs(n),I=n.getMonth();I<=a.getMonth();I++)E.push(Q2(M,I));else for(var M=Qs(new Date),I=0;I<=11;I++)E.push(Q2(M,I));var z=function(D){var q=Number(D.target.value),$=Q2(Qs(e.displayMonth),q);e.onChange($)},F=(t=T==null?void 0:T.Dropdown)!==null&&t!==void 0?t:E6;return f.jsx(F,{name:"months","aria-label":P(),className:_.dropdown_month,style:u.dropdown_month,onChange:z,value:e.displayMonth.getMonth(),caption:o(e.displayMonth,{locale:h}),children:E.map(function(D){return f.jsx("option",{value:D.getMonth(),children:o(D,{locale:h})},D.getMonth())})})}function lie(e){var t,r=e.displayMonth,n=hn(),a=n.fromDate,u=n.toDate,h=n.locale,o=n.styles,_=n.classNames,T=n.components,P=n.formatters.formatYearCaption,E=n.labels.labelYearDropdown,M=[];if(!a)return f.jsx(f.Fragment,{});if(!u)return f.jsx(f.Fragment,{});for(var I=a.getFullYear(),z=u.getFullYear(),F=I;F<=z;F++)M.push(CR(y6(new Date),F));var D=function($){var W=CR(Qs(r),Number($.target.value));e.onChange(W)},q=(t=T==null?void 0:T.Dropdown)!==null&&t!==void 0?t:E6;return f.jsx(q,{name:"years","aria-label":E(),className:_.dropdown_year,style:o.dropdown_year,onChange:D,value:r.getFullYear(),caption:P(r,{locale:h}),children:M.map(function($){return f.jsx("option",{value:$.getFullYear(),children:P($,{locale:h})},$.getFullYear())})})}function cie(e,t){var r=U.useState(e),n=r[0],a=r[1],u=t===void 0?n:t;return[u,a]}function uie(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,u=e.toDate,h=e.fromDate,o=e.numberOfMonths,_=o===void 0?1:o;if(u&&Yy(u,a)<0){var T=-1*(_-1);a=jo(u,T)}return h&&Yy(a,h)<0&&(a=h),Qs(a)}function die(){var e=hn(),t=uie(e),r=cie(t,e.month),n=r[0],a=r[1],u=function(h){var o;if(!e.disableNavigation){var _=Qs(h);a(_),(o=e.onMonthChange)===null||o===void 0||o.call(e,_)}};return[n,u]}function hie(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=Qs(e),u=Qs(jo(a,n)),h=Yy(u,a),o=[],_=0;_<h;_++){var T=jo(a,_);o.push(T)}return r&&(o=o.reverse()),o}function pie(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,u=a===void 0?1:a,h=n?u:1,o=Qs(e);if(!r)return jo(o,h);var _=Yy(r,e);if(!(_<u))return jo(o,h)}}function fie(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,u=a===void 0?1:a,h=n?u:1,o=Qs(e);if(!r)return jo(o,-h);var _=Yy(o,r);if(!(_<=0))return jo(o,-h)}}var j6=U.createContext(void 0);function mie(e){var t=hn(),r=die(),n=r[0],a=r[1],u=hie(n,t),h=pie(n,t),o=fie(n,t),_=function(E){return u.some(function(M){return YP(E,M)})},T=function(E,M){_(E)||(M&&T6(E,M)?a(jo(E,1+t.numberOfMonths*-1)):a(E))},P={currentMonth:n,displayMonths:u,goToMonth:a,goToDate:T,previousMonth:o,nextMonth:h,isDateDisplayed:_};return f.jsx(j6.Provider,{value:P,children:e.children})}function Px(){var e=U.useContext(j6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function PR(e){var t,r=hn(),n=r.classNames,a=r.styles,u=r.components,h=Px().goToMonth,o=function(P){h(jo(P,e.displayIndex?-e.displayIndex:0))},_=(t=u==null?void 0:u.CaptionLabel)!==null&&t!==void 0?t:P6,T=f.jsx(_,{id:e.id,displayMonth:e.displayMonth});return f.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[f.jsx("div",{className:n.vhidden,children:T}),f.jsx(oie,{onChange:o,displayMonth:e.displayMonth}),f.jsx(lie,{onChange:o,displayMonth:e.displayMonth})]})}function gie(e){return f.jsx("svg",rr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:f.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function yie(e){return f.jsx("svg",rr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:f.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var vb=U.forwardRef(function(e,t){var r=hn(),n=r.classNames,a=r.styles,u=[n.button_reset,n.button];e.className&&u.push(e.className);var h=u.join(" "),o=rr(rr({},a.button_reset),a.button);return e.style&&Object.assign(o,e.style),f.jsx("button",rr({},e,{ref:t,type:"button",className:h,style:o}))});function xie(e){var t,r,n=hn(),a=n.dir,u=n.locale,h=n.classNames,o=n.styles,_=n.labels,T=_.labelPrevious,P=_.labelNext,E=n.components;if(!e.nextMonth&&!e.previousMonth)return f.jsx(f.Fragment,{});var M=T(e.previousMonth,{locale:u}),I=[h.nav_button,h.nav_button_previous].join(" "),z=P(e.nextMonth,{locale:u}),F=[h.nav_button,h.nav_button_next].join(" "),D=(t=E==null?void 0:E.IconRight)!==null&&t!==void 0?t:yie,q=(r=E==null?void 0:E.IconLeft)!==null&&r!==void 0?r:gie;return f.jsxs("div",{className:h.nav,style:o.nav,children:[!e.hidePrevious&&f.jsx(vb,{name:"previous-month","aria-label":M,className:I,style:o.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?f.jsx(D,{className:h.nav_icon,style:o.nav_icon}):f.jsx(q,{className:h.nav_icon,style:o.nav_icon})}),!e.hideNext&&f.jsx(vb,{name:"next-month","aria-label":z,className:F,style:o.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?f.jsx(q,{className:h.nav_icon,style:o.nav_icon}):f.jsx(D,{className:h.nav_icon,style:o.nav_icon})})]})}function ER(e){var t=hn().numberOfMonths,r=Px(),n=r.previousMonth,a=r.nextMonth,u=r.goToMonth,h=r.displayMonths,o=h.findIndex(function(z){return YP(e.displayMonth,z)}),_=o===0,T=o===h.length-1,P=t>1&&(_||!T),E=t>1&&(T||!_),M=function(){n&&u(n)},I=function(){a&&u(a)};return f.jsx(xie,{displayMonth:e.displayMonth,hideNext:P,hidePrevious:E,nextMonth:a,previousMonth:n,onPreviousClick:M,onNextClick:I})}function vie(e){var t,r=hn(),n=r.classNames,a=r.disableNavigation,u=r.styles,h=r.captionLayout,o=r.components,_=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:P6,T;return a?T=f.jsx(_,{id:e.id,displayMonth:e.displayMonth}):h==="dropdown"?T=f.jsx(PR,{displayMonth:e.displayMonth,id:e.id}):h==="dropdown-buttons"?T=f.jsxs(f.Fragment,{children:[f.jsx(PR,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),f.jsx(ER,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):T=f.jsxs(f.Fragment,{children:[f.jsx(_,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),f.jsx(ER,{displayMonth:e.displayMonth,id:e.id})]}),f.jsx("div",{className:n.caption,style:u.caption,children:T})}function _ie(e){var t=hn(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?f.jsx("tfoot",{className:a,style:n.tfoot,children:f.jsx("tr",{children:f.jsx("td",{colSpan:8,children:r})})}):f.jsx(f.Fragment,{})}function bie(e,t,r){for(var n=r?dh(new Date):pl(new Date,{locale:e,weekStartsOn:t}),a=[],u=0;u<7;u++){var h=Cs(n,u);a.push(h)}return a}function wie(){var e=hn(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,u=e.weekStartsOn,h=e.ISOWeek,o=e.formatters.formatWeekdayName,_=e.labels.labelWeekday,T=bie(a,u,h);return f.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&f.jsx("td",{style:r.head_cell,className:t.head_cell}),T.map(function(P,E){return f.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":_(P,{locale:a}),children:o(P,{locale:a})},E)})]})}function Sie(){var e,t=hn(),r=t.classNames,n=t.styles,a=t.components,u=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:wie;return f.jsx("thead",{style:n.head,className:r.head,children:f.jsx(u,{})})}function Tie(e){var t=hn(),r=t.locale,n=t.formatters.formatDay;return f.jsx(f.Fragment,{children:n(e.date,{locale:r})})}var QP=U.createContext(void 0);function kie(e){if(!kx(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return f.jsx(QP.Provider,{value:t,children:e.children})}return f.jsx(Cie,{initialProps:e.initialProps,children:e.children})}function Cie(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,u=t.max,h=function(T,P,E){var M,I;(M=t.onDayClick)===null||M===void 0||M.call(t,T,P,E);var z=!!(P.selected&&a&&(n==null?void 0:n.length)===a);if(!z){var F=!!(!P.selected&&u&&(n==null?void 0:n.length)===u);if(!F){var D=n?k6([],n):[];if(P.selected){var q=D.findIndex(function($){return Gs(T,$)});D.splice(q,1)}else D.push(T);(I=t.onSelect)===null||I===void 0||I.call(t,D,T,P,E)}}},o={disabled:[]};n&&o.disabled.push(function(T){var P=u&&n.length>u-1,E=n.some(function(M){return Gs(M,T)});return!!(P&&!E)});var _={selected:n,onDayClick:h,modifiers:o};return f.jsx(QP.Provider,{value:_,children:r})}function XP(){var e=U.useContext(QP);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function Pie(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?Gs(a,e)&&Gs(n,e)?void 0:Gs(a,e)?{from:a,to:void 0}:Gs(n,e)?void 0:lk(n,e)?{from:e,to:a}:{from:n,to:e}:a?lk(e,a)?{from:a,to:e}:{from:e,to:a}:n?T6(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var JP=U.createContext(void 0);function Eie(e){if(!Cx(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return f.jsx(JP.Provider,{value:t,children:e.children})}return f.jsx(jie,{initialProps:e.initialProps,children:e.children})}function jie(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},u=a.from,h=a.to,o=t.min,_=t.max,T=function(I,z,F){var D,q;(D=t.onDayClick)===null||D===void 0||D.call(t,I,z,F);var $=Pie(I,n);(q=t.onSelect)===null||q===void 0||q.call(t,$,I,z,F)},P={range_start:[],range_end:[],range_middle:[],disabled:[]};if(u?(P.range_start=[u],h?(P.range_end=[h],Gs(u,h)||(P.range_middle=[{after:u,before:h}])):P.range_end=[u]):h&&(P.range_start=[h],P.range_end=[h]),o&&(u&&!h&&P.disabled.push({after:Y2(u,o-1),before:Cs(u,o-1)}),u&&h&&P.disabled.push({after:u,before:Cs(u,o-1)}),!u&&h&&P.disabled.push({after:Y2(h,o-1),before:Cs(h,o-1)})),_){if(u&&!h&&(P.disabled.push({before:Cs(u,-_+1)}),P.disabled.push({after:Cs(u,_-1)})),u&&h){var E=rl(h,u)+1,M=_-E;P.disabled.push({before:Y2(u,M)}),P.disabled.push({after:Cs(h,M)})}!u&&h&&(P.disabled.push({before:Cs(h,-_+1)}),P.disabled.push({after:Cs(h,_-1)}))}return f.jsx(JP.Provider,{value:{selected:n,onDayClick:T,modifiers:P},children:r})}function eE(){var e=U.useContext(JP);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function T_(e){return Array.isArray(e)?k6([],e):e!==void 0?[e]:[]}function Aie(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=T_(a)}),t}var Ao;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Ao||(Ao={}));var Mie=Ao.Selected,$l=Ao.Disabled,Nie=Ao.Hidden,Iie=Ao.Today,X2=Ao.RangeEnd,J2=Ao.RangeMiddle,eS=Ao.RangeStart,Rie=Ao.Outside;function Die(e,t,r){var n,a=(n={},n[Mie]=T_(e.selected),n[$l]=T_(e.disabled),n[Nie]=T_(e.hidden),n[Iie]=[e.today],n[X2]=[],n[J2]=[],n[eS]=[],n[Rie]=[],n);return e.fromDate&&a[$l].push({before:e.fromDate}),e.toDate&&a[$l].push({after:e.toDate}),kx(e)?a[$l]=a[$l].concat(t.modifiers[$l]):Cx(e)&&(a[$l]=a[$l].concat(r.modifiers[$l]),a[eS]=r.modifiers[eS],a[J2]=r.modifiers[J2],a[X2]=r.modifiers[X2]),a}var A6=U.createContext(void 0);function Oie(e){var t=hn(),r=XP(),n=eE(),a=Die(t,r,n),u=Aie(t.modifiers),h=rr(rr({},a),u);return f.jsx(A6.Provider,{value:h,children:e.children})}function M6(){var e=U.useContext(A6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Lie(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Fie(e){return!!(e&&typeof e=="object"&&"from"in e)}function zie(e){return!!(e&&typeof e=="object"&&"after"in e)}function Bie(e){return!!(e&&typeof e=="object"&&"before"in e)}function Vie(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function $ie(e,t){var r,n=t.from,a=t.to;if(n&&a){var u=rl(a,n)<0;u&&(r=[a,n],n=r[0],a=r[1]);var h=rl(e,n)>=0&&rl(a,e)>=0;return h}return a?Gs(a,e):n?Gs(n,e):!1}function Uie(e){return HP(e)}function qie(e){return Array.isArray(e)&&e.every(HP)}function Wie(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(Uie(r))return Gs(e,r);if(qie(r))return r.includes(e);if(Fie(r))return $ie(e,r);if(Vie(r))return r.dayOfWeek.includes(e.getDay());if(Lie(r)){var n=rl(r.before,e),a=rl(r.after,e),u=n>0,h=a<0,o=lk(r.before,r.after);return o?h&&u:u||h}return zie(r)?rl(e,r.after)>0:Bie(r)?rl(r.before,e)>0:typeof r=="function"?r(e):!1})}function tE(e,t,r){var n=Object.keys(t).reduce(function(u,h){var o=t[h];return Wie(e,o)&&u.push(h),u},[]),a={};return n.forEach(function(u){return a[u]=!0}),r&&!YP(e,r)&&(a.outside=!0),a}function Gie(e,t){for(var r=Qs(e[0]),n=ZP(e[e.length-1]),a,u,h=r;h<=n;){var o=tE(h,t),_=!o.disabled&&!o.hidden;if(!_){h=Cs(h,1);continue}if(o.selected)return h;o.today&&!u&&(u=h),a||(a=h),h=Cs(h,1)}return u||a}var Hie=365;function N6(e,t){var r=t.moveBy,n=t.direction,a=t.context,u=t.modifiers,h=t.retry,o=h===void 0?{count:0,lastFocused:e}:h,_=a.weekStartsOn,T=a.fromDate,P=a.toDate,E=a.locale,M={day:Cs,week:ok,month:jo,year:Dre,startOfWeek:function(D){return a.ISOWeek?dh(D):pl(D,{locale:E,weekStartsOn:_})},endOfWeek:function(D){return a.ISOWeek?x6(D):KP(D,{locale:E,weekStartsOn:_})}},I=M[r](e,n==="after"?1:-1);n==="before"&&T?I=Ore([T,I]):n==="after"&&P&&(I=Lre([P,I]));var z=!0;if(u){var F=tE(I,u);z=!F.disabled&&!F.hidden}return z?I:o.count>Hie?o.lastFocused:N6(I,{moveBy:r,direction:n,context:a,modifiers:u,retry:rr(rr({},o),{count:o.count+1})})}var I6=U.createContext(void 0);function Zie(e){var t=Px(),r=M6(),n=U.useState(),a=n[0],u=n[1],h=U.useState(),o=h[0],_=h[1],T=Gie(t.displayMonths,r),P=a??(o&&t.isDateDisplayed(o))?o:T,E=function(){_(a),u(void 0)},M=function(D){u(D)},I=hn(),z=function(D,q){if(a){var $=N6(a,{moveBy:D,direction:q,context:I,modifiers:r});Gs(a,$)||(t.goToDate($,a),M($))}},F={focusedDay:a,focusTarget:P,blur:E,focus:M,focusDayAfter:function(){return z("day","after")},focusDayBefore:function(){return z("day","before")},focusWeekAfter:function(){return z("week","after")},focusWeekBefore:function(){return z("week","before")},focusMonthBefore:function(){return z("month","before")},focusMonthAfter:function(){return z("month","after")},focusYearBefore:function(){return z("year","before")},focusYearAfter:function(){return z("year","after")},focusStartOfWeek:function(){return z("startOfWeek","before")},focusEndOfWeek:function(){return z("endOfWeek","after")}};return f.jsx(I6.Provider,{value:F,children:e.children})}function rE(){var e=U.useContext(I6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Kie(e,t){var r=M6(),n=tE(e,r,t);return n}var nE=U.createContext(void 0);function Yie(e){if(!mw(e.initialProps)){var t={selected:void 0};return f.jsx(nE.Provider,{value:t,children:e.children})}return f.jsx(Qie,{initialProps:e.initialProps,children:e.children})}function Qie(e){var t=e.initialProps,r=e.children,n=function(u,h,o){var _,T,P;if((_=t.onDayClick)===null||_===void 0||_.call(t,u,h,o),h.selected&&!t.required){(T=t.onSelect)===null||T===void 0||T.call(t,void 0,u,h,o);return}(P=t.onSelect)===null||P===void 0||P.call(t,u,u,h,o)},a={selected:t.selected,onDayClick:n};return f.jsx(nE.Provider,{value:a,children:r})}function R6(){var e=U.useContext(nE);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Xie(e,t){var r=hn(),n=R6(),a=XP(),u=eE(),h=rE(),o=h.focusDayAfter,_=h.focusDayBefore,T=h.focusWeekAfter,P=h.focusWeekBefore,E=h.blur,M=h.focus,I=h.focusMonthBefore,z=h.focusMonthAfter,F=h.focusYearBefore,D=h.focusYearAfter,q=h.focusStartOfWeek,$=h.focusEndOfWeek,W=function(Ve){var _e,Le,ft,yt;mw(r)?(_e=n.onDayClick)===null||_e===void 0||_e.call(n,e,t,Ve):kx(r)?(Le=a.onDayClick)===null||Le===void 0||Le.call(a,e,t,Ve):Cx(r)?(ft=u.onDayClick)===null||ft===void 0||ft.call(u,e,t,Ve):(yt=r.onDayClick)===null||yt===void 0||yt.call(r,e,t,Ve)},te=function(Ve){var _e;M(e),(_e=r.onDayFocus)===null||_e===void 0||_e.call(r,e,t,Ve)},se=function(Ve){var _e;E(),(_e=r.onDayBlur)===null||_e===void 0||_e.call(r,e,t,Ve)},he=function(Ve){var _e;(_e=r.onDayMouseEnter)===null||_e===void 0||_e.call(r,e,t,Ve)},pe=function(Ve){var _e;(_e=r.onDayMouseLeave)===null||_e===void 0||_e.call(r,e,t,Ve)},xe=function(Ve){var _e;(_e=r.onDayPointerEnter)===null||_e===void 0||_e.call(r,e,t,Ve)},Re=function(Ve){var _e;(_e=r.onDayPointerLeave)===null||_e===void 0||_e.call(r,e,t,Ve)},Me=function(Ve){var _e;(_e=r.onDayTouchCancel)===null||_e===void 0||_e.call(r,e,t,Ve)},pt=function(Ve){var _e;(_e=r.onDayTouchEnd)===null||_e===void 0||_e.call(r,e,t,Ve)},Oe=function(Ve){var _e;(_e=r.onDayTouchMove)===null||_e===void 0||_e.call(r,e,t,Ve)},Ye=function(Ve){var _e;(_e=r.onDayTouchStart)===null||_e===void 0||_e.call(r,e,t,Ve)},Ge=function(Ve){var _e;(_e=r.onDayKeyUp)===null||_e===void 0||_e.call(r,e,t,Ve)},rt=function(Ve){var _e;switch(Ve.key){case"ArrowLeft":Ve.preventDefault(),Ve.stopPropagation(),r.dir==="rtl"?o():_();break;case"ArrowRight":Ve.preventDefault(),Ve.stopPropagation(),r.dir==="rtl"?_():o();break;case"ArrowDown":Ve.preventDefault(),Ve.stopPropagation(),T();break;case"ArrowUp":Ve.preventDefault(),Ve.stopPropagation(),P();break;case"PageUp":Ve.preventDefault(),Ve.stopPropagation(),Ve.shiftKey?F():I();break;case"PageDown":Ve.preventDefault(),Ve.stopPropagation(),Ve.shiftKey?D():z();break;case"Home":Ve.preventDefault(),Ve.stopPropagation(),q();break;case"End":Ve.preventDefault(),Ve.stopPropagation(),$();break}(_e=r.onDayKeyDown)===null||_e===void 0||_e.call(r,e,t,Ve)},nt={onClick:W,onFocus:te,onBlur:se,onKeyDown:rt,onKeyUp:Ge,onMouseEnter:he,onMouseLeave:pe,onPointerEnter:xe,onPointerLeave:Re,onTouchCancel:Me,onTouchEnd:pt,onTouchMove:Oe,onTouchStart:Ye};return nt}function Jie(){var e=hn(),t=R6(),r=XP(),n=eE(),a=mw(e)?t.selected:kx(e)?r.selected:Cx(e)?n.selected:void 0;return a}function ese(e){return Object.values(Ao).includes(e)}function tse(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(ese(n)){var u=e.classNames["day_".concat(n)];u&&r.push(u)}}),r}function rse(e,t){var r=rr({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=rr(rr({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function nse(e,t,r){var n,a,u,h=hn(),o=rE(),_=Kie(e,t),T=Xie(e,_),P=Jie(),E=!!(h.onDayClick||h.mode!=="default");U.useEffect(function(){var he;_.outside||o.focusedDay&&E&&Gs(o.focusedDay,e)&&((he=r.current)===null||he===void 0||he.focus())},[o.focusedDay,e,r,E,_.outside]);var M=tse(h,_).join(" "),I=rse(h,_),z=!!(_.outside&&!h.showOutsideDays||_.hidden),F=(u=(a=h.components)===null||a===void 0?void 0:a.DayContent)!==null&&u!==void 0?u:Tie,D=f.jsx(F,{date:e,displayMonth:t,activeModifiers:_}),q={style:I,className:M,children:D,role:"gridcell"},$=o.focusTarget&&Gs(o.focusTarget,e)&&!_.outside,W=o.focusedDay&&Gs(o.focusedDay,e),te=rr(rr(rr({},q),(n={disabled:_.disabled,role:"gridcell"},n["aria-selected"]=_.selected,n.tabIndex=W||$?0:-1,n)),T),se={isButton:E,isHidden:z,activeModifiers:_,selectedDays:P,buttonProps:te,divProps:q};return se}function ise(e){var t=U.useRef(null),r=nse(e.date,e.displayMonth,t);return r.isHidden?f.jsx("div",{role:"gridcell"}):r.isButton?f.jsx(vb,rr({name:"day",ref:t},r.buttonProps)):f.jsx("div",rr({},r.divProps))}function sse(e){var t=e.number,r=e.dates,n=hn(),a=n.onWeekNumberClick,u=n.styles,h=n.classNames,o=n.locale,_=n.labels.labelWeekNumber,T=n.formatters.formatWeekNumber,P=T(Number(t),{locale:o});if(!a)return f.jsx("span",{className:h.weeknumber,style:u.weeknumber,children:P});var E=_(Number(t),{locale:o}),M=function(I){a(t,r,I)};return f.jsx(vb,{name:"week-number","aria-label":E,className:h.weeknumber,style:u.weeknumber,onClick:M,children:P})}function ase(e){var t,r,n=hn(),a=n.styles,u=n.classNames,h=n.showWeekNumber,o=n.components,_=(t=o==null?void 0:o.Day)!==null&&t!==void 0?t:ise,T=(r=o==null?void 0:o.WeekNumber)!==null&&r!==void 0?r:sse,P;return h&&(P=f.jsx("td",{className:u.cell,style:a.cell,children:f.jsx(T,{number:e.weekNumber,dates:e.dates})})),f.jsxs("tr",{className:u.row,style:a.row,children:[P,e.dates.map(function(E){return f.jsx("td",{className:u.cell,style:a.cell,role:"presentation",children:f.jsx(_,{displayMonth:e.displayMonth,date:E})},One(E))})]})}function jR(e,t,r){for(var n=r!=null&&r.ISOWeek?x6(t):KP(t,r),a=r!=null&&r.ISOWeek?dh(e):pl(e,r),u=rl(n,a),h=[],o=0;o<=u;o++)h.push(Cs(a,o));var _=h.reduce(function(T,P){var E=r!=null&&r.ISOWeek?_6(P):w6(P,r),M=T.find(function(I){return I.weekNumber===E});return M?(M.dates.push(P),T):(T.push({weekNumber:E,dates:[P]}),T)},[]);return _}function ose(e,t){var r=jR(Qs(e),ZP(e),t);if(t!=null&&t.useFixedWeeks){var n=Fne(e,t);if(n<6){var a=r[r.length-1],u=a.dates[a.dates.length-1],h=ok(u,6-n),o=jR(ok(u,1),h,t);r.push.apply(r,o)}}return r}function lse(e){var t,r,n,a=hn(),u=a.locale,h=a.classNames,o=a.styles,_=a.hideHead,T=a.fixedWeeks,P=a.components,E=a.weekStartsOn,M=a.firstWeekContainsDate,I=a.ISOWeek,z=ose(e.displayMonth,{useFixedWeeks:!!T,ISOWeek:I,locale:u,weekStartsOn:E,firstWeekContainsDate:M}),F=(t=P==null?void 0:P.Head)!==null&&t!==void 0?t:Sie,D=(r=P==null?void 0:P.Row)!==null&&r!==void 0?r:ase,q=(n=P==null?void 0:P.Footer)!==null&&n!==void 0?n:_ie;return f.jsxs("table",{id:e.id,className:h.table,style:o.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!_&&f.jsx(F,{}),f.jsx("tbody",{className:h.tbody,style:o.tbody,children:z.map(function($){return f.jsx(D,{displayMonth:e.displayMonth,dates:$.dates,weekNumber:$.weekNumber},$.weekNumber)})}),f.jsx(q,{displayMonth:e.displayMonth})]})}function cse(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var use=cse()?U.useLayoutEffect:U.useEffect,tS=!1,dse=0;function AR(){return"react-day-picker-".concat(++dse)}function hse(e){var t,r=e??(tS?AR():null),n=U.useState(r),a=n[0],u=n[1];return use(function(){a===null&&u(AR())},[]),U.useEffect(function(){tS===!1&&(tS=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function pse(e){var t,r,n=hn(),a=n.dir,u=n.classNames,h=n.styles,o=n.components,_=Px().displayMonths,T=hse(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),P=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,E=[u.month],M=h.month,I=e.displayIndex===0,z=e.displayIndex===_.length-1,F=!I&&!z;a==="rtl"&&(t=[I,z],z=t[0],I=t[1]),I&&(E.push(u.caption_start),M=rr(rr({},M),h.caption_start)),z&&(E.push(u.caption_end),M=rr(rr({},M),h.caption_end)),F&&(E.push(u.caption_between),M=rr(rr({},M),h.caption_between));var D=(r=o==null?void 0:o.Caption)!==null&&r!==void 0?r:vie;return f.jsxs("div",{className:E.join(" "),style:M,children:[f.jsx(D,{id:T,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),f.jsx(lse,{id:P,"aria-labelledby":T,displayMonth:e.displayMonth})]},e.displayIndex)}function fse(e){var t=hn(),r=t.classNames,n=t.styles;return f.jsx("div",{className:r.months,style:n.months,children:e.children})}function mse(e){var t,r,n=e.initialProps,a=hn(),u=rE(),h=Px(),o=U.useState(!1),_=o[0],T=o[1];U.useEffect(function(){a.initialFocus&&u.focusTarget&&(_||(u.focus(u.focusTarget),T(!0)))},[a.initialFocus,_,u.focus,u.focusTarget,u]);var P=[a.classNames.root,a.className];a.numberOfMonths>1&&P.push(a.classNames.multiple_months),a.showWeekNumber&&P.push(a.classNames.with_weeknumber);var E=rr(rr({},a.styles.root),a.style),M=Object.keys(n).filter(function(z){return z.startsWith("data-")}).reduce(function(z,F){var D;return rr(rr({},z),(D={},D[F]=n[F],D))},{}),I=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:fse;return f.jsx("div",rr({className:P.join(" "),style:E,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},M,{children:f.jsx(I,{children:h.displayMonths.map(function(z,F){return f.jsx(pse,{displayIndex:F,displayMonth:z},F)})})}))}function gse(e){var t=e.children,r=Bne(e,["children"]);return f.jsx(sie,{initialProps:r,children:f.jsx(mie,{children:f.jsx(Yie,{initialProps:r,children:f.jsx(kie,{initialProps:r,children:f.jsx(Eie,{initialProps:r,children:f.jsx(Oie,{children:f.jsx(Zie,{children:t})})})})})})})}function yse(e){return f.jsx(gse,rr({},e,{children:f.jsx(mse,{initialProps:e})}))}function D6({className:e,classNames:t,showOutsideDays:r=!0,...n}){return f.jsx(yse,{showOutsideDays:r,className:St("p-3 pointer-events-auto",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:St(ik({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:St(ik({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>f.jsx(k3,{className:"h-4 w-4"}),IconRight:({...a})=>f.jsx(Pf,{className:"h-4 w-4"})},...n})}D6.displayName="Calendar";var gw="Popover",[O6,Ofe]=fl(gw,[Qb]),Ex=Qb(),[xse,Du]=O6(gw),L6=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:u,modal:h=!1}=e,o=Ex(t),_=U.useRef(null),[T,P]=U.useState(!1),[E,M]=qf({prop:n,defaultProp:a??!1,onChange:u,caller:gw});return f.jsx(WG,{...o,children:f.jsx(xse,{scope:t,contentId:sy(),triggerRef:_,open:E,onOpenChange:M,onOpenToggle:U.useCallback(()=>M(I=>!I),[M]),hasCustomAnchor:T,onCustomAnchorAdd:U.useCallback(()=>P(!0),[]),onCustomAnchorRemove:U.useCallback(()=>P(!1),[]),modal:h,children:r})})};L6.displayName=gw;var F6="PopoverAnchor",vse=U.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Du(F6,r),u=Ex(r),{onCustomAnchorAdd:h,onCustomAnchorRemove:o}=a;return U.useEffect(()=>(h(),()=>o()),[h,o]),f.jsx(BC,{...u,...n,ref:t})});vse.displayName=F6;var z6="PopoverTrigger",B6=U.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Du(z6,r),u=Ex(r),h=In(t,a.triggerRef),o=f.jsx(Dr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":W6(a.open),...n,ref:h,onClick:gr(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:f.jsx(BC,{asChild:!0,...u,children:o})});B6.displayName=z6;var iE="PopoverPortal",[_se,bse]=O6(iE,{forceMount:void 0}),V6=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,u=Du(iE,t);return f.jsx(_se,{scope:t,forceMount:r,children:f.jsx(ml,{present:r||u.open,children:f.jsx(Ub,{asChild:!0,container:a,children:n})})})};V6.displayName=iE;var zf="PopoverContent",$6=U.forwardRef((e,t)=>{const r=bse(zf,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,u=Du(zf,e.__scopePopover);return f.jsx(ml,{present:n||u.open,children:u.modal?f.jsx(Sse,{...a,ref:t}):f.jsx(Tse,{...a,ref:t})})});$6.displayName=zf;var wse=Cf("PopoverContent.RemoveScroll"),Sse=U.forwardRef((e,t)=>{const r=Du(zf,e.__scopePopover),n=U.useRef(null),a=In(t,n),u=U.useRef(!1);return U.useEffect(()=>{const h=n.current;if(h)return pz(h)},[]),f.jsx(zP,{as:wse,allowPinchZoom:!0,children:f.jsx(U6,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gr(e.onCloseAutoFocus,h=>{var o;h.preventDefault(),u.current||(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:gr(e.onPointerDownOutside,h=>{const o=h.detail.originalEvent,_=o.button===0&&o.ctrlKey===!0,T=o.button===2||_;u.current=T},{checkForDefaultPrevented:!1}),onFocusOutside:gr(e.onFocusOutside,h=>h.preventDefault(),{checkForDefaultPrevented:!1})})})}),Tse=U.forwardRef((e,t)=>{const r=Du(zf,e.__scopePopover),n=U.useRef(!1),a=U.useRef(!1);return f.jsx(U6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:u=>{var h,o;(h=e.onCloseAutoFocus)==null||h.call(e,u),u.defaultPrevented||(n.current||(o=r.triggerRef.current)==null||o.focus(),u.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:u=>{var _,T;(_=e.onInteractOutside)==null||_.call(e,u),u.defaultPrevented||(n.current=!0,u.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const h=u.target;((T=r.triggerRef.current)==null?void 0:T.contains(h))&&u.preventDefault(),u.detail.originalEvent.type==="focusin"&&a.current&&u.preventDefault()}})}),U6=U.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:u,disableOutsidePointerEvents:h,onEscapeKeyDown:o,onPointerDownOutside:_,onFocusOutside:T,onInteractOutside:P,...E}=e,M=Du(zf,r),I=Ex(r);return DF(),f.jsx(OP,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:u,children:f.jsx(hx,{asChild:!0,disableOutsidePointerEvents:h,onInteractOutside:P,onEscapeKeyDown:o,onPointerDownOutside:_,onFocusOutside:T,onDismiss:()=>M.onOpenChange(!1),children:f.jsx(p5,{"data-state":W6(M.open),role:"dialog",id:M.contentId,...I,...E,ref:t,style:{...E.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),q6="PopoverClose",kse=U.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Du(q6,r);return f.jsx(Dr.button,{type:"button",...n,ref:t,onClick:gr(e.onClick,()=>a.onOpenChange(!1))})});kse.displayName=q6;var Cse="PopoverArrow",Pse=U.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Ex(r);return f.jsx(f5,{...a,...n,ref:t})});Pse.displayName=Cse;function W6(e){return e?"open":"closed"}var Ese=L6,jse=B6,Ase=V6,G6=$6;const Mse=Ese,Nse=jse,H6=U.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>f.jsx(Ase,{children:f.jsx(G6,{ref:a,align:t,sideOffset:r,className:St("z-50 w-72 rounded-xl border border-border/60 bg-popover p-4 text-popover-foreground shadow-lg outline-none","dark:border-border/40 dark:bg-popover/98 dark:shadow-xl dark:shadow-black/20","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));H6.displayName=G6.displayName;const ar=e=>typeof e=="string",Fg=()=>{let e,t;const r=new Promise((n,a)=>{e=n,t=a});return r.resolve=e,r.reject=t,r},MR=e=>e==null?"":""+e,Ise=(e,t,r)=>{e.forEach(n=>{t[n]&&(r[n]=t[n])})},Rse=/###/g,NR=e=>e&&e.indexOf("###")>-1?e.replace(Rse,"."):e,IR=e=>!e||ar(e),fy=(e,t,r)=>{const n=ar(t)?t.split("."):t;let a=0;for(;a<n.length-1;){if(IR(e))return{};const u=NR(n[a]);!e[u]&&r&&(e[u]=new r),Object.prototype.hasOwnProperty.call(e,u)?e=e[u]:e={},++a}return IR(e)?{}:{obj:e,k:NR(n[a])}},RR=(e,t,r)=>{const{obj:n,k:a}=fy(e,t,Object);if(n!==void 0||t.length===1){n[a]=r;return}let u=t[t.length-1],h=t.slice(0,t.length-1),o=fy(e,h,Object);for(;o.obj===void 0&&h.length;)u=`${h[h.length-1]}.${u}`,h=h.slice(0,h.length-1),o=fy(e,h,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${u}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${u}`]=r},Dse=(e,t,r,n)=>{const{obj:a,k:u}=fy(e,t,Object);a[u]=a[u]||[],a[u].push(r)},_b=(e,t)=>{const{obj:r,k:n}=fy(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},Ose=(e,t,r)=>{const n=_b(e,r);return n!==void 0?n:_b(t,r)},Z6=(e,t,r)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?ar(e[n])||e[n]instanceof String||ar(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):Z6(e[n],t[n],r):e[n]=t[n]);return e},Tp=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Lse={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Fse=e=>ar(e)?e.replace(/[&<>"'\/]/g,t=>Lse[t]):e;class zse{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const Bse=[" ",",","?","!",";"],Vse=new zse(20),$se=(e,t,r)=>{t=t||"",r=r||"";const n=Bse.filter(h=>t.indexOf(h)<0&&r.indexOf(h)<0);if(n.length===0)return!0;const a=Vse.getRegExp(`(${n.map(h=>h==="?"?"\\?":h).join("|")})`);let u=!a.test(e);if(!u){const h=e.indexOf(r);h>0&&!a.test(e.substring(0,h))&&(u=!0)}return u},ck=(e,t,r=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const n=t.split(r);let a=e;for(let u=0;u<n.length;){if(!a||typeof a!="object")return;let h,o="";for(let _=u;_<n.length;++_)if(_!==u&&(o+=r),o+=n[_],h=a[o],h!==void 0){if(["string","number","boolean"].indexOf(typeof h)>-1&&_<n.length-1)continue;u+=_-u+1;break}a=h}return a},Qy=e=>e==null?void 0:e.replace("_","-"),Use={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var r,n;(n=(r=console==null?void 0:console[e])==null?void 0:r.apply)==null||n.call(r,console,t)}};class bb{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||Use,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,n,a){return a&&!this.debug?null:(ar(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new bb(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new bb(this.logger,t)}}var nl=new bb;class yw{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const a=this.observers[n].get(r)||0;this.observers[n].set(r,a+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([a,u])=>{for(let h=0;h<u;h++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,u])=>{for(let h=0;h<u;h++)a.apply(a,[t,...r])})}}class DR extends yw{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,n,a={}){var T,P;const u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,h=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;t.indexOf(".")>-1?o=t.split("."):(o=[t,r],n&&(Array.isArray(n)?o.push(...n):ar(n)&&u?o.push(...n.split(u)):o.push(n)));const _=_b(this.data,o);return!_&&!r&&!n&&t.indexOf(".")>-1&&(t=o[0],r=o[1],n=o.slice(2).join(".")),_||!h||!ar(n)?_:ck((P=(T=this.data)==null?void 0:T[t])==null?void 0:P[r],n,u)}addResource(t,r,n,a,u={silent:!1}){const h=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator;let o=[t,r];n&&(o=o.concat(h?n.split(h):n)),t.indexOf(".")>-1&&(o=t.split("."),a=r,r=o[1]),this.addNamespaces(r),RR(this.data,o,a),u.silent||this.emit("added",t,r,n,a)}addResources(t,r,n,a={silent:!1}){for(const u in n)(ar(n[u])||Array.isArray(n[u]))&&this.addResource(t,r,u,n[u],{silent:!0});a.silent||this.emit("added",t,r,n)}addResourceBundle(t,r,n,a,u,h={silent:!1,skipCopy:!1}){let o=[t,r];t.indexOf(".")>-1&&(o=t.split("."),a=n,n=r,r=o[1]),this.addNamespaces(r);let _=_b(this.data,o)||{};h.skipCopy||(n=JSON.parse(JSON.stringify(n))),a?Z6(_,n,u):_={..._,...n},RR(this.data,o,_),h.silent||this.emit("added",t,r,n)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(a=>r[a]&&Object.keys(r[a]).length>0)}toJSON(){return this.data}}var K6={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,a){return e.forEach(u=>{var h;t=((h=this.processors[u])==null?void 0:h.process(t,r,n,a))??t}),t}};const Y6=Symbol("i18next/PATH_KEY");function qse(){const e=[],t=Object.create(null);let r;return t.get=(n,a)=>{var u;return(u=r==null?void 0:r.revoke)==null||u.call(r),a===Y6?e:(e.push(a),r=Proxy.revocable(n,t),r.proxy)},Proxy.revocable(Object.create(null),t).proxy}function uk(e,t){const{[Y6]:r}=e(qse());return r.join((t==null?void 0:t.keySeparator)??".")}const OR={},rS=e=>!ar(e)&&typeof e!="boolean"&&typeof e!="number";class wb extends yw{constructor(t,r={}){super(),Ise(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=nl.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const n={...r};if(t==null)return!1;const a=this.resolve(t,n);if((a==null?void 0:a.res)===void 0)return!1;const u=rS(a.res);return!(n.returnObjects===!1&&u)}extractFromKey(t,r){let n=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let u=r.ns||this.options.defaultNS||[];const h=n&&t.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!$se(t,n,a);if(h&&!o){const _=t.match(this.interpolator.nestingRegexp);if(_&&_.length>0)return{key:t,namespaces:ar(u)?[u]:u};const T=t.split(n);(n!==a||n===a&&this.options.ns.indexOf(T[0])>-1)&&(u=T.shift()),t=T.join(a)}return{key:t,namespaces:ar(u)?[u]:u}}translate(t,r,n){let a=typeof r=="object"?{...r}:r;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),t==null)return"";typeof t=="function"&&(t=uk(t,{...this.options,...a})),Array.isArray(t)||(t=[String(t)]);const u=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,h=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:o,namespaces:_}=this.extractFromKey(t[t.length-1],a),T=_[_.length-1];let P=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;P===void 0&&(P=":");const E=a.lng||this.language,M=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((E==null?void 0:E.toLowerCase())==="cimode")return M?u?{res:`${T}${P}${o}`,usedKey:o,exactUsedKey:o,usedLng:E,usedNS:T,usedParams:this.getUsedParamsDetails(a)}:`${T}${P}${o}`:u?{res:o,usedKey:o,exactUsedKey:o,usedLng:E,usedNS:T,usedParams:this.getUsedParamsDetails(a)}:o;const I=this.resolve(t,a);let z=I==null?void 0:I.res;const F=(I==null?void 0:I.usedKey)||o,D=(I==null?void 0:I.exactUsedKey)||o,q=["[object Number]","[object Function]","[object RegExp]"],$=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,W=!this.i18nFormat||this.i18nFormat.handleAsObject,te=a.count!==void 0&&!ar(a.count),se=wb.hasDefaultValue(a),he=te?this.pluralResolver.getSuffix(E,a.count,a):"",pe=a.ordinal&&te?this.pluralResolver.getSuffix(E,a.count,{ordinal:!1}):"",xe=te&&!a.ordinal&&a.count===0,Re=xe&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${he}`]||a[`defaultValue${pe}`]||a.defaultValue;let Me=z;W&&!z&&se&&(Me=Re);const pt=rS(Me),Oe=Object.prototype.toString.apply(Me);if(W&&Me&&pt&&q.indexOf(Oe)<0&&!(ar($)&&Array.isArray(Me))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Ye=this.options.returnedObjectHandler?this.options.returnedObjectHandler(F,Me,{...a,ns:_}):`key '${o} (${this.language})' returned an object instead of string.`;return u?(I.res=Ye,I.usedParams=this.getUsedParamsDetails(a),I):Ye}if(h){const Ye=Array.isArray(Me),Ge=Ye?[]:{},rt=Ye?D:F;for(const nt in Me)if(Object.prototype.hasOwnProperty.call(Me,nt)){const Ve=`${rt}${h}${nt}`;se&&!z?Ge[nt]=this.translate(Ve,{...a,defaultValue:rS(Re)?Re[nt]:void 0,joinArrays:!1,ns:_}):Ge[nt]=this.translate(Ve,{...a,joinArrays:!1,ns:_}),Ge[nt]===Ve&&(Ge[nt]=Me[nt])}z=Ge}}else if(W&&ar($)&&Array.isArray(z))z=z.join($),z&&(z=this.extendTranslation(z,t,a,n));else{let Ye=!1,Ge=!1;!this.isValidLookup(z)&&se&&(Ye=!0,z=Re),this.isValidLookup(z)||(Ge=!0,z=o);const nt=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ge?void 0:z,Ve=se&&Re!==z&&this.options.updateMissing;if(Ge||Ye||Ve){if(this.logger.log(Ve?"updateKey":"missingKey",E,T,o,Ve?Re:z),h){const yt=this.resolve(o,{...a,keySeparator:!1});yt&&yt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let _e=[];const Le=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Le&&Le[0])for(let yt=0;yt<Le.length;yt++)_e.push(Le[yt]);else this.options.saveMissingTo==="all"?_e=this.languageUtils.toResolveHierarchy(a.lng||this.language):_e.push(a.lng||this.language);const ft=(yt,wt,Lt)=>{var wr;const Wt=se&&Lt!==z?Lt:nt;this.options.missingKeyHandler?this.options.missingKeyHandler(yt,T,wt,Wt,Ve,a):(wr=this.backendConnector)!=null&&wr.saveMissing&&this.backendConnector.saveMissing(yt,T,wt,Wt,Ve,a),this.emit("missingKey",yt,T,wt,z)};this.options.saveMissing&&(this.options.saveMissingPlurals&&te?_e.forEach(yt=>{const wt=this.pluralResolver.getSuffixes(yt,a);xe&&a[`defaultValue${this.options.pluralSeparator}zero`]&&wt.indexOf(`${this.options.pluralSeparator}zero`)<0&&wt.push(`${this.options.pluralSeparator}zero`),wt.forEach(Lt=>{ft([yt],o+Lt,a[`defaultValue${Lt}`]||Re)})}):ft(_e,o,Re))}z=this.extendTranslation(z,t,a,I,n),Ge&&z===o&&this.options.appendNamespaceToMissingKey&&(z=`${T}${P}${o}`),(Ge||Ye)&&this.options.parseMissingKeyHandler&&(z=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${T}${P}${o}`:o,Ye?z:void 0,a))}return u?(I.res=z,I.usedParams=this.getUsedParamsDetails(a),I):z}extendTranslation(t,r,n,a,u){var _,T;if((_=this.i18nFormat)!=null&&_.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const P=ar(t)&&(((T=n==null?void 0:n.interpolation)==null?void 0:T.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let E;if(P){const I=t.match(this.interpolator.nestingRegexp);E=I&&I.length}let M=n.replace&&!ar(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(M={...this.options.interpolation.defaultVariables,...M}),t=this.interpolator.interpolate(t,M,n.lng||this.language||a.usedLng,n),P){const I=t.match(this.interpolator.nestingRegexp),z=I&&I.length;E<z&&(n.nest=!1)}!n.lng&&a&&a.res&&(n.lng=this.language||a.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...I)=>(u==null?void 0:u[0])===I[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${I[0]} in key: ${r[0]}`),null):this.translate(...I,r),n)),n.interpolation&&this.interpolator.reset()}const h=n.postProcess||this.options.postProcess,o=ar(h)?[h]:h;return t!=null&&(o!=null&&o.length)&&n.applyPostProcessor!==!1&&(t=K6.handle(o,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,r={}){let n,a,u,h,o;return ar(t)&&(t=[t]),t.forEach(_=>{if(this.isValidLookup(n))return;const T=this.extractFromKey(_,r),P=T.key;a=P;let E=T.namespaces;this.options.fallbackNS&&(E=E.concat(this.options.fallbackNS));const M=r.count!==void 0&&!ar(r.count),I=M&&!r.ordinal&&r.count===0,z=r.context!==void 0&&(ar(r.context)||typeof r.context=="number")&&r.context!=="",F=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);E.forEach(D=>{var q,$;this.isValidLookup(n)||(o=D,!OR[`${F[0]}-${D}`]&&((q=this.utils)!=null&&q.hasLoadedNamespace)&&!(($=this.utils)!=null&&$.hasLoadedNamespace(o))&&(OR[`${F[0]}-${D}`]=!0,this.logger.warn(`key "${a}" for languages "${F.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),F.forEach(W=>{var he;if(this.isValidLookup(n))return;h=W;const te=[P];if((he=this.i18nFormat)!=null&&he.addLookupKeys)this.i18nFormat.addLookupKeys(te,P,W,D,r);else{let pe;M&&(pe=this.pluralResolver.getSuffix(W,r.count,r));const xe=`${this.options.pluralSeparator}zero`,Re=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(M&&(r.ordinal&&pe.indexOf(Re)===0&&te.push(P+pe.replace(Re,this.options.pluralSeparator)),te.push(P+pe),I&&te.push(P+xe)),z){const Me=`${P}${this.options.contextSeparator||"_"}${r.context}`;te.push(Me),M&&(r.ordinal&&pe.indexOf(Re)===0&&te.push(Me+pe.replace(Re,this.options.pluralSeparator)),te.push(Me+pe),I&&te.push(Me+xe))}}let se;for(;se=te.pop();)this.isValidLookup(n)||(u=se,n=this.getResource(W,D,se,r))}))})}),{res:n,usedKey:a,exactUsedKey:u,usedLng:h,usedNS:o}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,n,a={}){var u;return(u=this.i18nFormat)!=null&&u.getResource?this.i18nFormat.getResource(t,r,n,a):this.resourceStore.getResource(t,r,n,a)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!ar(t.replace);let a=n?t.replace:t;if(n&&typeof t.count<"u"&&(a.count=t.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!n){a={...a};for(const u of r)delete a[u]}return a}static hasDefaultValue(t){const r="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r===n.substring(0,r.length)&&t[n]!==void 0)return!0;return!1}}class LR{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=nl.create("languageUtils")}getScriptPartFromCode(t){if(t=Qy(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=Qy(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(ar(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(n=>{if(r)return;const a=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(a))&&(r=a)}),!r&&this.options.supportedLngs&&t.forEach(n=>{if(r)return;const a=this.getScriptPartFromCode(n);if(this.isSupportedCode(a))return r=a;const u=this.getLanguagePartFromCode(n);if(this.isSupportedCode(u))return r=u;r=this.options.supportedLngs.find(h=>{if(h===u)return h;if(!(h.indexOf("-")<0&&u.indexOf("-")<0)&&(h.indexOf("-")>0&&u.indexOf("-")<0&&h.substring(0,h.indexOf("-"))===u||h.indexOf(u)===0&&u.length>1))return h})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),ar(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let n=t[r];return n||(n=t[this.getScriptPartFromCode(r)]),n||(n=t[this.formatLanguageCode(r)]),n||(n=t[this.getLanguagePartFromCode(r)]),n||(n=t.default),n||[]}toResolveHierarchy(t,r){const n=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),a=[],u=h=>{h&&(this.isSupportedCode(h)?a.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return ar(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(t))):ar(t)&&u(this.formatLanguageCode(t)),n.forEach(h=>{a.indexOf(h)<0&&u(this.formatLanguageCode(h))}),a}}const FR={zero:0,one:1,two:2,few:3,many:4,other:5},zR={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Wse{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=nl.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const n=Qy(t==="dev"?"en":t),a=r.ordinal?"ordinal":"cardinal",u=JSON.stringify({cleanedCode:n,type:a});if(u in this.pluralRulesCache)return this.pluralRulesCache[u];let h;try{h=new Intl.PluralRules(n,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),zR;if(!t.match(/-|_/))return zR;const _=this.languageUtils.getLanguagePartFromCode(t);h=this.getRule(_,r)}return this.pluralRulesCache[u]=h,h}needsPlural(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,r,n={}){return this.getSuffixes(t,n).map(a=>`${r}${a}`)}getSuffixes(t,r={}){let n=this.getRule(t,r);return n||(n=this.getRule("dev",r)),n?n.resolvedOptions().pluralCategories.sort((a,u)=>FR[a]-FR[u]).map(a=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(t,r,n={}){const a=this.getRule(t,n);return a?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,n))}}const BR=(e,t,r,n=".",a=!0)=>{let u=Ose(e,t,r);return!u&&a&&ar(r)&&(u=ck(e,r,n),u===void 0&&(u=ck(t,r,n))),u},nS=e=>e.replace(/\$/g,"$$$$");class Gse{constructor(t={}){var r;this.logger=nl.create("interpolator"),this.options=t,this.format=((r=t==null?void 0:t.interpolation)==null?void 0:r.format)||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:n,useRawValueToEscape:a,prefix:u,prefixEscaped:h,suffix:o,suffixEscaped:_,formatSeparator:T,unescapeSuffix:P,unescapePrefix:E,nestingPrefix:M,nestingPrefixEscaped:I,nestingSuffix:z,nestingSuffixEscaped:F,nestingOptionsSeparator:D,maxReplaces:q,alwaysFormat:$}=t.interpolation;this.escape=r!==void 0?r:Fse,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=u?Tp(u):h||"{{",this.suffix=o?Tp(o):_||"}}",this.formatSeparator=T||",",this.unescapePrefix=P?"":E||"-",this.unescapeSuffix=this.unescapePrefix?"":P||"",this.nestingPrefix=M?Tp(M):I||Tp("$t("),this.nestingSuffix=z?Tp(z):F||Tp(")"),this.nestingOptionsSeparator=D||",",this.maxReplaces=q||1e3,this.alwaysFormat=$!==void 0?$:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,n)=>(r==null?void 0:r.source)===n?(r.lastIndex=0,r):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,n,a){var I;let u,h,o;const _=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},T=z=>{if(z.indexOf(this.formatSeparator)<0){const $=BR(r,_,z,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format($,void 0,n,{...a,...r,interpolationkey:z}):$}const F=z.split(this.formatSeparator),D=F.shift().trim(),q=F.join(this.formatSeparator).trim();return this.format(BR(r,_,D,this.options.keySeparator,this.options.ignoreJSONStructure),q,n,{...a,...r,interpolationkey:D})};this.resetRegExp();const P=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,E=((I=a==null?void 0:a.interpolation)==null?void 0:I.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:z=>nS(z)},{regex:this.regexp,safeValue:z=>this.escapeValue?nS(this.escape(z)):nS(z)}].forEach(z=>{for(o=0;u=z.regex.exec(t);){const F=u[1].trim();if(h=T(F),h===void 0)if(typeof P=="function"){const q=P(t,u,a);h=ar(q)?q:""}else if(a&&Object.prototype.hasOwnProperty.call(a,F))h="";else if(E){h=u[0];continue}else this.logger.warn(`missed to pass in variable ${F} for interpolating ${t}`),h="";else!ar(h)&&!this.useRawValueToEscape&&(h=MR(h));const D=z.safeValue(h);if(t=t.replace(u[0],D),E?(z.regex.lastIndex+=h.length,z.regex.lastIndex-=u[0].length):z.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),t}nest(t,r,n={}){let a,u,h;const o=(_,T)=>{const P=this.nestingOptionsSeparator;if(_.indexOf(P)<0)return _;const E=_.split(new RegExp(`${P}[ ]*{`));let M=`{${E[1]}`;_=E[0],M=this.interpolate(M,h);const I=M.match(/'/g),z=M.match(/"/g);(((I==null?void 0:I.length)??0)%2===0&&!z||z.length%2!==0)&&(M=M.replace(/'/g,'"'));try{h=JSON.parse(M),T&&(h={...T,...h})}catch(F){return this.logger.warn(`failed parsing options string in nesting for key ${_}`,F),`${_}${P}${M}`}return h.defaultValue&&h.defaultValue.indexOf(this.prefix)>-1&&delete h.defaultValue,_};for(;a=this.nestingRegexp.exec(t);){let _=[];h={...n},h=h.replace&&!ar(h.replace)?h.replace:h,h.applyPostProcessor=!1,delete h.defaultValue;const T=/{.*}/.test(a[1])?a[1].lastIndexOf("}")+1:a[1].indexOf(this.formatSeparator);if(T!==-1&&(_=a[1].slice(T).split(this.formatSeparator).map(P=>P.trim()).filter(Boolean),a[1]=a[1].slice(0,T)),u=r(o.call(this,a[1].trim(),h),h),u&&a[0]===t&&!ar(u))return u;ar(u)||(u=MR(u)),u||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${t}`),u=""),_.length&&(u=_.reduce((P,E)=>this.format(P,E,n.lng,{...n,interpolationkey:a[1].trim()}),u.trim())),t=t.replace(a[0],u),this.regexp.lastIndex=0}return t}}const Hse=e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const a=n[1].substring(0,n[1].length-1);t==="currency"&&a.indexOf(":")<0?r.currency||(r.currency=a.trim()):t==="relativetime"&&a.indexOf(":")<0?r.range||(r.range=a.trim()):a.split(";").forEach(h=>{if(h){const[o,..._]=h.split(":"),T=_.join(":").trim().replace(/^'+|'+$/g,""),P=o.trim();r[P]||(r[P]=T),T==="false"&&(r[P]=!1),T==="true"&&(r[P]=!0),isNaN(T)||(r[P]=parseInt(T,10))}})}return{formatName:t,formatOptions:r}},VR=e=>{const t={};return(r,n,a)=>{let u=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(u={...u,[a.interpolationkey]:void 0});const h=n+JSON.stringify(u);let o=t[h];return o||(o=e(Qy(n),a),t[h]=o),o(r)}},Zse=e=>(t,r,n)=>e(Qy(r),n)(t);class Kse{constructor(t={}){this.logger=nl.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const n=r.cacheInBuiltFormats?VR:Zse;this.formats={number:n((a,u)=>{const h=new Intl.NumberFormat(a,{...u});return o=>h.format(o)}),currency:n((a,u)=>{const h=new Intl.NumberFormat(a,{...u,style:"currency"});return o=>h.format(o)}),datetime:n((a,u)=>{const h=new Intl.DateTimeFormat(a,{...u});return o=>h.format(o)}),relativetime:n((a,u)=>{const h=new Intl.RelativeTimeFormat(a,{...u});return o=>h.format(o,u.range||"day")}),list:n((a,u)=>{const h=new Intl.ListFormat(a,{...u});return o=>h.format(o)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=VR(r)}format(t,r,n,a={}){const u=r.split(this.formatSeparator);if(u.length>1&&u[0].indexOf("(")>1&&u[0].indexOf(")")<0&&u.find(o=>o.indexOf(")")>-1)){const o=u.findIndex(_=>_.indexOf(")")>-1);u[0]=[u[0],...u.splice(1,o)].join(this.formatSeparator)}return u.reduce((o,_)=>{var E;const{formatName:T,formatOptions:P}=Hse(_);if(this.formats[T]){let M=o;try{const I=((E=a==null?void 0:a.formatParams)==null?void 0:E[a.interpolationkey])||{},z=I.locale||I.lng||a.locale||a.lng||n;M=this.formats[T](o,z,{...P,...a,...I})}catch(I){this.logger.warn(I)}return M}else this.logger.warn(`there was no format function for ${T}`);return o},t)}}const Yse=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Qse extends yw{constructor(t,r,n,a={}){var u,h;super(),this.backend=t,this.store=r,this.services=n,this.languageUtils=n.languageUtils,this.options=a,this.logger=nl.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(h=(u=this.backend)==null?void 0:u.init)==null||h.call(u,n,a.backend,a)}queueLoad(t,r,n,a){const u={},h={},o={},_={};return t.forEach(T=>{let P=!0;r.forEach(E=>{const M=`${T}|${E}`;!n.reload&&this.store.hasResourceBundle(T,E)?this.state[M]=2:this.state[M]<0||(this.state[M]===1?h[M]===void 0&&(h[M]=!0):(this.state[M]=1,P=!1,h[M]===void 0&&(h[M]=!0),u[M]===void 0&&(u[M]=!0),_[E]===void 0&&(_[E]=!0)))}),P||(o[T]=!0)}),(Object.keys(u).length||Object.keys(h).length)&&this.queue.push({pending:h,pendingCount:Object.keys(h).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(u),pending:Object.keys(h),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(_)}}loaded(t,r,n){const a=t.split("|"),u=a[0],h=a[1];r&&this.emit("failedLoading",u,h,r),!r&&n&&this.store.addResourceBundle(u,h,n,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&n&&(this.state[t]=0);const o={};this.queue.forEach(_=>{Dse(_.loaded,[u],h),Yse(_,t),r&&_.errors.push(r),_.pendingCount===0&&!_.done&&(Object.keys(_.loaded).forEach(T=>{o[T]||(o[T]={});const P=_.loaded[T];P.length&&P.forEach(E=>{o[T][E]===void 0&&(o[T][E]=!0)})}),_.done=!0,_.errors.length?_.callback(_.errors):_.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(_=>!_.done)}read(t,r,n,a=0,u=this.retryTimeout,h){if(!t.length)return h(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:n,tried:a,wait:u,callback:h});return}this.readingCalls++;const o=(T,P)=>{if(this.readingCalls--,this.waitingReads.length>0){const E=this.waitingReads.shift();this.read(E.lng,E.ns,E.fcName,E.tried,E.wait,E.callback)}if(T&&P&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,n,a+1,u*2,h)},u);return}h(T,P)},_=this.backend[n].bind(this.backend);if(_.length===2){try{const T=_(t,r);T&&typeof T.then=="function"?T.then(P=>o(null,P)).catch(o):o(null,T)}catch(T){o(T)}return}return _(t,r,o)}prepareLoading(t,r,n={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();ar(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ar(r)&&(r=[r]);const u=this.queueLoad(t,r,n,a);if(!u.toLoad.length)return u.pending.length||a(),null;u.toLoad.forEach(h=>{this.loadOne(h)})}load(t,r,n){this.prepareLoading(t,r,{},n)}reload(t,r,n){this.prepareLoading(t,r,{reload:!0},n)}loadOne(t,r=""){const n=t.split("|"),a=n[0],u=n[1];this.read(a,u,"read",void 0,void 0,(h,o)=>{h&&this.logger.warn(`${r}loading namespace ${u} for language ${a} failed`,h),!h&&o&&this.logger.log(`${r}loaded namespace ${u} for language ${a}`,o),this.loaded(t,h,o)})}saveMissing(t,r,n,a,u,h={},o=()=>{}){var _,T,P,E,M;if((T=(_=this.services)==null?void 0:_.utils)!=null&&T.hasLoadedNamespace&&!((E=(P=this.services)==null?void 0:P.utils)!=null&&E.hasLoadedNamespace(r))){this.logger.warn(`did not save key "${n}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((M=this.backend)!=null&&M.create){const I={...h,isUpdate:u},z=this.backend.create.bind(this.backend);if(z.length<6)try{let F;z.length===5?F=z(t,r,n,a,I):F=z(t,r,n,a),F&&typeof F.then=="function"?F.then(D=>o(null,D)).catch(o):o(null,F)}catch(F){o(F)}else z(t,r,n,a,o,I)}!t||!t[0]||this.store.addResource(t[0],r,n,a)}}}const $R=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ar(e[1])&&(t.defaultValue=e[1]),ar(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const r=e[3]||e[2];Object.keys(r).forEach(n=>{t[n]=r[n]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),UR=e=>{var t,r;return ar(e.ns)&&(e.ns=[e.ns]),ar(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ar(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((r=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:r.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},V0=()=>{},Xse=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(r=>{typeof e[r]=="function"&&(e[r]=e[r].bind(e))})};class my extends yw{constructor(t={},r){if(super(),this.options=UR(t),this.services={},this.logger=nl,this.modules={external:[]},Xse(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(ar(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=$R();this.options={...n,...this.options,...UR(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const a=T=>T?typeof T=="function"?new T:T:null;if(!this.options.isClone){this.modules.logger?nl.init(a(this.modules.logger),this.options):nl.init(null,this.options);let T;this.modules.formatter?T=this.modules.formatter:T=Kse;const P=new LR(this.options);this.store=new DR(this.options.resources,this.options);const E=this.services;E.logger=nl,E.resourceStore=this.store,E.languageUtils=P,E.pluralResolver=new Wse(P,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),T&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(E.formatter=a(T),E.formatter.init&&E.formatter.init(E,this.options),this.options.interpolation.format=E.formatter.format.bind(E.formatter)),E.interpolator=new Gse(this.options),E.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},E.backendConnector=new Qse(a(this.modules.backend),E.resourceStore,E,this.options),E.backendConnector.on("*",(I,...z)=>{this.emit(I,...z)}),this.modules.languageDetector&&(E.languageDetector=a(this.modules.languageDetector),E.languageDetector.init&&E.languageDetector.init(E,this.options.detection,this.options)),this.modules.i18nFormat&&(E.i18nFormat=a(this.modules.i18nFormat),E.i18nFormat.init&&E.i18nFormat.init(this)),this.translator=new wb(this.services,this.options),this.translator.on("*",(I,...z)=>{this.emit(I,...z)}),this.modules.external.forEach(I=>{I.init&&I.init(this)})}if(this.format=this.options.interpolation.format,r||(r=V0),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const T=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);T.length>0&&T[0]!=="dev"&&(this.options.lng=T[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(T=>{this[T]=(...P)=>this.store[T](...P)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(T=>{this[T]=(...P)=>(this.store[T](...P),this)});const o=Fg(),_=()=>{const T=(P,E)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(E),r(P,E)};if(this.languages&&!this.isInitialized)return T(null,this.t.bind(this));this.changeLanguage(this.options.lng,T)};return this.options.resources||!this.options.initAsync?_():setTimeout(_,0),o}loadResources(t,r=V0){var u,h;let n=r;const a=ar(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],_=T=>{if(!T||T==="cimode")return;this.services.languageUtils.toResolveHierarchy(T).forEach(E=>{E!=="cimode"&&o.indexOf(E)<0&&o.push(E)})};a?_(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(P=>_(P)),(h=(u=this.options.preload)==null?void 0:u.forEach)==null||h.call(u,T=>_(T)),this.services.backendConnector.load(o,this.options.ns,T=>{!T&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(T)})}else n(null)}reloadResources(t,r,n){const a=Fg();return typeof t=="function"&&(n=t,t=void 0),typeof r=="function"&&(n=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),n||(n=V0),this.services.backendConnector.reload(t,r,u=>{a.resolve(),n(u)}),a}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&K6.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const n=this.languages[r];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const n=Fg();this.emit("languageChanging",t);const a=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},u=(o,_)=>{_?this.isLanguageChangingTo===t&&(a(_),this.translator.changeLanguage(_),this.isLanguageChangingTo=void 0,this.emit("languageChanged",_),this.logger.log("languageChanged",_)):this.isLanguageChangingTo=void 0,n.resolve((...T)=>this.t(...T)),r&&r(o,(...T)=>this.t(...T))},h=o=>{var P,E;!t&&!o&&this.services.languageDetector&&(o=[]);const _=ar(o)?o:o&&o[0],T=this.store.hasLanguageSomeTranslations(_)?_:this.services.languageUtils.getBestMatchFromCodes(ar(o)?[o]:o);T&&(this.language||a(T),this.translator.language||this.translator.changeLanguage(T),(E=(P=this.services.languageDetector)==null?void 0:P.cacheUserLanguage)==null||E.call(P,T)),this.loadResources(T,M=>{u(M,T)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?h(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(h):this.services.languageDetector.detect(h):h(t),n}getFixedT(t,r,n){const a=(u,h,...o)=>{let _;typeof h!="object"?_=this.options.overloadTranslationOptionHandler([u,h].concat(o)):_={...h},_.lng=_.lng||a.lng,_.lngs=_.lngs||a.lngs,_.ns=_.ns||a.ns,_.keyPrefix!==""&&(_.keyPrefix=_.keyPrefix||n||a.keyPrefix);const T=this.options.keySeparator||".";let P;return _.keyPrefix&&Array.isArray(u)?P=u.map(E=>(typeof E=="function"&&(E=uk(E,{...this.options,...h})),`${_.keyPrefix}${T}${E}`)):(typeof u=="function"&&(u=uk(u,{...this.options,...h})),P=_.keyPrefix?`${_.keyPrefix}${T}${u}`:u),this.t(P,_)};return ar(t)?a.lng=t:a.lngs=t,a.ns=r,a.keyPrefix=n,a}t(...t){var r;return(r=this.translator)==null?void 0:r.translate(...t)}exists(...t){var r;return(r=this.translator)==null?void 0:r.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=r.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,u=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const h=(o,_)=>{const T=this.services.backendConnector.state[`${o}|${_}`];return T===-1||T===0||T===2};if(r.precheck){const o=r.precheck(this,h);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||h(n,t)&&(!a||h(u,t)))}loadNamespaces(t,r){const n=Fg();return this.options.ns?(ar(t)&&(t=[t]),t.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{n.resolve(),r&&r(a)}),n):(r&&r(),Promise.resolve())}loadLanguages(t,r){const n=Fg();ar(t)&&(t=[t]);const a=this.options.preload||[],u=t.filter(h=>a.indexOf(h)<0&&this.services.languageUtils.isSupportedCode(h));return u.length?(this.options.preload=a.concat(u),this.loadResources(h=>{n.resolve(),r&&r(h)}),n):(r&&r(),Promise.resolve())}dir(t){var a,u;if(t||(t=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const h=new Intl.Locale(t);if(h&&h.getTextInfo){const o=h.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((u=this.services)==null?void 0:u.languageUtils)||new LR($R());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){const n=new my(t,r);return n.createInstance=my.createInstance,n}cloneInstance(t={},r=V0){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const a={...this.options,...t,isClone:!0},u=new my(a);if((t.debug!==void 0||t.prefix!==void 0)&&(u.logger=u.logger.clone(t)),["store","services","language"].forEach(o=>{u[o]=this[o]}),u.services={...this.services},u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},n){const o=Object.keys(this.store.data).reduce((_,T)=>(_[T]={...this.store.data[T]},_[T]=Object.keys(_[T]).reduce((P,E)=>(P[E]={..._[T][E]},P),_[T]),_),{});u.store=new DR(o,a),u.services.resourceStore=u.store}return u.translator=new wb(u.services,a),u.translator.on("*",(o,..._)=>{u.emit(o,..._)}),u.init(a,r),u.translator.options=a,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Is=my.createInstance();Is.createInstance;Is.dir;Is.init;Is.loadResources;Is.reloadResources;Is.use;Is.changeLanguage;Is.getFixedT;Is.t;Is.exists;Is.setDefaultNamespace;Is.hasLoadedNamespace;Is.loadNamespaces;Is.loadLanguages;const Jse=(e,t,r,n)=>{var u,h,o,_;const a=[r,{code:t,...n||{}}];if((h=(u=e==null?void 0:e.services)==null?void 0:u.logger)!=null&&h.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);hh(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(_=(o=e==null?void 0:e.services)==null?void 0:o.logger)!=null&&_.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},qR={},Q6=(e,t,r,n)=>{hh(r)&&qR[r]||(hh(r)&&(qR[r]=new Date),Jse(e,t,r,n))},X6=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},dk=(e,t,r)=>{e.loadNamespaces(t,X6(e,r))},WR=(e,t,r,n)=>{if(hh(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return dk(e,r,n);r.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,X6(e,n))},eae=(e,t,r={})=>!t.languages||!t.languages.length?(Q6(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:r.lng,precheck:(n,a)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!a(n.isLanguageChangingTo,e))return!1}}),hh=e=>typeof e=="string",tae=e=>typeof e=="object"&&e!==null,rae=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,nae={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},iae=e=>nae[e],sae=e=>e.replace(rae,iae);let hk={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:sae};const aae=(e={})=>{hk={...hk,...e}},oae=()=>hk;let J6;const lae=e=>{J6=e},cae=()=>J6,uae={type:"3rdParty",init(e){aae(e.options.react),lae(e)}},dae=U.createContext();class hae{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var eB={exports:{}},tB={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf=U;function pae(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fae=typeof Object.is=="function"?Object.is:pae,mae=Bf.useState,gae=Bf.useEffect,yae=Bf.useLayoutEffect,xae=Bf.useDebugValue;function vae(e,t){var r=t(),n=mae({inst:{value:r,getSnapshot:t}}),a=n[0].inst,u=n[1];return yae(function(){a.value=r,a.getSnapshot=t,iS(a)&&u({inst:a})},[e,r,t]),gae(function(){return iS(a)&&u({inst:a}),e(function(){iS(a)&&u({inst:a})})},[e]),xae(r),r}function iS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fae(e,r)}catch{return!0}}function _ae(e,t){return t()}var bae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_ae:vae;tB.useSyncExternalStore=Bf.useSyncExternalStore!==void 0?Bf.useSyncExternalStore:bae;eB.exports=tB;var wae=eB.exports;const Sae=(e,t)=>hh(t)?t:tae(t)&&hh(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,Tae={t:Sae,ready:!1},kae=()=>()=>{},Mi=(e,t={})=>{var Re,Me,pt;const{i18n:r}=t,{i18n:n,defaultNS:a}=U.useContext(dae)||{},u=r||n||cae();u&&!u.reportNamespaces&&(u.reportNamespaces=new hae),u||Q6(u,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const h=U.useMemo(()=>{var Oe;return{...oae(),...(Oe=u==null?void 0:u.options)==null?void 0:Oe.react,...t}},[u,t]),{useSuspense:o,keyPrefix:_}=h,T=e||a||((Re=u==null?void 0:u.options)==null?void 0:Re.defaultNS),P=hh(T)?[T]:T||["translation"],E=U.useMemo(()=>P,P);(pt=(Me=u==null?void 0:u.reportNamespaces)==null?void 0:Me.addUsedNamespaces)==null||pt.call(Me,E);const M=U.useRef(0),I=U.useCallback(Oe=>{if(!u)return kae;const{bindI18n:Ye,bindI18nStore:Ge}=h,rt=()=>{M.current+=1,Oe()};return Ye&&u.on(Ye,rt),Ge&&u.store.on(Ge,rt),()=>{Ye&&Ye.split(" ").forEach(nt=>u.off(nt,rt)),Ge&&Ge.split(" ").forEach(nt=>u.store.off(nt,rt))}},[u,h]),z=U.useRef(),F=U.useCallback(()=>{if(!u)return Tae;const Oe=!!(u.isInitialized||u.initializedStoreOnce)&&E.every(_e=>eae(_e,u,h)),Ye=t.lng||u.language,Ge=M.current,rt=z.current;if(rt&&rt.ready===Oe&&rt.lng===Ye&&rt.keyPrefix===_&&rt.revision===Ge)return rt;const Ve={t:u.getFixedT(Ye,h.nsMode==="fallback"?E:E[0],_),ready:Oe,lng:Ye,keyPrefix:_,revision:Ge};return z.current=Ve,Ve},[u,E,_,h,t.lng]),[D,q]=U.useState(0),{t:$,ready:W}=wae.useSyncExternalStore(I,F,F);U.useEffect(()=>{if(u&&!W&&!o){const Oe=()=>q(Ye=>Ye+1);t.lng?WR(u,t.lng,E,Oe):dk(u,E,Oe)}},[u,t.lng,E,W,o,D]);const te=u||{},se=U.useRef(null),he=U.useRef(),pe=Oe=>{const Ye=Object.getOwnPropertyDescriptors(Oe);Ye.__original&&delete Ye.__original;const Ge=Object.create(Object.getPrototypeOf(Oe),Ye);if(!Object.prototype.hasOwnProperty.call(Ge,"__original"))try{Object.defineProperty(Ge,"__original",{value:Oe,writable:!1,enumerable:!1,configurable:!1})}catch{}return Ge},xe=U.useMemo(()=>{const Oe=te,Ye=Oe==null?void 0:Oe.language;let Ge=Oe;Oe&&(se.current&&se.current.__original===Oe?he.current!==Ye?(Ge=pe(Oe),se.current=Ge,he.current=Ye):Ge=se.current:(Ge=pe(Oe),se.current=Ge,he.current=Ye));const rt=[$,Ge,W];return rt.t=$,rt.i18n=Ge,rt.ready=W,rt},[$,te,W,te.resolvedLanguage,te.language,te.languages]);if(u&&o&&!W)throw new Promise(Oe=>{const Ye=()=>Oe();t.lng?WR(u,t.lng,E,Ye):dk(u,E,Ye)});return xe},kp={PT:{countryCode:"PT",countryName:"Portugal",phonePrefix:"+351",phonePlaceholder:"+351 912 345 678",phonePattern:"^\\+?351?\\s?9[1236]\\d{1}\\s?\\d{3}\\s?\\d{3}$",postalCodeLabel:"Cdigo Postal",postalCodePlaceholder:"1000-001",postalCodePattern:"^\\d{4}-\\d{3}$",dateFormat:"dd/MM/yyyy"},GB:{countryCode:"GB",countryName:"United Kingdom",phonePrefix:"+44",phonePlaceholder:"+44 7911 123456",phonePattern:"^\\+?44?\\s?7\\d{3}\\s?\\d{6}$",postalCodeLabel:"Post Code",postalCodePlaceholder:"SW1A 1AA",postalCodePattern:"^[A-Z]{1,2}\\d[A-Z\\d]?\\s?\\d[A-Z]{2}$",dateFormat:"dd/MM/yyyy"},ZA:{countryCode:"ZA",countryName:"South Africa",phonePrefix:"+27",phonePlaceholder:"+27 82 123 4567",phonePattern:"^\\+?27?\\s?[6-8]\\d{1}\\s?\\d{3}\\s?\\d{4}$",postalCodeLabel:"Postal Code",postalCodePlaceholder:"0001",postalCodePattern:"^\\d{4}$",dateFormat:"yyyy/MM/dd"},TH:{countryCode:"TH",countryName:"Thailand",phonePrefix:"+66",phonePlaceholder:"+66 81 234 5678",phonePattern:"^\\+?66?\\s?[689]\\d{1}\\s?\\d{3}\\s?\\d{4}$",postalCodeLabel:"Postal Code",postalCodePlaceholder:"10110",postalCodePattern:"^\\d{5}$",dateFormat:"dd/MM/yyyy"},US:{countryCode:"US",countryName:"United States",phonePrefix:"+1",phonePlaceholder:"+1 (555) 123-4567",phonePattern:"^\\+?1?\\s?\\(?\\d{3}\\)?[\\s.-]?\\d{3}[\\s.-]?\\d{4}$",postalCodeLabel:"Zip Code",postalCodePlaceholder:"10001",postalCodePattern:"^\\d{5}(-\\d{4})?$",dateFormat:"MM/dd/yyyy"},DEFAULT:{countryCode:"GB",countryName:"United Kingdom",phonePrefix:"+44",phonePlaceholder:"+44 7911 123456",phonePattern:"^\\+?\\d{10,15}$",postalCodeLabel:"Post Code",postalCodePlaceholder:"SW1A 1AA",postalCodePattern:"^[A-Z0-9\\s-]{3,10}$",dateFormat:"dd/MM/yyyy"}},GR={pt:"PT","pt-PT":"PT","pt-BR":"PT",en:"GB","en-GB":"GB","en-US":"US","en-ZA":"ZA",th:"TH","th-TH":"TH"},Cae=()=>{if(typeof window>"u")return null;const e=window.location.hostname;return e.endsWith(".pt")||e.includes(".pt.")?"PT":e.endsWith(".co.uk")||e.includes(".co.uk.")?"GB":e.endsWith(".co.za")||e.includes(".co.za.")?"ZA":e.endsWith(".co.th")||e.includes(".co.th.")?"TH":e.endsWith(".com")||e.endsWith(".us")?"US":null},Pae=()=>{const{i18n:e}=Mi(),[t,r]=U.useState(kp.DEFAULT);return U.useEffect(()=>{const n=Cae();if(n&&kp[n]){r(kp[n]);return}const a=e.language,u=GR[a]||GR[a.split("-")[0]];u&&kp[u]?r(kp[u]):r(kp.DEFAULT)},[e.language]),t},Eae=ch({firstName:mi().trim().min(2,"First name must be at least 2 characters").max(50,"First name must be less than 50 characters"),lastName:mi().trim().min(2,"Last name must be at least 2 characters").max(50,"Last name must be less than 50 characters"),email:mi().trim().email("Invalid email address").max(255,"Email must be less than 255 characters"),phone:mi().trim().min(10,"Phone number must be at least 10 digits").max(20,"Phone number must be less than 20 characters"),dateOfBirth:qee().refine(e=>new Date().getFullYear()-e.getFullYear()>=18,"You must be at least 18 years old")}),jae=ch({conditions:Wee(mi()).min(1,"Please select at least one condition"),otherCondition:mi().max(200,"Description must be less than 200 characters").optional(),symptoms:mi().trim().min(10,"Please provide details about your symptoms").max(500,"Description must be less than 500 characters")}),Aae=ch({previousCannabisUse:Gee(["yes","no"]),currentMedications:mi().max(500,"Description must be less than 500 characters").optional(),allergies:mi().max(500,"Description must be less than 500 characters").optional()}),Mae=ch({consent:dR().refine(e=>e===!0,"You must provide consent to continue"),privacyAcknowledgment:dR().refine(e=>e===!0,"You must acknowledge the privacy policy")}),Nae=["Chronic Pain","Anxiety","Depression","PTSD","Insomnia","Cancer-related symptoms","Epilepsy/Seizures","Multiple Sclerosis","Other (please specify)"],rB=({open:e,onOpenChange:t})=>{var se;const[r,n]=U.useState(1),[a,u]=U.useState({}),[h,o]=U.useState(null),_=Pae(),T=qg({resolver:Wg(Eae),defaultValues:a}),P=qg({resolver:Wg(jae),defaultValues:a}),E=qg({resolver:Wg(Aae),defaultValues:a}),M=qg({resolver:Wg(Mae),defaultValues:a}),I=he=>{u({...a,...he}),n(2)},z=he=>{u({...a,...he}),n(3)},F=he=>{u({...a,...he}),n(4)},D=he=>{const pe={...a,...he},xe=pe.dateOfBirth&&new Date().getFullYear()-pe.dateOfBirth.getFullYear()>=18&&pe.conditions&&pe.conditions.length>0&&pe.consent===!0;o(xe),n(5),HL({title:xe?"Application Submitted":"More Information Needed",description:xe?"Thank you for your application. Our team will review and contact you shortly.":"Based on the information provided, we need additional verification. Our team will contact you."})},q=()=>{n(Math.max(1,r-1))},$=()=>{n(1),u({}),o(null),T.reset(),P.reset(),E.reset(),M.reset(),t(!1)},W=()=>f.jsx("div",{className:"flex items-center justify-between mb-8 sm:mb-10 px-2",children:[1,2,3,4].map(he=>f.jsxs("div",{className:"flex items-center flex-1",children:[f.jsx("div",{className:St("w-10 h-10 sm:w-12 sm:h-12 rounded-full flex items-center justify-center text-sm sm:text-base font-semibold transition-all duration-300 shadow-sm",r>=he?"bg-primary text-primary-foreground shadow-md":"bg-muted text-muted-foreground"),children:r>he?f.jsx(dT,{className:"w-5 h-5 sm:w-6 sm:h-6"}):he}),he<4&&f.jsx("div",{className:St("flex-1 h-1 mx-2 sm:mx-3 rounded-full transition-all duration-300",r>he?"bg-primary":"bg-muted")})]},he))}),te=()=>f.jsxs("div",{className:"flex items-center gap-3 py-2",children:[f.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-border to-transparent"}),f.jsx(Xd,{className:"w-4 h-4 text-primary/40"}),f.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-transparent via-border to-transparent"})]});return f.jsx(tre,{open:e,onOpenChange:$,children:f.jsxs(Rz,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-6 sm:p-8 rounded-2xl",children:[f.jsxs(Dz,{className:"space-y-3 pb-4",children:[f.jsx(Oz,{className:"text-2xl sm:text-3xl font-semibold text-foreground tracking-tight",children:"Medical Cannabis Eligibility"}),f.jsx(Lz,{className:"text-base text-muted-foreground leading-relaxed",children:"Complete all steps to determine your eligibility for medical cannabis treatment."})]}),r<=4&&W(),r===1&&f.jsxs("form",{onSubmit:T.handleSubmit(I),className:"space-y-8",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:f.jsx("span",{className:"text-primary font-semibold text-sm",children:"1"})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Personal Information"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"firstName",className:"text-foreground/90",children:"First Name *"}),f.jsx(La,{id:"firstName",placeholder:"Enter your first name",...T.register("firstName")}),T.formState.errors.firstName&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.firstName.message})]}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"lastName",className:"text-foreground/90",children:"Last Name *"}),f.jsx(La,{id:"lastName",placeholder:"Enter your last name",...T.register("lastName")}),T.formState.errors.lastName&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.lastName.message})]})]}),f.jsx(te,{}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"email",className:"text-foreground/90",children:"Email Address *"}),f.jsx(La,{id:"email",type:"email",placeholder:"your@email.com",...T.register("email")}),T.formState.errors.email&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.email.message})]}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsxs(qn,{htmlFor:"phone",className:"text-foreground/90",children:["Phone Number * ",f.jsxs("span",{className:"text-xs text-muted-foreground font-normal",children:["(",_.countryName,")"]})]}),f.jsx(La,{id:"phone",type:"tel",placeholder:_.phonePlaceholder,...T.register("phone")}),T.formState.errors.phone&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.phone.message})]}),f.jsx(te,{}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{className:"text-foreground/90",children:"Date of Birth *"}),f.jsxs(Mse,{children:[f.jsx(Nse,{asChild:!0,children:f.jsxs(Zr,{variant:"outline",className:St("w-full justify-start text-left h-12 rounded-xl border-2 hover:border-primary/30 transition-all",!T.watch("dateOfBirth")&&"text-muted-foreground"),children:[f.jsx(T3,{className:"mr-3 h-5 w-5 text-primary/60"}),T.watch("dateOfBirth")?Ru(T.watch("dateOfBirth"),"PPP"):f.jsx("span",{children:"Select your date of birth"})]})}),f.jsx(H6,{className:"w-auto p-0",align:"start",children:f.jsx(D6,{mode:"single",selected:T.watch("dateOfBirth"),onSelect:he=>T.setValue("dateOfBirth",he),disabled:he=>he>new Date||he<new Date("1900-01-01"),initialFocus:!0,captionLayout:"dropdown-buttons",fromYear:1900,toYear:new Date().getFullYear()})})]}),T.formState.errors.dateOfBirth&&f.jsx("p",{className:"text-sm text-destructive mt-1",children:T.formState.errors.dateOfBirth.message})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx(Zr,{type:"submit",className:"px-8 h-12 rounded-xl font-semibold text-base",children:"Continue"})})]}),r===2&&f.jsxs("form",{onSubmit:P.handleSubmit(z),className:"space-y-8",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:f.jsx("span",{className:"text-primary font-semibold text-sm",children:"2"})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Medical Information"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(qn,{className:"text-foreground/90 text-base",children:"Medical Conditions *"}),f.jsx("p",{className:"text-sm text-muted-foreground -mt-2",children:"Select all conditions that apply to you"}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 pt-2",children:Nae.map(he=>{var pe;return f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-transparent hover:border-primary/20 hover:bg-primary/5 transition-all cursor-pointer",onClick:()=>{const xe=P.getValues("conditions")||[];xe.includes(he)?P.setValue("conditions",xe.filter(Me=>Me!==he)):P.setValue("conditions",[...xe,he])},children:[f.jsx(S_,{id:he,checked:(pe=P.watch("conditions"))==null?void 0:pe.includes(he),onCheckedChange:xe=>{const Re=P.getValues("conditions")||[];xe?P.setValue("conditions",[...Re,he]):P.setValue("conditions",Re.filter(Me=>Me!==he))}}),f.jsx(qn,{htmlFor:he,className:"font-normal cursor-pointer text-foreground/80 flex-1",children:he})]},he)})}),P.formState.errors.conditions&&f.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.conditions.message})]}),((se=P.watch("conditions"))==null?void 0:se.includes("Other (please specify)"))&&f.jsxs(f.Fragment,{children:[f.jsx(te,{}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"otherCondition",className:"text-foreground/90",children:"Please specify other condition"}),f.jsx(La,{id:"otherCondition",placeholder:"Describe your condition",...P.register("otherCondition")}),P.formState.errors.otherCondition&&f.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.otherCondition.message})]})]}),f.jsx(te,{}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"symptoms",className:"text-foreground/90",children:"Describe Your Symptoms *"}),f.jsx(w_,{id:"symptoms",...P.register("symptoms"),placeholder:"Please describe your symptoms and how they affect your daily life...",className:"min-h-32 rounded-xl border-2 p-4 resize-none focus:border-primary/50 transition-all"}),P.formState.errors.symptoms&&f.jsx("p",{className:"text-sm text-destructive",children:P.formState.errors.symptoms.message})]})]}),f.jsxs("div",{className:"flex justify-between pt-4 gap-4",children:[f.jsx(Zr,{type:"button",variant:"outline",onClick:q,className:"px-6 h-12 rounded-xl",children:"Back"}),f.jsx(Zr,{type:"submit",className:"px-8 h-12 rounded-xl font-semibold text-base",children:"Continue"})]})]}),r===3&&f.jsxs("form",{onSubmit:E.handleSubmit(F),className:"space-y-8",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:f.jsx("span",{className:"text-primary font-semibold text-sm",children:"3"})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Medical History"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(qn,{className:"text-foreground/90 text-base",children:"Have you used medical cannabis before? *"}),f.jsxs(l6,{onValueChange:he=>E.setValue("previousCannabisUse",he),defaultValue:E.watch("previousCannabisUse"),className:"flex gap-4 pt-2",children:[f.jsxs("div",{className:St("flex items-center gap-3 p-4 rounded-xl border-2 flex-1 cursor-pointer transition-all",E.watch("previousCannabisUse")==="yes"?"border-primary bg-primary/5":"border-border hover:border-primary/30"),onClick:()=>E.setValue("previousCannabisUse","yes"),children:[f.jsx(ak,{value:"yes",id:"cannabis-yes"}),f.jsx(qn,{htmlFor:"cannabis-yes",className:"font-normal cursor-pointer text-base",children:"Yes"})]}),f.jsxs("div",{className:St("flex items-center gap-3 p-4 rounded-xl border-2 flex-1 cursor-pointer transition-all",E.watch("previousCannabisUse")==="no"?"border-primary bg-primary/5":"border-border hover:border-primary/30"),onClick:()=>E.setValue("previousCannabisUse","no"),children:[f.jsx(ak,{value:"no",id:"cannabis-no"}),f.jsx(qn,{htmlFor:"cannabis-no",className:"font-normal cursor-pointer text-base",children:"No"})]})]}),E.formState.errors.previousCannabisUse&&f.jsx("p",{className:"text-sm text-destructive",children:E.formState.errors.previousCannabisUse.message})]}),f.jsx(te,{}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"currentMedications",className:"text-foreground/90",children:"Current Medications"}),f.jsx("p",{className:"text-sm text-muted-foreground -mt-1",children:"Optional - helps us assess potential interactions"}),f.jsx(w_,{id:"currentMedications",...E.register("currentMedications"),placeholder:"List any medications you are currently taking...",className:"min-h-24 rounded-xl border-2 p-4 resize-none focus:border-primary/50 transition-all"}),E.formState.errors.currentMedications&&f.jsx("p",{className:"text-sm text-destructive",children:E.formState.errors.currentMedications.message})]}),f.jsxs("div",{className:"space-y-2.5",children:[f.jsx(qn,{htmlFor:"allergies",className:"text-foreground/90",children:"Allergies"}),f.jsx("p",{className:"text-sm text-muted-foreground -mt-1",children:"Optional - list any known allergies"}),f.jsx(w_,{id:"allergies",...E.register("allergies"),placeholder:"List any known allergies...",className:"min-h-24 rounded-xl border-2 p-4 resize-none focus:border-primary/50 transition-all"}),E.formState.errors.allergies&&f.jsx("p",{className:"text-sm text-destructive",children:E.formState.errors.allergies.message})]})]}),f.jsxs("div",{className:"flex justify-between pt-4 gap-4",children:[f.jsx(Zr,{type:"button",variant:"outline",onClick:q,className:"px-6 h-12 rounded-xl",children:"Back"}),f.jsx(Zr,{type:"submit",className:"px-8 h-12 rounded-xl font-semibold text-base",children:"Continue"})]})]}),r===4&&f.jsxs("form",{onSubmit:M.handleSubmit(D),className:"space-y-8",children:[f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/10 flex items-center justify-center",children:f.jsx("span",{className:"text-primary font-semibold text-sm",children:"4"})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"Consent & Acknowledgment"})]}),f.jsxs("div",{className:"space-y-5 bg-muted/30 p-5 sm:p-6 rounded-2xl border border-border/50",children:[f.jsxs("div",{className:St("flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all",M.watch("consent")?"border-primary bg-primary/5":"border-border hover:border-primary/30"),onClick:()=>M.setValue("consent",!M.watch("consent")),children:[f.jsx(S_,{id:"consent",checked:M.watch("consent"),onCheckedChange:he=>M.setValue("consent",he),className:"mt-0.5"}),f.jsx(qn,{htmlFor:"consent",className:"text-sm font-normal cursor-pointer leading-relaxed text-foreground/80",children:"I consent to the collection and processing of my personal health information for the purpose of assessing my eligibility for medical cannabis treatment. I understand that this information will be reviewed by qualified healthcare professionals."})]}),M.formState.errors.consent&&f.jsx("p",{className:"text-sm text-destructive pl-2",children:M.formState.errors.consent.message}),f.jsxs("div",{className:St("flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all",M.watch("privacyAcknowledgment")?"border-primary bg-primary/5":"border-border hover:border-primary/30"),onClick:()=>M.setValue("privacyAcknowledgment",!M.watch("privacyAcknowledgment")),children:[f.jsx(S_,{id:"privacy",checked:M.watch("privacyAcknowledgment"),onCheckedChange:he=>M.setValue("privacyAcknowledgment",he),className:"mt-0.5"}),f.jsx(qn,{htmlFor:"privacy",className:"text-sm font-normal cursor-pointer leading-relaxed text-foreground/80",children:"I acknowledge that I have read and understood the privacy policy and understand how my data will be stored and used in accordance with applicable healthcare regulations."})]}),M.formState.errors.privacyAcknowledgment&&f.jsx("p",{className:"text-sm text-destructive pl-2",children:M.formState.errors.privacyAcknowledgment.message})]}),f.jsx("div",{className:"bg-primary/5 border border-primary/20 p-5 rounded-2xl",children:f.jsxs("p",{className:"text-sm text-foreground/80 leading-relaxed",children:[f.jsx("strong",{className:"text-foreground",children:"Important:"})," This assessment does not constitute medical advice or guarantee approval for medical cannabis treatment. A qualified healthcare professional will review your application and may contact you for additional information or consultation."]})})]}),f.jsxs("div",{className:"flex justify-between pt-4 gap-4",children:[f.jsx(Zr,{type:"button",variant:"outline",onClick:q,className:"px-6 h-12 rounded-xl",children:"Back"}),f.jsx(Zr,{type:"submit",className:"px-8 h-12 rounded-xl font-semibold text-base",children:"Submit Application"})]})]}),r===5&&f.jsxs("div",{className:"space-y-8 py-8",children:[f.jsx("div",{className:"flex flex-col items-center text-center space-y-5",children:h?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-20 h-20 rounded-full bg-primary/10 flex items-center justify-center",children:f.jsx(dT,{className:"w-12 h-12 text-primary"})}),f.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Application Submitted Successfully"}),f.jsx("p",{className:"text-muted-foreground max-w-md leading-relaxed",children:"Thank you for completing the eligibility assessment. Based on the information provided, you may be eligible for medical cannabis treatment. Our healthcare team will review your application and contact you within 2-3 business days."}),f.jsx("div",{className:"bg-primary/5 border border-primary/20 p-5 rounded-2xl mt-4 w-full max-w-md",children:f.jsxs("p",{className:"text-sm text-foreground/80",children:["We've sent a confirmation email to ",f.jsx("strong",{className:"text-foreground",children:a.email}),". Please check your inbox for next steps."]})})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"w-20 h-20 rounded-full bg-secondary/10 flex items-center justify-center",children:f.jsx(kC,{className:"w-12 h-12 text-secondary"})}),f.jsx("h3",{className:"text-2xl font-semibold text-foreground",children:"Additional Information Required"}),f.jsx("p",{className:"text-muted-foreground max-w-md leading-relaxed",children:"Thank you for your application. Based on the information provided, we need to gather some additional details to properly assess your eligibility. Our team will contact you shortly to discuss your options."}),f.jsx("div",{className:"bg-secondary/5 border border-secondary/20 p-5 rounded-2xl mt-4 w-full max-w-md",children:f.jsxs("p",{className:"text-sm text-foreground/80",children:["We've sent a confirmation email to ",f.jsx("strong",{className:"text-foreground",children:a.email}),". A healthcare professional will reach out within 2-3 business days."]})})]})}),f.jsx("div",{className:"flex justify-center pt-4",children:f.jsx(Zr,{onClick:$,className:"px-10 h-12 rounded-xl font-semibold text-base",children:"Close"})})]})]})})},Iae=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class sE extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Rae extends sE{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class HR extends sE{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ZR extends sE{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var pk;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(pk||(pk={}));class Dae{constructor(t,{headers:r={},customFetch:n,region:a=pk.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=Iae(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ut(this,arguments,void 0,function*(r,n={}){var a;let u,h;try{const{headers:o,method:_,body:T,signal:P,timeout:E}=n;let M={},{region:I}=n;I||(I=this.region);const z=new URL(`${this.url}/${r}`);I&&I!=="any"&&(M["x-region"]=I,z.searchParams.set("forceFunctionRegion",I));let F;T&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&T instanceof Blob||T instanceof ArrayBuffer?(M["Content-Type"]="application/octet-stream",F=T):typeof T=="string"?(M["Content-Type"]="text/plain",F=T):typeof FormData<"u"&&T instanceof FormData?F=T:(M["Content-Type"]="application/json",F=JSON.stringify(T)):F=T;let D=P;E&&(h=new AbortController,u=setTimeout(()=>h.abort(),E),P?(D=h.signal,P.addEventListener("abort",()=>h.abort())):D=h.signal);const q=yield this.fetch(z.toString(),{method:_||"POST",headers:Object.assign(Object.assign(Object.assign({},M),this.headers),o),body:F,signal:D}).catch(se=>{throw new Rae(se)}),$=q.headers.get("x-relay-error");if($&&$==="true")throw new HR(q);if(!q.ok)throw new ZR(q);let W=((a=q.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),te;return W==="application/json"?te=yield q.json():W==="application/octet-stream"||W==="application/pdf"?te=yield q.blob():W==="text/event-stream"?te=q:W==="multipart/form-data"?te=yield q.formData():te=yield q.text(),{data:te,error:null,response:q}}catch(o){return{data:null,error:o,response:o instanceof ZR||o instanceof HR?o.context:void 0}}finally{u&&clearTimeout(u)}})}}var Es={};const tm=y$(nte);var $0={},U0={},q0={},W0={},G0={},H0={},KR;function nB(){if(KR)return H0;KR=1,Object.defineProperty(H0,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return H0.default=e,H0}var YR;function iB(){if(YR)return G0;YR=1,Object.defineProperty(G0,"__esModule",{value:!0});const t=tm.__importDefault(nB());class r{constructor(a){var u,h;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(h=a.isMaybeSingle)!==null&&h!==void 0?h:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let o=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async _=>{var T,P,E,M;let I=null,z=null,F=null,D=_.status,q=_.statusText;if(_.ok){if(this.method!=="HEAD"){const se=await _.text();se===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((T=this.headers.get("Accept"))===null||T===void 0)&&T.includes("application/vnd.pgrst.plan+text"))?z=se:z=JSON.parse(se))}const W=(P=this.headers.get("Prefer"))===null||P===void 0?void 0:P.match(/count=(exact|planned|estimated)/),te=(E=_.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");W&&te&&te.length>1&&(F=parseInt(te[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(z)&&(z.length>1?(I={code:"PGRST116",details:`Results contain ${z.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},z=null,F=null,D=406,q="Not Acceptable"):z.length===1?z=z[0]:z=null)}else{const W=await _.text();try{I=JSON.parse(W),Array.isArray(I)&&_.status===404&&(z=[],I=null,D=200,q="OK")}catch{_.status===404&&W===""?(D=204,q="No Content"):I={message:W}}if(I&&this.isMaybeSingle&&(!((M=I==null?void 0:I.details)===null||M===void 0)&&M.includes("0 rows"))&&(I=null,D=200,q="OK"),I&&this.shouldThrowOnError)throw new t.default(I)}return{error:I,data:z,count:F,status:D,statusText:q}});return this.shouldThrowOnError||(o=o.catch(_=>{var T,P,E,M,I,z;let F="";const D=_==null?void 0:_.cause;if(D){const q=(T=D==null?void 0:D.message)!==null&&T!==void 0?T:"",$=(P=D==null?void 0:D.code)!==null&&P!==void 0?P:"";F=`${(E=_==null?void 0:_.name)!==null&&E!==void 0?E:"FetchError"}: ${_==null?void 0:_.message}`,F+=`

Caused by: ${(M=D==null?void 0:D.name)!==null&&M!==void 0?M:"Error"}: ${q}`,$&&(F+=` (${$})`),D!=null&&D.stack&&(F+=`
${D.stack}`)}else F=(I=_==null?void 0:_.stack)!==null&&I!==void 0?I:"";return{error:{message:`${(z=_==null?void 0:_.name)!==null&&z!==void 0?z:"FetchError"}: ${_==null?void 0:_.message}`,details:F,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(a,u)}returns(){return this}overrideTypes(){return this}}return G0.default=r,G0}var QR;function sB(){if(QR)return W0;QR=1,Object.defineProperty(W0,"__esModule",{value:!0});const t=tm.__importDefault(iB());class r extends t.default{select(a){let u=!1;const h=(a??"*").split("").map(o=>/\s/.test(o)&&!u?"":(o==='"'&&(u=!u),o)).join("");return this.url.searchParams.set("select",h),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:u=!0,nullsFirst:h,foreignTable:o,referencedTable:_=o}={}){const T=_?`${_}.order`:"order",P=this.url.searchParams.get(T);return this.url.searchParams.set(T,`${P?`${P},`:""}${a}.${u?"asc":"desc"}${h===void 0?"":h?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:u,referencedTable:h=u}={}){const o=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(o,`${a}`),this}range(a,u,{foreignTable:h,referencedTable:o=h}={}){const _=typeof o>"u"?"offset":`${o}.offset`,T=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(_,`${a}`),this.url.searchParams.set(T,`${u-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:u=!1,settings:h=!1,buffers:o=!1,wal:_=!1,format:T="text"}={}){var P;const E=[a?"analyze":null,u?"verbose":null,h?"settings":null,o?"buffers":null,_?"wal":null].filter(Boolean).join("|"),M=(P=this.headers.get("Accept"))!==null&&P!==void 0?P:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${T}; for="${M}"; options=${E};`),T==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return W0.default=r,W0}var XR;function aE(){if(XR)return q0;XR=1,Object.defineProperty(q0,"__esModule",{value:!0});const t=tm.__importDefault(sB()),r=new RegExp("[,()]");class n extends t.default{eq(u,h){return this.url.searchParams.append(u,`eq.${h}`),this}neq(u,h){return this.url.searchParams.append(u,`neq.${h}`),this}gt(u,h){return this.url.searchParams.append(u,`gt.${h}`),this}gte(u,h){return this.url.searchParams.append(u,`gte.${h}`),this}lt(u,h){return this.url.searchParams.append(u,`lt.${h}`),this}lte(u,h){return this.url.searchParams.append(u,`lte.${h}`),this}like(u,h){return this.url.searchParams.append(u,`like.${h}`),this}likeAllOf(u,h){return this.url.searchParams.append(u,`like(all).{${h.join(",")}}`),this}likeAnyOf(u,h){return this.url.searchParams.append(u,`like(any).{${h.join(",")}}`),this}ilike(u,h){return this.url.searchParams.append(u,`ilike.${h}`),this}ilikeAllOf(u,h){return this.url.searchParams.append(u,`ilike(all).{${h.join(",")}}`),this}ilikeAnyOf(u,h){return this.url.searchParams.append(u,`ilike(any).{${h.join(",")}}`),this}regexMatch(u,h){return this.url.searchParams.append(u,`match.${h}`),this}regexIMatch(u,h){return this.url.searchParams.append(u,`imatch.${h}`),this}is(u,h){return this.url.searchParams.append(u,`is.${h}`),this}isDistinct(u,h){return this.url.searchParams.append(u,`isdistinct.${h}`),this}in(u,h){const o=Array.from(new Set(h)).map(_=>typeof _=="string"&&r.test(_)?`"${_}"`:`${_}`).join(",");return this.url.searchParams.append(u,`in.(${o})`),this}contains(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cs.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cs.{${h.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(h)}`),this}containedBy(u,h){return typeof h=="string"?this.url.searchParams.append(u,`cd.${h}`):Array.isArray(h)?this.url.searchParams.append(u,`cd.{${h.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(h)}`),this}rangeGt(u,h){return this.url.searchParams.append(u,`sr.${h}`),this}rangeGte(u,h){return this.url.searchParams.append(u,`nxl.${h}`),this}rangeLt(u,h){return this.url.searchParams.append(u,`sl.${h}`),this}rangeLte(u,h){return this.url.searchParams.append(u,`nxr.${h}`),this}rangeAdjacent(u,h){return this.url.searchParams.append(u,`adj.${h}`),this}overlaps(u,h){return typeof h=="string"?this.url.searchParams.append(u,`ov.${h}`):this.url.searchParams.append(u,`ov.{${h.join(",")}}`),this}textSearch(u,h,{config:o,type:_}={}){let T="";_==="plain"?T="pl":_==="phrase"?T="ph":_==="websearch"&&(T="w");const P=o===void 0?"":`(${o})`;return this.url.searchParams.append(u,`${T}fts${P}.${h}`),this}match(u){return Object.entries(u).forEach(([h,o])=>{this.url.searchParams.append(h,`eq.${o}`)}),this}not(u,h,o){return this.url.searchParams.append(u,`not.${h}.${o}`),this}or(u,{foreignTable:h,referencedTable:o=h}={}){const _=o?`${o}.or`:"or";return this.url.searchParams.append(_,`(${u})`),this}filter(u,h,o){return this.url.searchParams.append(u,`${h}.${o}`),this}}return q0.default=n,q0}var JR;function aB(){if(JR)return U0;JR=1,Object.defineProperty(U0,"__esModule",{value:!0});const t=tm.__importDefault(aE());class r{constructor(a,{headers:u={},schema:h,fetch:o}){this.url=a,this.headers=new Headers(u),this.schema=h,this.fetch=o}select(a,u){const{head:h=!1,count:o}=u??{},_=h?"HEAD":"GET";let T=!1;const P=(a??"*").split("").map(E=>/\s/.test(E)&&!T?"":(E==='"'&&(T=!T),E)).join("");return this.url.searchParams.set("select",P),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:_,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:u,defaultToNull:h=!0}={}){var o;const _="POST";if(u&&this.headers.append("Prefer",`count=${u}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const T=a.reduce((P,E)=>P.concat(Object.keys(E)),[]);if(T.length>0){const P=[...new Set(T)].map(E=>`"${E}"`);this.url.searchParams.set("columns",P.join(","))}}return new t.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(a,{onConflict:u,ignoreDuplicates:h=!1,count:o,defaultToNull:_=!0}={}){var T;const P="POST";if(this.headers.append("Prefer",`resolution=${h?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),o&&this.headers.append("Prefer",`count=${o}`),_||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const E=a.reduce((M,I)=>M.concat(Object.keys(I)),[]);if(E.length>0){const M=[...new Set(E)].map(I=>`"${I}"`);this.url.searchParams.set("columns",M.join(","))}}return new t.default({method:P,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(T=this.fetch)!==null&&T!==void 0?T:fetch})}update(a,{count:u}={}){var h;const o="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}delete({count:a}={}){var u;const h="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return U0.default=r,U0}var eD;function Oae(){if(eD)return $0;eD=1,Object.defineProperty($0,"__esModule",{value:!0});const e=tm,t=e.__importDefault(aB()),r=e.__importDefault(aE());class n{constructor(u,{headers:h={},schema:o,fetch:_}={}){this.url=u,this.headers=new Headers(h),this.schemaName=o,this.fetch=_}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const h=new URL(`${this.url}/${u}`);return new t.default(h,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new n(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,h={},{head:o=!1,get:_=!1,count:T}={}){var P;let E;const M=new URL(`${this.url}/rpc/${u}`);let I;o||_?(E=o?"HEAD":"GET",Object.entries(h).filter(([F,D])=>D!==void 0).map(([F,D])=>[F,Array.isArray(D)?`{${D.join(",")}}`:`${D}`]).forEach(([F,D])=>{M.searchParams.append(F,D)})):(E="POST",I=h);const z=new Headers(this.headers);return T&&z.set("Prefer",`count=${T}`),new r.default({method:E,url:M,headers:z,schema:this.schemaName,body:I,fetch:(P=this.fetch)!==null&&P!==void 0?P:fetch})}}return $0.default=n,$0}Object.defineProperty(Es,"__esModule",{value:!0});var oB=Es.PostgrestError=yB=Es.PostgrestBuilder=mB=Es.PostgrestTransformBuilder=pB=Es.PostgrestFilterBuilder=dB=Es.PostgrestQueryBuilder=cB=Es.PostgrestClient=void 0;const rm=tm,lB=rm.__importDefault(Oae());var cB=Es.PostgrestClient=lB.default;const uB=rm.__importDefault(aB());var dB=Es.PostgrestQueryBuilder=uB.default;const hB=rm.__importDefault(aE());var pB=Es.PostgrestFilterBuilder=hB.default;const fB=rm.__importDefault(sB());var mB=Es.PostgrestTransformBuilder=fB.default;const gB=rm.__importDefault(iB());var yB=Es.PostgrestBuilder=gB.default;const xB=rm.__importDefault(nB());oB=Es.PostgrestError=xB.default;var vB=Es.default={PostgrestClient:lB.default,PostgrestQueryBuilder:uB.default,PostgrestFilterBuilder:hB.default,PostgrestTransformBuilder:fB.default,PostgrestBuilder:gB.default,PostgrestError:xB.default};const Lae=ND({__proto__:null,get PostgrestBuilder(){return yB},get PostgrestClient(){return cB},get PostgrestError(){return oB},get PostgrestFilterBuilder(){return pB},get PostgrestQueryBuilder(){return dB},get PostgrestTransformBuilder(){return mB},default:vB},[Es]),{PostgrestClient:Fae,PostgrestQueryBuilder:Lfe,PostgrestFilterBuilder:Ffe,PostgrestTransformBuilder:zfe,PostgrestBuilder:Bfe,PostgrestError:Vfe}=vB||Lae;class zae{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Bae="2.84.0",Vae=`realtime-js/${Bae}`,_B="1.0.0",$ae="2.0.0",tD=_B,fk=1e4,Uae=1e3,qae=100;var Rd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Rd||(Rd={}));var Ci;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ci||(Ci={}));var go;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(go||(go={}));var mk;(function(e){e.websocket="websocket"})(mk||(mk={}));var Dd;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Dd||(Dd={}));class Wae{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,a,u;const h=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",_=(n=t.join_ref)!==null&&n!==void 0?n:"",T=t.payload.event,P=(u=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&u!==void 0?u:new ArrayBuffer(0),E=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+o.length+h.length+T.length,M=new ArrayBuffer(this.HEADER_LENGTH+E);let I=new DataView(M),z=0;I.setUint8(z++,this.KINDS.userBroadcastPush),I.setUint8(z++,_.length),I.setUint8(z++,o.length),I.setUint8(z++,h.length),I.setUint8(z++,T.length),I.setUint8(z++,this.BINARY_ENCODING),Array.from(_,D=>I.setUint8(z++,D.charCodeAt(0))),Array.from(o,D=>I.setUint8(z++,D.charCodeAt(0))),Array.from(h,D=>I.setUint8(z++,D.charCodeAt(0))),Array.from(T,D=>I.setUint8(z++,D.charCodeAt(0)));var F=new Uint8Array(M.byteLength+P.byteLength);return F.set(new Uint8Array(M),0),F.set(new Uint8Array(P),M.byteLength),F.buffer}_encodeJsonUserBroadcastPush(t){var r,n,a,u;const h=t.topic,o=(r=t.ref)!==null&&r!==void 0?r:"",_=(n=t.join_ref)!==null&&n!==void 0?n:"",T=t.payload.event,P=(u=(a=t.payload)===null||a===void 0?void 0:a.payload)!==null&&u!==void 0?u:{},M=new TextEncoder().encode(JSON.stringify(P)).buffer,I=this.USER_BROADCAST_PUSH_META_LENGTH+_.length+o.length+h.length+T.length,z=new ArrayBuffer(this.HEADER_LENGTH+I);let F=new DataView(z),D=0;F.setUint8(D++,this.KINDS.userBroadcastPush),F.setUint8(D++,_.length),F.setUint8(D++,o.length),F.setUint8(D++,h.length),F.setUint8(D++,T.length),F.setUint8(D++,this.JSON_ENCODING),Array.from(_,$=>F.setUint8(D++,$.charCodeAt(0))),Array.from(o,$=>F.setUint8(D++,$.charCodeAt(0))),Array.from(h,$=>F.setUint8(D++,$.charCodeAt(0))),Array.from(T,$=>F.setUint8(D++,$.charCodeAt(0)));var q=new Uint8Array(z.byteLength+M.byteLength);return q.set(new Uint8Array(z),0),q.set(new Uint8Array(M),z.byteLength),q.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[a,u,h,o,_]=n;return r({join_ref:a,ref:u,topic:h,event:o,payload:_})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),a=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,a)}}_decodeUserBroadcast(t,r,n){const a=r.getUint8(1),u=r.getUint8(2),h=r.getUint8(3),o=r.getUint8(4);let _=this.HEADER_LENGTH+4;const T=n.decode(t.slice(_,_+a));_=_+a;const P=n.decode(t.slice(_,_+u));_=_+u;const E=n.decode(t.slice(_,_+h));_=_+h;const M=t.slice(_,t.byteLength),I=o===this.JSON_ENCODING?JSON.parse(n.decode(M)):M,z={type:this.BROADCAST_EVENT,event:P,payload:I};return h>0&&(z.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:T,event:this.BROADCAST_EVENT,payload:z}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class bB{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var un;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(un||(un={}));const rD=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((u,h)=>(u[h]=Gae(h,e,t,a),u),{}):{}},Gae=(e,t,r,n)=>{const a=t.find(o=>o.name===e),u=a==null?void 0:a.type,h=r[e];return u&&!n.includes(u)?wB(u,h):gk(h)},wB=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Yae(t,r)}switch(e){case un.bool:return Hae(t);case un.float4:case un.float8:case un.int2:case un.int4:case un.int8:case un.numeric:case un.oid:return Zae(t);case un.json:case un.jsonb:return Kae(t);case un.timestamp:return Qae(t);case un.abstime:case un.date:case un.daterange:case un.int4range:case un.int8range:case un.money:case un.reltime:case un.text:case un.time:case un.timestamptz:case un.timetz:case un.tsrange:case un.tstzrange:return gk(t);default:return gk(t)}},gk=e=>e,Hae=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Zae=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Kae=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Yae=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let u;const h=e.slice(1,r);try{u=JSON.parse("["+h+"]")}catch{u=h?h.split(","):[]}return u.map(o=>wB(t,o))}return e},Qae=e=>typeof e=="string"?e.replace(" ","T"):e,SB=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class sS{constructor(t,r,n={},a=fk){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nD;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nD||(nD={}));class gy{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:u,onLeave:h,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gy.syncState(this.state,a,u,h),this.pendingDiffs.forEach(_=>{this.state=gy.syncDiff(this.state,_,u,h)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},a=>{const{onJoin:u,onLeave:h,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=gy.syncDiff(this.state,a,u,h),o())}),this.onJoin((a,u,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:u,newPresences:h})}),this.onLeave((a,u,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:u,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const u=this.cloneDeep(t),h=this.transformState(r),o={},_={};return this.map(u,(T,P)=>{h[T]||(_[T]=P)}),this.map(h,(T,P)=>{const E=u[T];if(E){const M=P.map(D=>D.presence_ref),I=E.map(D=>D.presence_ref),z=P.filter(D=>I.indexOf(D.presence_ref)<0),F=E.filter(D=>M.indexOf(D.presence_ref)<0);z.length>0&&(o[T]=z),F.length>0&&(_[T]=F)}else o[T]=P}),this.syncDiff(u,{joins:o,leaves:_},n,a)}static syncDiff(t,r,n,a){const{joins:u,leaves:h}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(u,(o,_)=>{var T;const P=(T=t[o])!==null&&T!==void 0?T:[];if(t[o]=this.cloneDeep(_),P.length>0){const E=t[o].map(I=>I.presence_ref),M=P.filter(I=>E.indexOf(I.presence_ref)<0);t[o].unshift(...M)}n(o,P,_)}),this.map(h,(o,_)=>{let T=t[o];if(!T)return;const P=_.map(E=>E.presence_ref);T=T.filter(E=>P.indexOf(E.presence_ref)<0),t[o]=T,a(o,T,_),T.length===0&&delete t[o]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var iD;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(iD||(iD={}));var yy;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(yy||(yy={}));var Wl;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Wl||(Wl={}));class oE{constructor(t,r={config:{}},n){var a,u;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ci.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new sS(this,go.join,this.params,this.timeout),this.rejoinTimer=new bB(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ci.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(h=>h.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ci.closed,this.socket._remove(this)}),this._onError(h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",h=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,h),this.state=Ci.errored,this.rejoinTimer.scheduleTimeout())}),this._on(go.reply,{},(h,o)=>{this._trigger(this._replyEventName(o),h)}),this.presence=new gy(this),this.broadcastEndpointURL=SB(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,u;if(this.socket.isConnected()||this.socket.connect(),this.state==Ci.closed){const{config:{broadcast:h,presence:o,private:_}}=this.params,T=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(I=>I.filter))!==null&&a!==void 0?a:[],P=!!this.bindings[yy.PRESENCE]&&this.bindings[yy.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,E={},M={broadcast:h,presence:Object.assign(Object.assign({},o),{enabled:P}),postgres_changes:T,private:_};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(I=>t==null?void 0:t(Wl.CHANNEL_ERROR,I)),this._onClose(()=>t==null?void 0:t(Wl.CLOSED)),this.updateJoinPayload(Object.assign({config:M},E)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:I})=>{var z;if(this.socket.setAuth(),I===void 0){t==null||t(Wl.SUBSCRIBED);return}else{const F=this.bindings.postgres_changes,D=(z=F==null?void 0:F.length)!==null&&z!==void 0?z:0,q=[];for(let $=0;$<D;$++){const W=F[$],{filter:{event:te,schema:se,table:he,filter:pe}}=W,xe=I&&I[$];if(xe&&xe.event===te&&xe.schema===se&&xe.table===he&&xe.filter===pe)q.push(Object.assign(Object.assign({},W),{id:xe.id}));else{this.unsubscribe(),this.state=Ci.errored,t==null||t(Wl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,t&&t(Wl.SUBSCRIBED);return}}).receive("error",I=>{this.state=Ci.errored,t==null||t(Wl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(I).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Wl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ci.joined&&t===yy.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const h={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},o=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(o.status===202)return{success:!0};let _=o.statusText;try{const T=await o.json();_=T.error||T.message||_}catch{}return Promise.reject(new Error(_))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:h}=t,_={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:h,private:this.private}]})};try{const T=await this._fetchWithTimeout(this.broadcastEndpointURL,_,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=T.body)===null||a===void 0?void 0:a.cancel()),T.ok?"ok":"error"}catch(T){return T.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var h,o,_;const T=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((_=(o=(h=this.params)===null||h===void 0?void 0:h.config)===null||o===void 0?void 0:o.broadcast)===null||_===void 0)&&_.ack)&&u("ok"),T.receive("ok",()=>u("ok")),T.receive("error",()=>u("error")),T.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ci.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(go.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new sS(this,go.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ci.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,u=setTimeout(()=>a.abort(),n),h=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(u),h}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new sS(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>qae){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,u;const h=t.toLocaleLowerCase(),{close:o,error:_,leave:T,join:P}=go;if(n&&[o,_,T,P].indexOf(h)>=0&&n!==this._joinRef())return;let M=this._onMessage(h,r,n);if(r&&!M)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(I=>{var z,F,D;return((z=I.filter)===null||z===void 0?void 0:z.event)==="*"||((D=(F=I.filter)===null||F===void 0?void 0:F.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===h}).map(I=>I.callback(M,n)):(u=this.bindings[h])===null||u===void 0||u.filter(I=>{var z,F,D,q,$,W;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const te=I.id,se=(z=I.filter)===null||z===void 0?void 0:z.event;return te&&((F=r.ids)===null||F===void 0?void 0:F.includes(te))&&(se==="*"||(se==null?void 0:se.toLocaleLowerCase())===((D=r.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const te=($=(q=I==null?void 0:I.filter)===null||q===void 0?void 0:q.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return te==="*"||te===((W=r==null?void 0:r.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof M=="object"&&"ids"in M){const z=M.data,{schema:F,table:D,commit_timestamp:q,type:$,errors:W}=z;M=Object.assign(Object.assign({},{schema:F,table:D,commit_timestamp:q,eventType:$,new:{},old:{},errors:W}),this._getPayloadRecords(z))}I.callback(M,n)})}_isClosed(){return this.state===Ci.closed}_isJoined(){return this.state===Ci.joined}_isJoining(){return this.state===Ci.joining}_isLeaving(){return this.state===Ci.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),u={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(u):this.bindings[a]=[u],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var u;return!(((u=a.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===n&&oE.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(go.close,{},t)}_onError(t){this._on(go.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ci.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rD(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rD(t.columns,t.old_record)),r}}const aS=()=>{},Z0={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Xae=[1e3,2e3,5e3,1e4],Jae=1e4,eoe=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class toe{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=fk,this.transport=null,this.heartbeatIntervalMs=Z0.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aS,this.ref=0,this.reconnectTimer=null,this.vsn=tD,this.logger=aS,this.conn=null,this.sendBuffer=[],this.serializer=new Wae,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...u)=>a(...u):(...u)=>fetch(...u),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${mk.websocket}`,this.httpEndpoint=SB(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zae.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Rd.connecting:return Dd.Connecting;case Rd.open:return Dd.Open;case Rd.closing:return Dd.Closing;default:return Dd.Closed}}isConnected(){return this.connectionState()===Dd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(u=>u.topic===n);if(a)return a;{const u=new oE(`realtime:${t}`,r,this);return this.channels.push(u),u}}push(t){const{topic:r,event:n,payload:a,ref:u}=t,h=()=>{this.encode(t,o=>{var _;(_=this.conn)===null||_===void 0||_.send(o)})};this.log("push",`${r} ${n} (${u})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Uae,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Z0.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(T){this.log("error","error in heartbeat callback",T)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:u,ref:h}=r,o=h?`(${h})`:"",_=u.status||"";this.log("receive",`${_} ${n} ${a} ${o}`.trim(),u),this.channels.filter(T=>T._isMember(n)).forEach(T=>T._trigger(a,u,h)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Rd.open||this.conn.readyState===Rd.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(go.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([eoe],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:Vae};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(go.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new bB(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Z0.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,u,h,o,_,T,P,E,M,I;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:fk,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Z0.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(h=t==null?void 0:t.accessToken)!==null&&h!==void 0?h:null,this.heartbeatCallback=(o=t==null?void 0:t.heartbeatCallback)!==null&&o!==void 0?o:aS,this.vsn=(_=t==null?void 0:t.vsn)!==null&&_!==void 0?_:tD,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(T=t==null?void 0:t.reconnectAfterMs)!==null&&T!==void 0?T:z=>Xae[z-1]||Jae,this.vsn){case _B:this.encode=(P=t==null?void 0:t.encode)!==null&&P!==void 0?P:(z,F)=>F(JSON.stringify(z)),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:(z,F)=>F(JSON.parse(z));break;case $ae:this.encode=(M=t==null?void 0:t.encode)!==null&&M!==void 0?M:this.serializer.encode.bind(this.serializer),this.decode=(I=t==null?void 0:t.decode)!==null&&I!==void 0?I:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class lE extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function En(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class roe extends lE{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class yk extends lE{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const cE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),noe=()=>Response,xk=e=>{if(Array.isArray(e))return e.map(r=>xk(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[a]=xk(n)}),t},ioe=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},oS=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},soe=(e,t,r)=>Ut(void 0,void 0,void 0,function*(){const n=yield noe();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const u=e.status||500,h=(a==null?void 0:a.statusCode)||u+"";t(new roe(oS(a),u,h))}).catch(a=>{t(new yk(oS(a),a))}):t(new yk(oS(e),e))}),aoe=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(ioe(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function jx(e,t,r,n,a,u){return Ut(this,void 0,void 0,function*(){return new Promise((h,o)=>{e(r,aoe(t,n,a,u)).then(_=>{if(!_.ok)throw _;return n!=null&&n.noResolveJson?_:_.json()}).then(_=>h(_)).catch(_=>soe(_,o,n))})})}function Xy(e,t,r,n){return Ut(this,void 0,void 0,function*(){return jx(e,"GET",t,r,n)})}function ho(e,t,r,n,a){return Ut(this,void 0,void 0,function*(){return jx(e,"POST",t,n,a,r)})}function vk(e,t,r,n,a){return Ut(this,void 0,void 0,function*(){return jx(e,"PUT",t,n,a,r)})}function ooe(e,t,r,n){return Ut(this,void 0,void 0,function*(){return jx(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function uE(e,t,r,n,a){return Ut(this,void 0,void 0,function*(){return jx(e,"DELETE",t,n,a,r)})}class loe{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}var TB;class coe{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[TB]="BlobDownloadBuilder",this.promise=null}asStream(){return new loe(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}TB=Symbol.toStringTag;const uoe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sD={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class doe{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=cE(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Ut(this,void 0,void 0,function*(){try{let u;const h=Object.assign(Object.assign({},sD),a);let o=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(h.upsert)});const _=h.metadata;typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),_&&u.append("metadata",this.encodeMetadata(_)),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.has("cacheControl")||u.append("cacheControl",h.cacheControl),_&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(_))):(u=n,o["cache-control"]=`max-age=${h.cacheControl}`,o["content-type"]=h.contentType,_&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(_))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!h.duplex&&(h.duplex="half")),a!=null&&a.headers&&(o=Object.assign(Object.assign({},o),a.headers));const T=this._removeEmptyFolders(r),P=this._getFinalPath(T),E=yield(t=="PUT"?vk:ho)(this.fetch,`${this.url}/object/${P}`,u,Object.assign({headers:o},h!=null&&h.duplex?{duplex:h.duplex}:{}));return{data:{path:T,id:E.Id,fullPath:E.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(En(u))return{data:null,error:u};throw u}})}upload(t,r,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ut(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(t),h=this._getFinalPath(u),o=new URL(this.url+`/object/upload/sign/${h}`);o.searchParams.set("token",r);try{let _;const T=Object.assign({upsert:sD.upsert},a),P=Object.assign(Object.assign({},this.headers),{"x-upsert":String(T.upsert)});typeof Blob<"u"&&n instanceof Blob?(_=new FormData,_.append("cacheControl",T.cacheControl),_.append("",n)):typeof FormData<"u"&&n instanceof FormData?(_=n,_.append("cacheControl",T.cacheControl)):(_=n,P["cache-control"]=`max-age=${T.cacheControl}`,P["content-type"]=T.contentType);const E=yield vk(this.fetch,o.toString(),_,{headers:P});return{data:{path:u,fullPath:E.Key},error:null}}catch(_){if(this.shouldThrowOnError)throw _;if(En(_))return{data:null,error:_};throw _}})}createSignedUploadUrl(t,r){return Ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const u=yield ho(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),h=new URL(this.url+u.url),o=h.searchParams.get("token");if(!o)throw new lE("No token returned by API");return{data:{signedUrl:h.toString(),path:t,token:o},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ut(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ut(this,void 0,void 0,function*(){try{return{data:{path:(yield ho(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ut(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),u=yield ho(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const h=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${h}`)},{data:u,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ut(this,void 0,void 0,function*(){try{const a=yield ho(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${u}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),h=u?`?${u}`:"",o=this._getFinalPath(t),_=()=>Xy(this.fetch,`${this.url}/${a}/${o}${h}`,{headers:this.headers,noResolveJson:!0});return new coe(_,this.shouldThrowOnError)}info(t){return Ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Xy(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:xk(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}exists(t){return Ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ooe(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n)&&n instanceof yk){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],u=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";u!==""&&a.push(u);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",_=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});_!==""&&a.push(_);let T=a.join("&");return T!==""&&(T=`?${T}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${T}`)}}}remove(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield uE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ut(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},uoe),r),{prefix:t||""});return{data:yield ho(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}listV2(t,r){return Ut(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ho(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const kB="2.84.0",CB={"X-Client-Info":`storage-js/${kB}`};class hoe{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const u=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CB),r),this.fetch=cE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ut(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Xy(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}getBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}createBucket(t){return Ut(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ho(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:yield vk(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield uE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class poe{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},CB),r),this.fetch=cE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ho(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ut(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Xy(this.fetch,a,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield uE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}}const dE={"X-Client-Info":`storage-js/${kB}`,"Content-Type":"application/json"};class PB extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function da(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class lS extends PB{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class foe extends PB{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var aD;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(aD||(aD={}));const hE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),moe=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},oD=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),goe=(e,t,r)=>Ut(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,u=e;if(typeof u.json=="function")u.json().then(h=>{const o=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||a+"";t(new lS(oD(h),a,o))}).catch(()=>{const h=a+"",o=u.statusText||`HTTP ${a} error`;t(new lS(o,a,h))});else{const h=a+"",o=u.statusText||`HTTP ${a} error`;t(new lS(o,a,h))}}else t(new foe(oD(e),e))}),yoe=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(moe(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function xoe(e,t,r,n,a,u){return Ut(this,void 0,void 0,function*(){return new Promise((h,o)=>{e(r,yoe(t,n,a,u)).then(_=>{if(!_.ok)throw _;if(n!=null&&n.noResolveJson)return _;const T=_.headers.get("content-type");return!T||!T.includes("application/json")?{}:_.json()}).then(_=>h(_)).catch(_=>goe(_,o,n))})})}function ha(e,t,r,n,a){return Ut(this,void 0,void 0,function*(){return xoe(e,"POST",t,n,a,r)})}class voe{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dE),r),this.fetch=hE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ha(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(da(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ha(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(da(n))return{data:null,error:n};throw n}})}}class _oe{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dE),r),this.fetch=hE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ha(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}getVectors(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}listVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ha(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ha(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}}class boe{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dE),r),this.fetch=hE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ha(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}getBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ha(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}listBuckets(){return Ut(this,arguments,void 0,function*(t={}){try{return{data:yield ha(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ha(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(da(r))return{data:null,error:r};throw r}})}}class woe extends boe{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new Soe(this.url,this.headers,t,this.fetch)}}class Soe extends voe{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ut(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ut(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ut(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ut(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new Toe(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class Toe extends _oe{constructor(t,r,n,a,u){super(t,r,u),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ut(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ut(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ut(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ut(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ut(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class koe extends hoe{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new doe(this.url,this.headers,t,this.fetch)}get vectors(){return new woe(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new poe(this.url+"/iceberg",this.headers,this.fetch)}}const Coe="2.84.0";let Hg="";typeof Deno<"u"?Hg="deno":typeof document<"u"?Hg="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hg="react-native":Hg="node";const Poe={"X-Client-Info":`supabase-js-${Hg}/${Coe}`},Eoe={headers:Poe},joe={schema:"public"},Aoe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Moe={},Noe=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Ioe=()=>Headers,Roe=(e,t,r)=>{const n=Noe(r),a=Ioe();return async(u,h)=>{var o;const _=(o=await t())!==null&&o!==void 0?o:e;let T=new a(h==null?void 0:h.headers);return T.has("apikey")||T.set("apikey",e),T.has("Authorization")||T.set("Authorization",`Bearer ${_}`),n(u,Object.assign(Object.assign({},h),{headers:T}))}};function Doe(e){return e.endsWith("/")?e:e+"/"}function Ooe(e,t){var r,n;const{db:a,auth:u,realtime:h,global:o}=e,{db:_,auth:T,realtime:P,global:E}=t,M={db:Object.assign(Object.assign({},_),a),auth:Object.assign(Object.assign({},T),u),realtime:Object.assign(Object.assign({},P),h),storage:{},global:Object.assign(Object.assign(Object.assign({},E),o),{headers:Object.assign(Object.assign({},(r=E==null?void 0:E.headers)!==null&&r!==void 0?r:{}),(n=o==null?void 0:o.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?M.accessToken=e.accessToken:delete M.accessToken,M}function Loe(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Doe(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const EB="2.84.0",Ip=30*1e3,_k=3,cS=_k*Ip,Foe="http://localhost:9999",zoe="supabase.auth.token",Boe={"X-Client-Info":`gotrue-js/${EB}`},bk="X-Supabase-Api-Version",jB={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Voe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,$oe=10*60*1e3;class Jy extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function qt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Uoe extends Jy{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function qoe(e){return qt(e)&&e.name==="AuthApiError"}class Od extends Jy{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ou extends Jy{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class la extends Ou{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Woe(e){return qt(e)&&e.name==="AuthSessionMissingError"}class Cp extends Ou{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class K0 extends Ou{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Y0 extends Ou{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Goe(e){return qt(e)&&e.name==="AuthImplicitGrantRedirectError"}class lD extends Ou{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class wk extends Ou{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function uS(e){return qt(e)&&e.name==="AuthRetryableFetchError"}class cD extends Ou{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Sk extends Ou{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Sb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),uD=` 	
\r=`.split(""),Hoe=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<uD.length;t+=1)e[uD[t].charCodeAt(0)]=-2;for(let t=0;t<Sb.length;t+=1)e[Sb[t].charCodeAt(0)]=t;return e})();function dD(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sb[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Sb[n]),t.queuedBits-=6}}function AB(e,t,r){const n=Hoe[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hD(e){const t=[],r=h=>{t.push(String.fromCodePoint(h))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},u=h=>{Yoe(h,n,r)};for(let h=0;h<e.length;h+=1)AB(e.charCodeAt(h),a,u);return t.join("")}function Zoe(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Koe(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}Zoe(n,t)}}function Yoe(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function uf(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)AB(e.charCodeAt(a),r,n);return new Uint8Array(t)}function Qoe(e){const t=[];return Koe(e,r=>t.push(r)),new Uint8Array(t)}function Ud(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>dD(a,r,n)),dD(null,r,n),t.join("")}function Xoe(e){return Math.round(Date.now()/1e3)+e}function Joe(){return Symbol("auth-callback")}const Ji=()=>typeof window<"u"&&typeof document<"u",Cd={tested:!1,writable:!1},MB=()=>{if(!Ji())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cd.tested)return Cd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Cd.tested=!0,Cd.writable=!0}catch{Cd.tested=!0,Cd.writable=!1}return Cd.writable};function ele(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,u)=>{t[u]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const NB=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),tle=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Rp=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Vc=async(e,t)=>{await e.removeItem(t)};class xw{constructor(){this.promise=new xw.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}xw.promiseConstructor=Promise;function dS(e){const t=e.split(".");if(t.length!==3)throw new Sk("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Voe.test(t[n]))throw new Sk("JWT not in base64url format");return{header:JSON.parse(hD(t[0])),payload:JSON.parse(hD(t[1])),signature:uf(t[2]),raw:{header:t[0],payload:t[1]}}}async function rle(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function nle(e,t){return new Promise((n,a)=>{(async()=>{for(let u=0;u<1/0;u++)try{const h=await e(u);if(!t(u,null,h)){n(h);return}}catch(h){if(!t(u,h)){a(h);return}}})()})}function ile(e){return("0"+e.toString(16)).substr(-2)}function sle(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let u=0;u<56;u++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,ile).join("")}async function ale(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(u=>String.fromCharCode(u)).join("")}async function ole(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ale(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Pp(e,t,r=!1){const n=sle();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Rp(e,`${t}-code-verifier`,a);const u=await ole(n);return[u,n===u?"plain":"s256"]}const lle=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cle(e){const t=e.headers.get(bk);if(!t||!t.match(lle))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function ule(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function dle(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hle=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ep(e){if(!hle.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hS(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ple(e,t){return new Proxy(e,{get:(r,n,a)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const u=n.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,a)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,a)}})}function pD(e){return JSON.parse(JSON.stringify(e))}const Nd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),fle=[502,503,504];async function fD(e){var t;if(!tle(e))throw new wk(Nd(e),0);if(fle.includes(e.status))throw new wk(Nd(e),e.status);let r;try{r=await e.json()}catch(u){throw new Od(Nd(u),u)}let n;const a=cle(e);if(a&&a.getTime()>=jB["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new cD(Nd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new la}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((u,h)=>u&&typeof h=="string",!0))throw new cD(Nd(r),e.status,r.weak_password.reasons);throw new Uoe(Nd(r),e.status||500,n)}const mle=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Xt(e,t,r,n){var a;const u=Object.assign({},n==null?void 0:n.headers);u[bk]||(u[bk]=jB["2024-01-01"].name),n!=null&&n.jwt&&(u.Authorization=`Bearer ${n.jwt}`);const h=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(h.redirect_to=n.redirectTo);const o=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",_=await gle(e,t,r+o,{headers:u,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(_):{data:Object.assign({},_),error:null}}async function gle(e,t,r,n,a,u){const h=mle(t,n,a,u);let o;try{o=await e(r,Object.assign({},h))}catch(_){throw console.error(_),new wk(Nd(_),0)}if(o.ok||await fD(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(_){await fD(_)}}function oo(e){var t;let r=null;vle(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Xoe(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function mD(e){const t=oo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xc(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function yle(e){return{data:e,error:null}}function xle(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:u}=e,h=Iu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:u},_=Object.assign({},h);return{data:{properties:o,user:_},error:null}}function gD(e){return e}function vle(e){return e.access_token&&e.refresh_token&&e.expires_in}const pS=["global","local","others"];class _le{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=NB(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=pS[0]){if(pS.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pS.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xc})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=Iu(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:xle,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xc})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,u,h,o,_;try{const T={nextPage:null,lastPage:0,total:0},P=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&u!==void 0?u:""},xform:gD});if(P.error)throw P.error;const E=await P.json(),M=(h=P.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(_=(o=P.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&_!==void 0?_:[];return I.length>0&&(I.forEach(z=>{const F=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(z.split(";")[1].split("=")[1]);T[`${D}Page`]=F}),T.total=parseInt(M)),{data:Object.assign(Object.assign({},E),T),error:null}}catch(T){if(qt(T))return{data:{users:[]},error:T};throw T}}async getUserById(t){Ep(t);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xc})}catch(r){if(qt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ep(t);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Xc})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ep(t);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xc})}catch(n){if(qt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ep(t.userId);try{const{data:r,error:n}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(qt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ep(t.userId),Ep(t.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,u,h,o,_;try{const T={nextPage:null,lastPage:0,total:0},P=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(u=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&u!==void 0?u:""},xform:gD});if(P.error)throw P.error;const E=await P.json(),M=(h=P.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(_=(o=P.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&_!==void 0?_:[];return I.length>0&&(I.forEach(z=>{const F=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(z.split(";")[1].split("=")[1]);T[`${D}Page`]=F}),T.total=parseInt(M)),{data:Object.assign(Object.assign({},E),T),error:null}}catch(T){if(qt(T))return{data:{clients:[]},error:T};throw T}}async _createOAuthClient(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qt(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Xt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(qt(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qt(r))return{data:null,error:r};throw r}}}function yD(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const jp={debug:!!(globalThis&&MB()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class IB extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class ble extends IB{}async function wle(e,t,r){jp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),jp.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){jp.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{jp.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw jp.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ble(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(jp.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Sle(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function RB(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Tle(e){return parseInt(e,16)}function kle(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Cle(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:u=new Date,nonce:h,notBefore:o,requestId:_,resources:T,scheme:P,uri:E,version:M}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(h&&h.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${h}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(M!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${M}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const I=RB(e.address),z=P?`${P}://${n}`:n,F=e.statement?`${e.statement}
`:"",D=`${z} wants you to sign in with your Ethereum account:
${I}

${F}`;let q=`URI: ${E}
Version: ${M}
Chain ID: ${r}${h?`
Nonce: ${h}`:""}
Issued At: ${u.toISOString()}`;if(a&&(q+=`
Expiration Time: ${a.toISOString()}`),o&&(q+=`
Not Before: ${o.toISOString()}`),_&&(q+=`
Request ID: ${_}`),T){let $=`
Resources:`;for(const W of T){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);$+=`
- ${W}`}q+=$}return`${D}
${q}`}class hi extends Error{constructor({message:t,code:r,cause:n,name:a}){var u;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(u=a??(n instanceof Error?n.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=r}}class Tb extends hi{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Ple({error:e,options:t}){var r,n,a;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new hi({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=u.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new hi({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=u.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new hi({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new hi({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new hi({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new hi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return u.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new hi({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new hi({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const h=window.location.hostname;if(DB(h)){if(u.rp.id!==h)return new hi({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new hi({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new hi({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ele({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new hi({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new hi({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(DB(n)){if(r.rpId!==n)return new hi({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new hi({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new hi({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new hi({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class jle{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Ale=new jle;function Mle(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=Iu(e,["challenge","user","excludeCredentials"]),u=uf(t).buffer,h=Object.assign(Object.assign({},r),{id:uf(r.id).buffer}),o=Object.assign(Object.assign({},a),{challenge:u,user:h});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let _=0;_<n.length;_++){const T=n[_];o.excludeCredentials[_]=Object.assign(Object.assign({},T),{id:uf(T.id).buffer,type:T.type||"public-key",transports:T.transports})}}return o}function Nle(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=Iu(e,["challenge","allowCredentials"]),a=uf(t).buffer,u=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){u.allowCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const o=r[h];u.allowCredentials[h]=Object.assign(Object.assign({},o),{id:uf(o.id).buffer,type:o.type||"public-key",transports:o.transports})}}return u}function Ile(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ud(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ud(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Rle(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ud(new Uint8Array(a.authenticatorData)),clientDataJSON:Ud(new Uint8Array(a.clientDataJSON)),signature:Ud(new Uint8Array(a.signature)),userHandle:a.userHandle?Ud(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function DB(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function xD(){var e,t;return!!(Ji()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Dle(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tb("Browser returned unexpected credential type",t)}:{data:null,error:new Tb("Empty credential response",t)}}catch(t){return{data:null,error:Ple({error:t,options:e})}}}async function Ole(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Tb("Browser returned unexpected credential type",t)}:{data:null,error:new Tb("Empty credential response",t)}}catch(t){return{data:null,error:Ele({error:t,options:e})}}}const Lle={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Fle={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kb(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const u in a){const h=a[u];if(h!==void 0)if(Array.isArray(h))n[u]=h;else if(r(h))n[u]=h;else if(t(h)){const o=n[u];t(o)?n[u]=kb(o,h):n[u]=kb(h)}else n[u]=h}return n}function zle(e,t){return kb(Lle,e,t||{})}function Ble(e,t){return kb(Fle,e,t||{})}class Vle{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},u){try{const{data:h,error:o}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!h)return{data:null,error:o};const _=a??Ale.createNewAbortSignal();if(h.webauthn.type==="create"){const{user:T}=h.webauthn.credential_options.publicKey;T.name||(T.name=`${T.id}:${n}`),T.displayName||(T.displayName=T.name)}switch(h.webauthn.type){case"create":{const T=zle(h.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:P,error:E}=await Dle({publicKey:T,signal:_});return P?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:P}},error:null}:{data:null,error:E}}case"request":{const T=Ble(h.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:P,error:E}=await Ole(Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:T,signal:_}));return P?{data:{factorId:t,challengeId:h.id,webauthn:{type:h.webauthn.type,credential_response:P}},error:null}:{data:null,error:E}}}}catch(h){return qt(h)?{data:null,error:h}:{data:null,error:new Od("Unexpected error in challenge",h)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},u){if(!r)return{data:null,error:new Jy("rpId is required for WebAuthn authentication")};try{if(!xD())return{data:null,error:new Od("Browser does not support WebAuthn",null)};const{data:h,error:o}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:u});if(!h)return{data:null,error:o};const{webauthn:_}=h;return this._verify({factorId:t,challengeId:h.challengeId,webauthn:{type:_.type,rpId:r,rpOrigins:n,credential_response:_.credential_response}})}catch(h){return qt(h)?{data:null,error:h}:{data:null,error:new Od("Unexpected error in authenticate",h)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},u){if(!r)return{data:null,error:new Jy("rpId is required for WebAuthn registration")};try{if(!xD())return{data:null,error:new Od("Browser does not support WebAuthn",null)};const{data:h,error:o}=await this._enroll({friendlyName:t});if(!h)return await this.client.mfa.listFactors().then(P=>{var E;return(E=P.data)===null||E===void 0?void 0:E.all.find(M=>M.factor_type==="webauthn"&&M.friendly_name===t&&M.status!=="unverified")}).then(P=>P?this.client.mfa.unenroll({factorId:P==null?void 0:P.id}):void 0),{data:null,error:o};const{data:_,error:T}=await this._challenge({factorId:h.id,friendlyName:h.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:u});return _?this._verify({factorId:h.id,challengeId:_.challengeId,webauthn:{rpId:r,rpOrigins:n,type:_.webauthn.type,credential_response:_.webauthn.credential_response}}):{data:null,error:T}}catch(h){return qt(h)?{data:null,error:h}:{data:null,error:new Od("Unexpected error in register",h)}}}}Sle();const $le={url:Foe,storageKey:zoe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Boe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function vD(e,t,r){return await r()}const Ap={};class ex{get jwks(){var t,r;return(r=(t=Ap[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ap[this.storageKey]=Object.assign(Object.assign({},Ap[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ap[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ap[this.storageKey]=Object.assign(Object.assign({},Ap[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},$le),t);if(this.storageKey=u.storageKey,this.instanceID=(r=ex.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ex.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Ji()){const h=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(h),this.logDebugMessages&&console.trace(h)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new _le({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=NB(u.fetch),this.lock=u.lock||vD,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:Ji()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=wle:this.lock=vD,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Vle(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:MB()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=yD(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=yD(this.memoryStorage)),Ji()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(h){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",h)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async h=>{this._debug("received broadcast notification from other tab or client",h),await this._notifyAllSubscribers(h.data.event,h.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${EB}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Ji()&&(r=ele(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Ji()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:u}=await this._getSessionFromURL(r,n);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Goe(u)){const _=(t=u.details)===null||t===void 0?void 0:t.code;if(_==="identity_already_exists"||_==="identity_not_found"||_==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:h,redirectType:o}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",o),await this._saveSession(h),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qt(r)?this._returnResult({error:r}):this._returnResult({error:new Od("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const u=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:oo}),{data:h,error:o}=u;if(o||!h)return this._returnResult({data:{user:null,session:null},error:o});const _=h.session,T=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:T,session:_},error:null})}catch(u){if(qt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var r,n,a;try{let u;if("email"in t){const{email:P,password:E,options:M}=t;let I=null,z=null;this.flowType==="pkce"&&([I,z]=await Pp(this.storage,this.storageKey)),u=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:M==null?void 0:M.emailRedirectTo,body:{email:P,password:E,data:(r=M==null?void 0:M.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:M==null?void 0:M.captchaToken},code_challenge:I,code_challenge_method:z},xform:oo})}else if("phone"in t){const{phone:P,password:E,options:M}=t;u=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:P,password:E,data:(n=M==null?void 0:M.data)!==null&&n!==void 0?n:{},channel:(a=M==null?void 0:M.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:M==null?void 0:M.captchaToken}},xform:oo})}else throw new K0("You must provide either an email or phone number and a password");const{data:h,error:o}=u;if(o||!h)return this._returnResult({data:{user:null,session:null},error:o});const _=h.session,T=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",_)),this._returnResult({data:{user:T,session:_},error:null})}catch(u){if(qt(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let r;if("email"in t){const{email:u,password:h,options:o}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:h,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:mD})}else if("phone"in t){const{phone:u,password:h,options:o}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:h,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:mD})}else throw new K0("You must provide either an email or phone number and a password");const{data:n,error:a}=r;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!n||!n.session||!n.user){const u=new Cp;return this._returnResult({data:{user:null,session:null},error:u})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,a,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,u,h,o,_,T,P,E,M;let I,z;if("message"in t)I=t.message,z=t.signature;else{const{chain:F,wallet:D,statement:q,options:$}=t;let W;if(Ji())if(typeof D=="object")W=D;else{const Re=window;if("ethereum"in Re&&typeof Re.ethereum=="object"&&"request"in Re.ethereum&&typeof Re.ethereum.request=="function")W=Re.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!($!=null&&$.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=D}const te=new URL((r=$==null?void 0:$.url)!==null&&r!==void 0?r:window.location.href),se=await W.request({method:"eth_requestAccounts"}).then(Re=>Re).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!se||se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=RB(se[0]);let pe=(n=$==null?void 0:$.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!pe){const Re=await W.request({method:"eth_chainId"});pe=Tle(Re)}const xe={domain:te.host,address:he,statement:q,uri:te.href,version:"1",chainId:pe,nonce:(a=$==null?void 0:$.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(h=(u=$==null?void 0:$.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&h!==void 0?h:new Date,expirationTime:(o=$==null?void 0:$.signInWithEthereum)===null||o===void 0?void 0:o.expirationTime,notBefore:(_=$==null?void 0:$.signInWithEthereum)===null||_===void 0?void 0:_.notBefore,requestId:(T=$==null?void 0:$.signInWithEthereum)===null||T===void 0?void 0:T.requestId,resources:(P=$==null?void 0:$.signInWithEthereum)===null||P===void 0?void 0:P.resources};I=Cle(xe),z=await W.request({method:"personal_sign",params:[kle(I),he]})}try{const{data:F,error:D}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:I,signature:z},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(M=t.options)===null||M===void 0?void 0:M.captchaToken}}:null),xform:oo});if(D)throw D;if(!F||!F.session||!F.user){const q=new Cp;return this._returnResult({data:{user:null,session:null},error:q})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:D})}catch(F){if(qt(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async signInWithSolana(t){var r,n,a,u,h,o,_,T,P,E,M,I;let z,F;if("message"in t)z=t.message,F=t.signature;else{const{chain:D,wallet:q,statement:$,options:W}=t;let te;if(Ji())if(typeof q=="object")te=q;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))te=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(W!=null&&W.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=q}const se=new URL((r=W==null?void 0:W.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in te&&te.signIn){const he=await te.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W==null?void 0:W.signInWithSolana),{version:"1",domain:se.host,uri:se.href}),$?{statement:$}:null));let pe;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")pe=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)pe=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in pe&&"signature"in pe&&(typeof pe.signedMessage=="string"||pe.signedMessage instanceof Uint8Array)&&pe.signature instanceof Uint8Array)z=typeof pe.signedMessage=="string"?pe.signedMessage:new TextDecoder().decode(pe.signedMessage),F=pe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in te)||typeof te.signMessage!="function"||!("publicKey"in te)||typeof te!="object"||!te.publicKey||!("toBase58"in te.publicKey)||typeof te.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${se.host} wants you to sign in with your Solana account:`,te.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${se.href}`,`Issued At: ${(a=(n=W==null?void 0:W.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((u=W==null?void 0:W.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((h=W==null?void 0:W.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((o=W==null?void 0:W.signInWithSolana)===null||o===void 0)&&o.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((_=W==null?void 0:W.signInWithSolana)===null||_===void 0)&&_.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((T=W==null?void 0:W.signInWithSolana)===null||T===void 0)&&T.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((E=(P=W==null?void 0:W.signInWithSolana)===null||P===void 0?void 0:P.resources)===null||E===void 0)&&E.length?["Resources",...W.signInWithSolana.resources.map(pe=>`- ${pe}`)]:[]].join(`
`);const he=await te.signMessage(new TextEncoder().encode(z),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=he}}try{const{data:D,error:q}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:Ud(F)},!((M=t.options)===null||M===void 0)&&M.captchaToken?{gotrue_meta_security:{captcha_token:(I=t.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:oo});if(q)throw q;if(!D||!D.session||!D.user){const $=new Cp;return this._returnResult({data:{user:null,session:null},error:$})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:q})}catch(D){if(qt(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(t){const r=await Pd(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:u,error:h}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:oo});if(await Vc(this.storage,`${this.storageKey}-code-verifier`),h)throw h;if(!u||!u.session||!u.user){const o=new Cp;return this._returnResult({data:{user:null,session:null,redirectType:null},error:o})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:a??null}),error:h})}catch(u){if(qt(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:u,nonce:h}=t,o=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:u,nonce:h,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:oo}),{data:_,error:T}=o;if(T)return this._returnResult({data:{user:null,session:null},error:T});if(!_||!_.session||!_.user){const P=new Cp;return this._returnResult({data:{user:null,session:null},error:P})}return _.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),this._returnResult({data:_,error:T})}catch(r){if(qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,a,u,h;try{if("email"in t){const{email:o,options:_}=t;let T=null,P=null;this.flowType==="pkce"&&([T,P]=await Pp(this.storage,this.storageKey));const{error:E}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=_==null?void 0:_.data)!==null&&r!==void 0?r:{},create_user:(n=_==null?void 0:_.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:T,code_challenge_method:P},redirectTo:_==null?void 0:_.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in t){const{phone:o,options:_}=t,{data:T,error:P}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(a=_==null?void 0:_.data)!==null&&a!==void 0?a:{},create_user:(u=_==null?void 0:_.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},channel:(h=_==null?void 0:_.channel)!==null&&h!==void 0?h:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:T==null?void 0:T.message_id},error:P})}throw new K0("You must provide either an email or phone number.")}catch(o){if(qt(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async verifyOtp(t){var r,n;try{let a,u;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,u=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:h,error:o}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:a,xform:oo});if(o)throw o;if(!h)throw new Error("An error occurred on token verification.");const _=h.session,T=h.user;return _!=null&&_.access_token&&(await this._saveSession(_),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",_)),this._returnResult({data:{user:T,session:_},error:null})}catch(a){if(qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(t){var r,n,a,u,h;try{let o=null,_=null;this.flowType==="pkce"&&([o,_]=await Pp(this.storage,this.storageKey));const T=await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:_}),headers:this.headers,xform:yle});return!((u=T.data)===null||u===void 0)&&u.url&&Ji()&&!(!((h=t.options)===null||h===void 0)&&h.skipBrowserRedirect)&&window.location.assign(T.data.url),this._returnResult(T)}catch(o){if(qt(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new la;const{error:a}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(t){if(qt(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:u}=t,{error:h}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}else if("phone"in t){const{phone:n,type:a,options:u}=t,{data:h,error:o}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:o})}throw new K0("You must provide either an email or phone number and a type")}catch(r){if(qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<cS:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const h=await Pd(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=hS()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const h={value:this.suppressGetSessionWarning};t.user=ple(t.user,h),h.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:a,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xc}):await this._useSession(async r=>{var n,a,u;const{data:h,error:o}=r;if(o)throw o;return!(!((n=h.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new la}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0,xform:Xc})})}catch(r){if(qt(r))return Woe(r)&&(await this._removeSession(),await Vc(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:u}=n;if(u)throw u;if(!a.session)throw new la;const h=a.session;let o=null,_=null;this.flowType==="pkce"&&t.email!=null&&([o,_]=await Pp(this.storage,this.storageKey));const{data:T,error:P}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:o,code_challenge_method:_}),jwt:h.access_token,xform:Xc});if(P)throw P;return h.user=T.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),this._returnResult({data:{user:h.user},error:null})})}catch(n){if(qt(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new la;const r=Date.now()/1e3;let n=r,a=!0,u=null;const{payload:h}=dS(t.access_token);if(h.exp&&(n=h.exp,a=n<=r),a){const{data:o,error:_}=await this._callRefreshToken(t.refresh_token);if(_)return this._returnResult({data:{user:null,session:null},error:_});if(!o)return{data:{user:null,session:null},error:null};u=o}else{const{data:o,error:_}=await this._getUser(t.access_token);if(_)throw _;u={access_token:t.access_token,refresh_token:t.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(r){if(qt(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:h,error:o}=r;if(o)throw o;t=(n=h.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new la;const{data:a,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qt(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Ji())throw new Y0("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Y0(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new lD("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Y0("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new lD("No code detected.");const{data:$,error:W}=await this._exchangeCodeForSession(t.code);if(W)throw W;const te=new URL(window.location.href);return te.searchParams.delete("code"),window.history.replaceState(window.history.state,"",te.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:u,refresh_token:h,expires_in:o,expires_at:_,token_type:T}=t;if(!u||!o||!h||!T)throw new Y0("No session defined in URL");const P=Math.round(Date.now()/1e3),E=parseInt(o);let M=P+E;_&&(M=parseInt(_));const I=M-P;I*1e3<=Ip&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${E}s`);const z=M-E;P-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,M,P):P-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,M,P);const{data:F,error:D}=await this._getUser(u);if(D)throw D;const q={provider_token:n,provider_refresh_token:a,access_token:u,expires_in:E,expires_at:M,refresh_token:h,token_type:T,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:q,redirectType:t.type},error:null})}catch(n){if(qt(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:u}=r;if(u)return this._returnResult({error:u});const h=(n=a.session)===null||n===void 0?void 0:n.access_token;if(h){const{error:o}=await this.admin.signOut(h,t);if(o&&!(qoe(o)&&(o.status===404||o.status===401||o.status===403)))return this._returnResult({error:o})}return t!=="others"&&(await this._removeSession(),await Vc(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Joe(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:u},error:h}=r;if(h)throw h;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await Pp(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(u){if(qt(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async u=>{var h,o,_,T,P;const{data:E,error:M}=u;if(M)throw M;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(o=t.options)===null||o===void 0?void 0:o.scopes,queryParams:(_=t.options)===null||_===void 0?void 0:_.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",I,{headers:this.headers,jwt:(P=(T=E.session)===null||T===void 0?void 0:T.access_token)!==null&&P!==void 0?P:void 0})});if(a)throw a;return Ji()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(qt(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:u}}=r;if(a)throw a;const{options:h,provider:o,token:_,access_token:T,nonce:P}=t,E=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=u==null?void 0:u.access_token)!==null&&n!==void 0?n:void 0,body:{provider:o,id_token:_,access_token:T,nonce:P,link_identity:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:oo}),{data:M,error:I}=E;return I?this._returnResult({data:{user:null,session:null},error:I}):!M||!M.session||!M.user?this._returnResult({data:{user:null,session:null},error:new Cp}):(M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("USER_UPDATED",M.session)),this._returnResult({data:M,error:I}))}catch(a){if(qt(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:u,error:h}=r;if(h)throw h;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=u.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await nle(async a=>(a>0&&await rle(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:oo})),(a,u)=>{const h=200*Math.pow(2,a);return u&&uS(u)&&Date.now()+h-n<Ip})}catch(n){if(this._debug(r,"error",n),qt(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ji()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Pd(this.storage,this.storageKey);if(a&&this.userStorage){let h=await Pd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await Rp(this.userStorage,this.storageKey+"-user",h)),a.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:hS()}else if(a&&!a.user&&!a.user){const h=await Pd(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await Vc(this.storage,this.storageKey+"-user"),await Rp(this.storage,this.storageKey,a)):a.user=hS()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const u=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<cS;if(this._debug(n,`session has${u?"":" not"} expired with margin of ${cS}s`),u){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),uS(h)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:o}=await this._getUser(a.access_token);!o&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(n,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new la;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new xw;const{data:u,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!u.session)throw new la;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const o={data:u.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(u){if(this._debug(a,"error",u),qt(u)){const h={data:null,error:u};return uS(u)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(h),h}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(u),u}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const u=[],h=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(t,r)}catch(_){u.push(_)}});if(await Promise.all(h),u.length>0){for(let o=0;o<u.length;o+=1)console.error(u[o]);throw u[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Rp(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const u=pD(a);await Rp(this.storage,this.storageKey,u)}else{const a=pD(r);await Rp(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Vc(this.storage,this.storageKey),await Vc(this.storage,this.storageKey+"-code-verifier"),await Vc(this.storage,this.storageKey+"-user"),this.userStorage&&await Vc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ji()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ip);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Ip);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Ip}ms, refresh threshold is ${_k} ticks`),a<=_k&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof IB)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ji()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[u,h]=await Pp(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(o.toString())}if(n!=null&&n.queryParams){const u=new URLSearchParams(n.queryParams);a.push(u.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:u}=r;return u?this._returnResult({data:null,error:u}):await Xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:u,error:h}=r;if(h)return this._returnResult({data:null,error:h});const o=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:_,error:T}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=u==null?void 0:u.session)===null||n===void 0?void 0:n.access_token});return T?this._returnResult({data:null,error:T}):(t.factorType==="totp"&&_.type==="totp"&&(!((a=_==null?void 0:_.totp)===null||a===void 0)&&a.qr_code)&&(_.totp.qr_code=`data:image/svg+xml;utf-8,${_.totp.qr_code}`),this._returnResult({data:_,error:null}))})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Ile(t.webauthn.credential_response):Rle(t.webauthn.credential_response)})}:{code:t.code}),{data:o,error:_}=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:h,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return _?this._returnResult({data:null,error:_}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),this._returnResult({data:o,error:_}))})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:u}=r;if(u)return this._returnResult({data:null,error:u});const h=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(h.error)return h;const{data:o}=h;if(o.type!=="webauthn")return{data:o,error:null};switch(o.webauthn.type){case"create":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Mle(o.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},o),{webauthn:Object.assign(Object.assign({},o.webauthn),{credential_options:Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:Nle(o.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(u),u.status==="verified"&&a[u.factor_type].push(u);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=dS(n.access_token);let h=null;u.aal&&(h=u.aal);let o=h;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(P=>P.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(o="aal2");const T=u.amr||[];return{data:{currentLevel:h,nextLevel:o,currentAuthenticationMethods:T},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Xt(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new la})})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!a)return this._returnResult({data:null,error:new la});const h=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:o=>({data:o,error:null})});return h.data&&h.data.redirect_url&&Ji()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(n){if(qt(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:a},error:u}=n;if(u)return this._returnResult({data:null,error:u});if(!a)return this._returnResult({data:null,error:new la});const h=await Xt(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:o=>({data:o,error:null})});return h.data&&h.data.redirect_url&&Ji()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(h.data.redirect_url),h})}catch(n){if(qt(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await Xt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new la})})}catch(t){if(qt(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:a}=r;return a?this._returnResult({data:null,error:a}):n?await Xt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new la})})}catch(r){if(qt(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+$oe>a)return n;const{data:u,error:h}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=a,n=u.keys.find(o=>o.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:I,error:z}=await this.getSession();if(z||!I.session)return this._returnResult({data:null,error:z});n=I.session.access_token}const{header:a,payload:u,signature:h,raw:{header:o,payload:_}}=dS(n);r!=null&&r.allowExpired||ule(u.exp);const T=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!T){const{error:I}=await this.getUser(n);if(I)throw I;return{data:{claims:u,header:a,signature:h},error:null}}const P=dle(a.alg),E=await crypto.subtle.importKey("jwk",T,P,!0,["verify"]);if(!await crypto.subtle.verify(P,E,h,Qoe(`${o}.${_}`)))throw new Sk("Invalid JWT signature");return{data:{claims:u,header:a,signature:h},error:null}}catch(n){if(qt(n))return this._returnResult({data:null,error:n});throw n}}}ex.nextInstanceID={};const Ule=ex;class qle extends Ule{constructor(t){super(t)}}class Wle{constructor(t,r,n){var a,u,h;this.supabaseUrl=t,this.supabaseKey=r;const o=Loe(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const _=`sb-${o.hostname.split(".")[0]}-auth-token`,T={db:joe,realtime:Moe,auth:Object.assign(Object.assign({},Aoe),{storageKey:_}),global:Eoe},P=Ooe(n??{},T);this.storageKey=(a=P.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(u=P.global.headers)!==null&&u!==void 0?u:{},P.accessToken?(this.accessToken=P.accessToken,this.auth=new Proxy({},{get:(E,M)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(M)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=P.auth)!==null&&h!==void 0?h:{},this.headers,P.global.fetch),this.fetch=Roe(r,this._getAccessToken.bind(this),P.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},P.realtime)),this.accessToken&&this.accessToken().then(E=>this.realtime.setAuth(E)).catch(E=>console.warn("Failed to set initial Realtime auth token:",E)),this.rest=new Fae(new URL("rest/v1",o).href,{headers:this.headers,schema:P.db.schema,fetch:this.fetch}),this.storage=new koe(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),P.accessToken||this._listenForAuthEvents()}get functions(){return new Dae(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:u,storageKey:h,flowType:o,lock:_,debug:T,throwOnError:P},E,M){const I={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qle({url:this.authUrl.href,headers:Object.assign(Object.assign({},I),E),storageKey:h,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:u,flowType:o,lock:_,debug:T,throwOnError:P,fetch:M,hasCustomAuthorizationHeader:Object.keys(this.headers).some(z=>z.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new toe(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Gle=(e,t,r)=>new Wle(e,t,r);function Hle(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Hle()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zle="https://xdobxwotdkruurhycwxi.supabase.co",Kle="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhkb2J4d290ZGtydXVyaHljd3hpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUxMjUyNTIsImV4cCI6MjA4MDcwMTI1Mn0.R7HrdjEKJEn5-25nf66VZBz0-WoYch9gYLiUaVFB03E",Fa=Gle(Zle,Kle,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),_D=({scrolled:e})=>{const{i18n:t}=Mi(),[r,n]=U.useState(!1),a=[{code:"en",label:"English",flag:""},{code:"pt",label:"Portugus",flag:""}],u=a.find(o=>o.code===t.language)||a[0],h=o=>{t.changeLanguage(o),localStorage.setItem("i18nextLng",o),n(!1)};return f.jsxs("div",{className:"relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[f.jsxs("button",{className:St("flex items-center gap-1 font-medium transition-all duration-300 ease-out rounded-md hover:scale-105 flex-shrink-0",e?"text-xs xl:text-sm p-1.5":"text-xs xl:text-sm p-1.5 xl:p-2","text-white/70 hover:text-white hover:bg-white/5"),"aria-label":"Change language",children:[f.jsx(fx,{className:"w-3.5 h-3.5 xl:w-4 xl:h-4"}),f.jsx("span",{className:"text-[10px] xl:text-xs font-semibold uppercase",children:u.code})]}),f.jsx("div",{className:St("absolute top-full right-0 mt-2 w-36 bg-background rounded-xl shadow-card border border-border/40 overflow-hidden transition-all duration-150 z-50",r?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-1"),children:a.map(o=>f.jsxs("button",{onClick:()=>h(o.code),className:St("w-full px-4 py-2.5 text-left text-sm hover:bg-muted transition-colors flex items-center gap-2",t.language===o.code?"bg-primary/10 text-primary font-medium":"text-foreground"),children:[f.jsx("span",{children:o.flag}),f.jsx("span",{children:o.label})]},o.code))})]})},fS=({className:e,variant:t="icon"})=>{const{theme:r,setTheme:n}=W3(),a=()=>{n(r==="dark"?"light":"dark")};return t==="button"?f.jsx("button",{onClick:a,className:St("flex items-center gap-2 w-full px-4 py-3 text-left text-sm transition-colors","hover:bg-white/10 text-white/80 hover:text-white",e),children:r==="dark"?f.jsxs(f.Fragment,{children:[f.jsx(DM,{className:"w-4 h-4"}),f.jsx("span",{children:"Light Mode"})]}):f.jsxs(f.Fragment,{children:[f.jsx(RM,{className:"w-4 h-4"}),f.jsx("span",{children:"Dark Mode"})]})}):f.jsx("button",{onClick:a,className:St("p-1.5 xl:p-2 rounded-full transition-all duration-300 hover:scale-110 flex-shrink-0","text-white/70 hover:text-white hover:bg-white/10",e),"aria-label":"Toggle theme",children:r==="dark"?f.jsx(DM,{className:"w-3.5 h-3.5 xl:w-4 xl:h-4"}):f.jsx(RM,{className:"w-3.5 h-3.5 xl:w-4 xl:h-4"})})},ji=({onMenuStateChange:e})=>{const[t,r]=U.useState(!1),[n,a]=U.useState(!1),[u,h]=U.useState(!1),[o,_]=U.useState(!1),[T,P]=U.useState(null),E=Yf(),{toast:M}=dx(),I=oc(),{t:z}=Mi("common"),{scrollYProgress:F}=Nu(),D=$J(F,{stiffness:100,damping:30,restDelta:.001});U.useEffect(()=>{const pe=()=>{h(window.scrollY>50)};return window.addEventListener("scroll",pe,{passive:!0}),()=>window.removeEventListener("scroll",pe)},[]),U.useEffect(()=>{const{data:{subscription:pe}}=Fa.auth.onAuthStateChange((xe,Re)=>{P((Re==null?void 0:Re.user)??null)});return Fa.auth.getSession().then(({data:{session:xe}})=>{P((xe==null?void 0:xe.user)??null)}),()=>pe.unsubscribe()},[]),U.useEffect(()=>{e==null||e(t)},[t,e]);const q=async()=>{await Fa.auth.signOut(),M({title:"Signed out",description:"You have been successfully signed out."}),r(!1),E("/")},$=pe=>I.pathname===pe,W=["/what-we-do","/cultivating-processing","/manufacture-distribution","/medical-clinics","/online-pharmacy"].includes(I.pathname),te=["/about-us","/blockchain-technology"].includes(I.pathname),[se,he]=U.useState(!1);return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed top-0 left-0 right-0 h-1 bg-primary/20 z-[60]",children:f.jsx(ir.div,{className:"h-full bg-gradient-to-r from-primary via-secondary to-primary origin-left",style:{scaleX:D,transformOrigin:"0%"}})}),f.jsx("header",{className:St("fixed top-2 left-2 right-2 z-50 backdrop-blur-xl rounded-xl transition-all duration-500 ease-out border",u?"shadow-2xl border-white/20 scale-[0.99]":"shadow-sm border-white/10"),style:{backgroundColor:u?"rgba(42, 61, 58, 0.98)":"rgba(42, 61, 58, 0.95)",transition:"background-color 0.5s ease-out, transform 0.5s ease-out"},children:f.jsxs("div",{className:"container mx-auto px-3 sm:px-4 lg:px-6 xl:px-8",children:[f.jsxs("div",{className:St("flex items-center justify-between transition-all duration-500 ease-out",u?"h-16 md:h-18":"h-18 md:h-24"),children:[f.jsx(Gt,{to:"/",className:"flex items-center flex-shrink-0 group",children:f.jsx("img",{src:jP,alt:"Healing Buds Logo",className:St("w-auto object-contain transition-all duration-500 ease-out group-hover:scale-105",u?"h-8 sm:h-10 md:h-12":"h-10 sm:h-12 md:h-14")})}),f.jsxs("nav",{className:St("hidden lg:flex items-center flex-1 justify-end overflow-hidden transition-all duration-500 ease-out",u?"gap-2 xl:gap-3":"gap-3 xl:gap-4"),children:[f.jsxs("div",{className:"relative",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[f.jsxs("button",{className:St("font-body flex items-center gap-1 font-medium transition-all duration-300 ease-out relative rounded-md hover:scale-105 whitespace-nowrap",u?"text-xs xl:text-sm px-2 py-1":"text-xs xl:text-sm px-2 xl:px-3 py-1.5",W?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),children:[z("nav.whatWeDo"),f.jsx(_o,{className:St("w-3 h-3 xl:w-4 xl:h-4 transition-transform duration-150",n&&"rotate-180")})]}),f.jsxs("div",{className:St("absolute top-full left-0 mt-2 w-72 bg-card rounded-xl shadow-card border border-border/40 overflow-hidden transition-all duration-150 z-50",n?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-1"),children:[f.jsxs(Gt,{to:"/cultivating-processing",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors border-b border-border",onClick:()=>a(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.cultivating")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.cultivatingDesc")})]}),f.jsxs(Gt,{to:"/manufacture-distribution",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors border-b border-border",onClick:()=>a(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.manufacture")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.manufactureDesc")})]}),f.jsxs(Gt,{to:"/medical-clinics",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors border-b border-border",onClick:()=>a(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.clinics")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.clinicsDesc")})]}),f.jsxs(Gt,{to:"/online-pharmacy",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors",onClick:()=>a(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.pharmacy")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.pharmacyDesc")})]})]})]}),f.jsx(Gt,{to:"/research",className:St("font-body font-medium transition-all duration-300 ease-out rounded-md hover:scale-105 whitespace-nowrap",u?"text-xs xl:text-sm px-2 py-1":"text-xs xl:text-sm px-2 xl:px-3 py-1.5",$("/research")?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),children:z("nav.research")}),f.jsx(Gt,{to:"/the-wire",className:St("font-body font-medium transition-all duration-300 ease-out rounded-md hover:scale-105 whitespace-nowrap",u?"text-xs xl:text-sm px-2 py-1":"text-xs xl:text-sm px-2 xl:px-3 py-1.5",$("/the-wire")||I.pathname.startsWith("/the-wire/")?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),children:z("nav.theWire")}),f.jsxs("div",{className:"relative",onMouseEnter:()=>he(!0),onMouseLeave:()=>he(!1),children:[f.jsxs("button",{className:St("font-body flex items-center gap-1 font-medium transition-all duration-300 ease-out relative rounded-md hover:scale-105 whitespace-nowrap",u?"text-xs xl:text-sm px-2 py-1":"text-xs xl:text-sm px-2 xl:px-3 py-1.5",te?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),children:[z("nav.aboutUs"),f.jsx(_o,{className:St("w-3 h-3 xl:w-4 xl:h-4 transition-transform duration-150",se&&"rotate-180")})]}),f.jsxs("div",{className:St("absolute top-full left-0 mt-2 w-72 bg-card rounded-xl shadow-card border border-border/40 overflow-hidden transition-all duration-150 z-50",se?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-1"),children:[f.jsxs(Gt,{to:"/about-us",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors border-b border-border",onClick:()=>he(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.aboutHealing")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.aboutHealingDesc")})]}),f.jsxs(Gt,{to:"/blockchain-technology",className:"block px-4 py-3 text-card-foreground hover:bg-muted transition-colors",onClick:()=>he(!1),children:[f.jsx("div",{className:"font-medium",children:z("dropdown.blockchain")}),f.jsx("div",{className:"text-sm text-muted-foreground",children:z("dropdown.blockchainDesc")})]})]})]}),f.jsx(Gt,{to:"/contact",className:St("font-body font-medium transition-all duration-300 ease-out rounded-md hover:scale-105 whitespace-nowrap",u?"text-xs xl:text-sm px-2 py-1":"text-xs xl:text-sm px-2 xl:px-3 py-1.5",$("/contact")?"text-white bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),children:z("nav.contactUs")}),f.jsx(_D,{scrolled:u}),f.jsx(fS,{}),f.jsxs("div",{className:"flex items-center gap-2 ml-2 flex-shrink-0",children:[f.jsxs("button",{onClick:()=>_(!0),className:St("font-body font-semibold px-3 xl:px-5 py-2 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-xl relative z-10 whitespace-nowrap","backdrop-blur-2xl bg-gradient-to-br from-white/35 via-white/25 to-white/15","dark:from-white/25 dark:via-white/15 dark:to-white/10","border border-white/50 shadow-lg hover:border-white/70","text-white hover:bg-white/35","text-xs xl:text-sm"),children:[f.jsx("span",{className:"hidden xl:inline",children:z("nav.checkEligibility")}),f.jsx("span",{className:"xl:hidden",children:"Eligibility"})]}),T?f.jsxs("button",{onClick:q,className:St("font-body font-semibold px-3 xl:px-5 py-2 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-xl relative z-10 whitespace-nowrap","backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12","dark:from-white/20 dark:via-white/12 dark:to-white/8","border border-white/40 shadow-lg hover:border-white/60","text-white hover:bg-white/30 flex items-center gap-1.5","text-xs xl:text-sm"),children:[f.jsx(fT,{className:"w-3.5 h-3.5"}),f.jsx("span",{className:"hidden xl:inline",children:z("nav.signOut")}),f.jsx("span",{className:"xl:hidden",children:"Sign Out"})]}):f.jsxs(Gt,{to:"/auth",className:St("font-body font-semibold px-3 xl:px-5 py-2 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-xl relative z-10 whitespace-nowrap","backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12","dark:from-white/20 dark:via-white/12 dark:to-white/8","border border-white/40 shadow-lg hover:border-white/60","text-white hover:bg-white/30","text-xs xl:text-sm"),children:[f.jsx("span",{className:"hidden xl:inline",children:z("nav.patientLogin")}),f.jsx("span",{className:"xl:hidden",children:"Login"})]})]})]}),f.jsx(rB,{open:o,onOpenChange:_}),f.jsxs("div",{className:"lg:hidden flex items-center gap-2",children:[f.jsx(fS,{}),f.jsx("button",{className:St("text-white p-2 transition-all duration-300 hover:scale-110 active:scale-95",u&&"p-1.5"),onClick:()=>r(!t),"aria-label":"Toggle menu",children:t?f.jsx(CC,{className:St("transition-all duration-300",u?"w-5 h-5":"w-6 h-6")}):f.jsx(JW,{className:St("transition-all duration-300",u?"w-5 h-5":"w-6 h-6")})})]})]}),f.jsx(oh,{children:t&&f.jsxs(f.Fragment,{children:[f.jsx(ir.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"lg:hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-[-1]",onClick:()=>r(!1)}),f.jsx(ir.nav,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"lg:hidden overflow-hidden border-t border-white/10",children:f.jsxs("div",{className:"flex flex-col py-6 px-5 max-h-[calc(100vh-140px)] overflow-y-auto",children:[f.jsxs("div",{className:"flex flex-col space-y-2",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:St("font-semibold text-sm py-3 px-4 rounded-xl",W?"text-white bg-white/10":"text-white/90"),children:z("nav.whatWeDo")}),f.jsxs("div",{className:"pl-4 space-y-1 border-l-2 border-white/20 ml-4",children:[f.jsx(Gt,{to:"/cultivating-processing",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.cultivating")}),f.jsx(Gt,{to:"/manufacture-distribution",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.manufacture")}),f.jsx(Gt,{to:"/medical-clinics",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.clinics")}),f.jsx(Gt,{to:"/online-pharmacy",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.pharmacy")})]})]}),f.jsx(Gt,{to:"/research",className:St("text-sm transition-all duration-200 py-3 px-4 rounded-xl",$("/research")?"text-white font-semibold bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),onClick:()=>r(!1),children:z("nav.research")}),f.jsx(Gt,{to:"/the-wire",className:St("text-sm transition-all duration-200 py-3 px-4 rounded-xl",$("/the-wire")||I.pathname.startsWith("/the-wire/")?"text-white font-semibold bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),onClick:()=>r(!1),children:z("nav.theWire")}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:St("font-semibold text-sm py-3 px-4 rounded-xl",te?"text-white bg-white/10":"text-white/90"),children:z("nav.aboutUs")}),f.jsxs("div",{className:"pl-4 space-y-1 border-l-2 border-white/20 ml-4",children:[f.jsx(Gt,{to:"/about-us",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.aboutHealing")}),f.jsx(Gt,{to:"/blockchain-technology",className:"block text-sm text-white/70 hover:text-white hover:bg-white/5 py-3 px-4 rounded-xl transition-all",onClick:()=>r(!1),children:z("dropdown.blockchain")})]})]}),f.jsx(Gt,{to:"/contact",className:St("text-sm transition-all duration-200 py-3 px-4 rounded-xl",$("/contact")?"text-white font-semibold bg-white/10":"text-white/70 hover:text-white hover:bg-white/5"),onClick:()=>r(!1),children:z("nav.contactUs")})]}),f.jsx("div",{className:"my-6 border-t border-white/10"}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("button",{onClick:()=>{_(!0),r(!1)},className:"w-full font-body font-semibold px-6 py-4 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg backdrop-blur-2xl bg-gradient-to-br from-white/35 via-white/25 to-white/15 border border-white/50 text-white text-sm hover:from-white/45 hover:via-white/35 hover:to-white/25 hover:border-white/70 hover:shadow-xl focus-ring",children:z("nav.checkEligibility")}),T?f.jsxs("button",{onClick:q,className:"w-full font-body font-semibold px-6 py-4 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12 border border-white/40 text-white text-sm flex items-center justify-center gap-2 hover:from-white/35 hover:via-white/28 hover:to-white/22 hover:border-white/60 hover:shadow-xl focus-ring",children:[f.jsx(fT,{className:"w-4 h-4"}),z("nav.signOut")]}):f.jsx(Gt,{to:"/auth",onClick:()=>r(!1),className:"block w-full text-center font-body font-semibold px-6 py-4 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12 border border-white/40 text-white text-sm hover:from-white/35 hover:via-white/28 hover:to-white/22 hover:border-white/60 hover:shadow-xl focus-ring",children:z("nav.patientLogin")})]}),f.jsx("div",{className:"my-6 border-t border-white/10"}),f.jsxs("div",{className:"flex items-center justify-between gap-4 px-2",children:[f.jsx(_D,{scrolled:u}),f.jsx(fS,{variant:"button",className:"flex-1"})]})]})})]})})]})})]})},Yle=""+new URL("hb-logo-square-g_8Etzne.png",import.meta.url).href,Qle=""+new URL("hero-video-bg-DJ9D--JV.jpg",import.meta.url).href,Xle=()=>{const e=ht.useRef(null),t=ht.useRef(null),{t:r}=Mi("home"),[n,a]=ht.useState(!1),{scrollYProgress:u}=Nu({target:t,offset:["start start","end start"]}),h=gs(u,[0,1],["0%","30%"]),o=gs(u,[0,1],["0%","50%"]),_=gs(u,[0,1],["0%","20%"]),T=gs(u,[0,.5],[1,1.1]),P=gs(u,[0,.5],[1,0]);ht.useEffect(()=>{e.current&&e.current.play().catch(I=>{console.log("Video autoplay failed:",I),a(!0)})},[]);const E=()=>{a(!0)},M=()=>{window.scrollTo({top:window.innerHeight,behavior:"smooth"})};return f.jsxs("section",{ref:t,className:"relative min-h-screen flex items-center overflow-hidden pt-28 sm:pt-36 md:pt-44 bg-background",children:[f.jsxs(ir.div,{style:{y:h},className:"absolute left-2 right-2 top-24 sm:top-28 md:top-32 bottom-4 rounded-2xl sm:rounded-3xl overflow-hidden z-0 shadow-2xl",children:[f.jsx(ir.img,{src:Qle,alt:"",initial:{opacity:0},animate:{opacity:n?1:0},transition:{duration:1.5,ease:"easeInOut"},className:"absolute inset-0 w-full h-full object-cover"}),f.jsx(ir.video,{ref:e,autoPlay:!0,muted:!0,playsInline:!0,onEnded:E,initial:{opacity:1},animate:{opacity:n?0:1},transition:{duration:1.5,ease:"easeInOut"},className:"absolute inset-0 w-full h-full object-cover",children:f.jsx("source",{src:"/hero-video.mp4",type:"video/mp4"})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#1F2A25]/60 to-[#13303D]/55"})]}),f.jsx(ir.div,{style:{y:o,opacity:P},className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10 py-16 sm:py-24 md:py-32",children:f.jsxs("div",{className:"max-w-5xl text-left relative",children:[f.jsxs(ir.h1,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:[.25,.4,.25,1]},className:"font-pharma text-5xl sm:text-6xl md:text-7xl lg:text-8xl font-semibold text-white mb-6 sm:mb-8 leading-[1.1] tracking-tight drop-shadow-lg",children:[r("hero.welcome")," ",f.jsx("span",{className:"block mt-3",children:r("hero.healingBuds")})]}),f.jsx(ir.img,{initial:{opacity:0,scale:.8},animate:{opacity:.15,scale:1},style:{y:_,scale:T},transition:{duration:1,delay:.5,ease:[.25,.4,.25,1]},src:Yle,alt:"",className:"hidden md:block absolute right-0 md:right-8 lg:right-20 top-1/2 -translate-y-1/2 w-[280px] md:w-[340px] lg:w-[420px] h-auto pointer-events-none origin-center"}),f.jsx(ir.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5,ease:[.25,.4,.25,1]},className:"font-body text-lg sm:text-xl md:text-2xl text-white/90 mb-8 max-w-2xl font-light leading-relaxed drop-shadow-md",children:r("hero.tagline")})]})}),f.jsx(ir.button,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,delay:1,ease:[.25,.4,.25,1]},onClick:M,className:"absolute bottom-8 left-1/2 -translate-x-1/2 z-20 text-white/80 hover:text-white transition-all duration-300 animate-bounce cursor-pointer","aria-label":"Scroll to content",children:f.jsx(_o,{className:"w-8 h-8"})})]})},Jle={fadeUp:{initial:{opacity:0,y:30},animate:{opacity:1,y:0}},fadeDown:{initial:{opacity:0,y:-30},animate:{opacity:1,y:0}},fadeLeft:{initial:{opacity:0,x:-30},animate:{opacity:1,x:0}},fadeRight:{initial:{opacity:0,x:30},animate:{opacity:1,x:0}},scale:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1}},fade:{initial:{opacity:0},animate:{opacity:1}}},Qe=({children:e,delay:t=0,className:r="",variant:n="fadeUp",duration:a=.6})=>{const u=Jle[n];return f.jsx(ir.div,{initial:u.initial,whileInView:u.animate,viewport:{once:!0,margin:"-80px"},transition:{duration:a,delay:t,ease:[.25,.4,.25,1]},className:r,children:e})},OB=""+new URL("greenhouse-exterior-hq-B1dZytyf.jpg",import.meta.url).href,bD=({className:e})=>f.jsxs("svg",{className:e,viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M60 100 Q 60 60, 60 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",opacity:"0.6"}),f.jsx("path",{d:"M60 80 Q 30 70, 20 50",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M60 60 Q 35 50, 25 35",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M60 40 Q 40 32, 35 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M60 80 Q 90 70, 100 50",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M60 60 Q 85 50, 95 35",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M60 40 Q 80 32, 85 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("circle",{cx:"20",cy:"50",r:"3",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"100",cy:"50",r:"3",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"60",cy:"15",r:"4",fill:"currentColor",opacity:"0.4"})]}),ece=()=>{const e=U.useRef(null),{scrollYProgress:t}=Nu({target:e,offset:["start end","end start"]}),r=gs(t,[0,1],["-20%","20%"]);return f.jsx("section",{className:"py-16 sm:py-20 md:py-24 bg-background relative",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-10 md:gap-16 items-center",children:[f.jsx(Qe,{children:f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-foreground mb-6 tracking-tight leading-tight",children:"Healing Buds: Advancing Global Cannabis Innovation"}),f.jsx("p",{className:"text-base sm:text-lg text-muted-foreground leading-relaxed",children:"Committed to excellence in every product we create and championing worldwide cannabis acceptance through quality and integrity."})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{ref:e,className:"relative overflow-hidden rounded-2xl shadow-elegant",children:[f.jsx(ir.img,{style:{y:r},src:OB,alt:"Cannabis cultivation facility with rows of plants",className:"rounded-2xl w-full h-auto scale-110"}),f.jsx(bD,{className:"absolute -top-2 -right-2 w-20 h-20 sm:w-24 sm:h-24 text-primary opacity-60 rotate-45"}),f.jsx(bD,{className:"absolute -bottom-2 -left-2 w-20 h-20 sm:w-24 sm:h-24 text-primary opacity-60 -rotate-45 scale-x-[-1]"})]})})]})})})},tce=""+new URL("plant-decoration-1-CFoL1bgw.png",import.meta.url).href,rce=""+new URL("plant-decoration-3-H-VRyHJX.png",import.meta.url).href,nce=[{icon:N3,title:"Superior Quality",description:"Every stage from cultivation through extraction to final production is meticulously managed with unwavering attention to detail. Our EU GMP-certified products meet the highest international standards, earning trust across borders."},{icon:gu,title:"Expanding Access",description:"Our mission is to ensure medical cannabis reaches those who need it most. Through evidence-based advocacy and education, we are reducing barriers, challenging misconceptions, and creating pathways to safe, legal access."},{icon:hT,title:"Research-Driven Innovation",description:"Collaborating with world-class research institutions including Imperial College London and University of Pennsylvania, we advance scientific knowledge of cannabis therapeutics. Research excellence is the foundation of everything we pursue."}],ice=()=>f.jsx("div",{className:"px-2",children:f.jsxs("section",{className:"py-16 sm:py-20 md:py-24 rounded-2xl sm:rounded-3xl relative overflow-hidden",style:{backgroundColor:"hsl(var(--section-color))"},children:[f.jsx("div",{className:"absolute top-8 left-4 sm:left-8 opacity-[0.08] pointer-events-none",children:f.jsx("img",{src:tce,alt:"",className:"w-48 sm:w-64 h-auto"})}),f.jsx("div",{className:"absolute bottom-8 right-4 sm:right-8 opacity-[0.08] pointer-events-none",children:f.jsx("img",{src:rce,alt:"",className:"w-40 sm:w-52 h-auto"})}),f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[f.jsx(Qe,{children:f.jsx("div",{className:"text-center mb-14 sm:mb-18",children:f.jsx("h2",{className:"font-jakarta text-3xl sm:text-4xl md:text-5xl font-semibold text-white mb-4 px-4",style:{letterSpacing:"-0.02em",lineHeight:"1.2"},children:"Growing more than medicine"})})}),f.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-10 sm:gap-12 md:gap-16",children:nce.map((e,t)=>f.jsx(Qe,{delay:t*.1,children:f.jsxs("div",{className:"text-center group",children:[f.jsx("div",{className:"flex justify-center mb-7",children:f.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-2xl bg-white/10 group-hover:bg-white/15 transition-all duration-300 group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-white/10",children:f.jsx(e.icon,{className:"w-10 h-10 text-white",strokeWidth:1.5})})}),f.jsx("h3",{className:"font-jakarta text-xl sm:text-2xl font-semibold text-white mb-4 tracking-tight",children:e.title}),f.jsx("p",{className:"font-jakarta text-white/75 leading-relaxed text-sm sm:text-base",children:e.description})]})},t))})]})]})}),sce=""+new URL("cultivation-contrast-hq-C4qQorGs.jpg",import.meta.url).href,ace=()=>{const e=U.useRef(null),{scrollYProgress:t}=Nu({target:e,offset:["start end","end start"]}),r=gs(t,[0,1],["-15%","15%"]);return f.jsx("section",{className:"bg-background py-12 sm:py-16 md:py-20 px-2",children:f.jsx("div",{className:"max-w-[1920px] mx-auto px-2",children:f.jsx(Qe,{children:f.jsxs("div",{ref:e,className:"relative rounded-2xl sm:rounded-3xl overflow-hidden shadow-2xl group",children:[f.jsx(ir.img,{style:{y:r},src:sce,alt:"Indoor cannabis cultivation facility with advanced lighting",className:"w-full h-[450px] sm:h-[400px] md:h-[500px] object-cover object-center transition-transform duration-700 group-hover:scale-105"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1A3C3A]/95 via-[#1A3C3A]/75 to-transparent"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1A3C3A]/90 via-transparent to-transparent"}),f.jsx("div",{className:"absolute inset-0 bg-[#1A3C3A]/20"}),f.jsx("div",{className:"absolute inset-0 flex flex-col justify-center px-4 sm:px-8 md:px-16",children:f.jsxs("div",{className:"bg-[#1A3C3A]/60 backdrop-blur-md rounded-2xl p-6 sm:p-8 md:p-10 max-w-3xl border border-white/10 shadow-2xl",children:[f.jsx("h2",{className:"font-pharma text-2xl sm:text-4xl md:text-5xl font-semibold text-white mb-3 sm:mb-6 tracking-tight leading-tight drop-shadow-lg",children:"Production & Processing Excellence"}),f.jsx("p",{className:"font-body text-white/95 text-xs sm:text-base md:text-lg leading-relaxed mb-4 sm:mb-8 drop-shadow-md",children:"Our state-of-the-art facilities across South Africa and Portugal span more than 18,000 square metres dedicated to pharmaceutical-grade cannabis production, supporting our annual output of 60 tonnes. With access to diverse strains and genetics from our licensed partner network, we maintain rigorous oversight from seed selection through harvesting and processing. Each batch undergoes comprehensive testing, precise trimming, controlled drying and curing, and careful packaging to ensure consistent quality that meets stringent third-party standards."}),f.jsxs(Gt,{to:"/what-we-do",className:"font-body text-primary hover:text-white font-semibold text-sm sm:text-lg transition-all inline-flex items-center gap-2 group/link bg-primary/20 hover:bg-primary px-6 py-3 rounded-full border border-primary/50 hover:border-primary shadow-lg hover:shadow-primary/50",children:["Discover our production standards",f.jsx("span",{className:"transition-transform group-hover/link:translate-x-1",children:""})]})]})}),f.jsxs("div",{className:"hidden sm:flex absolute bottom-8 right-8 gap-3 z-10",children:[f.jsx("button",{className:"w-12 h-12 rounded-full border-2 border-white/40 hover:border-white hover:bg-white/20 flex items-center justify-center text-white transition-all backdrop-blur-sm hover:scale-110 shadow-lg",children:f.jsx(k3,{className:"w-6 h-6"})}),f.jsx("button",{className:"w-12 h-12 rounded-full border-2 border-white/40 hover:border-white hover:bg-white/20 flex items-center justify-center text-white transition-all backdrop-blur-sm hover:scale-110 shadow-lg",children:f.jsx(Pf,{className:"w-6 h-6"})})]})]})})})})},Cb=U.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:St("rounded-xl border border-border/60 bg-card text-card-foreground shadow-sm transition-all duration-200","dark:border-border/40 dark:bg-card/95 dark:shadow-lg dark:shadow-black/5",e),...t}));Cb.displayName="Card";const oce=U.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:St("flex flex-col space-y-1.5 p-6",e),...t}));oce.displayName="CardHeader";const lce=U.forwardRef(({className:e,...t},r)=>f.jsx("h3",{ref:r,className:St("text-2xl font-semibold leading-none tracking-tight",e),...t}));lce.displayName="CardTitle";const cce=U.forwardRef(({className:e,...t},r)=>f.jsx("p",{ref:r,className:St("text-sm text-muted-foreground",e),...t}));cce.displayName="CardDescription";const uce=U.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:St("p-6 pt-0",e),...t}));uce.displayName="CardContent";const dce=U.forwardRef(({className:e,...t},r)=>f.jsx("div",{ref:r,className:St("flex items-center p-6 pt-0",e),...t}));dce.displayName="CardFooter";const hce=Gb("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ga({className:e,variant:t,...r}){return f.jsx("div",{className:St(hce({variant:t}),e),...r})}const pce=""+new URL("conference-hq-CW6VzY_j.jpg",import.meta.url).href,fce=""+new URL("award-hq-D6kqkA32.jpg",import.meta.url).href,tx=""+new URL("production-facility-hq-Ci4dl8xL.jpg",import.meta.url).href,vw=""+new URL("research-lab-hq-BvlJMybt.jpg",import.meta.url).href,rx=[{id:"healing-buds-budstacks-partnership",category:"Healing Buds",title:"Healing Buds Global: How Budstacks Built the Blueprint for Compliant Cannabis Technology",description:"Healing Buds Global stands as the flagship implementation of Budstacks' comprehensive cannabis SaaS platform, demonstrating how white-label technology enables rapid market entry under EU GMP certification.",image:pce,featured:!0,tags:["Healing Buds","Budstacks","Technology","SaaS"],author:"Healing Buds Editorial",date:"Nov 28, 2024",content:["Healing Buds Global represents the definitive proof of concept for Budstacks' end-to-end cannabis business platform. As a specialist agency in web and app development, payment processing, customer support infrastructure, white-labeling, and NFT franchising, Budstacks has created a turnkey solution that transforms how entrepreneurs enter the regulated cannabis market.","The Healing Buds platform showcases every capability in the Budstacks stack: a fully responsive patient-facing website, integrated eligibility checking, secure payment processing compliant with cannabis industry regulations, and backend systems that connect directly to EU GMP certified supply chain.","What makes this partnership significant is the replicability. Budstacks designed the Healing Buds infrastructure to be white-labeled, meaning any entrepreneur operating under the franchise framework can deploy an identical caliber platform customized to their brand within weeks, not years.","The NFT franchising component is particularly innovative. Using blockchain technology, Budstacks has created a transparent system for managing franchise agreements, tracking royalties, and verifying compliance across the entire network of operators.","For aspiring cannabis entrepreneurs, Healing Buds Global isn't just a medical cannabis providerit's a template for what's possible when world-class technology meets proper regulatory framework."]},{id:"university-competition-cannabis-innovation",category:"Healing Buds",title:"500,000 University Competition: Healing Buds Invests in Tomorrow's Cannabis Industry Leaders",description:"A groundbreaking initiative offers students in Business, Computer Science, Marketing, Bio Science, Pharmaceutical Sciences, and Agricultural Technology the chance to gain hands-on experience through apprenticeships and partnership opportunities.",image:vw,featured:!1,tags:["Healing Buds","University","Innovation","Apprenticeship","Education"],author:"Healing Buds Editorial",date:"Nov 22, 2024",content:["The cannabis industry faces a talent crisis. As legalization expands globally, companies struggle to find qualified professionals who understand both the science and the business of regulated cannabis. Healing Buds Global is addressing this head-on with a university apprenticeship and partnership programme designed to identify and develop the next generation of industry leaders.","The programme welcomes students from diverse disciplines, recognizing that the cannabis industry needs more than just botanists. Business Studies students can tackle market expansion strategies. Computer Science students can improve blockchain traceability systems. Marketing students can develop compliant promotional frameworks. Bio Science and Pharmaceutical Sciences students can advance personalized medicine approaches. Agricultural Technology students can optimize sustainable cultivation methods.","Participants receive more than just experience. Top performers earn equity shares in participating ventures within the Healing Buds ecosystem, creating genuine ownership stakes in the industry they'll help build. Guaranteed apprenticeships and partnership pathways ensure that talented graduates have clear routes into meaningful roles.","The programme structure includes regional rounds across European universities, culminating in placement opportunities at our Portuguese and South African facilities where apprentices work alongside industry leaders. Mentorship from technologists, operators, and scientists supports participants throughout.","Beyond the apprenticeship itself, this initiative signals a maturation of the cannabis industry. By engaging with traditional academic institutions, Healing Buds is building bridges between cannabis entrepreneurship and mainstream career pathsexactly the normalization that long-term industry success requires."]},{id:"franchise-opportunity-announcement",category:"Business",title:"The Franchise Model Democratizing Cannabis Entrepreneurship",description:"How EU GMP certification creates a pathway for entrepreneurs to operate compliant cannabis businesses without million-dollar facility investments.",image:tx,featured:!1,tags:["Franchise","Healing Buds","Business","Compliance"],author:"Healing Buds Editorial",date:"Nov 18, 2024",content:["Traditional cannabis entrepreneurship requires staggering capitalcultivation facilities, extraction labs, compliance teams, regulatory applications. Building that infrastructure takes years and tens of millions. Now, through an innovative franchise model, that investment becomes accessible to entrepreneurs who share the vision but lack the capital.","The franchise framework operates on a simple principle: centralize the complexity, distribute the opportunity. EU GMP certified facilities maintain the regulatory relationships, quality control systems, and product development. Franchisees focus on their local markets, patient relationships, and business growth.","Technology partner Budstacks provides the operational infrastructure. Every franchisee receives a fully-configured platform including patient management, order processing, compliance documentation, and direct integration with the supply chain. Healing Buds Global serves as the showcase implementation, demonstrating the platform's capabilities to prospective franchisees.","Franchise packages accommodate various ambitions and capital levels. Entry-level dropshipping arrangements require minimal upfront investment. Mid-tier packages include branded storefronts and local marketing support. Enterprise packages enable multi-location operators to build regional cannabis businesses.","The response has been overwhelming. Entrepreneurs across Portugal, the UK, and expanding European markets are applying for franchise positions, attracted by the combination of regulatory certainty, technology infrastructure, and growing brand recognition."]},{id:"budstacks-white-label-cannabis-saas",category:"Technology",title:"Inside Budstacks: The SaaS Platform Powering Healing Buds and the Cannabis Franchise Revolution",description:"A deep dive into the technology agency's comprehensive platform for web development, payment processing, support systems, white-labeling, and NFT-based franchise management.",image:fce,featured:!1,tags:["Budstacks","Technology","Healing Buds","SaaS","NFT"],author:"Budstacks",date:"Nov 15, 2024",content:["Budstacks emerged from a recognition that the cannabis industry's technology needs were fundamentally underserved. Entrepreneurs faced a brutal choice: spend millions on custom development or cobble together inadequate generic solutions. Budstacks built the third optionpurpose-built cannabis SaaS that deploys in weeks and scales indefinitely.","The platform encompasses every operational requirement. Web and mobile applications handle patient-facing interactions with compliant design patterns. Payment processing navigates the complex banking relationships that plague cannabis businesses. Customer support systems manage the high-touch communication that medical cannabis patients require. Backend integrations connect to supply chain, inventory, and compliance systems.","White-labeling sits at the platform's core. Healing Buds Global runs on Budstacks infrastructure, but nothing in the patient experience reveals that. The same applies to any operator using the platformthey present their own brand while benefiting from enterprise-grade technology.","The NFT franchising module represents Budstacks' most innovative contribution. Franchise agreements, revenue sharing arrangements, and compliance certifications are recorded on blockchain, creating transparent and auditable records that satisfy both business partners and regulators. This isn't cryptocurrency speculationit's practical application of blockchain for business operations.","Development continues rapidly. Upcoming releases include enhanced telemedicine integration, AI-powered patient matching for strain recommendations, and expanded payment options as banking relationships in the cannabis industry mature. Budstacks isn't just serving the current marketit's building for the industry's future."]}],mce=()=>{const e=rx.slice(0,3);return f.jsx("section",{id:"news",className:"bg-background py-12 sm:py-16 md:py-20",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8 sm:mb-12",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"font-pharma text-3xl sm:text-4xl md:text-5xl font-semibold text-foreground tracking-tight",children:"The Wire"}),f.jsx("p",{className:"font-geist text-muted-foreground mt-2",children:"Inside news & updates"})]}),f.jsx(Gt,{to:"/the-wire",children:f.jsx(Zr,{variant:"outline",size:"lg",className:"font-body rounded-full text-sm sm:text-base",children:"View all updates"})})]})}),f.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:e.map((t,r)=>f.jsx(Qe,{delay:r*.1,children:f.jsx(Gt,{to:`/the-wire/${t.id}`,children:f.jsxs(Cb,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 border-border/50 rounded-2xl cursor-pointer hover:-translate-y-2 h-full flex flex-col",children:[f.jsxs("div",{className:"relative h-56 overflow-hidden",children:[f.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 group-hover:brightness-110"}),t.featured&&f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-sage-dark/90 to-sage-dark/40 flex items-center justify-center",children:f.jsxs("div",{className:"text-center text-white px-4",children:[f.jsx("p",{className:"text-sm font-semibold text-secondary mb-2 tracking-wider",children:"FEATURED"}),f.jsx("h3",{className:"text-xl font-bold leading-tight",children:"Dr. Green Partnership"})]})})]}),f.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.tags.map((n,a)=>f.jsx(ga,{variant:"outline",className:"font-geist border-secondary/60 text-secondary bg-secondary/10 rounded-full px-3 py-1 text-xs",children:n},a))}),f.jsx("h3",{className:"font-geist text-lg font-semibold text-foreground mb-2 leading-tight group-hover:text-primary transition-colors tracking-tight line-clamp-2",children:t.title}),f.jsx("p",{className:"font-geist text-muted-foreground text-sm line-clamp-3 leading-relaxed flex-grow",children:t.description}),f.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border/50",children:[f.jsx("span",{className:"text-xs text-muted-foreground font-geist",children:t.date}),f.jsx(Zr,{variant:"link",className:"p-0 text-primary font-semibold text-sm",children:"Read More "})]})]})]})})},t.id))})]})})},gce=""+new URL("plant-decoration-4-Dp_RHiPE.png",import.meta.url).href,Ai=()=>{const e=new Date().getFullYear(),{t}=Mi("common");return f.jsxs("footer",{id:"contact",className:"text-white relative overflow-hidden",style:{backgroundColor:"hsl(var(--section-color))"},children:[f.jsx("div",{className:"absolute top-6 right-4 sm:right-12 opacity-[0.06] pointer-events-none",children:f.jsx("img",{src:gce,alt:"",className:"w-40 sm:w-56 h-auto"})}),f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[f.jsx("div",{className:"py-12 sm:py-16 border-b border-white/10",children:f.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-12 gap-10 lg:gap-16",children:[f.jsxs("div",{className:"lg:col-span-4",children:[f.jsx(Gt,{to:"/",className:"inline-block mb-5 group",children:f.jsx("img",{src:jP,alt:"Healing Buds Logo",className:"h-10 w-auto object-contain group-hover:opacity-80 transition-opacity"})}),f.jsx("p",{className:"font-body text-white/70 text-sm leading-relaxed mb-6",children:t("footer.tagline")}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-start gap-3 text-white/60 text-sm group",children:[f.jsx(E3,{className:"w-4 h-4 mt-0.5 flex-shrink-0 group-hover:text-primary transition-colors"}),f.jsxs("span",{className:"font-body",children:["Avenida D. Joo II, 98 A",f.jsx("br",{}),"1990-100 Lisboa, Portugal"]})]}),f.jsxs("div",{className:"flex items-center gap-3 text-white/60 text-sm group",children:[f.jsx(iy,{className:"w-4 h-4 flex-shrink-0 group-hover:text-primary transition-colors"}),f.jsx("a",{href:"mailto:info@healingbuds.com",className:"font-body hover:text-white transition-colors",children:"info@healingbuds.com"})]})]})]}),f.jsxs("div",{className:"lg:col-span-8 grid grid-cols-2 sm:grid-cols-3 gap-10",children:[f.jsxs("div",{children:[f.jsxs("h4",{className:"font-jakarta font-semibold text-sm uppercase tracking-wider mb-5 text-white/90 flex items-center gap-2",children:[f.jsx(Xd,{className:"w-3.5 h-3.5 text-primary"}),t("footer.company")]}),f.jsxs("ul",{className:"space-y-3",children:[f.jsx("li",{children:f.jsx(Gt,{to:"/about-us",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.aboutUs")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/what-we-do",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.ourStandards")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/research",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.research")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/the-wire",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.theWire")})})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-jakarta font-semibold text-sm uppercase tracking-wider mb-5 text-white/90 flex items-center gap-2",children:[f.jsx(Xd,{className:"w-3.5 h-3.5 text-primary"}),t("footer.resources")]}),f.jsxs("ul",{className:"space-y-3",children:[f.jsx("li",{children:f.jsx(Gt,{to:"/contact",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.patientAccess")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/conditions",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.conditionsTreated")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/contact",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.franchiseOpportunities")})})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"font-jakarta font-semibold text-sm uppercase tracking-wider mb-5 text-white/90 flex items-center gap-2",children:[f.jsx(Xd,{className:"w-3.5 h-3.5 text-primary"}),t("footer.legal")]}),f.jsxs("ul",{className:"space-y-3",children:[f.jsx("li",{children:f.jsx(Gt,{to:"/privacy-policy",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.privacyPolicy")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/terms-of-service",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.termsOfService")})}),f.jsx("li",{children:f.jsx(Gt,{to:"/contact",className:"font-body text-sm text-white/60 hover:text-white transition-colors inline-block hover:translate-x-1 transform duration-200",children:t("footer.compliance")})})]})]})]})]})}),f.jsx("div",{className:"py-8",children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsx("p",{className:"font-body text-white/50 text-xs",children:t("footer.copyright",{year:e})}),f.jsx("p",{className:"font-body text-white/40 text-xs",children:t("footer.commitment")})]})})]})]})},yce={fade:{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35,ease:[.25,.4,.25,1]}},slide:{initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{duration:.4,ease:[.22,1,.36,1]}},scale:{initial:{opacity:0,scale:.97},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.02},transition:{duration:.35,ease:[.25,.46,.45,.94]}},elegant:{initial:{opacity:0,y:16,scale:.99},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12,scale:1.01},transition:{duration:.4,ease:[.25,.4,.25,1],opacity:{duration:.25},scale:{duration:.45}}},smooth:{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3,ease:[.4,0,.2,1]}}},yi=({children:e,variant:t="smooth"})=>{const r=yce[t];return f.jsx(ir.div,{initial:r.initial,animate:r.animate,exit:r.exit,transition:r.transition,className:"will-change-transform",children:e})},ns=()=>{const[e,t]=U.useState(!1);U.useEffect(()=>{const n=()=>{t(window.scrollY>400)};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[]);const r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return f.jsx(oh,{children:e&&f.jsx(ir.button,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},onClick:r,className:St("fixed bottom-24 md:bottom-8 right-8 z-50 w-12 h-12 rounded-full","bg-gradient-to-br from-primary to-primary/80","text-white shadow-lg hover:shadow-2xl","flex items-center justify-center","transition-all duration-300 hover:scale-110 active:scale-95","border-2 border-white/20 backdrop-blur-sm"),whileHover:{boxShadow:"0 0 25px rgba(77, 191, 161, 0.5)"},whileTap:{scale:.9},"aria-label":"Back to top",children:f.jsx(UW,{className:"w-6 h-6",strokeWidth:2.5})})})},Xs=({menuOpen:e=!1})=>{const[t,r]=U.useState(!1),[n,a]=U.useState(null),u=Yf(),{toast:h}=dx(),{t:o}=Mi("common");U.useEffect(()=>{const{data:{subscription:T}}=Fa.auth.onAuthStateChange((P,E)=>{a((E==null?void 0:E.user)??null)});return Fa.auth.getSession().then(({data:{session:P}})=>{a((P==null?void 0:P.user)??null)}),()=>T.unsubscribe()},[]);const _=async()=>{await Fa.auth.signOut(),h({title:o("nav.signOut"),description:"You have been successfully signed out."}),u("/")};return f.jsxs(f.Fragment,{children:[f.jsx(oh,{children:!e&&f.jsx(ir.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},transition:{duration:.3,ease:"easeOut"},className:"lg:hidden fixed bottom-0 left-0 right-0 z-[60]",style:{paddingBottom:"max(env(safe-area-inset-bottom, 8px), 8px)"},children:f.jsx("div",{className:"mx-3 mb-2 rounded-2xl bg-[hsl(178,48%,21%)]/98 backdrop-blur-xl border border-white/25 shadow-2xl",children:f.jsx("div",{className:"px-4 py-4",children:f.jsxs("div",{className:"flex gap-3",children:[f.jsx("button",{onClick:()=>r(!0),className:"flex-1 font-body font-semibold px-5 py-3.5 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg hover:shadow-xl backdrop-blur-2xl bg-gradient-to-br from-white/35 via-white/25 to-white/15 border border-white/50 hover:border-white/70 text-white hover:from-white/45 hover:via-white/35 hover:to-white/25 text-sm cta-uniform focus-ring relative z-10",children:o("nav.checkEligibility")}),n?f.jsxs("button",{onClick:_,className:"flex-1 font-body font-semibold px-5 py-3.5 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg hover:shadow-xl backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12 border border-white/40 hover:border-white/60 text-white hover:from-white/35 hover:via-white/28 hover:to-white/22 flex items-center justify-center gap-2 text-sm cta-uniform focus-ring relative z-10",children:[f.jsx(fT,{className:"w-4 h-4"}),o("nav.signOut")]}):f.jsx(Gt,{to:"/auth",className:"flex-1 font-body font-semibold px-5 py-3.5 rounded-2xl transition-all duration-300 ease-out active:scale-[0.96] shadow-lg hover:shadow-xl backdrop-blur-2xl bg-gradient-to-br from-white/25 via-white/18 to-white/12 border border-white/40 hover:border-white/60 text-white hover:from-white/35 hover:via-white/28 hover:to-white/22 text-center text-sm cta-uniform focus-ring relative z-10",children:o("nav.patientLogin")})]})})})})}),f.jsx(rB,{open:t,onOpenChange:r})]})},xce=()=>{const[e,t]=U.useState(0),[r,n]=U.useState(!1);return U.useEffect(()=>{const a=()=>{const u=window.scrollY,h=Math.min(u/300,1);t(h)};return window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[]),f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-20 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:n}),f.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background/30 via-background/15 to-transparent z-30 pointer-events-none transition-opacity duration-500 ease-out",style:{opacity:e*.4}}),f.jsxs("main",{children:[f.jsx(Xle,{}),f.jsx(ece,{}),f.jsx(ice,{}),f.jsx(ace,{}),f.jsx(mce,{})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:r})]})})},vce=""+new URL("hero-greenhouse-hq-D-qcknBy.jpg",import.meta.url).href,_ce=()=>{const{t:e}=Mi("whatWeDo"),[t,r]=U.useState(!1);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:r}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:e("hero.title")}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:e("hero.subtitle")})]})})})}),f.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-16 md:pb-20",children:f.jsxs("div",{className:"relative h-[400px] md:h-[500px] overflow-hidden rounded-xl border border-border/30",children:[f.jsx("img",{src:vce,alt:"Cannabis cultivation facility",className:"absolute inset-0 w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/10 to-transparent"})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto mb-20",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-6 tracking-tight",children:e("intro.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:e("intro.description")})]})})})}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground text-center mb-16 md:mb-20 tracking-tight",children:e("services.title")})}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6 max-w-6xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center mb-5",children:f.jsx(Xd,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("services.cultivating.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("services.cultivating.description")})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center mb-5",children:f.jsx(hT,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("services.manufacture.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("services.manufacture.description")})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center mb-5",children:f.jsx(gu,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("services.clinics.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("services.clinics.description")})]})}),f.jsx(Qe,{delay:.4,children:f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center mb-5",children:f.jsx(gu,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("services.pharmacy.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("services.pharmacy.description")})]})})]})]})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-white text-center mb-16 md:mb-20 tracking-tight",children:e("values.title")}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("div",{className:"w-12 h-12 bg-secondary rounded-xl flex items-center justify-center mx-auto mb-5",children:f.jsx(Xd,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 text-center tracking-tight",children:e("values.betterStandards.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-center text-sm md:text-base",children:e("values.betterStandards.description")})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("div",{className:"w-12 h-12 bg-secondary rounded-xl flex items-center justify-center mx-auto mb-5",children:f.jsx(gu,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 text-center tracking-tight",children:e("values.patientAccess.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-center text-sm md:text-base",children:e("values.patientAccess.description")})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("div",{className:"w-12 h-12 bg-secondary rounded-xl flex items-center justify-center mx-auto mb-5",children:f.jsx(hT,{className:"w-6 h-6 text-white"})}),f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 text-center tracking-tight",children:e("values.essentialResearch.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-center text-sm md:text-base",children:e("values.essentialResearch.description")})]})]})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-6 tracking-tight",children:e("cta.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 max-w-3xl mx-auto mb-10",children:e("cta.description")}),f.jsx(Gt,{to:"/contact",children:f.jsxs("button",{className:"btn-primary px-7 py-3",children:[e("cta.button")," "]})})]})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:t})]})})},bce=()=>{const{t:e}=Mi("theWire"),[t,r]=U.useState(!1),n=rx.find(u=>u.featured),a=rx.filter(u=>!u.featured);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{onMenuStateChange:r}),f.jsxs("main",{className:"pt-24 pb-20",children:[f.jsxs("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-12",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("h1",{className:"font-pharma text-4xl sm:text-5xl md:text-6xl font-bold text-foreground mb-4",children:e("hero.title")}),f.jsx("p",{className:"font-geist text-lg text-muted-foreground max-w-2xl mx-auto",children:e("hero.subtitle")})]})}),n&&f.jsx(Qe,{delay:.1,children:f.jsx(Gt,{to:`/the-wire/${n.id}`,children:f.jsx(Cb,{className:"group overflow-hidden rounded-3xl border-border/50 hover:shadow-2xl transition-all duration-500",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-0",children:[f.jsxs("div",{className:"relative h-[300px] md:h-[400px] overflow-hidden bg-muted",children:[f.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105",loading:"eager",onError:u=>{const h=u.target;h.style.display="none"}}),f.jsx("div",{className:"absolute top-4 left-4 z-10",children:f.jsx(ga,{className:"bg-primary text-primary-foreground rounded-full px-4 py-1 font-semibold",children:e("featured")})})]}),f.jsxs("div",{className:"p-8 md:p-12 flex flex-col justify-center bg-card",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map((u,h)=>f.jsx(ga,{variant:"outline",className:"border-secondary/60 text-secondary bg-secondary/10 rounded-full",children:u},h))}),f.jsx("h2",{className:"font-pharma text-2xl sm:text-3xl font-bold text-foreground mb-4 group-hover:text-primary transition-colors",children:n.title}),f.jsx("p",{className:"font-geist text-muted-foreground mb-6 line-clamp-3",children:n.description}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-sm text-muted-foreground font-geist",children:n.date}),f.jsx(Zr,{variant:"link",className:"p-0 text-primary font-semibold",children:e("readArticle")})]})]})]})})})})]}),f.jsxs("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"font-pharma text-2xl sm:text-3xl font-semibold text-foreground mb-8",children:e("latestUpdates")})}),f.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:a.map((u,h)=>f.jsx(Qe,{delay:h*.1,children:f.jsx(Gt,{to:`/the-wire/${u.id}`,children:f.jsxs(Cb,{className:"group overflow-hidden hover:shadow-xl transition-all duration-300 border-border/50 rounded-2xl cursor-pointer hover:-translate-y-2 h-full flex flex-col",children:[f.jsx("div",{className:"relative h-56 overflow-hidden bg-muted",children:f.jsx("img",{src:u.image,alt:u.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110",loading:"lazy"})}),f.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:u.tags.map((o,_)=>f.jsx(ga,{variant:"outline",className:"font-geist border-secondary/60 text-secondary bg-secondary/10 rounded-full px-3 py-1 text-xs",children:o},_))}),f.jsx("h3",{className:"font-geist text-lg font-semibold text-foreground mb-2 leading-tight group-hover:text-primary transition-colors line-clamp-2",children:u.title}),f.jsx("p",{className:"font-geist text-muted-foreground text-sm line-clamp-3 leading-relaxed flex-grow",children:u.description}),f.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-border/50",children:[f.jsx("span",{className:"text-xs text-muted-foreground font-geist",children:u.date}),f.jsx(Zr,{variant:"link",className:"p-0 text-primary font-semibold text-sm",children:e("readMore")})]})]})]})})},u.id))})]})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:t})]})})},wce=()=>{const{t:e}=Mi("theWire"),{articleId:t}=O5(),r=Yf(),n=rx.find(a=>a.id===t);return n?f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{}),f.jsxs("main",{className:"pt-24 pb-20",children:[f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-8",children:f.jsxs(Gt,{to:"/the-wire",className:"inline-flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors font-geist",children:[f.jsx($W,{className:"w-4 h-4"}),e("backToWire")]})}),f.jsx(Qe,{children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-8",children:f.jsxs("div",{className:"relative h-[300px] sm:h-[400px] md:h-[500px] rounded-3xl overflow-hidden",children:[f.jsx("img",{src:n.image,alt:n.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 via-background/40 to-transparent"}),f.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 sm:p-10",children:[f.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:n.tags.map((a,u)=>f.jsx(ga,{className:"bg-primary/90 text-primary-foreground rounded-full px-4 py-1",children:a},u))}),f.jsx("h1",{className:"font-pharma text-2xl sm:text-4xl md:text-5xl text-white font-bold leading-tight max-w-4xl",children:n.title})]})]})})}),f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-3xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"flex flex-wrap items-center gap-6 mb-8 pb-8 border-b border-border",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(R3,{className:"w-4 h-4"}),f.jsx("span",{className:"font-geist",children:n.author})]}),f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(T3,{className:"w-4 h-4"}),f.jsx("span",{className:"font-geist",children:n.date})]})]})}),f.jsx(Qe,{delay:.2,children:f.jsx("div",{className:"prose prose-lg max-w-none",children:n.content.map((a,u)=>f.jsx("p",{className:"font-geist text-foreground/90 leading-relaxed mb-6 text-lg",children:a},u))})}),f.jsx(Qe,{delay:.3,children:f.jsx("div",{className:"mt-12 pt-8 border-t border-border",children:f.jsxs(Zr,{size:"lg",className:"rounded-full gap-2",onClick:()=>window.open(n.externalLink,"_blank"),children:[e("readOriginal"),f.jsx(KW,{className:"w-4 h-4"})]})})}),f.jsx(Qe,{delay:.4,children:f.jsxs("div",{className:"mt-16",children:[f.jsx("h3",{className:"font-pharma text-2xl font-semibold mb-6",children:e("moreFromWire")}),f.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:rx.filter(a=>a.id!==n.id).slice(0,2).map(a=>f.jsxs(Gt,{to:`/the-wire/${a.id}`,className:"group flex gap-4 p-4 rounded-xl border border-border hover:border-primary/50 transition-colors",children:[f.jsx("img",{src:a.image,alt:a.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-geist font-semibold text-foreground group-hover:text-primary transition-colors line-clamp-2",children:a.title}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.date})]})]},a.id))})]})})]})})]}),f.jsx(Ai,{}),f.jsx(ns,{})]})}):f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{}),f.jsx("main",{className:"pt-32 pb-20",children:f.jsxs("div",{className:"container mx-auto px-4 text-center",children:[f.jsx("h1",{className:"font-pharma text-4xl mb-4",children:e("articleNotFound.title")}),f.jsx("p",{className:"text-muted-foreground mb-8",children:e("articleNotFound.description")}),f.jsx(Zr,{onClick:()=>r("/the-wire"),children:e("articleNotFound.backButton")})]})}),f.jsx(Ai,{})]})})},Sce=""+new URL("hero-cannabis-BgwaG6Il.jpg",import.meta.url).href,LB=""+new URL("greenhouse-rows-BMiTJ8t4.png",import.meta.url).href,Tce=""+new URL("production-DpUACzdZ.jpg",import.meta.url).href,wD=""+new URL("indoor-cultivation-BsozX_Lw.png",import.meta.url).href,kce=()=>{const[e,t]=U.useState("southafrica"),[r,n]=U.useState(null),[a,u]=U.useState(!1),h=U.useRef(null),{scrollYProgress:o}=Nu({target:h,offset:["start start","end start"]}),_=gs(o,[0,1],["0%","50%"]),T=gs(o,[0,1],[1,.3]),P=E=>{n(r===E?null:E)};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:u}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:"Cultivating & Processing"}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:"Excellence in cultivation from South Africa to the world."})]})})})}),f.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-16 md:pb-20",children:f.jsx(Qe,{variant:"scale",duration:.8,children:f.jsxs("div",{ref:h,className:"relative h-[400px] md:h-[500px] lg:h-[600px] overflow-hidden rounded-2xl border border-border/30",children:[f.jsx(ir.img,{src:Sce,alt:"Cannabis cultivation facility",className:"absolute inset-0 w-full h-full object-cover",style:{y:_,opacity:T}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/10 to-transparent"})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-16 md:gap-20 lg:gap-24 items-start max-w-7xl mx-auto",children:[f.jsx(Qe,{children:f.jsxs("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground leading-[1.2] tracking-tight",children:["From seed to patient, we oversee every step of the cannabis journey. ",f.jsx("span",{className:"text-muted-foreground/70 font-normal",children:"Our commitment to excellence begins at the source and extends through every stage of cultivation and processing."})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"space-y-6 text-muted-foreground/80",children:[f.jsx("p",{className:"text-base md:text-lg leading-relaxed",children:"Our South African operations include a fully functional store and dispensary, alongside partner manufacturing facilities. We also operate partner factories in Thailand. Portugal serves as our main production, processing, and shipping hubwith UK operations launching soon, followed by Portugal going fully live."}),f.jsx("p",{className:"text-base md:text-lg leading-relaxed",children:"Our approach combines traditional horticultural expertise with modern precision agriculture. By maintaining rigorous quality protocols and investing in sustainable growing practices, we ensure that every batch meets international medical cannabis standards while delivering consistent therapeutic profiles."})]})})]})})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 mb-16 md:mb-20",children:[f.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-semibold text-white tracking-tight",children:"Why choose us as your partner?"}),f.jsx("a",{href:"/contact",className:"inline-flex items-center gap-2 text-white text-sm md:text-base border border-white/30 hover:bg-white/10 hover:border-white/50 px-6 md:px-7 py-2.5 md:py-3 rounded-lg transition-all duration-200 whitespace-nowrap font-medium backdrop-blur-sm",children:"Partner with us"})]})}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsxs("button",{onClick:()=>P("cultivators"),className:"w-full flex items-center justify-between p-6 md:p-7 text-left transition-all duration-200",children:[f.jsx("div",{className:"flex items-center gap-4 md:gap-6 flex-1 min-w-0",children:f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white tracking-tight",children:"Expert cultivators"})}),f.jsx(ir.div,{animate:{rotate:r==="cultivators"?45:0},transition:{duration:.2,ease:"easeOut"},className:"flex-shrink-0",children:f.jsx(E0,{className:"w-5 h-5 md:w-6 md:h-6 text-white/70"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:r==="cultivators"?"auto":0},transition:{duration:.2},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 md:px-7 pb-6 md:pb-7",children:f.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed",children:"Our multidisciplinary team brings together agricultural scientists, pharmaceutical specialists, and master growers with decades of combined experience. Operating state-licensed facilities across multiple jurisdictions, we've established ourselves as pioneers in regulated medical cannabis cultivation, setting benchmarks for quality and compliance."})})})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsxs("button",{onClick:()=>P("global"),className:"w-full flex items-center justify-between p-6 md:p-7 text-left transition-all duration-200",children:[f.jsx("div",{className:"flex items-center gap-4 md:gap-6 flex-1 min-w-0",children:f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white tracking-tight",children:"Global reach, seamless supply"})}),f.jsx(ir.div,{animate:{rotate:r==="global"?45:0},transition:{duration:.2,ease:"easeOut"},className:"flex-shrink-0",children:f.jsx(E0,{className:"w-5 h-5 md:w-6 md:h-6 text-white/70"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:r==="global"?"auto":0},transition:{duration:.2},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 md:px-7 pb-6 md:pb-7",children:f.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed",children:"With operational facilities spanning three continents and strategic partnerships in emerging markets, we ensure uninterrupted supply chains and rapid market access. Our multi-jurisdiction approach enables us to meet diverse regulatory requirements while maintaining consistent product quality worldwide."})})})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsxs("button",{onClick:()=>P("precision"),className:"w-full flex items-center justify-between p-6 md:p-7 text-left transition-all duration-200",children:[f.jsx("div",{className:"flex items-center gap-4 md:gap-6 flex-1 min-w-0",children:f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white tracking-tight",children:"Precision cultivation & innovation"})}),f.jsx(ir.div,{animate:{rotate:r==="precision"?45:0},transition:{duration:.2,ease:"easeOut"},className:"flex-shrink-0",children:f.jsx(E0,{className:"w-5 h-5 md:w-6 md:h-6 text-white/70"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:r==="precision"?"auto":0},transition:{duration:.2},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 md:px-7 pb-6 md:pb-7",children:f.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed",children:"Our facilities utilize automated environmental controls, AI-powered growth monitoring, and precision irrigation systems. From clone selection to final cure, every variable is measured, tracked, and optimized to produce consistent cannabinoid profiles and terpene expressions across all production cycles."})})})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm border border-white/10 rounded-xl overflow-hidden hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsxs("button",{onClick:()=>P("sustainable"),className:"w-full flex items-center justify-between p-6 md:p-7 text-left transition-all duration-200",children:[f.jsx("div",{className:"flex items-center gap-4 md:gap-6 flex-1 min-w-0",children:f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white tracking-tight",children:"Sustainable & standards-driven"})}),f.jsx(ir.div,{animate:{rotate:r==="sustainable"?45:0},transition:{duration:.2,ease:"easeOut"},className:"flex-shrink-0",children:f.jsx(E0,{className:"w-5 h-5 md:w-6 md:h-6 text-white/70"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:r==="sustainable"?"auto":0},transition:{duration:.2},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 md:px-7 pb-6 md:pb-7",children:f.jsx("p",{className:"text-white/70 text-base md:text-lg leading-relaxed",children:"Environmental stewardship drives our operations. We employ water reclamation systems, renewable energy sources, and organic pest management programs. All facilities maintain comprehensive certifications including Good Agricultural and Collection Practices (GACP) and operate under strict regulatory oversight."})})})]})]})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"text-4xl md:text-5xl lg:text-6xl font-semibold text-foreground text-center mb-16 md:mb-20 tracking-tight",children:"Our global cultivation network"})}),f.jsx(Qe,{variant:"fade",delay:.1,children:f.jsxs("div",{className:"flex justify-center gap-1 mb-12 md:mb-16 flex-wrap",children:[f.jsx("button",{onClick:()=>t("southafrica"),className:`px-6 md:px-8 py-2.5 font-medium transition-all duration-200 rounded-lg ${e==="southafrica"?"text-foreground bg-foreground/5":"text-muted-foreground hover:text-foreground hover:bg-foreground/5"}`,children:"South Africa"}),f.jsx("button",{onClick:()=>t("thailand"),className:`px-6 md:px-8 py-2.5 font-medium transition-all duration-200 rounded-lg ${e==="thailand"?"text-foreground bg-foreground/5":"text-muted-foreground hover:text-foreground hover:bg-foreground/5"}`,children:"Thailand"}),f.jsx("button",{onClick:()=>t("uk"),className:`px-6 md:px-8 py-2.5 font-medium transition-all duration-200 rounded-lg ${e==="uk"?"text-foreground bg-foreground/5":"text-muted-foreground hover:text-foreground hover:bg-foreground/5"}`,children:"United Kingdom"}),f.jsx("button",{onClick:()=>t("portugal"),className:`px-6 md:px-8 py-2.5 font-medium transition-all duration-200 rounded-lg ${e==="portugal"?"text-foreground bg-foreground/5":"text-muted-foreground hover:text-foreground hover:bg-foreground/5"}`,children:"Portugal"})]})}),e==="southafrica"&&f.jsx(Qe,{children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 md:gap-16 items-center max-w-6xl mx-auto",children:[f.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground tracking-tight",children:"South Africa"}),f.jsx(ga,{className:"bg-green-500/20 text-green-600 dark:text-green-400 border-green-500/30 text-xs font-medium",children:"Live"})]}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our flagship South African facility represents the cornerstone of our African operations. Leveraging the region's favorable climate and progressive regulatory framework, we've established a sophisticated cultivation center that serves as our primary launch market. The facility employs advanced greenhouse technology optimized for the local environment, ensuring year-round production of premium medical cannabis."})]}),f.jsx("div",{className:"rounded-xl overflow-hidden shadow-card order-1 md:order-2 border border-border/30 hover-lift",children:f.jsx("img",{src:LB,alt:"South Africa cultivation facility",className:"w-full h-64 md:h-96 object-cover hover:scale-105 transition-transform duration-500 ease-out"})})]})}),e==="thailand"&&f.jsx(Qe,{children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 md:gap-16 items-center max-w-6xl mx-auto",children:[f.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[f.jsx("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground tracking-tight",children:"Thailand"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our Thai operations leverage Thailand's progressive cannabis regulations and deep-rooted cultivation traditions. Through strategic partnerships with local manufacturing facilities, we tap into generations of expertise while implementing our rigorous quality standards. The region's tropical climate provides ideal growing conditions, enabling year-round production of premium cannabis cultivars for the Asian and global markets."}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300",children:"Factory Operations"})})]}),f.jsx("div",{className:"rounded-xl overflow-hidden shadow-card order-1 md:order-2 border border-border/30 hover-lift",children:f.jsx("img",{src:Tce,alt:"Thailand partner manufacturing facility",className:"w-full h-64 md:h-96 object-cover hover:scale-105 transition-transform duration-500 ease-out"})})]})}),e==="uk"&&f.jsx(Qe,{children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 md:gap-16 items-center max-w-6xl mx-auto",children:[f.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[f.jsx("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground tracking-tight",children:"United Kingdom"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our UK facility serves the European medical market with GMP-certified production capabilities. Combining local agricultural expertise with our proven cultivation methodologies, we're positioned to meet the stringent regulatory requirements and growing market demands across Europe. The UK operations are launching soon, establishing a strong presence in one of the world's most regulated cannabis markets."}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Coming Soon"})})]}),f.jsx("div",{className:"rounded-xl overflow-hidden shadow-card order-1 md:order-2 border border-border/30 hover-lift",children:f.jsx("img",{src:wD,alt:"UK cultivation facility",className:"w-full h-64 md:h-96 object-cover hover:scale-105 transition-transform duration-500 ease-out"})})]})}),e==="portugal"&&f.jsx(Qe,{children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 md:gap-16 items-center max-w-6xl mx-auto",children:[f.jsxs("div",{className:"order-2 md:order-1 space-y-6",children:[f.jsx("h3",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground tracking-tight",children:"Portugal"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Portugal serves as our main production, processing, and shipping hub for European markets. With EU-GMP certification and strategic location for continental distribution, the Portuguese facility is positioned to become the backbone of our European operations. Following the UK launch, Portugal will go fully live, providing seamless access to EU markets with premium medical cannabis products manufactured to the highest pharmaceutical standards."}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-300",children:"Coming Soon"}),f.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-primary/10 text-primary dark:bg-primary/20",children:"EU Hub"})]})]}),f.jsx("div",{className:"rounded-xl overflow-hidden shadow-card order-1 md:order-2 border border-border/30 hover-lift",children:f.jsx("img",{src:tx,alt:"Portugal EU production hub",className:"w-full h-64 md:h-96 object-cover hover:scale-105 transition-transform duration-500 ease-out"})})]})})]})}),f.jsx("section",{className:"py-16 md:py-24 bg-muted/20",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-4 md:mb-6",children:"Post-harvest excellence"}),f.jsx("p",{className:"text-lg md:text-xl text-muted-foreground max-w-3xl mb-12 md:mb-16 leading-relaxed",children:"Every stage of our processing workflow is designed to preserve cannabinoid integrity and enhance therapeutic value. Our controlled-environment facilities ensure optimal conditions from harvest through final packaging."})]}),f.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"group bg-background rounded-2xl overflow-hidden shadow-elegant hover:shadow-xl transition-all duration-500 hover:-translate-y-1 border border-border/50 hover:border-border",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden bg-muted",children:f.jsx("img",{src:wD,alt:"Harvesting cannabis",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-out"})}),f.jsxs("div",{className:"p-6 md:p-8",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-3 md:mb-4 tracking-tight",children:"Selective Harvesting"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Our cultivation specialists monitor trichome development and cannabinoid ratios to determine optimal harvest timing for each cultivar. Hand-trimming techniques preserve delicate trichome structures while removing excess plant material."})]})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"group bg-background rounded-2xl overflow-hidden shadow-elegant hover:shadow-xl transition-all duration-500 hover:-translate-y-1 border border-border/50 hover:border-border",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden bg-muted",children:f.jsx("img",{src:tx,alt:"Purification and refinement process",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-out"})}),f.jsxs("div",{className:"p-6 md:p-8",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-3 md:mb-4 tracking-tight",children:"Controlled Curing & Drying"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Temperature and humidity-controlled drying rooms ensure gradual moisture reduction while preserving terpene profiles. Multi-week curing cycles in precision climate chambers enhance flavor complexity and product stability."})]})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"group bg-background rounded-2xl overflow-hidden shadow-elegant hover:shadow-xl transition-all duration-500 hover:-translate-y-1 border border-border/50 hover:border-border sm:col-span-2 lg:col-span-1",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden bg-muted",children:f.jsx("img",{src:vw,alt:"Quality control testing",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-700 ease-out"})}),f.jsxs("div",{className:"p-6 md:p-8",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-3 md:mb-4 tracking-tight",children:"Laboratory Testing"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Comprehensive testing protocols analyze potency, terpene profiles, moisture content, and screen for contaminants. Third-party laboratory verification provides independent quality assurance for every production batch."})]})]})})]})]})}),f.jsx("section",{className:"py-16 md:py-24",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 md:mb-6",children:"Stay informed"}),f.jsx("p",{className:"text-white/80 text-lg md:text-xl mb-10 md:mb-12 leading-relaxed",children:"Subscribe to receive updates on our expansion, product launches, and industry insights."})]}),f.jsx(Qe,{delay:.2,children:f.jsxs("form",{className:"grid sm:grid-cols-2 gap-4 md:gap-6",children:[f.jsx("input",{type:"text",placeholder:"First Name",className:"px-5 py-3.5 rounded-lg bg-white/10 border border-white/30 text-white placeholder:text-white/60 focus:outline-none focus:ring-2 focus:ring-white/40 focus:border-white/50 transition-all duration-300"}),f.jsx("input",{type:"email",placeholder:"Email address",className:"px-5 py-3.5 rounded-lg bg-white/10 border border-white/30 text-white placeholder:text-white/60 focus:outline-none focus:ring-2 focus:ring-white/40 focus:border-white/50 transition-all duration-300"}),f.jsx("button",{type:"submit",className:"sm:col-span-2 px-6 py-3.5 bg-white/10 hover:bg-white/20 border border-white/40 hover:border-white/60 text-white rounded-lg transition-all duration-300 font-semibold hover:shadow-lg hover:-translate-y-0.5",children:"Sign up"})]})})]})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:a})]})})};var FB={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.13.0/LICENSE.txt
 */(function(e,t){(function(r,n){e.exports=n()})(g$,function(){var r={},n={};function a(h,o,_){if(n[h]=_,h==="index"){var T="var sharedModule = {}; ("+n.shared+")(sharedModule); ("+n.worker+")(sharedModule);",P={};return n.shared(P),n.index(r,P),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([T],{type:"text/javascript"}))),r}}a("shared",["exports"],function(h){function o(c,i,l,p){return new(l||(l=Promise))(function(m,y){function v(j){try{C(p.next(j))}catch(R){y(R)}}function S(j){try{C(p.throw(j))}catch(R){y(R)}}function C(j){var R;j.done?m(j.value):(R=j.value,R instanceof l?R:new l(function(L){L(R)})).then(v,S)}C((p=p.apply(c,i||[])).next())})}function _(c,i){this.x=c,this.y=i}function T(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var P,E;typeof SuppressedError=="function"&&SuppressedError,_.prototype={clone(){return new _(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,i){return this.clone()._rotateAround(c,i)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const i=c.x-this.x,l=c.y-this.y;return i*i+l*l},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,i){return Math.atan2(this.x*i-this.y*c,this.x*c+this.y*i)},_matMult(c){const i=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=i,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const i=Math.cos(c),l=Math.sin(c),p=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=p,this},_rotateAround(c,i){const l=Math.cos(c),p=Math.sin(c),m=i.y+p*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-p*(this.y-i.y),this.y=m,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:_},_.convert=function(c){if(c instanceof _)return c;if(Array.isArray(c))return new _(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new _(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var M=function(){if(E)return P;function c(i,l,p,m){this.cx=3*i,this.bx=3*(p-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=p,this.p2y=m}return E=1,P=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var p=i,m=0;m<8;m++){var y=this.sampleCurveX(p)-i;if(Math.abs(y)<l)return p;var v=this.sampleCurveDerivativeX(p);if(Math.abs(v)<1e-6)break;p-=y/v}var S=0,C=1;for(p=i,m=0;m<20&&(y=this.sampleCurveX(p),!(Math.abs(y-i)<l));m++)i>y?S=p:C=p,p=.5*(C-S)+S;return p},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},P}(),I=T(M);let z,F;function D(){return z==null&&(z=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),z}function q(){if(F==null&&(F=!1,D())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let p=0;p<5*5;p++){const m=4*p;i.fillStyle=`rgb(${m},${m+1},${m+2})`,i.fillRect(p%5,Math.floor(p/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&l[p]!==p){F=!0;break}}}return F||!1}var $=1e-6,W=typeof Float32Array<"u"?Float32Array:Array;function te(){var c=new W(9);return W!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function se(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function he(){var c=new W(3);return W!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function pe(c){var i=c[0],l=c[1],p=c[2];return Math.sqrt(i*i+l*l+p*p)}function xe(c,i,l){var p=new W(3);return p[0]=c,p[1]=i,p[2]=l,p}function Re(c,i,l){return c[0]=i[0]+l[0],c[1]=i[1]+l[1],c[2]=i[2]+l[2],c}function Me(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c}function pt(c,i,l){var p=i[0],m=i[1],y=i[2],v=l[0],S=l[1],C=l[2];return c[0]=m*C-y*S,c[1]=y*v-p*C,c[2]=p*S-m*v,c}var Oe,Ye=pe;function Ge(c,i,l){var p=i[0],m=i[1],y=i[2],v=i[3];return c[0]=l[0]*p+l[4]*m+l[8]*y+l[12]*v,c[1]=l[1]*p+l[5]*m+l[9]*y+l[13]*v,c[2]=l[2]*p+l[6]*m+l[10]*y+l[14]*v,c[3]=l[3]*p+l[7]*m+l[11]*y+l[15]*v,c}function rt(){var c=new W(4);return W!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function nt(c,i,l,p){var m=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",y=Math.PI/360;i*=y,p*=y,l*=y;var v=Math.sin(i),S=Math.cos(i),C=Math.sin(l),j=Math.cos(l),R=Math.sin(p),L=Math.cos(p);switch(m){case"xyz":c[0]=v*j*L+S*C*R,c[1]=S*C*L-v*j*R,c[2]=S*j*R+v*C*L,c[3]=S*j*L-v*C*R;break;case"xzy":c[0]=v*j*L-S*C*R,c[1]=S*C*L-v*j*R,c[2]=S*j*R+v*C*L,c[3]=S*j*L+v*C*R;break;case"yxz":c[0]=v*j*L+S*C*R,c[1]=S*C*L-v*j*R,c[2]=S*j*R-v*C*L,c[3]=S*j*L+v*C*R;break;case"yzx":c[0]=v*j*L+S*C*R,c[1]=S*C*L+v*j*R,c[2]=S*j*R-v*C*L,c[3]=S*j*L-v*C*R;break;case"zxy":c[0]=v*j*L-S*C*R,c[1]=S*C*L+v*j*R,c[2]=S*j*R+v*C*L,c[3]=S*j*L-v*C*R;break;case"zyx":c[0]=v*j*L-S*C*R,c[1]=S*C*L+v*j*R,c[2]=S*j*R-v*C*L,c[3]=S*j*L+v*C*R;break;default:throw new Error("Unknown angle order "+m)}return c}function Ve(){var c=new W(2);return W!=Float32Array&&(c[0]=0,c[1]=0),c}function _e(c,i){var l=new W(2);return l[0]=c,l[1]=i,l}he(),Oe=new W(4),W!=Float32Array&&(Oe[0]=0,Oe[1]=0,Oe[2]=0,Oe[3]=0),he(),xe(1,0,0),xe(0,1,0),rt(),rt(),te(),Ve();const Le=8192;function ft(c,i,l){return i*(Le/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function yt(c,i){return(c%i+i)%i}function wt(c,i,l){return c*(1-l)+i*l}function Lt(c){if(c<=0)return 0;if(c>=1)return 1;const i=c*c,l=i*c;return 4*(c<.5?l:3*(c-i)+l-.75)}function Wt(c,i,l,p){const m=new I(c,i,l,p);return y=>m.solve(y)}const wr=Wt(.25,.1,.25,1);function kr(c,i,l){return Math.min(l,Math.max(i,c))}function er(c,i,l){const p=l-i,m=((c-i)%p+p)%p+i;return m===i?l:m}function Yr(c,...i){for(const l of i)for(const p in l)c[p]=l[p];return c}let Zn=1;function Rn(c,i,l){const p={};for(const m in c)p[m]=i.call(this,c[m],m,c);return p}function ri(c,i,l){const p={};for(const m in c)i.call(this,c[m],m,c)&&(p[m]=c[m]);return p}function vn(c){return Array.isArray(c)?c.map(vn):typeof c=="object"&&c?Rn(c,vn):c}const Ni={};function Cr(c){Ni[c]||(typeof console<"u"&&console.warn(c),Ni[c]=!0)}function ni(c,i,l){return(l.y-c.y)*(i.x-c.x)>(i.y-c.y)*(l.x-c.x)}function xi(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Nr=null;function vi(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Dn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ee(c,i,l,p,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(c,{timestamp:0});try{const v=y==null?void 0:y.format;if(!v||!v.startsWith("BGR")&&!v.startsWith("RGB"))throw new Error(`Unrecognized format ${v}`);const S=v.startsWith("BGR"),C=new Uint8ClampedArray(p*m*4);if(yield y.copyTo(C,function(j,R,L,V,G){const H=4*Math.max(-R,0),Y=(Math.max(0,L)-L)*V*4+H,J=4*V,ne=Math.max(0,R),fe=Math.max(0,L);return{rect:{x:ne,y:fe,width:Math.min(j.width,R+V)-ne,height:Math.min(j.height,L+G)-fe},layout:[{offset:Y,stride:J}]}}(c,i,l,p,m)),S)for(let j=0;j<C.length;j+=4){const R=C[j];C[j]=C[j+2],C[j+2]=R}return C}finally{y.close()}})}let Be,He;function xt(c,i,l,p){return c.addEventListener(i,l,p),{unsubscribe:()=>{c.removeEventListener(i,l,p)}}}function vt(c){return c*Math.PI/180}function dt(c){return c/Math.PI*180}const Tt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},or={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},vr="AbortError";function Tn(){return new Error(vr)}const ii={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function _i(c){return ii.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Rs="global-dispatcher";class Kn extends Error{constructor(i,l,p,m){super(`AJAXError: ${l} (${i}): ${p}`),this.status=i,this.statusText=l,this.url=p,this.body=m}}const nn=()=>xi(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Te=function(c,i){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const p=_i(c.url);if(p)return p(c,i);if(xi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Rs},i)}if(!(/^file:/.test(l=c.url)||/^file:/.test(nn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,m){return o(this,void 0,void 0,function*(){const y=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:nn(),signal:m.signal});let v,S;p.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{v=yield fetch(y)}catch(j){throw new Kn(0,j.message,p.url,new Blob)}if(!v.ok){const j=yield v.blob();throw new Kn(v.status,v.statusText,p.url,j)}S=p.type==="arrayBuffer"||p.type==="image"?v.arrayBuffer():p.type==="json"?v.json():v.text();const C=yield S;if(m.signal.aborted)throw Tn();return{data:C,cacheControl:v.headers.get("Cache-Control"),expires:v.headers.get("Expires")}})}(c,i);if(xi(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Rs},i)}var l;return function(p,m){return new Promise((y,v)=>{var S;const C=new XMLHttpRequest;C.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(C.responseType="arraybuffer");for(const j in p.headers)C.setRequestHeader(j,p.headers[j]);p.type==="json"&&(C.responseType="text",!((S=p.headers)===null||S===void 0)&&S.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=p.credentials==="include",C.onerror=()=>{v(new Error(C.statusText))},C.onload=()=>{if(!m.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let j=C.response;if(p.type==="json")try{j=JSON.parse(C.response)}catch(R){return void v(R)}y({data:j,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const j=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});v(new Kn(C.status,C.statusText,p.url,j))}},m.signal.addEventListener("abort",()=>{C.abort(),v(Tn())}),C.send(p.body)})}(c,i)};function Q(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const i=new URL(c),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function ee(c,i,l){l[c]&&l[c].indexOf(i)!==-1||(l[c]=l[c]||[],l[c].push(i))}function ie(c,i,l){if(l&&l[c]){const p=l[c].indexOf(i);p!==-1&&l[c].splice(p,1)}}class ge{constructor(i,l={}){Yr(this,l),this.type=i}}class be extends ge{constructor(i,l={}){super("error",Yr({error:i},l))}}class Ie{on(i,l){return this._listeners=this._listeners||{},ee(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return ie(i,l,this._listeners),ie(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ee(i,l,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,l){typeof i=="string"&&(i=new ge(i,l||{}));const p=i.type;if(this.listens(p)){i.target=this;const m=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const S of m)S.call(this,i);const y=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const S of y)ie(p,S,this._oneTimeListeners),S.call(this,i);const v=this._eventedParent;v&&(Yr(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(i))}else i instanceof be&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const je=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function We(c,i){const l={};for(const p in c)p!=="ref"&&(l[p]=c[p]);return je.forEach(p=>{p in i&&(l[p]=i[p])}),l}function Ne(c,i){if(Array.isArray(c)){if(!Array.isArray(i)||c.length!==i.length)return!1;for(let l=0;l<c.length;l++)if(!Ne(c[l],i[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&i!==null){if(typeof i!="object"||Object.keys(c).length!==Object.keys(i).length)return!1;for(const l in c)if(!Ne(c[l],i[l]))return!1;return!0}return c===i}function De(c,i){c.push(i)}function ct(c,i,l){De(l,{command:"addSource",args:[c,i[c]]})}function kt(c,i,l){De(i,{command:"removeSource",args:[c]}),l[c]=!0}function Ft(c,i,l,p){kt(c,l,p),ct(c,i,l)}function Pr(c,i,l){let p;for(p in c[l])if(Object.prototype.hasOwnProperty.call(c[l],p)&&p!=="data"&&!Ne(c[l][p],i[l][p]))return!1;for(p in i[l])if(Object.prototype.hasOwnProperty.call(i[l],p)&&p!=="data"&&!Ne(c[l][p],i[l][p]))return!1;return!0}function Yt(c,i,l,p,m,y){c=c||{},i=i||{};for(const v in c)Object.prototype.hasOwnProperty.call(c,v)&&(Ne(c[v],i[v])||l.push({command:y,args:[p,v,i[v],m]}));for(const v in i)Object.prototype.hasOwnProperty.call(i,v)&&!Object.prototype.hasOwnProperty.call(c,v)&&(Ne(c[v],i[v])||l.push({command:y,args:[p,v,i[v],m]}))}function nr(c){return c.id}function _r(c,i){return c[i.id]=i,c}class it{constructor(i,l,p,m){this.message=(i?`${i}: `:"")+p,m&&(this.identifier=m),l!=null&&l.__line__&&(this.line=l.__line__)}}function Qr(c,...i){for(const l of i)for(const p in l)c[p]=l[p];return c}class Vr extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class On{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[p,m]of l)this.bindings[p]=m}concat(i){return new On(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const $r={kind:"null"},at={kind:"number"},Et={kind:"string"},Vt={kind:"boolean"},is={kind:"color"},yl={kind:"projectionDefinition"},si={kind:"object"},Ht={kind:"value"},Wa={kind:"collator"},lc={kind:"formatted"},cc={kind:"padding"},Js={kind:"colorArray"},xl={kind:"numberArray"},uc={kind:"resolvedImage"},dc={kind:"variableAnchorOffsetCollection"};function xs(c,i){return{kind:"array",itemType:c,N:i}}function Ur(c){if(c.kind==="array"){const i=Ur(c.itemType);return typeof c.N=="number"?`array<${i}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${i}>`}return c.kind}const _w=[$r,at,Et,Vt,is,yl,lc,si,xs(Ht),cc,xl,Js,uc,dc];function wa(c,i){if(i.kind==="error")return null;if(c.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!wa(c.itemType,i.itemType))&&(typeof c.N!="number"||c.N===i.N))return null}else{if(c.kind===i.kind)return null;if(c.kind==="value"){for(const l of _w)if(!wa(l,i))return null}}return`Expected ${Ur(c)} but found ${Ur(i)} instead.`}function Lu(c,i){return i.some(l=>l.kind===c.kind)}function sn(c,i){return i.some(l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c)}function Io(c,i){return c.kind==="array"&&i.kind==="array"?c.itemType.kind===i.itemType.kind&&typeof c.N=="number":c.kind===i.kind}const nm=.96422,hc=.82521,im=4/29,pc=6/29,Ax=3*pc*pc,Mx=pc*pc*pc,bw=Math.PI/180,Nx=180/Math.PI;function Ix(c){return(c%=360)<0&&(c+=360),c}function Rx([c,i,l,p]){let m,y;const v=am((.2225045*(c=sm(c))+.7168786*(i=sm(i))+.0606169*(l=sm(l)))/1);c===i&&i===l?m=y=v:(m=am((.4360747*c+.3850649*i+.1430804*l)/nm),y=am((.0139322*c+.0971045*i+.7141733*l)/hc));const S=116*v-16;return[S<0?0:S,500*(m-v),200*(v-y),p]}function sm(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function am(c){return c>Mx?Math.pow(c,1/3):c/Ax+im}function Dx([c,i,l,p]){let m=(c+16)/116,y=isNaN(i)?m:m+i/500,v=isNaN(l)?m:m-l/200;return m=1*lm(m),y=nm*lm(y),v=hc*lm(v),[om(3.1338561*y-1.6168667*m-.4906146*v),om(-.9787684*y+1.9161415*m+.033454*v),om(.0719453*y-.2289914*m+1.4052427*v),p]}function om(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function lm(c){return c>pc?c*c*c:Ax*(c-im)}const Ox=Object.hasOwn||function(c,i){return Object.prototype.hasOwnProperty.call(c,i)};function Ga(c,i){return Ox(c,i)?c[i]:void 0}function mh(c){return parseInt(c.padEnd(2,c),16)/255}function Lx(c,i){return Sa(i?c/100:c,0,1)}function Sa(c,i,l){return Math.min(Math.max(i,c),l)}function Fx(c){return!c.some(Number.isNaN)}const ww={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ro(c,i,l){return c+l*(i-c)}function vl(c,i,l){return c.map((p,m)=>Ro(p,i[m],l))}class hr{constructor(i,l,p,m=1,y=!0){this.r=i,this.g=l,this.b=p,this.a=m,y||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[i,l,p,m]))}static parse(i){if(i instanceof hr)return i;if(typeof i!="string")return;const l=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=Ga(ww,p);if(m){const[v,S,C]=m;return[v/255,S/255,C/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const v=p.length<6?1:2;let S=1;return[mh(p.slice(S,S+=v)),mh(p.slice(S,S+=v)),mh(p.slice(S,S+=v)),mh(p.slice(S,S+v)||"ff")]}if(p.startsWith("rgb")){const v=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[S,C,j,R,L,V,G,H,Y,J,ne,fe]=v,ae=[R||" ",G||" ",J].join("");if(ae==="  "||ae==="  /"||ae===",,"||ae===",,,"){const ue=[j,V,Y].join(""),Ce=ue==="%%%"?100:ue===""?255:0;if(Ce){const Pe=[Sa(+C/Ce,0,1),Sa(+L/Ce,0,1),Sa(+H/Ce,0,1),ne?Lx(+ne,fe):1];if(Fx(Pe))return Pe}}return}}const y=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[v,S,C,j,R,L,V,G,H]=y,Y=[C||" ",R||" ",V].join("");if(Y==="  "||Y==="  /"||Y===",,"||Y===",,,"){const J=[+S,Sa(+j,0,100),Sa(+L,0,100),G?Lx(+G,H):1];if(Fx(J))return function([ne,fe,ae,ue]){function Ce(Pe){const $e=(Pe+ne/30)%12,Je=fe*Math.min(ae,1-ae);return ae-Je*Math.max(-1,Math.min($e-3,9-$e,1))}return ne=Ix(ne),fe/=100,ae/=100,[Ce(0),Ce(8),Ce(4),ue]}(J)}}}(i);return l?new hr(...l,!1):void 0}get rgb(){const{r:i,g:l,b:p,a:m}=this,y=m||1/0;return this.overwriteGetter("rgb",[i/y,l/y,p/y,m])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,p,m,y]=Rx(i),v=Math.sqrt(p*p+m*m);return[Math.round(1e4*v)?Ix(Math.atan2(m,p)*Nx):NaN,v,l,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Rx(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,p,m]=this.rgb;return`rgba(${[i,l,p].map(y=>Math.round(255*y)).join(",")},${m})`}static interpolate(i,l,p,m="rgb"){switch(m){case"rgb":{const[y,v,S,C]=vl(i.rgb,l.rgb,p);return new hr(y,v,S,C,!1)}case"hcl":{const[y,v,S,C]=i.hcl,[j,R,L,V]=l.hcl;let G,H;if(isNaN(y)||isNaN(j))isNaN(y)?isNaN(j)?G=NaN:(G=j,S!==1&&S!==0||(H=R)):(G=y,L!==1&&L!==0||(H=v));else{let ae=j-y;j>y&&ae>180?ae-=360:j<y&&y-j>180&&(ae+=360),G=y+p*ae}const[Y,J,ne,fe]=function([ae,ue,Ce,Pe]){return ae=isNaN(ae)?0:ae*bw,Dx([Ce,Math.cos(ae)*ue,Math.sin(ae)*ue,Pe])}([G,H??Ro(v,R,p),Ro(S,L,p),Ro(C,V,p)]);return new hr(Y,J,ne,fe,!1)}case"lab":{const[y,v,S,C]=Dx(vl(i.lab,l.lab,p));return new hr(y,v,S,C,!1)}}}}hr.black=new hr(0,0,0,1),hr.white=new hr(1,1,1,1),hr.transparent=new hr(0,0,0,0),hr.red=new hr(1,0,0,1);class Ds{constructor(i,l,p){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const yr=["bottom","center","top"];class Do{constructor(i,l,p,m,y,v){this.text=i,this.image=l,this.scale=p,this.fontStack=m,this.textColor=y,this.verticalAlign=v}}class Ln{constructor(i){this.sections=i}static fromString(i){return new Ln([new Do(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Ln?i:Ln.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Ii{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ii)return i;if(typeof i=="number")return new Ii([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Ii(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){return new Ii(vl(i.values,l.values,p))}}class Ri{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ri)return i;if(typeof i=="number")return new Ri([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new Ri(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){return new Ri(vl(i.values,l.values,p))}}class Yn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Yn)return i;if(typeof i=="string"){const p=hr.parse(i);return p?new Yn([p]):void 0}if(!Array.isArray(i))return;const l=[];for(const p of i){if(typeof p!="string")return;const m=hr.parse(p);if(!m)return;l.push(m)}return new Yn(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p,m="rgb"){const y=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let v=0;v<i.values.length;v++)y.push(hr.interpolate(i.values[v],l.values[v],p,m));return new Yn(y)}}class qr extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const gh=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Hi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Hi)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const p=i[l],m=i[l+1];if(typeof p!="string"||!gh.has(p)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new Hi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){const m=i.values,y=l.values;if(m.length!==y.length)throw new qr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const v=[];for(let S=0;S<m.length;S+=2){if(m[S]!==y[S])throw new qr(`Cannot interpolate values containing mismatched anchors. from[${S}]: ${m[S]}, to[${S}]: ${y[S]}`);v.push(m[S]);const[C,j]=m[S+1],[R,L]=y[S+1];v.push([Ro(C,R,p),Ro(j,L,p)])}return new Hi(v)}}class ss{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new ss({name:i,available:!1}):null}}class Di{constructor(i,l,p){this.from=i,this.to=l,this.transition=p}static interpolate(i,l,p){return new Di(i,l,p)}static parse(i){return i instanceof Di?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new Di(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new Di(i.from,i.to,i.transition):typeof i=="string"?new Di(i,i,1):void 0}}function zx(c,i,l,p){return typeof c=="number"&&c>=0&&c<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,i,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,i,l,p]:[c,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Oo(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Di||c instanceof hr||c instanceof Ds||c instanceof Ln||c instanceof Ii||c instanceof Ri||c instanceof Yn||c instanceof Hi||c instanceof ss)return!0;if(Array.isArray(c)){for(const i of c)if(!Oo(i))return!1;return!0}if(typeof c=="object"){for(const i in c)if(!Oo(c[i]))return!1;return!0}return!1}function Xr(c){if(c===null)return $r;if(typeof c=="string")return Et;if(typeof c=="boolean")return Vt;if(typeof c=="number")return at;if(c instanceof hr)return is;if(c instanceof Di)return yl;if(c instanceof Ds)return Wa;if(c instanceof Ln)return lc;if(c instanceof Ii)return cc;if(c instanceof Ri)return xl;if(c instanceof Yn)return Js;if(c instanceof Hi)return dc;if(c instanceof ss)return uc;if(Array.isArray(c)){const i=c.length;let l;for(const p of c){const m=Xr(p);if(l){if(l===m)continue;l=Ht;break}l=m}return xs(l||Ht,i)}return si}function fc(c){const i=typeof c;return c===null?"":i==="string"||i==="number"||i==="boolean"?String(c):c instanceof hr||c instanceof Di||c instanceof Ln||c instanceof Ii||c instanceof Ri||c instanceof Yn||c instanceof Hi||c instanceof ss?c.toString():JSON.stringify(c)}class Lo{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Oo(i[1]))return l.error("invalid value");const p=i[1];let m=Xr(p);const y=l.expectedType;return m.kind!=="array"||m.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(m=y),new Lo(m,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Fu={string:Et,number:at,boolean:Vt,object:si};class as{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let p,m=1;const y=i[0];if(y==="array"){let S,C;if(i.length>2){const j=i[1];if(typeof j!="string"||!(j in Fu)||j==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Fu[j],m++}else S=Ht;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);C=i[2],m++}p=xs(S,C)}else{if(!Fu[y])throw new Error(`Types doesn't contain name = ${y}`);p=Fu[y]}const v=[];for(;m<i.length;m++){const S=l.parse(i[m],m,Ht);if(!S)return null;v.push(S)}return new as(p,v)}evaluate(i){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(i);if(!wa(this.type,Xr(p)))return p;if(l===this.args.length-1)throw new qr(`Expected value to be of type ${Ur(this.type)}, but found ${Ur(Xr(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Jr={"to-boolean":Vt,"to-color":is,"to-number":at,"to-string":Et};class Ta{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[0];if(!Jr[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return l.error("Expected one argument.");const m=Jr[p],y=[];for(let v=1;v<i.length;v++){const S=l.parse(i[v],v,Ht);if(!S)return null;y.push(S)}return new Ta(m,y)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,p;for(const m of this.args){if(l=m.evaluate(i),p=null,l instanceof hr)return l;if(typeof l=="string"){const y=i.parseColor(l);if(y)return y}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:zx(l[0],l[1],l[2],l[3]),!p))return new hr(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new qr(p||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const p of this.args){l=p.evaluate(i);const m=Ii.parse(l);if(m)return m}throw new qr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const p of this.args){l=p.evaluate(i);const m=Ri.parse(l);if(m)return m}throw new qr(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const p of this.args){l=p.evaluate(i);const m=Yn.parse(l);if(m)return m}throw new qr(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const p of this.args){l=p.evaluate(i);const m=Hi.parse(l);if(m)return m}throw new qr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const p of this.args){if(l=p.evaluate(i),l===null)return 0;const m=Number(l);if(!isNaN(m))return m}throw new qr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ln.fromString(fc(this.args[0].evaluate(i)));case"resolvedImage":return ss.fromString(fc(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return fc(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Sr=["Unknown","Point","LineString","Polygon"];class sr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=hr.parse(i),this._parseColorCache.set(i,l)),l}}class mc{constructor(i,l,p=[],m,y=new On,v=[]){this.registry=i,this.path=p,this.key=p.map(S=>`[${S}]`).join(""),this.scope=y,this.errors=v,this.expectedType=m,this._isConstant=l}parse(i,l,p,m,y={}){return l?this.concat(l,p,m)._parse(i,y):this._parse(i,y)}_parse(i,l){function p(m,y,v){return v==="assert"?new as(y,[m]):v==="coerce"?new Ta(y,[m]):m}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=i[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[m];if(y){let v=y.parse(i,this);if(!v)return null;if(this.expectedType){const S=this.expectedType,C=v.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value"){if(S.kind==="projectionDefinition"&&["string","array"].includes(C.kind)||["color","formatted","resolvedImage"].includes(S.kind)&&["value","string"].includes(C.kind)||["padding","numberArray"].includes(S.kind)&&["value","number","array"].includes(C.kind)||S.kind==="colorArray"&&["value","string","array"].includes(C.kind)||S.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(C.kind))v=p(v,S,l.typeAnnotation||"coerce");else if(this.checkSubtype(S,C))return null}else v=p(v,S,l.typeAnnotation||"assert")}if(!(v instanceof Lo)&&v.type.kind!=="resolvedImage"&&this._isConstant(v)){const S=new sr;try{v=new Lo(v.type,v.evaluate(S))}catch(C){return this.error(C.message),null}}return v}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,p){const m=typeof i=="number"?this.path.concat(i):this.path,y=p?this.scope.concat(p):this.scope;return new mc(this.registry,this._isConstant,m,l||null,y,this.errors)}error(i,...l){const p=`${this.key}${l.map(m=>`[${m}]`).join("")}`;this.errors.push(new Vr(p,i))}checkSubtype(i,l){const p=wa(i,l);return p&&this.error(p),p}}class xr{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let y=1;y<i.length-1;y+=2){const v=i[y];if(typeof v!="string")return l.error(`Expected string, but found ${typeof v} instead.`,y);if(/[^a-zA-Z0-9_]/.test(v))return l.error("Variable names must contain only alphanumeric characters or '_'.",y);const S=l.parse(i[y+1],y+1);if(!S)return null;p.push([v,S])}const m=l.parse(i[i.length-1],i.length-1,l.expectedType,p);return m?new xr(p,m):null}outputDefined(){return this.result.outputDefined()}}class gc{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const p=i[1];return l.scope.has(p)?new gc(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class ea{constructor(i,l,p){this.type=i,this.index=l,this.input=p}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,at),m=l.parse(i[2],2,xs(l.expectedType||Ht));return p&&m?new ea(m.type.itemType,p,m):null}evaluate(i){const l=this.index.evaluate(i),p=this.input.evaluate(i);if(l<0)throw new qr(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new qr(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new qr(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class zu{constructor(i,l){this.type=Vt,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Ht),m=l.parse(i[2],2,Ht);return p&&m?Lu(p.type,[Vt,Et,at,$r,Ht])?new zu(p,m):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(p.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!sn(l,["boolean","string","number","null"]))throw new qr(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(Xr(l))} instead.`);if(!sn(p,["string","array"]))throw new qr(`Expected second argument to be of type array or string, but found ${Ur(Xr(p))} instead.`);return p.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class _l{constructor(i,l,p){this.type=at,this.needle=i,this.haystack=l,this.fromIndex=p}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Ht),m=l.parse(i[2],2,Ht);if(!p||!m)return null;if(!Lu(p.type,[Vt,Et,at,$r,Ht]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(p.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,at);return y?new _l(p,m,y):null}return new _l(p,m)}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!sn(l,["boolean","string","number","null"]))throw new qr(`Expected first argument to be of type boolean, string, number or null, but found ${Ur(Xr(l))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(i)),sn(p,["string"])){const y=p.indexOf(l,m);return y===-1?-1:[...p.slice(0,y)].length}if(sn(p,["array"]))return p.indexOf(l,m);throw new qr(`Expected second argument to be of type array or string, but found ${Ur(Xr(p))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class yh{constructor(i,l,p,m,y,v){this.inputType=i,this.type=l,this.input=p,this.cases=m,this.outputs=y,this.otherwise=v}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let p,m;l.expectedType&&l.expectedType.kind!=="value"&&(m=l.expectedType);const y={},v=[];for(let j=2;j<i.length-1;j+=2){let R=i[j];const L=i[j+1];Array.isArray(R)||(R=[R]);const V=l.concat(j);if(R.length===0)return V.error("Expected at least one branch label.");for(const H of R){if(typeof H!="number"&&typeof H!="string")return V.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return V.error("Numeric branch labels must be integer values.");if(p){if(V.checkSubtype(p,Xr(H)))return null}else p=Xr(H);if(y[String(H)]!==void 0)return V.error("Branch labels must be unique.");y[String(H)]=v.length}const G=l.parse(L,j,m);if(!G)return null;m=m||G.type,v.push(G)}const S=l.parse(i[1],1,Ht);if(!S)return null;const C=l.parse(i[i.length-1],i.length-1,m);return C?S.type.kind!=="value"&&l.concat(1).checkSubtype(p,S.type)?null:new yh(p,m,S,y,v,C):null}evaluate(i){const l=this.input.evaluate(i);return(Xr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Bu{constructor(i,l,p){this.type=i,this.branches=l,this.otherwise=p}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const m=[];for(let v=1;v<i.length-1;v+=2){const S=l.parse(i[v],v,Vt);if(!S)return null;const C=l.parse(i[v+1],v+1,p);if(!C)return null;m.push([S,C]),p=p||C.type}const y=l.parse(i[i.length-1],i.length-1,p);if(!y)return null;if(!p)throw new Error("Can't infer output type");return new Bu(p,m,y)}evaluate(i){for(const[l,p]of this.branches)if(l.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,p]of this.branches)i(l),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Vu{constructor(i,l,p,m){this.type=i,this.input=l,this.beginIndex=p,this.endIndex=m}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Ht),m=l.parse(i[2],2,at);if(!p||!m)return null;if(!Lu(p.type,[xs(Ht),Et,Ht]))return l.error(`Expected first argument to be of type array or string, but found ${Ur(p.type)} instead`);if(i.length===4){const y=l.parse(i[3],3,at);return y?new Vu(p.type,p,m,y):null}return new Vu(p.type,p,m)}evaluate(i){const l=this.input.evaluate(i),p=this.beginIndex.evaluate(i);let m;if(this.endIndex&&(m=this.endIndex.evaluate(i)),sn(l,["string"]))return[...l].slice(p,m).join("");if(sn(l,["array"]))return l.slice(p,m);throw new qr(`Expected first argument to be of type array or string, but found ${Ur(Xr(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function xh(c,i){const l=c.length-1;let p,m,y=0,v=l,S=0;for(;y<=v;)if(S=Math.floor((y+v)/2),p=c[S],m=c[S+1],p<=i){if(S===l||i<m)return S;y=S+1}else{if(!(p>i))throw new qr("Input is not a number.");v=S-1}return 0}class yc{constructor(i,l,p){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[m,y]of p)this.labels.push(m),this.outputs.push(y)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(i[1],1,at);if(!p)return null;const m=[];let y=null;l.expectedType&&l.expectedType.kind!=="value"&&(y=l.expectedType);for(let v=1;v<i.length;v+=2){const S=v===1?-1/0:i[v],C=i[v+1],j=v,R=v+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',j);if(m.length&&m[m.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',j);const L=l.parse(C,R,y);if(!L)return null;y=y||L.type,m.push([S,L])}return new yc(y,p,m)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const m=this.input.evaluate(i);if(m<=l[0])return p[0].evaluate(i);const y=l.length;return m>=l[y-1]?p[y-1].evaluate(i):p[xh(l,m)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Bx(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var ka,bi,vh=function(){if(bi)return ka;function c(i,l,p,m){this.cx=3*i,this.bx=3*(p-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=p,this.p2y=m}return bi=1,ka=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var p=i,m=0;m<8;m++){var y=this.sampleCurveX(p)-i;if(Math.abs(y)<l)return p;var v=this.sampleCurveDerivativeX(p);if(Math.abs(v)<1e-6)break;p-=y/v}var S=0,C=1;for(p=i,m=0;m<20&&(y=this.sampleCurveX(p),!(Math.abs(y-i)<l));m++)i>y?S=p:C=p,p=.5*(C-S)+S;return p},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},ka}(),Vx=Bx(vh);class wi{constructor(i,l,p,m,y){this.type=i,this.operator=l,this.interpolation=p,this.input=m,this.labels=[],this.outputs=[];for(const[v,S]of y)this.labels.push(v),this.outputs.push(S)}static interpolationFactor(i,l,p,m){let y=0;if(i.name==="exponential")y=Fn(l,i.base,p,m);else if(i.name==="linear")y=Fn(l,1,p,m);else if(i.name==="cubic-bezier"){const v=i.controlPoints;y=new Vx(v[0],v[1],v[2],v[3]).solve(Fn(l,1,p,m))}return y}static parse(i,l){let[p,m,y,...v]=i;if(!Array.isArray(m)||m.length===0)return l.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const j=m[1];if(typeof j!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:j}}else{if(m[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const j=m.slice(1);if(j.length!==4||j.some(R=>typeof R!="number"||R<0||R>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:j}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(y=l.parse(y,2,at),!y)return null;const S=[];let C=null;p!=="interpolate-hcl"&&p!=="interpolate-lab"||l.expectedType==Js?l.expectedType&&l.expectedType.kind!=="value"&&(C=l.expectedType):C=is;for(let j=0;j<v.length;j+=2){const R=v[j],L=v[j+1],V=j+3,G=j+4;if(typeof R!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(S.length&&S[S.length-1][0]>=R)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const H=l.parse(L,G,C);if(!H)return null;C=C||H.type,S.push([R,H])}return Io(C,at)||Io(C,yl)||Io(C,is)||Io(C,cc)||Io(C,xl)||Io(C,Js)||Io(C,dc)||Io(C,xs(at))?new wi(C,p,m,y,S):l.error(`Type ${Ur(C)} is not interpolatable.`)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const m=this.input.evaluate(i);if(m<=l[0])return p[0].evaluate(i);const y=l.length;if(m>=l[y-1])return p[y-1].evaluate(i);const v=xh(l,m),S=wi.interpolationFactor(this.interpolation,m,l[v],l[v+1]),C=p[v].evaluate(i),j=p[v+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ro(C,j,S);case"color":return hr.interpolate(C,j,S);case"padding":return Ii.interpolate(C,j,S);case"colorArray":return Yn.interpolate(C,j,S);case"numberArray":return Ri.interpolate(C,j,S);case"variableAnchorOffsetCollection":return Hi.interpolate(C,j,S);case"array":return vl(C,j,S);case"projectionDefinition":return Di.interpolate(C,j,S)}case"interpolate-hcl":switch(this.type.kind){case"color":return hr.interpolate(C,j,S,"hcl");case"colorArray":return Yn.interpolate(C,j,S,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return hr.interpolate(C,j,S,"lab");case"colorArray":return Yn.interpolate(C,j,S,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Fn(c,i,l,p){const m=p-l,y=c-l;return m===0?0:i===1?y/m:(Math.pow(i,y)-1)/(Math.pow(i,m)-1)}const ta={color:hr.interpolate,number:Ro,padding:Ii.interpolate,numberArray:Ri.interpolate,colorArray:Yn.interpolate,variableAnchorOffsetCollection:Hi.interpolate,array:vl};class xc{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let p=null;const m=l.expectedType;m&&m.kind!=="value"&&(p=m);const y=[];for(const S of i.slice(1)){const C=l.parse(S,1+y.length,p,void 0,{typeAnnotation:"omit"});if(!C)return null;p=p||C.type,y.push(C)}if(!p)throw new Error("No output type");const v=m&&y.some(S=>wa(m,S.type));return new xc(v?Ht:p,y)}evaluate(i){let l,p=null,m=0;for(const y of this.args)if(m++,p=y.evaluate(i),p&&p instanceof ss&&!p.available&&(l||(l=p.name),p=null,m===this.args.length&&(p=l)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function cm(c,i){return c==="=="||c==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function $x(c,i,l,p){return p.compare(i,l)===0}function ra(c,i,l){const p=c!=="=="&&c!=="!=";return class zB{constructor(y,v,S){this.type=Vt,this.lhs=y,this.rhs=v,this.collator=S,this.hasUntypedArgument=y.type.kind==="value"||v.type.kind==="value"}static parse(y,v){if(y.length!==3&&y.length!==4)return v.error("Expected two or three arguments.");const S=y[0];let C=v.parse(y[1],1,Ht);if(!C)return null;if(!cm(S,C.type))return v.concat(1).error(`"${S}" comparisons are not supported for type '${Ur(C.type)}'.`);let j=v.parse(y[2],2,Ht);if(!j)return null;if(!cm(S,j.type))return v.concat(2).error(`"${S}" comparisons are not supported for type '${Ur(j.type)}'.`);if(C.type.kind!==j.type.kind&&C.type.kind!=="value"&&j.type.kind!=="value")return v.error(`Cannot compare types '${Ur(C.type)}' and '${Ur(j.type)}'.`);p&&(C.type.kind==="value"&&j.type.kind!=="value"?C=new as(j.type,[C]):C.type.kind!=="value"&&j.type.kind==="value"&&(j=new as(C.type,[j])));let R=null;if(y.length===4){if(C.type.kind!=="string"&&j.type.kind!=="string"&&C.type.kind!=="value"&&j.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(R=v.parse(y[3],3,Wa),!R)return null}return new zB(C,j,R)}evaluate(y){const v=this.lhs.evaluate(y),S=this.rhs.evaluate(y);if(p&&this.hasUntypedArgument){const C=Xr(v),j=Xr(S);if(C.kind!==j.kind||C.kind!=="string"&&C.kind!=="number")throw new qr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${C.kind}, ${j.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const C=Xr(v),j=Xr(S);if(C.kind!=="string"||j.kind!=="string")return i(y,v,S)}return this.collator?l(y,v,S,this.collator.evaluate(y)):i(y,v,S)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const _h=ra("==",function(c,i,l){return i===l},$x),um=ra("!=",function(c,i,l){return i!==l},function(c,i,l,p){return!$x(0,i,l,p)}),Sw=ra("<",function(c,i,l){return i<l},function(c,i,l,p){return p.compare(i,l)<0}),Ux=ra(">",function(c,i,l){return i>l},function(c,i,l,p){return p.compare(i,l)>0}),bh=ra("<=",function(c,i,l){return i<=l},function(c,i,l,p){return p.compare(i,l)<=0}),wh=ra(">=",function(c,i,l){return i>=l},function(c,i,l,p){return p.compare(i,l)>=0});class os{constructor(i,l,p){this.type=Wa,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return l.error("Collator options argument must be an object.");const m=l.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,Vt);if(!m)return null;const y=l.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,Vt);if(!y)return null;let v=null;return p.locale&&(v=l.parse(p.locale,1,Et),!v)?null:new os(m,y,v)}evaluate(i){return new Ds(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Sh{constructor(i,l,p,m,y){this.type=Et,this.number=i,this.locale=l,this.currency=p,this.minFractionDigits=m,this.maxFractionDigits=y}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const p=l.parse(i[1],1,at);if(!p)return null;const m=i[2];if(typeof m!="object"||Array.isArray(m))return l.error("NumberFormat options argument must be an object.");let y=null;if(m.locale&&(y=l.parse(m.locale,1,Et),!y))return null;let v=null;if(m.currency&&(v=l.parse(m.currency,1,Et),!v))return null;let S=null;if(m["min-fraction-digits"]&&(S=l.parse(m["min-fraction-digits"],1,at),!S))return null;let C=null;return m["max-fraction-digits"]&&(C=l.parse(m["max-fraction-digits"],1,at),!C)?null:new Sh(p,y,v,S,C)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class bl{constructor(i){this.type=lc,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return l.error("First argument must be an image or text section.");const m=[];let y=!1;for(let v=1;v<=i.length-1;++v){const S=i[v];if(y&&typeof S=="object"&&!Array.isArray(S)){y=!1;let C=null;if(S["font-scale"]&&(C=l.parse(S["font-scale"],1,at),!C))return null;let j=null;if(S["text-font"]&&(j=l.parse(S["text-font"],1,xs(Et)),!j))return null;let R=null;if(S["text-color"]&&(R=l.parse(S["text-color"],1,is),!R))return null;let L=null;if(S["vertical-align"]){if(typeof S["vertical-align"]=="string"&&!yr.includes(S["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${S["vertical-align"]}' instead.`);if(L=l.parse(S["vertical-align"],1,Et),!L)return null}const V=m[m.length-1];V.scale=C,V.font=j,V.textColor=R,V.verticalAlign=L}else{const C=l.parse(i[v],1,Ht);if(!C)return null;const j=C.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,m.push({content:C,scale:null,font:null,textColor:null,verticalAlign:null})}}return new bl(m)}evaluate(i){return new Ln(this.sections.map(l=>{const p=l.content.evaluate(i);return Xr(p)===uc?new Do("",p,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new Do(fc(p),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class dm{constructor(i){this.type=uc,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const p=l.parse(i[1],1,Et);return p?new dm(p):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),p=ss.fromString(l);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(l)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class $u{constructor(i){this.type=at,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=l.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Ur(p.type)} instead.`):new $u(p):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new qr(`Expected value to be of type string or array, but found ${Ur(Xr(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Ca=8192;function Tw(c,i){const l=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,i.z);return[Math.round(l*m*Ca),Math.round(p*m*Ca)]}function hm(c,i){const l=Math.pow(2,i.z);return[(m=(c[0]/Ca+i.x)/l,360*m-180),(p=(c[1]/Ca+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,m}function Uu(c,i){c[0]=Math.min(c[0],i[0]),c[1]=Math.min(c[1],i[1]),c[2]=Math.max(c[2],i[0]),c[3]=Math.max(c[3],i[1])}function Fo(c,i){return!(c[0]<=i[0]||c[2]>=i[2]||c[1]<=i[1]||c[3]>=i[3])}function kw(c,i,l){const p=c[0]-i[0],m=c[1]-i[1],y=c[0]-l[0],v=c[1]-l[1];return p*v-y*m==0&&p*y<=0&&m*v<=0}function qu(c,i,l,p){return(m=[p[0]-l[0],p[1]-l[1]])[0]*(y=[i[0]-c[0],i[1]-c[1]])[1]-m[1]*y[0]!=0&&!(!Hx(c,i,l,p)||!Hx(l,p,c,i));var m,y}function qx(c,i,l){for(const p of l)for(let m=0;m<p.length-1;++m)if(qu(c,i,p[m],p[m+1]))return!0;return!1}function vc(c,i,l=!1){let p=!1;for(const S of i)for(let C=0;C<S.length-1;C++){if(kw(c,S[C],S[C+1]))return l;(y=S[C])[1]>(m=c)[1]!=(v=S[C+1])[1]>m[1]&&m[0]<(v[0]-y[0])*(m[1]-y[1])/(v[1]-y[1])+y[0]&&(p=!p)}var m,y,v;return p}function Wx(c,i){for(const l of i)if(vc(c,l))return!0;return!1}function Gx(c,i){for(const l of c)if(!vc(l,i))return!1;for(let l=0;l<c.length-1;++l)if(qx(c[l],c[l+1],i))return!1;return!0}function Cw(c,i){for(const l of i)if(Gx(c,l))return!0;return!1}function Hx(c,i,l,p){const m=p[0]-l[0],y=p[1]-l[1],v=(c[0]-l[0])*y-m*(c[1]-l[1]),S=(i[0]-l[0])*y-m*(i[1]-l[1]);return v>0&&S<0||v<0&&S>0}function pm(c,i,l){const p=[];for(let m=0;m<c.length;m++){const y=[];for(let v=0;v<c[m].length;v++){const S=Tw(c[m][v],l);Uu(i,S),y.push(S)}p.push(y)}return p}function Zx(c,i,l){const p=[];for(let m=0;m<c.length;m++){const y=pm(c[m],i,l);p.push(y)}return p}function fm(c,i,l,p){if(c[0]<l[0]||c[0]>l[2]){const m=.5*p;let y=c[0]-l[0]>m?-p:l[0]-c[0]>m?p:0;y===0&&(y=c[0]-l[2]>m?-p:l[2]-c[0]>m?p:0),c[0]+=y}Uu(i,c)}function mm(c,i,l,p){const m=Math.pow(2,p.z)*Ca,y=[p.x*Ca,p.y*Ca],v=[];for(const S of c)for(const C of S){const j=[C.x+y[0],C.y+y[1]];fm(j,i,l,m),v.push(j)}return v}function gm(c,i,l,p){const m=Math.pow(2,p.z)*Ca,y=[p.x*Ca,p.y*Ca],v=[];for(const C of c){const j=[];for(const R of C){const L=[R.x+y[0],R.y+y[1]];Uu(i,L),j.push(L)}v.push(j)}if(i[2]-i[0]<=m/2){(S=i)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const C of v)for(const j of C)fm(j,i,l,m)}var S;return v}class wl{constructor(i,l){this.type=Vt,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Oo(i[1])){const p=i[1];if(p.type==="FeatureCollection"){const m=[];for(const y of p.features){const{type:v,coordinates:S}=y.geometry;v==="Polygon"&&m.push(S),v==="MultiPolygon"&&m.push(...S)}if(m.length)return new wl(p,{type:"MultiPolygon",coordinates:m})}else if(p.type==="Feature"){const m=p.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new wl(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new wl(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,p){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(p.type==="Polygon"){const S=pm(p.coordinates,y,v),C=mm(l.geometry(),m,y,v);if(!Fo(m,y))return!1;for(const j of C)if(!vc(j,S))return!1}if(p.type==="MultiPolygon"){const S=Zx(p.coordinates,y,v),C=mm(l.geometry(),m,y,v);if(!Fo(m,y))return!1;for(const j of C)if(!Wx(j,S))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,p){const m=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],v=l.canonicalID();if(p.type==="Polygon"){const S=pm(p.coordinates,y,v),C=gm(l.geometry(),m,y,v);if(!Fo(m,y))return!1;for(const j of C)if(!Gx(j,S))return!1}if(p.type==="MultiPolygon"){const S=Zx(p.coordinates,y,v),C=gm(l.geometry(),m,y,v);if(!Fo(m,y))return!1;for(const j of C)if(!Cw(j,S))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Kx=class{constructor(c=[],i=(l,p)=>l<p?-1:l>p?1:0){if(this.data=c,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:i,compare:l}=this,p=i[c];for(;c>0;){const m=c-1>>1,y=i[m];if(l(p,y)>=0)break;i[c]=y,c=m}i[c]=p}_down(c){const{data:i,compare:l}=this,p=this.length>>1,m=i[c];for(;c<p;){let y=1+(c<<1);const v=y+1;if(v<this.length&&l(i[v],i[y])<0&&(y=v),l(i[y],m)>=0)break;i[c]=i[y],c=y}i[c]=m}};function Yx(c,i,l=0,p=c.length-1,m=Th){for(;p>l;){if(p-l>600){const C=p-l+1,j=i-l+1,R=Math.log(C),L=.5*Math.exp(2*R/3),V=.5*Math.sqrt(R*L*(C-L)/C)*(j-C/2<0?-1:1);Yx(c,i,Math.max(l,Math.floor(i-j*L/C+V)),Math.min(p,Math.floor(i+(C-j)*L/C+V)),m)}const y=c[i];let v=l,S=p;for(Wu(c,l,i),m(c[p],y)>0&&Wu(c,l,p);v<S;){for(Wu(c,v,S),v++,S--;m(c[v],y)<0;)v++;for(;m(c[S],y)>0;)S--}m(c[l],y)===0?Wu(c,l,S):(S++,Wu(c,S,p)),S<=i&&(l=S+1),i<=S&&(p=S-1)}}function Wu(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}function Th(c,i){return c<i?-1:c>i?1:0}function Gu(c,i){if(c.length<=1)return[c];const l=[];let p,m;for(const y of c){const v=Ew(y);v!==0&&(y.area=Math.abs(v),m===void 0&&(m=v<0),m===v<0?(p&&l.push(p),p=[y]):p.push(y))}if(p&&l.push(p),i>1)for(let y=0;y<l.length;y++)l[y].length<=i||(Yx(l[y],i,1,l[y].length-1,Pw),l[y]=l[y].slice(0,i));return l}function Pw(c,i){return i.area-c.area}function Ew(c){let i=0;for(let l,p,m=0,y=c.length,v=y-1;m<y;v=m++)l=c[m],p=c[v],i+=(p.x-l.x)*(l.y+p.y);return i}const Qx=1/298.257223563,kh=Qx*(2-Qx),ym=Math.PI/180;class xm{constructor(i){const l=6378.137*ym*1e3,p=Math.cos(i*ym),m=1/(1-kh*(1-p*p)),y=Math.sqrt(m);this.kx=l*y*p,this.ky=l*y*m*(1-kh)}distance(i,l){const p=this.wrap(i[0]-l[0])*this.kx,m=(i[1]-l[1])*this.ky;return Math.sqrt(p*p+m*m)}pointOnLine(i,l){let p,m,y,v,S=1/0;for(let C=0;C<i.length-1;C++){let j=i[C][0],R=i[C][1],L=this.wrap(i[C+1][0]-j)*this.kx,V=(i[C+1][1]-R)*this.ky,G=0;L===0&&V===0||(G=(this.wrap(l[0]-j)*this.kx*L+(l[1]-R)*this.ky*V)/(L*L+V*V),G>1?(j=i[C+1][0],R=i[C+1][1]):G>0&&(j+=L/this.kx*G,R+=V/this.ky*G)),L=this.wrap(l[0]-j)*this.kx,V=(l[1]-R)*this.ky;const H=L*L+V*V;H<S&&(S=H,p=j,m=R,y=C,v=G)}return{point:[p,m],index:y,t:Math.max(0,Math.min(1,v))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Xx(c,i){return i[0]-c[0]}function Hu(c){return c[1]-c[0]+1}function Pa(c,i){return c[1]>=c[0]&&c[1]<i}function vm(c,i){if(c[0]>c[1])return[null,null];const l=Hu(c);if(i){if(l===2)return[c,null];const m=Math.floor(l/2);return[[c[0],c[0]+m],[c[0]+m,c[1]]]}if(l===1)return[c,null];const p=Math.floor(l/2)-1;return[[c[0],c[0]+p],[c[0]+p+1,c[1]]]}function _m(c,i){if(!Pa(i,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let p=i[0];p<=i[1];++p)Uu(l,c[p]);return l}function bm(c){const i=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const p of l)Uu(i,p);return i}function wm(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Sm(c,i,l){if(!wm(c)||!wm(i))return NaN;let p=0,m=0;return c[2]<i[0]&&(p=i[0]-c[2]),c[0]>i[2]&&(p=c[0]-i[2]),c[1]>i[3]&&(m=c[1]-i[3]),c[3]<i[1]&&(m=i[1]-c[3]),l.distance([0,0],[p,m])}function Sl(c,i,l){const p=l.pointOnLine(i,c);return l.distance(c,p.point)}function Tm(c,i,l,p,m){const y=Math.min(Sl(c,[l,p],m),Sl(i,[l,p],m)),v=Math.min(Sl(l,[c,i],m),Sl(p,[c,i],m));return Math.min(y,v)}function jw(c,i,l,p,m){if(!Pa(i,c.length)||!Pa(p,l.length))return 1/0;let y=1/0;for(let v=i[0];v<i[1];++v){const S=c[v],C=c[v+1];for(let j=p[0];j<p[1];++j){const R=l[j],L=l[j+1];if(qu(S,C,R,L))return 0;y=Math.min(y,Tm(S,C,R,L,m))}}return y}function Er(c,i,l,p,m){if(!Pa(i,c.length)||!Pa(p,l.length))return NaN;let y=1/0;for(let v=i[0];v<=i[1];++v)for(let S=p[0];S<=p[1];++S)if(y=Math.min(y,m.distance(c[v],l[S])),y===0)return y;return y}function Aw(c,i,l){if(vc(c,i,!0))return 0;let p=1/0;for(const m of i){const y=m[0],v=m[m.length-1];if(y!==v&&(p=Math.min(p,Sl(c,[v,y],l)),p===0))return p;const S=l.pointOnLine(m,c);if(p=Math.min(p,l.distance(c,S.point)),p===0)return p}return p}function Mw(c,i,l,p){if(!Pa(i,c.length))return NaN;for(let y=i[0];y<=i[1];++y)if(vc(c[y],l,!0))return 0;let m=1/0;for(let y=i[0];y<i[1];++y){const v=c[y],S=c[y+1];for(const C of l)for(let j=0,R=C.length,L=R-1;j<R;L=j++){const V=C[L],G=C[j];if(qu(v,S,V,G))return 0;m=Math.min(m,Tm(v,S,V,G,p))}}return m}function Jx(c,i){for(const l of c)for(const p of l)if(vc(p,i,!0))return!0;return!1}function Nw(c,i,l,p=1/0){const m=bm(c),y=bm(i);if(p!==1/0&&Sm(m,y,l)>=p)return p;if(Fo(m,y)){if(Jx(c,i))return 0}else if(Jx(i,c))return 0;let v=1/0;for(const S of c)for(let C=0,j=S.length,R=j-1;C<j;R=C++){const L=S[R],V=S[C];for(const G of i)for(let H=0,Y=G.length,J=Y-1;H<Y;J=H++){const ne=G[J],fe=G[H];if(qu(L,V,ne,fe))return 0;v=Math.min(v,Tm(L,V,ne,fe,l))}}return v}function ev(c,i,l,p,m,y){if(!y)return;const v=Sm(_m(p,y),m,l);v<i&&c.push([v,y,[0,0]])}function Ch(c,i,l,p,m,y,v){if(!y||!v)return;const S=Sm(_m(p,y),_m(m,v),l);S<i&&c.push([S,y,v])}function Ph(c,i,l,p,m=1/0){let y=Math.min(p.distance(c[0],l[0][0]),m);if(y===0)return y;const v=new Kx([[0,[0,c.length-1],[0,0]]],Xx),S=bm(l);for(;v.length>0;){const C=v.pop();if(C[0]>=y)continue;const j=C[1],R=i?50:100;if(Hu(j)<=R){if(!Pa(j,c.length))return NaN;if(i){const L=Mw(c,j,l,p);if(isNaN(L)||L===0)return L;y=Math.min(y,L)}else for(let L=j[0];L<=j[1];++L){const V=Aw(c[L],l,p);if(y=Math.min(y,V),y===0)return 0}}else{const L=vm(j,i);ev(v,y,p,c,S,L[0]),ev(v,y,p,c,S,L[1])}}return y}function Eh(c,i,l,p,m,y=1/0){let v=Math.min(y,m.distance(c[0],l[0]));if(v===0)return v;const S=new Kx([[0,[0,c.length-1],[0,l.length-1]]],Xx);for(;S.length>0;){const C=S.pop();if(C[0]>=v)continue;const j=C[1],R=C[2],L=i?50:100,V=p?50:100;if(Hu(j)<=L&&Hu(R)<=V){if(!Pa(j,c.length)&&Pa(R,l.length))return NaN;let G;if(i&&p)G=jw(c,j,l,R,m),v=Math.min(v,G);else if(i&&!p){const H=c.slice(j[0],j[1]+1);for(let Y=R[0];Y<=R[1];++Y)if(G=Sl(l[Y],H,m),v=Math.min(v,G),v===0)return v}else if(!i&&p){const H=l.slice(R[0],R[1]+1);for(let Y=j[0];Y<=j[1];++Y)if(G=Sl(c[Y],H,m),v=Math.min(v,G),v===0)return v}else G=Er(c,j,l,R,m),v=Math.min(v,G)}else{const G=vm(j,i),H=vm(R,p);Ch(S,v,m,c,l,G[0],H[0]),Ch(S,v,m,c,l,G[0],H[1]),Ch(S,v,m,c,l,G[1],H[0]),Ch(S,v,m,c,l,G[1],H[1])}}return v}function km(c){return c.type==="MultiPolygon"?c.coordinates.map(i=>({type:"Polygon",coordinates:i})):c.type==="MultiLineString"?c.coordinates.map(i=>({type:"LineString",coordinates:i})):c.type==="MultiPoint"?c.coordinates.map(i=>({type:"Point",coordinates:i})):[c]}class Tl{constructor(i,l){this.type=at,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Oo(i[1])){const p=i[1];if(p.type==="FeatureCollection")return new Tl(p,p.features.map(m=>km(m.geometry)).flat());if(p.type==="Feature")return new Tl(p,km(p.geometry));if("type"in p&&"coordinates"in p)return new Tl(p,km(p))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,p){const m=l.geometry(),y=m.flat().map(C=>hm([C.x,C.y],l.canonical));if(m.length===0)return NaN;const v=new xm(y[0][1]);let S=1/0;for(const C of p){switch(C.type){case"Point":S=Math.min(S,Eh(y,!1,[C.coordinates],!1,v,S));break;case"LineString":S=Math.min(S,Eh(y,!1,C.coordinates,!0,v,S));break;case"Polygon":S=Math.min(S,Ph(y,!1,C.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,p){const m=l.geometry(),y=m.flat().map(C=>hm([C.x,C.y],l.canonical));if(m.length===0)return NaN;const v=new xm(y[0][1]);let S=1/0;for(const C of p){switch(C.type){case"Point":S=Math.min(S,Eh(y,!0,[C.coordinates],!1,v,S));break;case"LineString":S=Math.min(S,Eh(y,!0,C.coordinates,!0,v,S));break;case"Polygon":S=Math.min(S,Ph(y,!0,C.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,p){const m=l.geometry();if(m.length===0||m[0].length===0)return NaN;const y=Gu(m,0).map(C=>C.map(j=>j.map(R=>hm([R.x,R.y],l.canonical)))),v=new xm(y[0][0][0][1]);let S=1/0;for(const C of p)for(const j of y){switch(C.type){case"Point":S=Math.min(S,Ph([C.coordinates],!1,j,v,S));break;case"LineString":S=Math.min(S,Ph(C.coordinates,!0,j,v,S));break;case"Polygon":S=Math.min(S,Nw(j,C.coordinates,v,S))}if(S===0)return S}return S}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Zu{constructor(i){this.type=Ht,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=i[1];return p==null?l.error("Global state property must be defined."):typeof p!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Zu(p)}evaluate(i){var l;const p=(l=i.globals)===null||l===void 0?void 0:l.globalState;return p&&Object.keys(p).length!==0?Ga(p,this.key):null}eachChild(){}outputDefined(){return!1}}const _c={"==":_h,"!=":um,">":Ux,"<":Sw,">=":wh,"<=":bh,array:as,at:ea,boolean:as,case:Bu,coalesce:xc,collator:os,format:bl,image:dm,in:zu,"index-of":_l,interpolate:wi,"interpolate-hcl":wi,"interpolate-lab":wi,length:$u,let:xr,literal:Lo,match:yh,number:as,"number-format":Sh,object:as,slice:Vu,step:yc,string:as,"to-boolean":Ta,"to-color":Ta,"to-number":Ta,"to-string":Ta,var:gc,within:wl,distance:Tl,"global-state":Zu};class Os{constructor(i,l,p,m){this.name=i,this.type=l,this._evaluate=p,this.args=m}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const p=i[0],m=Os.definitions[p];if(!m)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(m)?m[0]:m.type,v=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,S=v.filter(([j])=>!Array.isArray(j)||j.length===i.length-1);let C=null;for(const[j,R]of S){C=new mc(l.registry,jh,l.path,null,l.scope);const L=[];let V=!1;for(let G=1;G<i.length;G++){const H=i[G],Y=Array.isArray(j)?j[G-1]:j.type,J=C.parse(H,1+L.length,Y);if(!J){V=!0;break}L.push(J)}if(!V)if(Array.isArray(j)&&j.length!==L.length)C.error(`Expected ${j.length} arguments, but found ${L.length} instead.`);else{for(let G=0;G<L.length;G++){const H=Array.isArray(j)?j[G]:j.type,Y=L[G];C.concat(G+1).checkSubtype(H,Y.type)}if(C.errors.length===0)return new Os(p,y,R,L)}}if(S.length===1)l.errors.push(...C.errors);else{const j=(S.length?S:v).map(([L])=>{return V=L,Array.isArray(V)?`(${V.map(Ur).join(", ")})`:`(${Ur(V.type)}...)`;var V}).join(" | "),R=[];for(let L=1;L<i.length;L++){const V=l.parse(i[L],1+R.length);if(!V)return null;R.push(Ur(V.type))}l.error(`Expected arguments of type ${j}, but found (${R.join(", ")}) instead.`)}return null}static register(i,l){Os.definitions=l;for(const p in l)i[p]=Os}}function tv(c,[i,l,p,m]){i=i.evaluate(c),l=l.evaluate(c),p=p.evaluate(c);const y=m?m.evaluate(c):1,v=zx(i,l,p,y);if(v)throw new qr(v);return new hr(i/255,l/255,p/255,y,!1)}function rv(c,i){return c in i}function Cm(c,i){const l=i[c];return l===void 0?null:l}function kl(c){return{type:c}}function jh(c){if(c instanceof gc)return jh(c.boundExpression);if(c instanceof Os&&c.name==="error"||c instanceof os||c instanceof wl||c instanceof Tl||c instanceof Zu)return!1;const i=c instanceof Ta||c instanceof as;let l=!0;return c.eachChild(p=>{l=i?l&&jh(p):l&&p instanceof Lo}),!!l&&Ah(c)&&Mh(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ah(c){if(c instanceof Os&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof wl||c instanceof Tl)return!1;let i=!0;return c.eachChild(l=>{i&&!Ah(l)&&(i=!1)}),i}function Ku(c){if(c instanceof Os&&c.name==="feature-state")return!1;let i=!0;return c.eachChild(l=>{i&&!Ku(l)&&(i=!1)}),i}function Mh(c,i){if(c instanceof Os&&i.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild(p=>{l&&!Mh(p,i)&&(l=!1)}),l}function nv(c){return{result:"success",value:c}}function bc(c){return{result:"error",value:c}}function wc(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function iv(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Pm(c){return!!c.expression&&c.expression.interpolated}function pr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Nh(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Xr(c)===si}function Iw(c){return c}function sv(c,i){const l=c.stops&&typeof c.stops[0][0]=="object",p=l||!(l||c.property!==void 0),m=c.type||(Pm(i)?"exponential":"interval"),y=function(R){switch(R.type){case"color":return hr.parse;case"padding":return Ii.parse;case"numberArray":return Ri.parse;case"colorArray":return Yn.parse;default:return null}}(i);if(y&&((c=Qr({},c)).stops&&(c.stops=c.stops.map(R=>[R[0],y(R[1])])),c.default=y(c.default?c.default:i.default)),c.colorSpace&&(v=c.colorSpace)!=="rgb"&&v!=="hcl"&&v!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var v;const S=function(R){switch(R){case"exponential":return av;case"interval":return Rw;case"categorical":return Em;case"identity":return Dw;default:throw new Error(`Unknown function type "${R}"`)}}(m);let C,j;if(m==="categorical"){C=Object.create(null);for(const R of c.stops)C[R[0]]=R[1];j=typeof c.stops[0][0]}if(l){const R={},L=[];for(let H=0;H<c.stops.length;H++){const Y=c.stops[H],J=Y[0].zoom;R[J]===void 0&&(R[J]={zoom:J,type:c.type,property:c.property,default:c.default,stops:[]},L.push(J)),R[J].stops.push([Y[0].value,Y[1]])}const V=[];for(const H of L)V.push([R[H].zoom,sv(R[H],i)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:wi.interpolationFactor.bind(void 0,G),zoomStops:V.map(H=>H[0]),evaluate:({zoom:H},Y)=>av({stops:V,base:c.base},i,H).evaluate(H,Y)}}if(p){const R=m==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:R,interpolationFactor:wi.interpolationFactor.bind(void 0,R),zoomStops:c.stops.map(L=>L[0]),evaluate:({zoom:L})=>S(c,i,L,C,j)}}return{kind:"source",evaluate(R,L){const V=L&&L.properties?L.properties[c.property]:void 0;return V===void 0?Yu(c.default,i.default):S(c,i,V,C,j)}}}function Yu(c,i,l){return c!==void 0?c:i!==void 0?i:l!==void 0?l:void 0}function Em(c,i,l,p,m){return Yu(typeof l===m?p[l]:void 0,c.default,i.default)}function Rw(c,i,l){if(pr(l)!=="number")return Yu(c.default,i.default);const p=c.stops.length;if(p===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[p-1][0])return c.stops[p-1][1];const m=xh(c.stops.map(y=>y[0]),l);return c.stops[m][1]}function av(c,i,l){const p=c.base!==void 0?c.base:1;if(pr(l)!=="number")return Yu(c.default,i.default);const m=c.stops.length;if(m===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[m-1][0])return c.stops[m-1][1];const y=xh(c.stops.map(R=>R[0]),l),v=function(R,L,V,G){const H=G-V,Y=R-V;return H===0?0:L===1?Y/H:(Math.pow(L,Y)-1)/(Math.pow(L,H)-1)}(l,p,c.stops[y][0],c.stops[y+1][0]),S=c.stops[y][1],C=c.stops[y+1][1],j=ta[i.type]||Iw;return typeof S.evaluate=="function"?{evaluate(...R){const L=S.evaluate.apply(void 0,R),V=C.evaluate.apply(void 0,R);if(L!==void 0&&V!==void 0)return j(L,V,v,c.colorSpace)}}:j(S,C,v,c.colorSpace)}function Dw(c,i,l){switch(i.type){case"color":l=hr.parse(l);break;case"formatted":l=Ln.fromString(l.toString());break;case"resolvedImage":l=ss.fromString(l.toString());break;case"padding":l=Ii.parse(l);break;case"colorArray":l=Yn.parse(l);break;case"numberArray":l=Ri.parse(l);break;default:pr(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return Yu(l,c.default,i.default)}Os.register(_c,{error:[{kind:"error"},[Et],(c,[i])=>{throw new qr(i.evaluate(c))}],typeof:[Et,[Ht],(c,[i])=>Ur(Xr(i.evaluate(c)))],"to-rgba":[xs(at,4),[is],(c,[i])=>{const[l,p,m,y]=i.evaluate(c).rgb;return[255*l,255*p,255*m,y]}],rgb:[is,[at,at,at],tv],rgba:[is,[at,at,at,at],tv],has:{type:Vt,overloads:[[[Et],(c,[i])=>rv(i.evaluate(c),c.properties())],[[Et,si],(c,[i,l])=>rv(i.evaluate(c),l.evaluate(c))]]},get:{type:Ht,overloads:[[[Et],(c,[i])=>Cm(i.evaluate(c),c.properties())],[[Et,si],(c,[i,l])=>Cm(i.evaluate(c),l.evaluate(c))]]},"feature-state":[Ht,[Et],(c,[i])=>Cm(i.evaluate(c),c.featureState||{})],properties:[si,[],c=>c.properties()],"geometry-type":[Et,[],c=>c.geometryType()],id:[Ht,[],c=>c.id()],zoom:[at,[],c=>c.globals.zoom],"heatmap-density":[at,[],c=>c.globals.heatmapDensity||0],elevation:[at,[],c=>c.globals.elevation||0],"line-progress":[at,[],c=>c.globals.lineProgress||0],accumulated:[Ht,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[at,kl(at),(c,i)=>{let l=0;for(const p of i)l+=p.evaluate(c);return l}],"*":[at,kl(at),(c,i)=>{let l=1;for(const p of i)l*=p.evaluate(c);return l}],"-":{type:at,overloads:[[[at,at],(c,[i,l])=>i.evaluate(c)-l.evaluate(c)],[[at],(c,[i])=>-i.evaluate(c)]]},"/":[at,[at,at],(c,[i,l])=>i.evaluate(c)/l.evaluate(c)],"%":[at,[at,at],(c,[i,l])=>i.evaluate(c)%l.evaluate(c)],ln2:[at,[],()=>Math.LN2],pi:[at,[],()=>Math.PI],e:[at,[],()=>Math.E],"^":[at,[at,at],(c,[i,l])=>Math.pow(i.evaluate(c),l.evaluate(c))],sqrt:[at,[at],(c,[i])=>Math.sqrt(i.evaluate(c))],log10:[at,[at],(c,[i])=>Math.log(i.evaluate(c))/Math.LN10],ln:[at,[at],(c,[i])=>Math.log(i.evaluate(c))],log2:[at,[at],(c,[i])=>Math.log(i.evaluate(c))/Math.LN2],sin:[at,[at],(c,[i])=>Math.sin(i.evaluate(c))],cos:[at,[at],(c,[i])=>Math.cos(i.evaluate(c))],tan:[at,[at],(c,[i])=>Math.tan(i.evaluate(c))],asin:[at,[at],(c,[i])=>Math.asin(i.evaluate(c))],acos:[at,[at],(c,[i])=>Math.acos(i.evaluate(c))],atan:[at,[at],(c,[i])=>Math.atan(i.evaluate(c))],min:[at,kl(at),(c,i)=>Math.min(...i.map(l=>l.evaluate(c)))],max:[at,kl(at),(c,i)=>Math.max(...i.map(l=>l.evaluate(c)))],abs:[at,[at],(c,[i])=>Math.abs(i.evaluate(c))],round:[at,[at],(c,[i])=>{const l=i.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[at,[at],(c,[i])=>Math.floor(i.evaluate(c))],ceil:[at,[at],(c,[i])=>Math.ceil(i.evaluate(c))],"filter-==":[Vt,[Et,Ht],(c,[i,l])=>c.properties()[i.value]===l.value],"filter-id-==":[Vt,[Ht],(c,[i])=>c.id()===i.value],"filter-type-==":[Vt,[Et],(c,[i])=>c.geometryType()===i.value],"filter-<":[Vt,[Et,Ht],(c,[i,l])=>{const p=c.properties()[i.value],m=l.value;return typeof p==typeof m&&p<m}],"filter-id-<":[Vt,[Ht],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[Vt,[Et,Ht],(c,[i,l])=>{const p=c.properties()[i.value],m=l.value;return typeof p==typeof m&&p>m}],"filter-id->":[Vt,[Ht],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[Vt,[Et,Ht],(c,[i,l])=>{const p=c.properties()[i.value],m=l.value;return typeof p==typeof m&&p<=m}],"filter-id-<=":[Vt,[Ht],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[Vt,[Et,Ht],(c,[i,l])=>{const p=c.properties()[i.value],m=l.value;return typeof p==typeof m&&p>=m}],"filter-id->=":[Vt,[Ht],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[Vt,[Ht],(c,[i])=>i.value in c.properties()],"filter-has-id":[Vt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Vt,[xs(Et)],(c,[i])=>i.value.indexOf(c.geometryType())>=0],"filter-id-in":[Vt,[xs(Ht)],(c,[i])=>i.value.indexOf(c.id())>=0],"filter-in-small":[Vt,[Et,xs(Ht)],(c,[i,l])=>l.value.indexOf(c.properties()[i.value])>=0],"filter-in-large":[Vt,[Et,xs(Ht)],(c,[i,l])=>function(p,m,y,v){for(;y<=v;){const S=y+v>>1;if(m[S]===p)return!0;m[S]>p?v=S-1:y=S+1}return!1}(c.properties()[i.value],l.value,0,l.value.length-1)],all:{type:Vt,overloads:[[[Vt,Vt],(c,[i,l])=>i.evaluate(c)&&l.evaluate(c)],[kl(Vt),(c,i)=>{for(const l of i)if(!l.evaluate(c))return!1;return!0}]]},any:{type:Vt,overloads:[[[Vt,Vt],(c,[i,l])=>i.evaluate(c)||l.evaluate(c)],[kl(Vt),(c,i)=>{for(const l of i)if(l.evaluate(c))return!0;return!1}]]},"!":[Vt,[Vt],(c,[i])=>!i.evaluate(c)],"is-supported-script":[Vt,[Et],(c,[i])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(i.evaluate(c))}],upcase:[Et,[Et],(c,[i])=>i.evaluate(c).toUpperCase()],downcase:[Et,[Et],(c,[i])=>i.evaluate(c).toLowerCase()],concat:[Et,kl(Ht),(c,i)=>i.map(l=>fc(l.evaluate(c))).join("")],"resolved-locale":[Et,[Wa],(c,[i])=>i.evaluate(c).resolvedLocale()]});class Ih{constructor(i,l,p){this.expression=i,this._warningHistory={},this._evaluator=new sr,this._defaultValue=l?function(m){if(m.type==="color"&&Nh(m.default))return new hr(0,0,0,0);switch(m.type){case"color":return hr.parse(m.default)||null;case"padding":return Ii.parse(m.default)||null;case"numberArray":return Ri.parse(m.default)||null;case"colorArray":return Yn.parse(m.default)||null;case"variableAnchorOffsetCollection":return Hi.parse(m.default)||null;case"projectionDefinition":return Di.parse(m.default)||null;default:return m.default===void 0?null:m.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this._globalState=p}evaluateWithoutErrorHandling(i,l,p,m,y,v){return this._globalState&&(i=Sc(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v,this.expression.evaluate(this._evaluator)}evaluate(i,l,p,m,y,v){this._globalState&&(i=Sc(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=m,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=v||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new qr(`Expected value to be one of ${Object.keys(this._enumValues).map(C=>JSON.stringify(C)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Rh(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in _c}function Dh(c,i,l){const p=new mc(_c,jh,[],i?function(y){const v={color:is,string:Et,number:at,enum:Et,boolean:Vt,formatted:lc,padding:cc,numberArray:xl,colorArray:Js,projectionDefinition:yl,resolvedImage:uc,variableAnchorOffsetCollection:dc};return y.type==="array"?xs(v[y.value]||Ht,y.length):v[y.type]}(i):void 0),m=p.parse(c,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?nv(new Ih(m,i,l)):bc(p.errors)}class Cl{constructor(i,l,p){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!Ku(l.expression),this.globalStateRefs=zh(l.expression),this._globalState=p}evaluateWithoutErrorHandling(i,l,p,m,y,v){return this._globalState&&(i=Sc(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,p,m,y,v)}evaluate(i,l,p,m,y,v){return this._globalState&&(i=Sc(i,this._globalState)),this._styleExpression.evaluate(i,l,p,m,y,v)}}class Oh{constructor(i,l,p,m,y){this.kind=i,this.zoomStops=p,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!Ku(l.expression),this.globalStateRefs=zh(l.expression),this.interpolationType=m,this._globalState=y}evaluateWithoutErrorHandling(i,l,p,m,y,v){return this._globalState&&(i=Sc(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,p,m,y,v)}evaluate(i,l,p,m,y,v){return this._globalState&&(i=Sc(i,this._globalState)),this._styleExpression.evaluate(i,l,p,m,y,v)}interpolationFactor(i,l,p){return this.interpolationType?wi.interpolationFactor(this.interpolationType,i,l,p):0}}function ov(c,i,l){const p=Dh(c,i,l);if(p.result==="error")return p;const m=p.value.expression,y=Ah(m);if(!y&&!wc(i))return bc([new Vr("","data expressions not supported")]);const v=Mh(m,["zoom"]);if(!v&&!iv(i))return bc([new Vr("","zoom expressions not supported")]);const S=Fh(m);return S||v?S instanceof Vr?bc([S]):S instanceof wi&&!Pm(i)?bc([new Vr("",'"interpolate" expressions cannot be used with this property')]):nv(S?new Oh(y?"camera":"composite",p.value,S.labels,S instanceof wi?S.interpolation:void 0,l):new Cl(y?"constant":"source",p.value,l)):bc([new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Lh{constructor(i,l){this._parameters=i,this._specification=l,Qr(this,sv(this._parameters,this._specification))}static deserialize(i){return new Lh(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Fh(c){let i=null;if(c instanceof xr)i=Fh(c.result);else if(c instanceof xc){for(const l of c.args)if(i=Fh(l),i)break}else(c instanceof yc||c instanceof wi)&&c.input instanceof Os&&c.input.name==="zoom"&&(i=c);return i instanceof Vr||c.eachChild(l=>{const p=Fh(l);p instanceof Vr?i=p:!i&&p?i=new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new Vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function zh(c,i=new Set){return c instanceof Zu&&i.add(c.key),c.eachChild(l=>{zh(l,i)}),i}function Sc(c,i){const{zoom:l,heatmapDensity:p,elevation:m,lineProgress:y,isSupportedScript:v,accumulated:S}=c??{};return{zoom:l,heatmapDensity:p,elevation:m,lineProgress:y,isSupportedScript:v,accumulated:S,globalState:i}}function Bh(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const i of c.slice(1))if(!Bh(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const lv={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qu(c,i){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Bh(c)||(c=Xu(c));const l=Dh(c,lv,i);if(l.result==="error")throw new Error(l.value.map(p=>`${p.key}: ${p.message}`).join(", "));return{filter:(p,m,y)=>l.value.evaluate(p,m,{},y),needGeometry:jm(c),getGlobalStateRefs:()=>zh(l.value.expression)}}function Ow(c,i){return c<i?-1:c>i?1:0}function jm(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let i=1;i<c.length;i++)if(jm(c[i]))return!0;return!1}function Xu(c){if(!c)return!0;const i=c[0];return c.length<=1?i!=="any":i==="=="?Vh(c[1],c[2],"=="):i==="!="?$h(Vh(c[1],c[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Vh(c[1],c[2],i):i==="any"?(l=c.slice(1),["any"].concat(l.map(Xu))):i==="all"?["all"].concat(c.slice(1).map(Xu)):i==="none"?["all"].concat(c.slice(1).map(Xu).map($h)):i==="in"?cv(c[1],c.slice(2)):i==="!in"?$h(cv(c[1],c.slice(2))):i==="has"?uv(c[1]):i!=="!has"||$h(uv(c[1]));var l}function Vh(c,i,l){switch(c){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,c,i]}}function cv(c,i){if(i.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",c,["literal",i.sort(Ow)]]:["filter-in-small",c,["literal",i]]}}function uv(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function $h(c){return["!",c]}function Am(c){const i=typeof c;if(i==="number"||i==="boolean"||i==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let m="[";for(const y of c)m+=`${Am(y)},`;return`${m}]`}const l=Object.keys(c).sort();let p="{";for(let m=0;m<l.length;m++)p+=`${JSON.stringify(l[m])}:${Am(c[l[m]])},`;return`${p}}`}function dv(c){let i="";for(const l of je)i+=`/${Am(c[l])}`;return i}function Mm(c){const i=c.value;return i?[new it(c.key,i,"constants have been deprecated as of v8")]:[]}function an(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Ha(c){if(Array.isArray(c))return c.map(Ha);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const i={};for(const l in c)i[l]=Ha(c[l]);return i}return an(c)}function ls(c){const i=c.key,l=c.value,p=c.valueSpec||{},m=c.objectElementValidators||{},y=c.style,v=c.styleSpec,S=c.validateSpec;let C=[];const j=pr(l);if(j!=="object")return[new it(i,l,`object expected, ${j} found`)];for(const R in l){const L=R.split(".")[0],V=Ga(p,L)||p["*"];let G;if(Ga(m,L))G=m[L];else if(Ga(p,L))G=S;else if(m["*"])G=m["*"];else{if(!p["*"]){C.push(new it(i,l[R],`unknown property "${R}"`));continue}G=S}C=C.concat(G({key:(i&&`${i}.`)+R,value:l[R],valueSpec:V,style:y,styleSpec:v,object:l,objectKey:R,validateSpec:S},l))}for(const R in p)m[R]||p[R].required&&p[R].default===void 0&&l[R]===void 0&&C.push(new it(i,l,`missing required property "${R}"`));return C}function Ju(c){const i=c.value,l=c.valueSpec,p=c.style,m=c.styleSpec,y=c.key,v=c.arrayElementValidator||c.validateSpec;if(pr(i)!=="array")return[new it(y,i,`array expected, ${pr(i)} found`)];if(l.length&&i.length!==l.length)return[new it(y,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new it(y,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let S={type:l.value,values:l.values};m.$version<7&&(S.function=l.function),pr(l.value)==="object"&&(S=l.value);let C=[];for(let j=0;j<i.length;j++)C=C.concat(v({array:i,arrayIndex:j,value:i[j],valueSpec:S,validateSpec:c.validateSpec,style:p,styleSpec:m,key:`${y}[${j}]`}));return C}function Pl(c){const i=c.key,l=c.value,p=c.valueSpec;let m=pr(l);return m==="number"&&l!=l&&(m="NaN"),m!=="number"?[new it(i,l,`number expected, ${m} found`)]:"minimum"in p&&l<p.minimum?[new it(i,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new it(i,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function hv(c){const i=c.valueSpec,l=an(c.value.type);let p,m,y,v={};const S=l!=="categorical"&&c.value.property===void 0,C=!S,j=pr(c.value.stops)==="array"&&pr(c.value.stops[0])==="array"&&pr(c.value.stops[0][0])==="object",R=ls({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(G){if(l==="identity")return[new it(G.key,G.value,'identity function may not have a "stops" property')];let H=[];const Y=G.value;return H=H.concat(Ju({key:G.key,value:Y,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:L})),pr(Y)==="array"&&Y.length===0&&H.push(new it(G.key,Y,"array must have at least one stop")),H},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return l==="identity"&&S&&R.push(new it(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||R.push(new it(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!Pm(c.valueSpec)&&R.push(new it(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(C&&!wc(c.valueSpec)?R.push(new it(c.key,c.value,"property functions not supported")):S&&!iv(c.valueSpec)&&R.push(new it(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!j||c.value.property!==void 0||R.push(new it(c.key,c.value,'"property" property is required')),R;function L(G){let H=[];const Y=G.value,J=G.key;if(pr(Y)!=="array")return[new it(J,Y,`array expected, ${pr(Y)} found`)];if(Y.length!==2)return[new it(J,Y,`array length 2 expected, length ${Y.length} found`)];if(j){if(pr(Y[0])!=="object")return[new it(J,Y,`object expected, ${pr(Y[0])} found`)];if(Y[0].zoom===void 0)return[new it(J,Y,"object stop key must have zoom")];if(Y[0].value===void 0)return[new it(J,Y,"object stop key must have value")];if(y&&y>an(Y[0].zoom))return[new it(J,Y[0].zoom,"stop zoom values must appear in ascending order")];an(Y[0].zoom)!==y&&(y=an(Y[0].zoom),m=void 0,v={}),H=H.concat(ls({key:`${J}[0]`,value:Y[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Pl,value:V}}))}else H=H.concat(V({key:`${J}[0]`,value:Y[0],validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},Y));return Rh(Ha(Y[1]))?H.concat([new it(`${J}[1]`,Y[1],"expressions are not allowed in function stops.")]):H.concat(G.validateSpec({key:`${J}[1]`,value:Y[1],valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function V(G,H){const Y=pr(G.value),J=an(G.value),ne=G.value!==null?G.value:H;if(p){if(Y!==p)return[new it(G.key,ne,`${Y} stop domain type must match previous stop domain type ${p}`)]}else p=Y;if(Y!=="number"&&Y!=="string"&&Y!=="boolean")return[new it(G.key,ne,"stop domain value must be a number, string, or boolean")];if(Y!=="number"&&l!=="categorical"){let fe=`number expected, ${Y} found`;return wc(i)&&l===void 0&&(fe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new it(G.key,ne,fe)]}return l!=="categorical"||Y!=="number"||isFinite(J)&&Math.floor(J)===J?l!=="categorical"&&Y==="number"&&m!==void 0&&J<m?[new it(G.key,ne,"stop domain values must appear in ascending order")]:(m=J,l==="categorical"&&J in v?[new it(G.key,ne,"stop domain values must be unique")]:(v[J]=!0,[])):[new it(G.key,ne,`integer expected, found ${J}`)]}}function Tc(c){const i=(c.expressionContext==="property"?ov:Dh)(Ha(c.value),c.valueSpec);if(i.result==="error")return i.value.map(p=>new it(`${c.key}${p.key}`,c.value,p.message));const l=i.value.expression||i.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new it(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ku(l))return[new it(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ku(l))return[new it(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Mh(l,["zoom","feature-state"]))return[new it(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ah(l))return[new it(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Nm(c){const i=c.key,l=c.value,p=pr(l);return p!=="string"?[new it(i,l,`color expected, ${p} found`)]:hr.parse(String(l))?[]:[new it(i,l,`color expected, "${l}" found`)]}function ed(c){const i=c.key,l=c.value,p=c.valueSpec,m=[];return Array.isArray(p.values)?p.values.indexOf(an(l))===-1&&m.push(new it(i,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(an(l))===-1&&m.push(new it(i,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),m}function Im(c){return Bh(Ha(c.value))?Tc(Qr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pv(c)}function pv(c){const i=c.value,l=c.key;if(pr(i)!=="array")return[new it(l,i,`array expected, ${pr(i)} found`)];const p=c.styleSpec;let m,y=[];if(i.length<1)return[new it(l,i,"filter array must have at least 1 element")];switch(y=y.concat(ed({key:`${l}[0]`,value:i[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),an(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&an(i[1])==="$type"&&y.push(new it(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new it(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(m=pr(i[1]),m!=="string"&&y.push(new it(`${l}[1]`,i[1],`string expected, ${m} found`)));for(let v=2;v<i.length;v++)m=pr(i[v]),an(i[1])==="$type"?y=y.concat(ed({key:`${l}[${v}]`,value:i[v],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&y.push(new it(`${l}[${v}]`,i[v],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let v=1;v<i.length;v++)y=y.concat(pv({key:`${l}[${v}]`,value:i[v],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":m=pr(i[1]),i.length!==2?y.push(new it(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):m!=="string"&&y.push(new it(`${l}[1]`,i[1],`string expected, ${m} found`))}return y}function Rm(c,i){const l=c.key,p=c.validateSpec,m=c.style,y=c.styleSpec,v=c.value,S=c.objectKey,C=y[`${i}_${c.layerType}`];if(!C)return[];const j=S.match(/^(.*)-transition$/);if(i==="paint"&&j&&C[j[1]]&&C[j[1]].transition)return p({key:l,value:v,valueSpec:y.transition,style:m,styleSpec:y});const R=c.valueSpec||C[S];if(!R)return[new it(l,v,`unknown property "${S}"`)];let L;if(pr(v)==="string"&&wc(R)&&!R.tokens&&(L=/^{([^}]+)}$/.exec(v)))return[new it(l,v,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(L[1])} }\`.`)];const V=[];return c.layerType==="symbol"&&S==="text-font"&&Nh(Ha(v))&&an(v.type)==="identity"&&V.push(new it(l,v,'"text-font" does not support identity functions')),V.concat(p({key:c.key,value:v,valueSpec:R,style:m,styleSpec:y,expressionContext:"property",propertyType:i,propertyKey:S}))}function Dm(c){return Rm(c,"paint")}function td(c){return Rm(c,"layout")}function fv(c){let i=[];const l=c.value,p=c.key,m=c.style,y=c.styleSpec;if(pr(l)!=="object")return[new it(p,l,`object expected, ${pr(l)} found`)];l.type||l.ref||i.push(new it(p,l,'either "type" or "ref" is required'));let v=an(l.type);const S=an(l.ref);if(l.id){const C=an(l.id);for(let j=0;j<c.arrayIndex;j++){const R=m.layers[j];an(R.id)===C&&i.push(new it(p,l.id,`duplicate layer id "${l.id}", previously used at line ${R.id.__line__}`))}}if("ref"in l){let C;["type","source","source-layer","filter","layout"].forEach(j=>{j in l&&i.push(new it(p,l[j],`"${j}" is prohibited for ref layers`))}),m.layers.forEach(j=>{an(j.id)===S&&(C=j)}),C?C.ref?i.push(new it(p,l.ref,"ref cannot reference another ref layer")):v=an(C.type):i.push(new it(p,l.ref,`ref layer "${S}" not found`))}else if(v!=="background")if(l.source){const C=m.sources&&m.sources[l.source],j=C&&an(C.type);C?j==="vector"&&v==="raster"?i.push(new it(p,l.source,`layer "${l.id}" requires a raster source`)):j!=="raster-dem"&&v==="hillshade"||j!=="raster-dem"&&v==="color-relief"?i.push(new it(p,l.source,`layer "${l.id}" requires a raster-dem source`)):j==="raster"&&v!=="raster"?i.push(new it(p,l.source,`layer "${l.id}" requires a vector source`)):j!=="vector"||l["source-layer"]?j==="raster-dem"&&v!=="hillshade"&&v!=="color-relief"?i.push(new it(p,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):v!=="line"||!l.paint||!l.paint["line-gradient"]||j==="geojson"&&C.lineMetrics||i.push(new it(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new it(p,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new it(p,l.source,`source "${l.source}" not found`))}else i.push(new it(p,l,'missing required property "source"'));return i=i.concat(ls({key:p,value:l,valueSpec:y.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:l.type,valueSpec:y.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:Im,layout:C=>ls({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":j=>td(Qr({layerType:v},j))}}),paint:C=>ls({layer:l,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":j=>Dm(Qr({layerType:v},j))}})}})),i}function zo(c){const i=c.value,l=c.key,p=pr(i);return p!=="string"?[new it(l,i,`string expected, ${p} found`)]:[]}const Om={promoteId:function({key:c,value:i}){if(pr(i)==="string")return zo({key:c,value:i});{const l=[];for(const p in i)l.push(...zo({key:`${c}.${p}`,value:i[p]}));return l}}};function mv(c){const i=c.value,l=c.key,p=c.styleSpec,m=c.style,y=c.validateSpec;if(!i.type)return[new it(l,i,'"type" is required')];const v=an(i.type);let S;switch(v){case"vector":case"raster":return S=ls({key:l,value:i,valueSpec:p[`source_${v.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:Om,validateSpec:y}),S;case"raster-dem":return S=function(C){var j;const R=(j=C.sourceName)!==null&&j!==void 0?j:"",L=C.value,V=C.styleSpec,G=V.source_raster_dem,H=C.style;let Y=[];const J=pr(L);if(L===void 0)return Y;if(J!=="object")return Y.push(new it("source_raster_dem",L,`object expected, ${J} found`)),Y;const ne=an(L.encoding)==="custom",fe=["redFactor","greenFactor","blueFactor","baseShift"],ae=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const ue in L)!ne&&fe.includes(ue)?Y.push(new it(ue,L[ue],`In "${R}": "${ue}" is only valid when "encoding" is set to "custom". ${ae} encoding found`)):G[ue]?Y=Y.concat(C.validateSpec({key:ue,value:L[ue],valueSpec:G[ue],validateSpec:C.validateSpec,style:H,styleSpec:V})):Y.push(new it(ue,L[ue],`unknown property "${ue}"`));return Y}({sourceName:l,value:i,style:c.style,styleSpec:p,validateSpec:y}),S;case"geojson":if(S=ls({key:l,value:i,valueSpec:p.source_geojson,style:m,styleSpec:p,validateSpec:y,objectElementValidators:Om}),i.cluster)for(const C in i.clusterProperties){const[j,R]=i.clusterProperties[C],L=typeof j=="string"?[j,["accumulated"],["get",C]]:j;S.push(...Tc({key:`${l}.${C}.map`,value:R,expressionContext:"cluster-map"})),S.push(...Tc({key:`${l}.${C}.reduce`,value:L,expressionContext:"cluster-reduce"}))}return S;case"video":return ls({key:l,value:i,valueSpec:p.source_video,style:m,validateSpec:y,styleSpec:p});case"image":return ls({key:l,value:i,valueSpec:p.source_image,style:m,validateSpec:y,styleSpec:p});case"canvas":return[new it(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ed({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Lm(c){const i=c.value,l=c.styleSpec,p=l.light,m=c.style;let y=[];const v=pr(i);if(i===void 0)return y;if(v!=="object")return y=y.concat([new it("light",i,`object expected, ${v} found`)]),y;for(const S in i){const C=S.match(/^(.*)-transition$/);y=y.concat(C&&p[C[1]]&&p[C[1]].transition?c.validateSpec({key:S,value:i[S],valueSpec:l.transition,validateSpec:c.validateSpec,style:m,styleSpec:l}):p[S]?c.validateSpec({key:S,value:i[S],valueSpec:p[S],validateSpec:c.validateSpec,style:m,styleSpec:l}):[new it(S,i[S],`unknown property "${S}"`)])}return y}function Fm(c){const i=c.value,l=c.styleSpec,p=l.sky,m=c.style,y=pr(i);if(i===void 0)return[];if(y!=="object")return[new it("sky",i,`object expected, ${y} found`)];let v=[];for(const S in i)v=v.concat(p[S]?c.validateSpec({key:S,value:i[S],valueSpec:p[S],style:m,styleSpec:l}):[new it(S,i[S],`unknown property "${S}"`)]);return v}function kc(c){const i=c.value,l=c.styleSpec,p=l.terrain,m=c.style;let y=[];const v=pr(i);if(i===void 0)return y;if(v!=="object")return y=y.concat([new it("terrain",i,`object expected, ${v} found`)]),y;for(const S in i)y=y.concat(p[S]?c.validateSpec({key:S,value:i[S],valueSpec:p[S],validateSpec:c.validateSpec,style:m,styleSpec:l}):[new it(S,i[S],`unknown property "${S}"`)]);return y}function gv(c){let i=[];const l=c.value,p=c.key;if(Array.isArray(l)){const m=[],y=[];for(const v in l)l[v].id&&m.includes(l[v].id)&&i.push(new it(p,l,`all the sprites' ids must be unique, but ${l[v].id} is duplicated`)),m.push(l[v].id),l[v].url&&y.includes(l[v].url)&&i.push(new it(p,l,`all the sprites' URLs must be unique, but ${l[v].url} is duplicated`)),y.push(l[v].url),i=i.concat(ls({key:`${p}[${v}]`,value:l[v],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return i}return zo({key:p,value:l})}function yv(c){return i=c.value,i&&i.constructor===Object?[]:[new it(c.key,c.value,`object expected, ${pr(c.value)} found`)];var i}const xv={"*":()=>[],array:Ju,boolean:function(c){const i=c.value,l=c.key,p=pr(i);return p!=="boolean"?[new it(l,i,`boolean expected, ${p} found`)]:[]},number:Pl,color:Nm,constants:Mm,enum:ed,filter:Im,function:hv,layer:fv,object:ls,source:mv,light:Lm,sky:Fm,terrain:kc,projection:function(c){const i=c.value,l=c.styleSpec,p=l.projection,m=c.style,y=pr(i);if(i===void 0)return[];if(y!=="object")return[new it("projection",i,`object expected, ${y} found`)];let v=[];for(const S in i)v=v.concat(p[S]?c.validateSpec({key:S,value:i[S],valueSpec:p[S],style:m,styleSpec:l}):[new it(S,i[S],`unknown property "${S}"`)]);return v},projectionDefinition:function(c){const i=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const p=pr(l);return p!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(l)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(l)?["array","string"].includes(p)?[]:[new it(i,l,`projection expected, invalid type "${p}" found`)]:[new it(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:zo,formatted:function(c){return zo(c).length===0?[]:Tc(c)},resolvedImage:function(c){return zo(c).length===0?[]:Tc(c)},padding:function(c){const i=c.key,l=c.value;if(pr(l)==="array"){if(l.length<1||l.length>4)return[new it(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let m=[];for(let y=0;y<l.length;y++)m=m.concat(c.validateSpec({key:`${i}[${y}]`,value:l[y],validateSpec:c.validateSpec,valueSpec:p}));return m}return Pl({key:i,value:l,valueSpec:{}})},numberArray:function(c){const i=c.key,l=c.value;if(pr(l)==="array"){const p={type:"number"};if(l.length<1)return[new it(i,l,"array length at least 1 expected, length 0 found")];let m=[];for(let y=0;y<l.length;y++)m=m.concat(c.validateSpec({key:`${i}[${y}]`,value:l[y],validateSpec:c.validateSpec,valueSpec:p}));return m}return Pl({key:i,value:l,valueSpec:{}})},colorArray:function(c){const i=c.key,l=c.value;if(pr(l)==="array"){if(l.length<1)return[new it(i,l,"array length at least 1 expected, length 0 found")];let p=[];for(let m=0;m<l.length;m++)p=p.concat(Nm({key:`${i}[${m}]`,value:l[m]}));return p}return Nm({key:i,value:l})},variableAnchorOffsetCollection:function(c){const i=c.key,l=c.value,p=pr(l),m=c.styleSpec;if(p!=="array"||l.length<1||l.length%2!=0)return[new it(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let v=0;v<l.length;v+=2)y=y.concat(ed({key:`${i}[${v}]`,value:l[v],valueSpec:m.layout_symbol["text-anchor"]})),y=y.concat(Ju({key:`${i}[${v+1}]`,value:l[v+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:m}));return y},sprite:gv,state:yv};function Uh(c){const i=c.value,l=c.valueSpec,p=c.styleSpec;return c.validateSpec=Uh,l.expression&&Nh(an(i))?hv(c):l.expression&&Rh(Ha(i))?Tc(c):l.type&&xv[l.type]?xv[l.type](c):ls(Qr({},c,{valueSpec:l.type?p[l.type]:l}))}function vv(c){const i=c.value,l=c.key,p=zo(c);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new it(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new it(l,i,'"glyphs" url must include a "{range}" token'))),p}function Ls(c,i=oe){let l=[];return l=l.concat(Uh({key:"",value:c,valueSpec:i.$root,styleSpec:i,style:c,validateSpec:Uh,objectElementValidators:{glyphs:vv,"*":()=>[]}})),c.constants&&(l=l.concat(Mm({key:"constants",value:c.constants}))),Cc(l)}function Zi(c){return function(i){return c(Object.assign({},i,{validateSpec:Uh}))}}function Cc(c){return[].concat(c).sort((i,l)=>i.line-l.line)}function pn(c){return function(...i){return Cc(c.apply(this,i))}}Ls.source=pn(Zi(mv)),Ls.sprite=pn(Zi(gv)),Ls.glyphs=pn(Zi(vv)),Ls.light=pn(Zi(Lm)),Ls.sky=pn(Zi(Fm)),Ls.terrain=pn(Zi(kc)),Ls.state=pn(Zi(yv)),Ls.layer=pn(Zi(fv)),Ls.filter=pn(Zi(Im)),Ls.paintProperty=pn(Zi(Dm)),Ls.layoutProperty=pn(Zi(td));const rd=oe,El=Ls,Lw=El.light,Fw=El.sky,nd=El.paintProperty,_v=El.layoutProperty;function qh(c,i){let l=!1;if(i&&i.length)for(const p of i)c.fire(new be(new Error(p.message))),l=!0;return l}class id{constructor(i,l,p){const m=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const v=new Int32Array(this.arrayBuffer);i=v[0],this.d=(l=v[1])+2*(p=v[2]);for(let C=0;C<this.d*this.d;C++){const j=v[3+C],R=v[3+C+1];m.push(j===R?null:v.subarray(j,R))}const S=v[3+m.length+1];this.keys=v.subarray(v[3+m.length],S),this.bboxes=v.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let v=0;v<this.d*this.d;v++)m.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=p,this.scale=l/i,this.uid=0;const y=p/l*i;this.min=-y,this.max=i+y}insert(i,l,p,m,y){this._forEachCell(l,p,m,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,p,m,y,v){this.cells[y].push(v)}query(i,l,p,m,y){const v=this.min,S=this.max;if(i<=v&&l<=v&&S<=p&&S<=m&&!y)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(i,l,p,m,this._queryCell,C,{},y),C}}_queryCell(i,l,p,m,y,v,S,C){const j=this.cells[y];if(j!==null){const R=this.keys,L=this.bboxes;for(let V=0;V<j.length;V++){const G=j[V];if(S[G]===void 0){const H=4*G;(C?C(L[H+0],L[H+1],L[H+2],L[H+3]):i<=L[H+2]&&l<=L[H+3]&&p>=L[H+0]&&m>=L[H+1])?(S[G]=!0,v.push(R[G])):S[G]=!1}}}}_forEachCell(i,l,p,m,y,v,S,C){const j=this._convertToCellCoord(i),R=this._convertToCellCoord(l),L=this._convertToCellCoord(p),V=this._convertToCellCoord(m);for(let G=j;G<=L;G++)for(let H=R;H<=V;H++){const Y=this.d*H+G;if((!C||C(this._convertFromCellCoord(G),this._convertFromCellCoord(H),this._convertFromCellCoord(G+1),this._convertFromCellCoord(H+1)))&&y.call(this,i,l,p,m,Y,v,S,C))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let p=0;for(let v=0;v<this.cells.length;v++)p+=this.cells[v].length;const m=new Int32Array(l+p+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let y=l;for(let v=0;v<i.length;v++){const S=i[v];m[3+v]=y,m.set(S,y),y+=S.length}return m[3+i.length]=y,m.set(this.keys,y),y+=this.keys.length,m[3+i.length+1]=y,m.set(this.bboxes,y),y+=this.bboxes.length,m.buffer}static serialize(i,l){const p=i.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(i){return new id(i.buffer)}}const na={};function bt(c,i,l={}){if(na[c])throw new Error(`${c} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:c,writeable:!1}),na[c]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}bt("Object",Object),bt("Set",Set),bt("TransferableGridIndex",id),bt("Color",hr),bt("Error",Error),bt("AJAXError",Kn),bt("ResolvedImage",ss),bt("StylePropertyFunction",Lh),bt("StyleExpression",Ih,{omit:["_evaluator"]}),bt("ZoomDependentExpression",Oh),bt("ZoomConstantExpression",Cl),bt("CompoundExpression",Os,{omit:["_evaluate"]});for(const c in _c)_c[c]._classRegistryKey||bt(`Expression_${c}`,_c[c]);function Pc(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function zm(c){return c.$name||c.constructor._classRegistryKey}function bv(c){return!function(i){if(i===null||typeof i!="object")return!1;const l=zm(i);return!(!l||l==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Pc(c)||vi(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function sd(c,i){if(bv(c))return(Pc(c)||vi(c))&&i&&i.push(c),ArrayBuffer.isView(c)&&i&&i.push(c.buffer),c instanceof ImageData&&i&&i.push(c.data.buffer),c;if(Array.isArray(c)){const y=[];for(const v of c)y.push(sd(v,i));return y}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=zm(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!na[l])throw new Error(`${l} is not registered.`);const{klass:p}=na[l],m=p.serialize?p.serialize(c,i):{};if(p.serialize){if(i&&m===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in c){if(!c.hasOwnProperty(y)||na[l].omit.indexOf(y)>=0)continue;const v=c[y];m[y]=na[l].shallow.indexOf(y)>=0?v:sd(v,i)}c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(m.$name=l),m}function Za(c){if(bv(c))return c;if(Array.isArray(c))return c.map(Za);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const i=zm(c)||"Object";if(!na[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=na[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(c);const p=Object.create(l.prototype);for(const m of Object.keys(c)){if(m==="$name")continue;const y=c[m];p[m]=na[i].shallow.indexOf(m)>=0?y:Za(y)}return p}class Bm{constructor(){this.first=!0}update(i,l){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}function zw(c){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))}function Ec(c){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))}function wv(c){return/\s/u.test(String.fromCodePoint(c))}function ad(c){for(const i of c)if(Ec(i.codePointAt(0)))return!0;return!1}function Wh(c){for(const i of c)if(!Tv(i.codePointAt(0)))return!1;return!0}function Vm(c){const i=c.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const Sv=Vm(["Arab","Dupl","Mong","Ougr","Syrc"]);function Tv(c){return!Sv.test(String.fromCodePoint(c))}function $m(c){return!(Ec(c)||(i=c,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(i))));var i}const Um=Vm(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qm(c){return Um.test(String.fromCodePoint(c))}function Bw(c,i){return!(!i&&qm(c)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(c)))}function kv(c){for(const i of c)if(qm(i.codePointAt(0)))return!0;return!1}const Bo=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(Bo.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,i){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,p=new Promise(y=>{this.loadScriptResolve=y});i(l);const m=new Promise(y=>setTimeout(()=>y(),this.TIMEOUT));if(yield Promise.race([p,m]),this.isParsed()){const y={pluginStatus:"loaded",pluginURL:l};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class Or{constructor(i,l){this.isSupportedScript=Vw,this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Bm,this.transition=l.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bm,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}function Vw(c){return function(i,l){for(const p of i)if(!Bw(p.codePointAt(0),l))return!1;return!0}(c,Bo.getRTLTextPluginStatus()==="loaded")}const od="-transition";class ld{constructor(i,l,p){this.property=i,this.value=l,this.expression=function(m,y,v){if(Nh(m))return new Lh(m,y);if(Rh(m)){const S=ov(m,y,v);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=m;return y.type==="color"&&typeof m=="string"?S=hr.parse(m):y.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?y.type!=="numberArray"||typeof m!="number"&&!Array.isArray(m)?y.type!=="colorArray"||typeof m!="string"&&!Array.isArray(m)?y.type==="variableAnchorOffsetCollection"&&Array.isArray(m)?S=Hi.parse(m):y.type==="projectionDefinition"&&typeof m=="string"&&(S=Di.parse(m)):S=Yn.parse(m):S=Ri.parse(m):S=Ii.parse(m),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>S}}}(l===void 0?i.specification.default:l,i.specification,p)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,p){return this.property.possiblyEvaluate(this,i,l,p)}}class Wm{constructor(i,l){this.property=i,this.value=new ld(i,void 0,l)}transitioned(i,l){return new Gm(this.property,this.value,l,Yr({},i.transition,this.transition),i.now)}untransitioned(){return new Gm(this.property,this.value,null,{},0)}}class Cv{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._globalState=l}getValue(i){return vn(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Wm(this._values[i].property,this._globalState)),this._values[i].value=new ld(this._values[i].property,l===null?void 0:vn(l),this._globalState)}getTransition(i){return vn(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Wm(this._values[i].property,this._globalState)),this._values[i].transition=vn(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p);const m=this.getTransition(l);m!==void 0&&(i[`${l}${od}`]=m)}return i}transitioned(i,l){const p=new Hm(this._properties);for(const m of Object.keys(this._values))p._values[m]=this._values[m].transitioned(i,l._values[m]);return p}untransitioned(){const i=new Hm(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class Gm{constructor(i,l,p,m,y){this.property=i,this.value=l,this.begin=y+m.delay||0,this.end=this.begin+m.duration||0,i.specification.transition&&(m.delay||m.duration)&&(this.prior=p)}possiblyEvaluate(i,l,p){const m=i.now||0,y=this.value.possiblyEvaluate(i,l,p),v=this.prior;if(v){if(m>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(m<this.begin)return v.possiblyEvaluate(i,l,p);{const S=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(i,l,p),y,Lt(S))}}return y}}class Hm{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,p){const m=new jl(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,l,p);return m}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Pv{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._globalState=l}hasValue(i){return this._values[i].value!==void 0}getValue(i){return vn(this._values[i].value)}setValue(i,l){this._values[i]=new ld(this._values[i].property,l===null?void 0:vn(l),this._globalState)}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p)}return i}possiblyEvaluate(i,l,p){const m=new jl(this._properties);for(const y of Object.keys(this._values))m._values[y]=this._values[y].possiblyEvaluate(i,l,p);return m}}class ia{constructor(i,l,p){this.property=i,this.value=l,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,p,m){return this.property.evaluate(this.value,this.parameters,i,l,p,m)}}class jl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class jt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,p){const m=ta[this.specification.type];return m?m(i,l,p):i}}class zt{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,p,m){return new ia(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},p,m)}:i.expression,l)}interpolate(i,l,p){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new ia(this,{kind:"constant",value:void 0},i.parameters);const m=ta[this.specification.type];if(m){const y=m(i.value.value,l.value.value,p);return new ia(this,{kind:"constant",value:y},i.parameters)}return i}evaluate(i,l,p,m,y,v){return i.kind==="constant"?i.value:i.evaluate(l,p,m,y,v)}}class cd extends zt{possiblyEvaluate(i,l,p,m){if(i.value===void 0)return new ia(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const y=i.expression.evaluate(l,null,{},p,m),v=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,S=this._calculate(v,v,v,l);return new ia(this,{kind:"constant",value:S},l)}if(i.expression.kind==="camera"){const y=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new ia(this,{kind:"constant",value:y},l)}return new ia(this,i.expression,l)}evaluate(i,l,p,m,y,v){if(i.kind==="source"){const S=i.evaluate(l,p,m,y,v);return this._calculate(S,S,S,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,m),i.evaluate({zoom:Math.floor(l.zoom)},p,m),i.evaluate({zoom:Math.floor(l.zoom)+1},p,m),l):i.value}_calculate(i,l,p,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class Ev{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,m){if(i.value!==void 0){if(i.expression.kind==="constant"){const y=i.expression.evaluate(l,null,{},p,m);return this._calculate(y,y,y,l)}return this._calculate(i.expression.evaluate(new Or(Math.floor(l.zoom-1),l)),i.expression.evaluate(new Or(Math.floor(l.zoom),l)),i.expression.evaluate(new Or(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,p,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class ud{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,m){return!!i.expression.evaluate(l,null,{},p,m)}interpolate(){return!1}}class Oi{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const p=i[l];p.specification.overridable&&this.overridableProperties.push(l);const m=this.defaultPropertyValues[l]=new ld(p,void 0,void 0),y=this.defaultTransitionablePropertyValues[l]=new Wm(p,void 0);this.defaultTransitioningPropertyValues[l]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=m.possiblyEvaluate({})}}}bt("DataDrivenProperty",zt),bt("DataConstantProperty",jt),bt("CrossFadedDataDrivenProperty",cd),bt("CrossFadedProperty",Ev),bt("ColorRampProperty",ud);class Fs extends Ie{constructor(i,l,p){if(super(),this.id=i.id,this.type=i.type,this._globalState=p,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=Qu(i.filter,p)),l.layout&&(this._unevaluatedLayout=new Pv(l.layout,p)),l.paint)){this._transitionablePaint=new Cv(l.paint,p);for(const m in i.paint)this.setPaintProperty(m,i.paint[m],{validate:!1});for(const m in i.layout)this.setLayoutProperty(m,i.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new jl(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=Qu(i,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const p=this._unevaluatedLayout._values[l];for(const m of p.getGlobalStateRefs())i.add(m)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}getPaintAffectingGlobalStateRefs(){var i;const l=new globalThis.Map;if(this._transitionablePaint)for(const p in this._transitionablePaint._values){const m=this._transitionablePaint._values[p].value;for(const y of m.getGlobalStateRefs()){const v=(i=l.get(y))!==null&&i!==void 0?i:[];v.push({name:p,value:m.value}),l.set(y,v)}}return l}setLayoutProperty(i,l,p={}){l!=null&&this._validate(_v,`layers.${this.id}.layout.${i}`,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(od)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,p={}){if(l!=null&&this._validate(nd,`layers.${this.id}.paint.${i}`,i,l,p))return!1;if(i.endsWith(od))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const m=this._transitionablePaint._values[i],y=m.property.specification["property-type"]==="cross-faded-data-driven",v=m.value.isDataDriven(),S=m.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const C=this._transitionablePaint._values[i].value;return C.isDataDriven()||v||y||this._handleOverridablePaintPropertyUpdate(i,S,C)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,p){return!1}isHidden(i,l=!1){return!!(this.minzoom&&i<(l?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),ri(i,(l,p)=>!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length))}_validate(i,l,p,m,y={}){return(!y||y.validate!==!1)&&qh(this,i.call(El,{key:l,layerType:this.type,objectKey:p,value:m,styleSpec:oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof ia&&wc(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let jv;var $w={get paint(){return jv=jv||new Oi({"raster-opacity":new jt(oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new jt(oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new jt(oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new jt(oe.paint_raster["raster-brightness-max"]),"raster-saturation":new jt(oe.paint_raster["raster-saturation"]),"raster-contrast":new jt(oe.paint_raster["raster-contrast"]),"raster-resampling":new jt(oe.paint_raster["raster-resampling"]),"raster-fade-duration":new jt(oe.paint_raster["raster-fade-duration"])})}};class Uw extends Fs{constructor(i,l){super(i,$w,l)}}const qw={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class dd{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Lr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function _n(c,i=1){let l=0,p=0;return{members:c.map(m=>{const y=qw[m.type].BYTES_PER_ELEMENT,v=l=Av(l,Math.max(i,y)),S=m.components||1;return p=Math.max(p,y),l+=y*S,{name:m.name,type:m.type,components:S,offset:v}}),size:Av(l,Math.max(p,i)),alignment:i}}function Av(c,i){return Math.ceil(c/i)*i}class hd extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const m=2*i;return this.int16[m+0]=l,this.int16[m+1]=p,i}}hd.prototype.bytesPerElement=4,bt("StructArrayLayout2i4",hd);class pd extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,p)}emplace(i,l,p,m){const y=3*i;return this.int16[y+0]=l,this.int16[y+1]=p,this.int16[y+2]=m,i}}pd.prototype.bytesPerElement=6,bt("StructArrayLayout3i6",pd);class Zm extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,p,m)}emplace(i,l,p,m,y){const v=4*i;return this.int16[v+0]=l,this.int16[v+1]=p,this.int16[v+2]=m,this.int16[v+3]=y,i}}Zm.prototype.bytesPerElement=8,bt("StructArrayLayout4i8",Zm);class Km extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,m,y,v)}emplace(i,l,p,m,y,v,S){const C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=v,this.int16[C+5]=S,i}}Km.prototype.bytesPerElement=12,bt("StructArrayLayout2i4i12",Km);class Ka extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,m,y,v)}emplace(i,l,p,m,y,v,S){const C=4*i,j=8*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.uint8[j+4]=m,this.uint8[j+5]=y,this.uint8[j+6]=v,this.uint8[j+7]=S,i}}Ka.prototype.bytesPerElement=8,bt("StructArrayLayout2i4ub8",Ka);class jc extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const m=2*i;return this.float32[m+0]=l,this.float32[m+1]=p,i}}jc.prototype.bytesPerElement=8,bt("StructArrayLayout2f8",jc);class fd extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C,j,R){const L=this.length;return this.resize(L+1),this.emplace(L,i,l,p,m,y,v,S,C,j,R)}emplace(i,l,p,m,y,v,S,C,j,R,L){const V=10*i;return this.uint16[V+0]=l,this.uint16[V+1]=p,this.uint16[V+2]=m,this.uint16[V+3]=y,this.uint16[V+4]=v,this.uint16[V+5]=S,this.uint16[V+6]=C,this.uint16[V+7]=j,this.uint16[V+8]=R,this.uint16[V+9]=L,i}}fd.prototype.bytesPerElement=20,bt("StructArrayLayout10ui20",fd);class Gh extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C){const j=this.length;return this.resize(j+1),this.emplace(j,i,l,p,m,y,v,S,C)}emplace(i,l,p,m,y,v,S,C,j){const R=8*i;return this.uint16[R+0]=l,this.uint16[R+1]=p,this.uint16[R+2]=m,this.uint16[R+3]=y,this.uint16[R+4]=v,this.uint16[R+5]=S,this.uint16[R+6]=C,this.uint16[R+7]=j,i}}Gh.prototype.bytesPerElement=16,bt("StructArrayLayout8ui16",Gh);class md extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C,j,R,L,V){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,p,m,y,v,S,C,j,R,L,V)}emplace(i,l,p,m,y,v,S,C,j,R,L,V,G){const H=12*i;return this.int16[H+0]=l,this.int16[H+1]=p,this.int16[H+2]=m,this.int16[H+3]=y,this.uint16[H+4]=v,this.uint16[H+5]=S,this.uint16[H+6]=C,this.uint16[H+7]=j,this.int16[H+8]=R,this.int16[H+9]=L,this.int16[H+10]=V,this.int16[H+11]=G,i}}md.prototype.bytesPerElement=24,bt("StructArrayLayout4i4ui4i24",md);class Ym extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,p)}emplace(i,l,p,m){const y=3*i;return this.float32[y+0]=l,this.float32[y+1]=p,this.float32[y+2]=m,i}}Ym.prototype.bytesPerElement=12,bt("StructArrayLayout3f12",Ym);class Ac extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Ac.prototype.bytesPerElement=4,bt("StructArrayLayout1ul4",Ac);class Al extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C,j){const R=this.length;return this.resize(R+1),this.emplace(R,i,l,p,m,y,v,S,C,j)}emplace(i,l,p,m,y,v,S,C,j,R){const L=10*i,V=5*i;return this.int16[L+0]=l,this.int16[L+1]=p,this.int16[L+2]=m,this.int16[L+3]=y,this.int16[L+4]=v,this.int16[L+5]=S,this.uint32[V+3]=C,this.uint16[L+8]=j,this.uint16[L+9]=R,i}}Al.prototype.bytesPerElement=20,bt("StructArrayLayout6i1ul2ui20",Al);class Qm extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,m,y,v)}emplace(i,l,p,m,y,v,S){const C=6*i;return this.int16[C+0]=l,this.int16[C+1]=p,this.int16[C+2]=m,this.int16[C+3]=y,this.int16[C+4]=v,this.int16[C+5]=S,i}}Qm.prototype.bytesPerElement=12,bt("StructArrayLayout2i2i2i12",Qm);class Hh extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p,m,y)}emplace(i,l,p,m,y,v){const S=4*i,C=8*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=m,this.int16[C+6]=y,this.int16[C+7]=v,i}}Hh.prototype.bytesPerElement=16,bt("StructArrayLayout2f1f2i16",Hh);class Ml extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,m,y,v)}emplace(i,l,p,m,y,v,S){const C=16*i,j=4*i,R=8*i;return this.uint8[C+0]=l,this.uint8[C+1]=p,this.float32[j+1]=m,this.float32[j+2]=y,this.int16[R+6]=v,this.int16[R+7]=S,i}}Ml.prototype.bytesPerElement=16,bt("StructArrayLayout2ub2f2i16",Ml);class Zh extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,p)}emplace(i,l,p,m){const y=3*i;return this.uint16[y+0]=l,this.uint16[y+1]=p,this.uint16[y+2]=m,i}}Zh.prototype.bytesPerElement=6,bt("StructArrayLayout3ui6",Zh);class Xm extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne){const fe=this.length;return this.resize(fe+1),this.emplace(fe,i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne)}emplace(i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne,fe){const ae=24*i,ue=12*i,Ce=48*i;return this.int16[ae+0]=l,this.int16[ae+1]=p,this.uint16[ae+2]=m,this.uint16[ae+3]=y,this.uint32[ue+2]=v,this.uint32[ue+3]=S,this.uint32[ue+4]=C,this.uint16[ae+10]=j,this.uint16[ae+11]=R,this.uint16[ae+12]=L,this.float32[ue+7]=V,this.float32[ue+8]=G,this.uint8[Ce+36]=H,this.uint8[Ce+37]=Y,this.uint8[Ce+38]=J,this.uint32[ue+10]=ne,this.int16[ae+22]=fe,i}}Xm.prototype.bytesPerElement=48,bt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Xm);class Kh extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne,fe,ae,ue,Ce,Pe,$e,Je,Ze,et,gt,ot){const lt=this.length;return this.resize(lt+1),this.emplace(lt,i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne,fe,ae,ue,Ce,Pe,$e,Je,Ze,et,gt,ot)}emplace(i,l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne,fe,ae,ue,Ce,Pe,$e,Je,Ze,et,gt,ot,lt){const Ke=32*i,Mt=16*i;return this.int16[Ke+0]=l,this.int16[Ke+1]=p,this.int16[Ke+2]=m,this.int16[Ke+3]=y,this.int16[Ke+4]=v,this.int16[Ke+5]=S,this.int16[Ke+6]=C,this.int16[Ke+7]=j,this.uint16[Ke+8]=R,this.uint16[Ke+9]=L,this.uint16[Ke+10]=V,this.uint16[Ke+11]=G,this.uint16[Ke+12]=H,this.uint16[Ke+13]=Y,this.uint16[Ke+14]=J,this.uint16[Ke+15]=ne,this.uint16[Ke+16]=fe,this.uint16[Ke+17]=ae,this.uint16[Ke+18]=ue,this.uint16[Ke+19]=Ce,this.uint16[Ke+20]=Pe,this.uint16[Ke+21]=$e,this.uint16[Ke+22]=Je,this.uint32[Mt+12]=Ze,this.float32[Mt+13]=et,this.float32[Mt+14]=gt,this.uint16[Ke+30]=ot,this.uint16[Ke+31]=lt,i}}Kh.prototype.bytesPerElement=64,bt("StructArrayLayout8i15ui1ul2f2ui64",Kh);class Yh extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}Yh.prototype.bytesPerElement=4,bt("StructArrayLayout1f4",Yh);class b extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,p)}emplace(i,l,p,m){const y=3*i;return this.uint16[6*i+0]=l,this.float32[y+1]=p,this.float32[y+2]=m,i}}b.prototype.bytesPerElement=12,bt("StructArrayLayout1ui2f12",b);class s extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const m=this.length;return this.resize(m+1),this.emplace(m,i,l,p)}emplace(i,l,p,m){const y=4*i;return this.uint32[2*i+0]=l,this.uint16[y+2]=p,this.uint16[y+3]=m,i}}s.prototype.bytesPerElement=8,bt("StructArrayLayout1ul2ui8",s);class d extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const m=2*i;return this.uint16[m+0]=l,this.uint16[m+1]=p,i}}d.prototype.bytesPerElement=4,bt("StructArrayLayout2ui4",d);class g extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}g.prototype.bytesPerElement=2,bt("StructArrayLayout1ui2",g);class x extends Lr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,i,l,p,m)}emplace(i,l,p,m,y){const v=4*i;return this.float32[v+0]=l,this.float32[v+1]=p,this.float32[v+2]=m,this.float32[v+3]=y,i}}x.prototype.bytesPerElement=16,bt("StructArrayLayout4f16",x);class w extends dd{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class k extends Al{get(i){return new w(this,i)}}bt("CollisionBoxArray",k);class A extends dd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}A.prototype.size=48;class N extends Xm{get(i){return new A(this,i)}}bt("PlacedSymbolArray",N);class O extends dd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}O.prototype.size=64;class B extends Kh{get(i){return new O(this,i)}}bt("SymbolInstanceArray",B);class K extends Yh{getoffsetX(i){return this.float32[1*i+0]}}bt("GlyphOffsetArray",K);class Z extends pd{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}bt("SymbolLineVertexArray",Z);class X extends dd{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}X.prototype.size=12;class re extends b{get(i){return new X(this,i)}}bt("TextAnchorOffsetArray",re);class le extends dd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}le.prototype.size=8;class ce extends s{get(i){return new le(this,i)}}bt("FeatureIndexArray",ce);class de extends hd{}class ye extends hd{}class we extends hd{}class me extends Km{}class Se extends Ka{}class ke extends jc{}class ve extends fd{}class Ae extends Gh{}class qe extends md{}class Fe extends Ym{}class ze extends Ac{}class Ue extends Qm{}class ut extends Ml{}class st extends Zh{}class Xe extends d{}const Pt=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qt}=Pt;class Kt{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,p,m){const y=this.segments[this.segments.length-1];return i>Kt.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${Kt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Kt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+i>Kt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==m?this.createNewSegment(l,p,m):y}createNewSegment(i,l,p){const m={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(m.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(i,l,p){return this.prepareSegment(0,i,l,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,p,m){return new Kt([{vertexOffset:i,primitiveOffset:l,vertexLength:p,primitiveLength:m,vaos:{},sortKey:0}])}}function Wr(c,i){return 256*(c=kr(Math.floor(c),0,255))+kr(Math.floor(i),0,255)}Kt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,bt("SegmentVector",Kt);const Gr=_n([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),on=_n([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Fr,zn,en,kn={exports:{}},bn={exports:{}},Cn={exports:{}},cs=function(){if(en)return kn.exports;en=1;var c=(Fr||(Fr=1,bn.exports=function(l,p){var m,y,v,S,C,j,R,L;for(y=l.length-(m=3&l.length),v=p,C=3432918353,j=461845907,L=0;L<y;)R=255&l.charCodeAt(L)|(255&l.charCodeAt(++L))<<8|(255&l.charCodeAt(++L))<<16|(255&l.charCodeAt(++L))<<24,++L,v=27492+(65535&(S=5*(65535&(v=(v^=R=(65535&(R=(R=(65535&R)*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*j+(((R>>>16)*j&65535)<<16)&4294967295)<<13|v>>>19))+((5*(v>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(R=0,m){case 3:R^=(255&l.charCodeAt(L+2))<<16;case 2:R^=(255&l.charCodeAt(L+1))<<8;case 1:v^=R=(65535&(R=(R=(65535&(R^=255&l.charCodeAt(L)))*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*j+(((R>>>16)*j&65535)<<16)&4294967295}return v^=l.length,v=2246822507*(65535&(v^=v>>>16))+((2246822507*(v>>>16)&65535)<<16)&4294967295,v=3266489909*(65535&(v^=v>>>13))+((3266489909*(v>>>16)&65535)<<16)&4294967295,(v^=v>>>16)>>>0}),bn.exports),i=(zn||(zn=1,Cn.exports=function(l,p){for(var m,y=l.length,v=p^y,S=0;y>=4;)m=1540483477*(65535&(m=255&l.charCodeAt(S)|(255&l.charCodeAt(++S))<<8|(255&l.charCodeAt(++S))<<16|(255&l.charCodeAt(++S))<<24))+((1540483477*(m>>>16)&65535)<<16),v=1540483477*(65535&v)+((1540483477*(v>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),y-=4,++S;switch(y){case 3:v^=(255&l.charCodeAt(S+2))<<16;case 2:v^=(255&l.charCodeAt(S+1))<<8;case 1:v=1540483477*(65535&(v^=255&l.charCodeAt(S)))+((1540483477*(v>>>16)&65535)<<16)}return v=1540483477*(65535&(v^=v>>>13))+((1540483477*(v>>>16)&65535)<<16),(v^=v>>>15)>>>0}),Cn.exports);return kn.exports=c,kn.exports.murmur3=c,kn.exports.murmur2=i,kn.exports}(),Ya=T(cs);class Ea{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,p,m){this.ids.push(Vo(i)),this.positions.push(l,p,m)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Vo(i);let p=0,m=this.ids.length-1;for(;p<m;){const v=p+m>>1;this.ids[v]>=l?m=v:p=v+1}const y=[];for(;this.ids[p]===l;)y.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return y}static serialize(i,l){const p=new Float64Array(i.ids),m=new Uint32Array(i.positions);return $o(p,m,0,p.length-1),l&&l.push(p.buffer,m.buffer),{ids:p,positions:m}}static deserialize(i){const l=new Ea;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Vo(c){const i=+c;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Ya(String(c))}function $o(c,i,l,p){for(;l<p;){const m=c[l+p>>1];let y=l-1,v=p+1;for(;;){do y++;while(c[y]<m);do v--;while(c[v]>m);if(y>=v)break;Nl(c,y,v),Nl(i,3*y,3*v),Nl(i,3*y+1,3*v+1),Nl(i,3*y+2,3*v+2)}v-l<p-v?($o(c,i,l,v),l=v+1):($o(c,i,v+1,p),p=v)}}function Nl(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}bt("FeaturePositionMap",Ea);class zs{constructor(i,l){this.gl=i.gl,this.location=l}}class Qa extends zs{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class vs extends zs{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class Xa extends zs{constructor(i,l){super(i,l),this.current=hr.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const Il=new Float32Array(16);function Rl(c){return[Wr(255*c.r,255*c.g),Wr(255*c.b,255*c.a)]}class fn{constructor(i,l,p){this.value=i,this.uniformNames=l.map(m=>`u_${m}`),this.type=p}setUniform(i,l,p){i.set(p.constantOr(this.value))}getBinding(i,l,p){return this.type==="color"?new Xa(i,l):new Qa(i,l)}}class ln{constructor(i,l){this.uniformNames=l.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setConstantDashPositions(i,l){this.dashTo=[0,i.y,i.height,i.width],this.dashFrom=[0,l.y,l.height,l.width]}setUniform(i,l,p,m){let y=null;m==="u_pattern_to"?y=this.patternTo:m==="u_pattern_from"?y=this.patternFrom:m==="u_dasharray_to"?y=this.dashTo:m==="u_dasharray_from"?y=this.dashFrom:m==="u_pixel_ratio_to"?y=this.pixelRatioTo:m==="u_pixel_ratio_from"&&(y=this.pixelRatioFrom),y!==null&&i.set(y)}getBinding(i,l,p){return p.substr(0,9)==="u_pattern"||p.substr(0,12)==="u_dasharray_"?new vs(i,l):new Qa(i,l)}}class Bn{constructor(i,l,p,m){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map(y=>({name:`a_${y}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(i,l,p){const m=this.paintVertexArray.length,y=this.expression.evaluate(new Or(0,p),l,{},p.canonical,[],p.formattedSection);this.paintVertexArray.resize(i),this._setPaintValue(m,i,y)}updatePaintArray(i,l,p,m,y){const v=this.expression.evaluate(new Or(0,y),p,m);this._setPaintValue(i,l,v)}_setPaintValue(i,l,p){if(this.type==="color"){const m=Rl(p);for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,m[0],m[1])}else{for(let m=i;m<l;m++)this.paintVertexArray.emplace(m,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class zr{constructor(i,l,p,m,y,v){this.expression=i,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=p,this.useIntegerZoom=m,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(i,l,p){const m=this.expression.evaluate(new Or(this.zoom,p),l,{},p.canonical,[],p.formattedSection),y=this.expression.evaluate(new Or(this.zoom+1,p),l,{},p.canonical,[],p.formattedSection),v=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(v,i,m,y)}updatePaintArray(i,l,p,m,y){const v=this.expression.evaluate(new Or(this.zoom,y),p,m),S=this.expression.evaluate(new Or(this.zoom+1,y),p,m);this._setPaintValue(i,l,v,S)}_setPaintValue(i,l,p,m){if(this.type==="color"){const y=Rl(p),v=Rl(m);for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,y[0],y[1],v[0],v[1])}else{for(let y=i;y<l;y++)this.paintVertexArray.emplace(y,p,m);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(m))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,m=kr(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(m)}getBinding(i,l,p){return new Qa(i,l)}}class Uo{constructor(i,l,p,m,y,v){this.expression=i,this.type=l,this.useIntegerZoom=p,this.zoom=m,this.layerId=v,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(i,l,p){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(m,i,this.getPositionIds(l),p)}updatePaintArray(i,l,p,m,y){this._setPaintValues(i,l,this.getPositionIds(p),y)}_setPaintValues(i,l,p,m){const y=this.getPositions(m);if(!y||!p)return;const v=y[p.min],S=y[p.mid],C=y[p.max];if(v&&S&&C)for(let j=i;j<l;j++)this.emplace(this.zoomInPaintVertexArray,j,S,v),this.emplace(this.zoomOutPaintVertexArray,j,S,C)}upload(i){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const l=this.getVertexAttributes();this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,l,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,l,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Mv extends Uo{getPositions(i){return i.imagePositions}getPositionIds(i){return i.patterns&&i.patterns[this.layerId]}getVertexAttributes(){return Gr.members}emplace(i,l,p,m){i.emplace(l,p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],m.tlbr[0],m.tlbr[1],m.tlbr[2],m.tlbr[3],p.pixelRatio,m.pixelRatio)}}class Nv extends Uo{getPositions(i){return i.dashPositions}getPositionIds(i){return i.dashes&&i.dashes[this.layerId]}getVertexAttributes(){return on.members}emplace(i,l,p,m){i.emplace(l,0,p.y,p.height,p.width,0,m.y,m.height,m.width)}}class Iv{constructor(i,l,p){this.binders={},this._buffers=[];const m=[];for(const y in i.paint._values){if(!p(y))continue;const v=i.paint.get(y);if(!(v instanceof ia&&wc(v.property.specification)))continue;const S=Ww(y,i.type),C=v.value,j=v.property.specification.type,R=v.property.useIntegerZoom,L=v.property.specification["property-type"],V=L==="cross-faded"||L==="cross-faded-data-driven";if(C.kind==="constant")this.binders[y]=V?new ln(C.value,S):new fn(C.value,S,j),m.push(`/u_${y}`);else if(C.kind==="source"||V){const G=qo(y,j,"source");this.binders[y]=V?y==="line-dasharray"?new Nv(C,j,R,l,G,i.id):new Mv(C,j,R,l,G,i.id):new Bn(C,S,j,G),m.push(`/a_${y}`)}else{const G=qo(y,j,"composite");this.binders[y]=new zr(C,S,j,R,l,G),m.push(`/z_${y}`)}}this.cacheKey=m.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Bn||l instanceof zr?l.maxValue:0}populatePaintArrays(i,l,p){for(const m in this.binders){const y=this.binders[m];(y instanceof Bn||y instanceof zr||y instanceof Uo)&&y.populatePaintArray(i,l,p)}}setConstantPatternPositions(i,l){for(const p in this.binders){const m=this.binders[p];m instanceof ln&&m.setConstantPatternPositions(i,l)}}setConstantDashPositions(i,l){for(const p in this.binders){const m=this.binders[p];m instanceof ln&&m.setConstantDashPositions(i,l)}}updatePaintArrays(i,l,p,m,y){let v=!1;for(const S in i){const C=l.getPositions(S);for(const j of C){const R=p.feature(j.index);for(const L in this.binders){const V=this.binders[L];if((V instanceof Bn||V instanceof zr||V instanceof Uo)&&V.expression.isStateDependent===!0){const G=m.paint.get(L);V.expression=G.value,V.updatePaintArray(j.start,j.end,R,i[S],y),v=!0}}}}return v}defines(){const i=[];for(const l in this.binders){const p=this.binders[l];(p instanceof fn||p instanceof ln)&&i.push(...p.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof Bn||p instanceof zr)for(let m=0;m<p.paintVertexAttributes.length;m++)i.push(p.paintVertexAttributes[m].name);else if(p instanceof Uo){const m=p.getVertexAttributes();for(const y of m)i.push(y.name)}}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof fn||p instanceof ln||p instanceof zr)for(const m of p.uniformNames)i.push(m)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const p=[];for(const m in this.binders){const y=this.binders[m];if(y instanceof fn||y instanceof ln||y instanceof zr){for(const v of y.uniformNames)if(l[v]){const S=y.getBinding(i,l[v],v);p.push({name:v,property:m,binding:S})}}}return p}setUniforms(i,l,p,m){for(const{name:y,property:v,binding:S}of l)this.binders[v].setUniform(S,m,p.get(v),y)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(i&&p instanceof Uo){const m=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(p instanceof Bn||p instanceof zr)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const l in this.binders){const p=this.binders[l];(p instanceof Bn||p instanceof zr||p instanceof Uo)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Bn||l instanceof zr||l instanceof Uo)&&l.destroy()}}}class Dl{constructor(i,l,p=()=>!0){this.programConfigurations={};for(const m of i)this.programConfigurations[m.id]=new Iv(m,l,p);this.needsUpload=!1,this._featureMap=new Ea,this._bufferOffset=0}populatePaintArrays(i,l,p,m){for(const y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(i,l,m);l.id!==void 0&&this._featureMap.add(l.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,p,m){for(const y of p)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(i,this._featureMap,l,y,m)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Ww(c,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${i}-`,"").replace(/-/g,"_")]}function qo(c,i,l){const p={color:{source:jc,composite:x},number:{source:Yh,composite:jc}},m=function(y){return{"line-pattern":{source:ve,composite:ve},"fill-pattern":{source:ve,composite:ve},"fill-extrusion-pattern":{source:ve,composite:ve},"line-dasharray":{source:Ae,composite:Ae}}[y]}(c);return m&&m[l]||p[i][l]}bt("ConstantBinder",fn),bt("CrossFadedConstantBinder",ln),bt("SourceExpressionBinder",Bn),bt("CrossFadedPatternBinder",Mv),bt("CrossFadedDasharrayBinder",Nv),bt("CompositeExpressionBinder",zr),bt("ProgramConfiguration",Iv,{omit:["_buffers"]}),bt("ProgramConfigurationSet",Dl);const Qh=Math.pow(2,14)-1,Jm=-Qh-1;function Wo(c){const i=Le/c.extent,l=c.loadGeometry();for(let p=0;p<l.length;p++){const m=l[p];for(let y=0;y<m.length;y++){const v=m[y],S=Math.round(v.x*i),C=Math.round(v.y*i);v.x=kr(S,Jm,Qh),v.y=kr(C,Jm,Qh),(S<v.x||S>v.x+1||C<v.y||C>v.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Ja(c,i){return{type:c.type,id:c.id,properties:c.properties,geometry:i?Wo(c):[]}}const eg=-32768;function tg(c,i,l,p,m){c.emplaceBack(eg+8*i+p,eg+8*l+m)}class Gw{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new ye,this.indexArray=new st,this.segments=new Kt,this.programConfigurations=new Dl(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){const m=this.layers[0],y=[];let v=null,S=!1,C=m.type==="heatmap";if(m.type==="circle"){const R=m;v=R.layout.get("circle-sort-key"),S=!v.isConstant(),C=C||R.paint.get("circle-pitch-alignment")==="map"}const j=C?l.subdivisionGranularity.circle:1;for(const{feature:R,id:L,index:V,sourceLayerIndex:G}of i){const H=this.layers[0]._featureFilter.needGeometry,Y=Ja(R,H);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),Y,p))continue;const J=S?v.evaluate(Y,{},p):void 0,ne={id:L,properties:R.properties,type:R.type,sourceLayerIndex:G,index:V,geometry:H?Y.geometry:Wo(R),patterns:{},sortKey:J};y.push(ne)}S&&y.sort((R,L)=>R.sortKey-L.sortKey);for(const R of y){const{geometry:L,index:V,sourceLayerIndex:G}=R,H=i[V].feature;this.addFeature(R,L,V,p,j),l.featureIndex.insert(H,L,V,G,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,p,m,y=1){let v;switch(y){case 1:v=[0,7];break;case 3:v=[0,2,5,7];break;case 5:v=[0,1,3,4,6,7];break;case 7:v=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}const S=v.length;for(const C of l)for(const j of C){const R=j.x,L=j.y;if(R<0||R>=Le||L<0||L>=Le)continue;const V=this.segments.prepareSegment(S*S,this.layoutVertexArray,this.indexArray,i.sortKey),G=V.vertexLength;for(let H=0;H<S;H++)for(let Y=0;Y<S;Y++)tg(this.layoutVertexArray,R,L,v[Y],v[H]);for(let H=0;H<S-1;H++)for(let Y=0;Y<S-1;Y++){const J=G+H*S+Y,ne=G+(H+1)*S+Y;this.indexArray.emplaceBack(J,ne+1,J+1),this.indexArray.emplaceBack(J,ne,ne+1)}V.vertexLength+=S*S,V.primitiveLength+=(S-1)*(S-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:{},canonical:m})}}function pE(c,i){for(let l=0;l<c.length;l++)if(Xh(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(Xh(c,i[l]))return!0;return!!Hw(c,i)}function Rv(c,i,l){return!!Xh(c,i)||!!Zw(i,c,l)}function fE(c,i){if(c.length===1)return gE(i,c[0]);for(let l=0;l<i.length;l++){const p=i[l];for(let m=0;m<p.length;m++)if(Xh(c,p[m]))return!0}for(let l=0;l<c.length;l++)if(gE(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(Hw(c,i[l]))return!0;return!1}function JB(c,i,l){if(c.length>1){if(Hw(c,i))return!0;for(let p=0;p<i.length;p++)if(Zw(i[p],c,l))return!0}for(let p=0;p<c.length;p++)if(Zw(c[p],i,l))return!0;return!1}function Hw(c,i){if(c.length===0||i.length===0)return!1;for(let l=0;l<c.length-1;l++){const p=c[l],m=c[l+1];for(let y=0;y<i.length-1;y++)if(e8(p,m,i[y],i[y+1]))return!0}return!1}function e8(c,i,l,p){return ni(c,l,p)!==ni(i,l,p)&&ni(c,i,l)!==ni(c,i,p)}function Zw(c,i,l){const p=l*l;if(i.length===1)return c.distSqr(i[0])<p;for(let m=1;m<i.length;m++)if(mE(c,i[m-1],i[m])<p)return!0;return!1}function mE(c,i,l){const p=i.distSqr(l);if(p===0)return c.distSqr(i);const m=((c.x-i.x)*(l.x-i.x)+(c.y-i.y)*(l.y-i.y))/p;return c.distSqr(m<0?i:m>1?l:l.sub(i)._mult(m)._add(i))}function gE(c,i){let l,p,m,y=!1;for(let v=0;v<c.length;v++){l=c[v];for(let S=0,C=l.length-1;S<l.length;C=S++)p=l[S],m=l[C],p.y>i.y!=m.y>i.y&&i.x<(m.x-p.x)*(i.y-p.y)/(m.y-p.y)+p.x&&(y=!y)}return y}function Xh(c,i){let l=!1;for(let p=0,m=c.length-1;p<c.length;m=p++){const y=c[p],v=c[m];y.y>i.y!=v.y>i.y&&i.x<(v.x-y.x)*(i.y-y.y)/(v.y-y.y)+y.x&&(l=!l)}return l}function t8(c,i,l){const p=l[0],m=l[2];if(c.x<p.x&&i.x<p.x||c.x>m.x&&i.x>m.x||c.y<p.y&&i.y<p.y||c.y>m.y&&i.y>m.y)return!1;const y=ni(c,i,l[0]);return y!==ni(c,i,l[1])||y!==ni(c,i,l[2])||y!==ni(c,i,l[3])}function Jh(c,i,l){const p=i.paint.get(c).value;return p.kind==="constant"?p.value:l.programConfigurations.get(i.id).getMaxValue(c)}function Dv(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Ov(c,i,l,p,m){if(!i[0]&&!i[1])return c;const y=_.convert(i)._mult(m);l==="viewport"&&y._rotate(-p);const v=[];for(let S=0;S<c.length;S++)v.push(c[S].sub(y));return v}function r8({queryGeometry:c,size:i},l){return Rv(c,l,i)}function n8({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:m},y){return Rv(c,y,i*(l.projectTileCoordinates(y.x,y.y,p,m).signedDistanceFromCamera/l.cameraToCenterDistance))}function i8({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:m},y){const v=l.projectTileCoordinates(y.x,y.y,p,m).signedDistanceFromCamera,S=i*(l.cameraToCenterDistance/v);return Rv(c,Kw(y,l,p,m),S)}function s8({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:m},y){return Rv(c,Kw(y,l,p,m),i)}function yE({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:m,pitchAlignment:y="map",pitchScale:v="map"},S){const C=y==="map"?v==="map"?r8:n8:v==="map"?i8:s8,j={queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:m};for(const R of S)for(const L of R)if(C(j,L))return!0;return!1}function Kw(c,i,l,p){const m=i.projectTileCoordinates(c.x,c.y,l,p).point;return new _((.5*m.x+.5)*i.width,(.5*-m.y+.5)*i.height)}let xE,vE;bt("CircleBucket",Gw,{omit:["layers"]});var a8={get paint(){return vE=vE||new Oi({"circle-radius":new zt(oe.paint_circle["circle-radius"]),"circle-color":new zt(oe.paint_circle["circle-color"]),"circle-blur":new zt(oe.paint_circle["circle-blur"]),"circle-opacity":new zt(oe.paint_circle["circle-opacity"]),"circle-translate":new jt(oe.paint_circle["circle-translate"]),"circle-translate-anchor":new jt(oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new jt(oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new jt(oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new zt(oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new zt(oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new zt(oe.paint_circle["circle-stroke-opacity"])})},get layout(){return xE=xE||new Oi({"circle-sort-key":new zt(oe.layout_circle["circle-sort-key"])})}};class o8 extends Fs{constructor(i,l){super(i,a8,l)}createBucket(i){return new Gw(i)}queryRadius(i){const l=i;return Jh("circle-radius",this,l)+Jh("circle-stroke-width",this,l)+Dv(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:m,transform:y,pixelsToTileUnits:v,unwrappedTileID:S,getElevation:C}){const j=Ov(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,v),R=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),L=this.paint.get("circle-pitch-scale"),V=this.paint.get("circle-pitch-alignment");let G,H;return V==="map"?(G=j,H=R*v):(G=function(Y,J,ne,fe){return Y.map(ae=>Kw(ae,J,ne,fe))}(j,y,S,C),H=R),yE({queryGeometry:G,size:H,transform:y,unwrappedTileID:S,getElevation:C,pitchAlignment:V,pitchScale:L},m)}}class _E extends Gw{}let bE;bt("HeatmapBucket",_E,{omit:["layers"]});var l8={get paint(){return bE=bE||new Oi({"heatmap-radius":new zt(oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new zt(oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new jt(oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ud(oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new jt(oe.paint_heatmap["heatmap-opacity"])})}};function Yw(c,{width:i,height:l},p,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==i*l*p)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${i*l*p}`)}else m=new Uint8Array(i*l*p);return c.width=i,c.height=l,c.data=m,c}function wE(c,{width:i,height:l},p){if(i===c.width&&l===c.height)return;const m=Yw({},{width:i,height:l},p);Qw(c,m,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,i),height:Math.min(c.height,l)},p),c.width=i,c.height=l,c.data=m.data}function Qw(c,i,l,p,m,y){if(m.width===0||m.height===0)return i;if(m.width>c.width||m.height>c.height||l.x>c.width-m.width||l.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>i.width||m.height>i.height||p.x>i.width-m.width||p.y>i.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const v=c.data,S=i.data;if(v===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<m.height;C++){const j=((l.y+C)*c.width+l.x)*y,R=((p.y+C)*i.width+p.x)*y;for(let L=0;L<m.width*y;L++)S[R+L]=v[j+L]}return i}class rg{constructor(i,l){Yw(this,i,1,l)}resize(i){wE(this,i,1)}clone(){return new rg({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,m,y){Qw(i,l,p,m,y,1)}}class _s{constructor(i,l){Yw(this,i,4,l)}resize(i){wE(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new _s({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,m,y){Qw(i,l,p,m,y,4)}setPixel(i,l,p){const m=4*(i*this.width+l);this.data[m+0]=Math.round(255*p.r/p.a),this.data[m+1]=Math.round(255*p.g/p.a),this.data[m+2]=Math.round(255*p.b/p.a),this.data[m+3]=Math.round(255*p.a)}}function SE(c){const i={},l=c.resolution||256,p=c.clips?c.clips.length:1,m=c.image||new _s({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const y=(v,S,C)=>{i[c.evaluationKey]=C;const j=c.expression.evaluate(i);m.setPixel(v/4/l,S/4,j)};if(c.clips)for(let v=0,S=0;v<p;++v,S+=4*l)for(let C=0,j=0;C<l;C++,j+=4){const R=C/(l-1),{start:L,end:V}=c.clips[v];y(S,j,L*(1-R)+V*R)}else for(let v=0,S=0;v<l;v++,S+=4)y(0,S,v/(l-1));return m}bt("AlphaImage",rg),bt("RGBAImage",_s);const Xw="big-fb";class c8 extends Fs{createBucket(i){return new _E(i)}constructor(i,l){super(i,l8,l),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=SE({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Xw)&&this.heatmapFbos.delete(Xw)}queryRadius(i){return Jh("heatmap-radius",this,i)}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:m,transform:y,pixelsToTileUnits:v,unwrappedTileID:S,getElevation:C}){return yE({queryGeometry:i,size:this.paint.get("heatmap-radius").evaluate(l,p)*v,transform:y,unwrappedTileID:S,getElevation:C},m)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let TE;var u8={get paint(){return TE=TE||new Oi({"hillshade-illumination-direction":new jt(oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new jt(oe.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new jt(oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new jt(oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new jt(oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new jt(oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new jt(oe.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new jt(oe.paint_hillshade["hillshade-method"])})}};class d8 extends Fs{constructor(i,l){super(i,u8,l),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,p=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const y=Math.max(i.length,l.length,p.length,m.length);i=i.concat(Array(y-i.length).fill(i.at(-1))),l=l.concat(Array(y-l.length).fill(l.at(-1))),p=p.concat(Array(y-p.length).fill(p.at(-1))),m=m.concat(Array(y-m.length).fill(m.at(-1)));const v=l.map(vt);return{directionRadians:i.map(vt),altitudeRadians:v,shadowColor:m,highlightColor:p}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let kE;var h8={get paint(){return kE=kE||new Oi({"color-relief-opacity":new jt(oe["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ud(oe["paint_color-relief"]["color-relief-color"])})}};class Jw{constructor(i,l,p,m){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(l,m)}update(i,l,p){const{width:m,height:y}=i,v=!(this.size&&this.size[0]===m&&this.size[1]===y||p),{context:S}=this,{gl:C}=S;if(this.useMipmap=!!(l&&l.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!l||l.premultiply!==!1)),v)this.size=[m,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||vi(i)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,i):C.texImage2D(C.TEXTURE_2D,0,this.format,m,y,0,this.format,C.UNSIGNED_BYTE,i.data);else{const{x:j,y:R}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||vi(i)?C.texSubImage2D(C.TEXTURE_2D,0,j,R,C.RGBA,C.UNSIGNED_BYTE,i):C.texSubImage2D(C.TEXTURE_2D,0,j,R,m,y,C.RGBA,C.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D),S.pixelStoreUnpackFlipY.setDefault(),S.pixelStoreUnpack.setDefault(),S.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,p){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||i),this.filter=i),l!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,l),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class CE{constructor(i,l,p,m=1,y=1,v=1,S=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void Cr(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const C=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=y,this.blueFactor=v,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let j=0;j<C;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(C,j)]=this.data[this._idx(C-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,C)]=this.data[this._idx(j,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<C;j++)for(let R=0;R<C;R++){const L=this.get(j,R);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(i,l){const p=new Uint8Array(this.data.buffer),m=4*this._idx(i,l);return this.unpack(p[m],p[m+1],p[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,p){return i*this.redFactor+l*this.greenFactor+p*this.blueFactor-this.baseShift}pack(i){return PE(i,this.getUnpackVector())}getPixels(){return new _s({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let m=l*this.dim,y=l*this.dim+this.dim,v=p*this.dim,S=p*this.dim+this.dim;switch(l){case-1:m=y-1;break;case 1:y=m+1}switch(p){case-1:v=S-1;break;case 1:S=v+1}const C=-l*this.dim,j=-p*this.dim;for(let R=v;R<S;R++)for(let L=m;L<y;L++)this.data[this._idx(L,R)]=i.data[this._idx(L+C,R+j)]}}function PE(c,i){const l=i[0],p=i[1],m=i[2],y=i[3],v=Math.min(l,p,m),S=Math.round((c+y)/v);return{r:Math.floor(S*v/l)%256,g:Math.floor(S*v/p)%256,b:Math.floor(S*v/m)%256}}bt("DEMData",CE);class p8 extends Fs{constructor(i,l){super(i,h8,l)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},p=this._transitionablePaint._values["color-relief-color"].value.expression;if(p instanceof Cl&&p._styleExpression.expression instanceof wi){this.colorRampExpression=p;const v=p._styleExpression.expression;l.elevationStops=v.labels,l.colorStops=[];for(const S of l.elevationStops)l.colorStops.push(v.evaluate({globals:{elevation:S}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[hr.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const m={elevationStops:[],colorStops:[]},y=(l.elevationStops.length-1)/(i-1);for(let v=0;v<l.elevationStops.length-.5;v+=y)m.elevationStops.push(l.elevationStops[Math.round(v)]),m.colorStops.push(l.colorStops[Math.round(v)]);return Cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${i}, provided: ${l.elevationStops.length}`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,p){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(l),y=new _s({width:m.colorStops.length,height:1}),v=new _s({width:m.colorStops.length,height:1});for(let S=0;S<m.elevationStops.length;S++){const C=PE(m.elevationStops[S],p);v.setPixel(0,S,new hr(C.r/255,C.g/255,C.b/255,1)),y.setPixel(0,S,m.colorStops[S])}return this.colorRampTextures={elevationTexture:new Jw(i,v,i.gl.RGBA),colorTexture:new Jw(i,y,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const f8=_n([{name:"a_pos",components:2,type:"Int16"}],4),{members:m8}=f8;function Lv(c,i,l){const p=l.patternDependencies;let m=!1;for(const y of i){const v=y.paint.get(`${c}-pattern`);v.isConstant()||(m=!0);const S=v.constantOr(null);S&&(m=!0,p[S.to]=!0,p[S.from]=!0)}return m}function e1(c,i,l,p,m){const{zoom:y}=p,v=m.patternDependencies;for(const S of i){const C=S.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let j=C.evaluate({zoom:y-1},l,{},m.availableImages),R=C.evaluate({zoom:y},l,{},m.availableImages),L=C.evaluate({zoom:y+1},l,{},m.availableImages);j=j&&j.name?j.name:j,R=R&&R.name?R.name:R,L=L&&L.name?L.name:L,v[j]=!0,v[R]=!0,v[L]=!0,l.patterns[S.id]={min:j,mid:R,max:L}}}return l}function EE(c,i,l,p,m){let y;if(m===function(v,S,C,j){let R=0;for(let L=S,V=C-j;L<C;L+=j)R+=(v[V]-v[L])*(v[L+1]+v[V+1]),V=L;return R}(c,i,l,p)>0)for(let v=i;v<l;v+=p)y=NE(v/p|0,c[v],c[v+1],y);else for(let v=l-p;v>=i;v-=p)y=NE(v/p|0,c[v],c[v+1],y);return y&&ep(y,y.next)&&(ag(y),y=y.next),y}function gd(c,i){if(!c)return c;i||(i=c);let l,p=c;do if(l=!1,p.steiner||!ep(p,p.next)&&Pn(p.prev,p,p.next)!==0)p=p.next;else{if(ag(p),p=i=p.prev,p===p.next)break;l=!0}while(l||p!==i);return i}function ng(c,i,l,p,m,y,v){if(!c)return;!v&&y&&function(C,j,R,L){let V=C;do V.z===0&&(V.z=t1(V.x,V.y,j,R,L)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==C);V.prevZ.nextZ=null,V.prevZ=null,function(G){let H,Y=1;do{let J,ne=G;G=null;let fe=null;for(H=0;ne;){H++;let ae=ne,ue=0;for(let Pe=0;Pe<Y&&(ue++,ae=ae.nextZ,ae);Pe++);let Ce=Y;for(;ue>0||Ce>0&&ae;)ue!==0&&(Ce===0||!ae||ne.z<=ae.z)?(J=ne,ne=ne.nextZ,ue--):(J=ae,ae=ae.nextZ,Ce--),fe?fe.nextZ=J:G=J,J.prevZ=fe,fe=J;ne=ae}fe.nextZ=null,Y*=2}while(H>1)}(V)}(c,p,m,y);let S=c;for(;c.prev!==c.next;){const C=c.prev,j=c.next;if(y?y8(c,p,m,y):g8(c))i.push(C.i,c.i,j.i),ag(c),c=j.next,S=j.next;else if((c=j)===S){v?v===1?ng(c=x8(gd(c),i),i,l,p,m,y,2):v===2&&v8(c,i,l,p,m,y):ng(gd(c),i,l,p,m,y,1);break}}}function g8(c){const i=c.prev,l=c,p=c.next;if(Pn(i,l,p)>=0)return!1;const m=i.x,y=l.x,v=p.x,S=i.y,C=l.y,j=p.y,R=Math.min(m,y,v),L=Math.min(S,C,j),V=Math.max(m,y,v),G=Math.max(S,C,j);let H=p.next;for(;H!==i;){if(H.x>=R&&H.x<=V&&H.y>=L&&H.y<=G&&ig(m,S,y,C,v,j,H.x,H.y)&&Pn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function y8(c,i,l,p){const m=c.prev,y=c,v=c.next;if(Pn(m,y,v)>=0)return!1;const S=m.x,C=y.x,j=v.x,R=m.y,L=y.y,V=v.y,G=Math.min(S,C,j),H=Math.min(R,L,V),Y=Math.max(S,C,j),J=Math.max(R,L,V),ne=t1(G,H,i,l,p),fe=t1(Y,J,i,l,p);let ae=c.prevZ,ue=c.nextZ;for(;ae&&ae.z>=ne&&ue&&ue.z<=fe;){if(ae.x>=G&&ae.x<=Y&&ae.y>=H&&ae.y<=J&&ae!==m&&ae!==v&&ig(S,R,C,L,j,V,ae.x,ae.y)&&Pn(ae.prev,ae,ae.next)>=0||(ae=ae.prevZ,ue.x>=G&&ue.x<=Y&&ue.y>=H&&ue.y<=J&&ue!==m&&ue!==v&&ig(S,R,C,L,j,V,ue.x,ue.y)&&Pn(ue.prev,ue,ue.next)>=0))return!1;ue=ue.nextZ}for(;ae&&ae.z>=ne;){if(ae.x>=G&&ae.x<=Y&&ae.y>=H&&ae.y<=J&&ae!==m&&ae!==v&&ig(S,R,C,L,j,V,ae.x,ae.y)&&Pn(ae.prev,ae,ae.next)>=0)return!1;ae=ae.prevZ}for(;ue&&ue.z<=fe;){if(ue.x>=G&&ue.x<=Y&&ue.y>=H&&ue.y<=J&&ue!==m&&ue!==v&&ig(S,R,C,L,j,V,ue.x,ue.y)&&Pn(ue.prev,ue,ue.next)>=0)return!1;ue=ue.nextZ}return!0}function x8(c,i){let l=c;do{const p=l.prev,m=l.next.next;!ep(p,m)&&AE(p,l,l.next,m)&&sg(p,m)&&sg(m,p)&&(i.push(p.i,l.i,m.i),ag(l),ag(l.next),l=c=m),l=l.next}while(l!==c);return gd(l)}function v8(c,i,l,p,m,y){let v=c;do{let S=v.next.next;for(;S!==v.prev;){if(v.i!==S.i&&T8(v,S)){let C=ME(v,S);return v=gd(v,v.next),C=gd(C,C.next),ng(v,i,l,p,m,y,0),void ng(C,i,l,p,m,y,0)}S=S.next}v=v.next}while(v!==c)}function _8(c,i){let l=c.x-i.x;return l===0&&(l=c.y-i.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function b8(c,i){const l=function(m,y){let v=y;const S=m.x,C=m.y;let j,R=-1/0;if(ep(m,v))return v;do{if(ep(m,v.next))return v.next;if(C<=v.y&&C>=v.next.y&&v.next.y!==v.y){const Y=v.x+(C-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(Y<=S&&Y>R&&(R=Y,j=v.x<v.next.x?v:v.next,Y===S))return j}v=v.next}while(v!==y);if(!j)return null;const L=j,V=j.x,G=j.y;let H=1/0;v=j;do{if(S>=v.x&&v.x>=V&&S!==v.x&&jE(C<G?S:R,C,V,G,C<G?R:S,C,v.x,v.y)){const Y=Math.abs(C-v.y)/(S-v.x);sg(v,m)&&(Y<H||Y===H&&(v.x>j.x||v.x===j.x&&w8(j,v)))&&(j=v,H=Y)}v=v.next}while(v!==L);return j}(c,i);if(!l)return i;const p=ME(l,c);return gd(p,p.next),gd(l,l.next)}function w8(c,i){return Pn(c.prev,c,i.prev)<0&&Pn(i.next,c,c.next)<0}function t1(c,i,l,p,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*m|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function S8(c){let i=c,l=c;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==c);return l}function jE(c,i,l,p,m,y,v,S){return(m-v)*(i-S)>=(c-v)*(y-S)&&(c-v)*(p-S)>=(l-v)*(i-S)&&(l-v)*(y-S)>=(m-v)*(p-S)}function ig(c,i,l,p,m,y,v,S){return!(c===v&&i===S)&&jE(c,i,l,p,m,y,v,S)}function T8(c,i){return c.next.i!==i.i&&c.prev.i!==i.i&&!function(l,p){let m=l;do{if(m.i!==l.i&&m.next.i!==l.i&&m.i!==p.i&&m.next.i!==p.i&&AE(m,m.next,l,p))return!0;m=m.next}while(m!==l);return!1}(c,i)&&(sg(c,i)&&sg(i,c)&&function(l,p){let m=l,y=!1;const v=(l.x+p.x)/2,S=(l.y+p.y)/2;do m.y>S!=m.next.y>S&&m.next.y!==m.y&&v<(m.next.x-m.x)*(S-m.y)/(m.next.y-m.y)+m.x&&(y=!y),m=m.next;while(m!==l);return y}(c,i)&&(Pn(c.prev,c,i.prev)||Pn(c,i.prev,i))||ep(c,i)&&Pn(c.prev,c,c.next)>0&&Pn(i.prev,i,i.next)>0)}function Pn(c,i,l){return(i.y-c.y)*(l.x-i.x)-(i.x-c.x)*(l.y-i.y)}function ep(c,i){return c.x===i.x&&c.y===i.y}function AE(c,i,l,p){const m=zv(Pn(c,i,l)),y=zv(Pn(c,i,p)),v=zv(Pn(l,p,c)),S=zv(Pn(l,p,i));return m!==y&&v!==S||!(m!==0||!Fv(c,l,i))||!(y!==0||!Fv(c,p,i))||!(v!==0||!Fv(l,c,p))||!(S!==0||!Fv(l,i,p))}function Fv(c,i,l){return i.x<=Math.max(c.x,l.x)&&i.x>=Math.min(c.x,l.x)&&i.y<=Math.max(c.y,l.y)&&i.y>=Math.min(c.y,l.y)}function zv(c){return c>0?1:c<0?-1:0}function sg(c,i){return Pn(c.prev,c,c.next)<0?Pn(c,i,c.next)>=0&&Pn(c,c.prev,i)>=0:Pn(c,i,c.prev)<0||Pn(c,c.next,i)<0}function ME(c,i){const l=r1(c.i,c.x,c.y),p=r1(i.i,i.x,i.y),m=c.next,y=i.prev;return c.next=i,i.prev=c,l.next=m,m.prev=l,p.next=l,l.prev=p,y.next=p,p.prev=y,p}function NE(c,i,l,p){const m=r1(c,i,l);return p?(m.next=p.next,m.prev=p,p.next.prev=m,p.next=m):(m.prev=m,m.next=m),m}function ag(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function r1(c,i,l){return{i:c,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class tp{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Bv{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Bv.noSubdivision=new Bv({fill:new tp(0,0),line:new tp(0,0),tile:new tp(0,0),stencil:new tp(0,0),circle:1}),bt("SubdivisionGranularityExpression",tp),bt("SubdivisionGranularitySetting",Bv);const rp=-32768,og=32767;class k8{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Le/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(i),m=0|Math.round(l),y=this._getKey(p,m);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);const v=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,v),this._vertexBuffer.push(p,m),v}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(m,y){const v=[];for(let S=0;S<y.length;S+=3){const C=y[S],j=y[S+1],R=y[S+2],L=m[2*C],V=m[2*C+1];(m[2*j]-L)*(m[2*R+1]-V)-(m[2*j+1]-V)*(m[2*R]-L)>0?(v.push(C),v.push(R),v.push(j)):(v.push(C),v.push(j),v.push(R))}return v}(this._vertexBuffer,i);const l=[],p=i.length;for(let m=0;m<p;m+=3){const y=[i[m+0],i[m+1],i[m+2]],v=[this._vertexBuffer[2*i[m+0]+0],this._vertexBuffer[2*i[m+0]+1],this._vertexBuffer[2*i[m+1]+0],this._vertexBuffer[2*i[m+1]+1],this._vertexBuffer[2*i[m+2]+0],this._vertexBuffer[2*i[m+2]+1]];let S=1/0,C=1/0,j=-1/0,R=-1/0;for(let Y=0;Y<3;Y++){const J=v[2*Y],ne=v[2*Y+1];S=Math.min(S,J),j=Math.max(j,J),C=Math.min(C,ne),R=Math.max(R,ne)}if(S===j||C===R)continue;const L=Math.floor(S/this._granularityCellSize),V=Math.ceil(j/this._granularityCellSize),G=Math.floor(C/this._granularityCellSize),H=Math.ceil(R/this._granularityCellSize);if(L!==V||G!==H)for(let Y=G;Y<H;Y++){const J=this._scanlineGenerateVertexRingForCellRow(Y,v,y);C8(this._vertexBuffer,J,l)}else l.push(...y)}return l}_scanlineGenerateVertexRingForCellRow(i,l,p){const m=i*this._granularityCellSize,y=m+this._granularityCellSize,v=[];for(let S=0;S<3;S++){const C=l[2*S],j=l[2*S+1],R=l[2*(S+1)%6],L=l[(2*(S+1)+1)%6],V=l[2*(S+2)%6],G=l[(2*(S+2)+1)%6],H=R-C,Y=L-j,J=H===0,ne=Y===0,fe=(m-j)/Y,ae=(y-j)/Y,ue=Math.min(fe,ae),Ce=Math.max(fe,ae);if(!ne&&(ue>=1||Ce<=0)||ne&&(j<m||j>y)){L>=m&&L<=y&&v.push(p[(S+1)%3]);continue}!ne&&ue>0&&v.push(this._vertexToIndex(C+H*ue,j+Y*ue));const Pe=C+H*Math.max(ue,0),$e=C+H*Math.min(Ce,1);J||this._generateIntraEdgeVertices(v,C,j,R,L,Pe,$e),!ne&&Ce<1&&v.push(this._vertexToIndex(C+H*Ce,j+Y*Ce)),(ne||L>=m&&L<=y)&&v.push(p[(S+1)%3]),!ne&&(L<=m||L>=y)&&this._generateInterEdgeVertices(v,C,j,R,L,V,G,$e,m,y)}return v}_generateIntraEdgeVertices(i,l,p,m,y,v,S){const C=m-l,j=y-p,R=j===0,L=R?Math.min(l,m):Math.min(v,S),V=R?Math.max(l,m):Math.max(v,S),G=Math.floor(L/this._granularityCellSize)+1,H=Math.ceil(V/this._granularityCellSize)-1;if(R?l<m:v<S)for(let Y=G;Y<=H;Y++){const J=Y*this._granularityCellSize;i.push(this._vertexToIndex(J,p+j*(J-l)/C))}else for(let Y=H;Y>=G;Y--){const J=Y*this._granularityCellSize;i.push(this._vertexToIndex(J,p+j*(J-l)/C))}}_generateInterEdgeVertices(i,l,p,m,y,v,S,C,j,R){const L=y-p,V=v-m,G=S-y,H=(j-y)/G,Y=(R-y)/G,J=Math.min(H,Y),ne=Math.max(H,Y),fe=m+V*J;let ae=Math.floor(Math.min(fe,C)/this._granularityCellSize)+1,ue=Math.ceil(Math.max(fe,C)/this._granularityCellSize)-1,Ce=C<fe;const Pe=G===0;if(Pe&&(S===j||S===R))return;if(Pe||J>=1||ne<=0){const Je=p-S,Ze=v+(l-v)*Math.min((j-S)/Je,(R-S)/Je);ae=Math.floor(Math.min(Ze,C)/this._granularityCellSize)+1,ue=Math.ceil(Math.max(Ze,C)/this._granularityCellSize)-1,Ce=C<Ze}const $e=L>0?R:j;if(Ce)for(let Je=ae;Je<=ue;Je++)i.push(this._vertexToIndex(Je*this._granularityCellSize,$e));else for(let Je=ue;Je>=ae;Je--)i.push(this._vertexToIndex(Je*this._granularityCellSize,$e))}_generateOutline(i){const l=[];for(const p of i){const m=yd(p,this._granularity,!0),y=this._pointArrayToIndices(m),v=[];for(let S=1;S<y.length;S++)v.push(y[S-1]),v.push(y[S]);l.push(v)}return l}_handlePoles(i){let l=!1,p=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(l||p)&&this._fillPoles(i,l,p)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const p=i[l+1];p===rp&&(i[l+1]=-32767),p===og&&(i[l+1]=32766)}}_generatePoleQuad(i,l,p,m,y,v){m>y!=(v===rp)?(i.push(l),i.push(p),i.push(this._vertexToIndex(m,v)),i.push(p),i.push(this._vertexToIndex(y,v)),i.push(this._vertexToIndex(m,v))):(i.push(p),i.push(l),i.push(this._vertexToIndex(m,v)),i.push(this._vertexToIndex(y,v)),i.push(p),i.push(this._vertexToIndex(m,v)))}_fillPoles(i,l,p){const m=this._vertexBuffer,y=Le,v=i.length;for(let S=2;S<v;S+=3){const C=i[S-2],j=i[S-1],R=i[S],L=m[2*C],V=m[2*C+1],G=m[2*j],H=m[2*j+1],Y=m[2*R],J=m[2*R+1];l&&(V===0&&H===0&&this._generatePoleQuad(i,C,j,L,G,rp),H===0&&J===0&&this._generatePoleQuad(i,j,R,G,Y,rp),J===0&&V===0&&this._generatePoleQuad(i,R,C,Y,L,rp)),p&&(V===y&&H===y&&this._generatePoleQuad(i,C,j,L,G,og),H===y&&J===y&&this._generatePoleQuad(i,j,R,G,Y,og),J===y&&V===y&&this._generatePoleQuad(i,R,C,Y,L,og))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:m}=function(S){const C=[],j=[];for(const R of S)if(R.length!==0){R!==S[0]&&C.push(j.length/2);for(let L=0;L<R.length;L++)j.push(R[L].x),j.push(R[L].y)}return{flattened:j,holeIndices:C}}(i);let y;this._initializeVertices(p);try{const S=function(j,R,L=2){const V=R&&R.length,G=V?R[0]*L:j.length;let H=EE(j,0,G,L,!0);const Y=[];if(!H||H.next===H.prev)return Y;let J,ne,fe;if(V&&(H=function(ae,ue,Ce,Pe){const $e=[];for(let Je=0,Ze=ue.length;Je<Ze;Je++){const et=EE(ae,ue[Je]*Pe,Je<Ze-1?ue[Je+1]*Pe:ae.length,Pe,!1);et===et.next&&(et.steiner=!0),$e.push(S8(et))}$e.sort(_8);for(let Je=0;Je<$e.length;Je++)Ce=b8($e[Je],Ce);return Ce}(j,R,H,L)),j.length>80*L){J=j[0],ne=j[1];let ae=J,ue=ne;for(let Ce=L;Ce<G;Ce+=L){const Pe=j[Ce],$e=j[Ce+1];Pe<J&&(J=Pe),$e<ne&&(ne=$e),Pe>ae&&(ae=Pe),$e>ue&&(ue=$e)}fe=Math.max(ae-J,ue-ne),fe=fe!==0?32767/fe:0}return ng(H,Y,L,J,ne,fe,0),Y}(p,m),C=this._convertIndices(p,S);y=this._subdivideTrianglesScanline(C)}catch(S){console.error(S)}let v=[];return l&&(v=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:v}}_convertIndices(i,l){const p=[];for(let m=0;m<l.length;m++)p.push(this._vertexToIndex(i[2*l[m]],i[2*l[m]+1]));return p}_pointArrayToIndices(i){const l=[];for(let p=0;p<i.length;p++){const m=i[p];l.push(this._vertexToIndex(m.x,m.y))}return l}}function IE(c,i,l,p=!0){return new k8(l,i).subdividePolygonInternal(c,p)}function yd(c,i,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const p=c[0],m=c[c.length-1],y=l&&(p.x!==m.x||p.y!==m.y);if(i<2)return y?[...c,c[0]]:[...c];const v=Math.floor(Le/i),S=[];S.push(new _(c[0].x,c[0].y));const C=c.length,j=y?C:C-1;for(let R=0;R<j;R++){const L=c[R],V=R<C-1?c[R+1]:c[0],G=L.x,H=L.y,Y=V.x,J=V.y,ne=G!==Y,fe=H!==J;if(!ne&&!fe)continue;const ae=Y-G,ue=J-H,Ce=Math.abs(ae),Pe=Math.abs(ue);let $e=G,Je=H;for(;;){const et=ae>0?(Math.floor($e/v)+1)*v:(Math.ceil($e/v)-1)*v,gt=ue>0?(Math.floor(Je/v)+1)*v:(Math.ceil(Je/v)-1)*v,ot=Math.abs($e-et),lt=Math.abs(Je-gt),Ke=Math.abs($e-Y),Mt=Math.abs(Je-J),Nt=ne?ot/Ce:Number.POSITIVE_INFINITY,Bt=fe?lt/Pe:Number.POSITIVE_INFINITY;if((Ke<=ot||!ne)&&(Mt<=lt||!fe))break;if(Nt<Bt&&ne||!fe){$e=et,Je+=ue*Nt;const Ct=new _($e,Math.round(Je));S[S.length-1].x===Ct.x&&S[S.length-1].y===Ct.y||S.push(Ct)}else{$e+=ae*Bt,Je=gt;const Ct=new _(Math.round($e),Je);S[S.length-1].x===Ct.x&&S[S.length-1].y===Ct.y||S.push(Ct)}}const Ze=new _(Y,J);S[S.length-1].x===Ze.x&&S[S.length-1].y===Ze.y||S.push(Ze)}return S}function C8(c,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,m=c[2*i[0]];for(let C=1;C<i.length;C++){const j=c[2*i[C]];j<m&&(m=j,p=C)}const y=i.length;let v=p,S=(v+1)%y;for(;;){const C=v-1>=0?v-1:y-1,j=(S+1)%y,R=c[2*i[C]],L=c[2*i[j]],V=c[2*i[v]],G=c[2*i[v]+1],H=c[2*i[S]+1];let Y=!1;if(R<L)Y=!0;else if(R>L)Y=!1;else{const J=H-G,ne=-(c[2*i[S]]-V),fe=G<H?1:-1;((R-V)*J+(c[2*i[C]+1]-G)*ne)*fe>((L-V)*J+(c[2*i[j]+1]-G)*ne)*fe&&(Y=!0)}if(Y){const J=i[C],ne=i[v],fe=i[S];J!==ne&&J!==fe&&ne!==fe&&l.push(fe,ne,J),v--,v<0&&(v=y-1)}else{const J=i[j],ne=i[v],fe=i[S];J!==ne&&J!==fe&&ne!==fe&&l.push(fe,ne,J),S++,S>=y&&(S=0)}if(C===j)break}}function RE(c,i,l,p,m,y,v,S,C){const j=m.length/2,R=v&&S&&C;if(j<Kt.MAX_VERTEX_ARRAY_LENGTH){const L=i.prepareSegment(j,l,p),V=L.vertexLength;for(let Y=0;Y<y.length;Y+=3)p.emplaceBack(V+y[Y],V+y[Y+1],V+y[Y+2]);let G,H;L.vertexLength+=j,L.primitiveLength+=y.length/3,R&&(H=v.prepareSegment(j,l,S),G=H.vertexLength,H.vertexLength+=j);for(let Y=0;Y<m.length;Y+=2)c(m[Y],m[Y+1]);if(R)for(let Y=0;Y<C.length;Y++){const J=C[Y];for(let ne=1;ne<J.length;ne+=2)S.emplaceBack(G+J[ne-1],G+J[ne]);H.primitiveLength+=J.length/2}}else(function(L,V,G,H,Y,J){const ne=[];for(let Pe=0;Pe<H.length/2;Pe++)ne.push(-1);const fe={count:0};let ae=0,ue=L.getOrCreateLatestSegment(V,G),Ce=ue.vertexLength;for(let Pe=2;Pe<Y.length;Pe+=3){const $e=Y[Pe-2],Je=Y[Pe-1],Ze=Y[Pe];let et=ne[$e]<ae,gt=ne[Je]<ae,ot=ne[Ze]<ae;ue.vertexLength+((et?1:0)+(gt?1:0)+(ot?1:0))>Kt.MAX_VERTEX_ARRAY_LENGTH&&(ue=L.createNewSegment(V,G),ae=fe.count,et=!0,gt=!0,ot=!0,Ce=0);const lt=lg(ne,H,J,fe,$e,et,ue),Ke=lg(ne,H,J,fe,Je,gt,ue),Mt=lg(ne,H,J,fe,Ze,ot,ue);G.emplaceBack(Ce+lt-ae,Ce+Ke-ae,Ce+Mt-ae),ue.primitiveLength++}})(i,l,p,m,y,c),R&&function(L,V,G,H,Y,J){const ne=[];for(let Pe=0;Pe<H.length/2;Pe++)ne.push(-1);const fe={count:0};let ae=0,ue=L.getOrCreateLatestSegment(V,G),Ce=ue.vertexLength;for(let Pe=0;Pe<Y.length;Pe++){const $e=Y[Pe];for(let Je=1;Je<Y[Pe].length;Je+=2){const Ze=$e[Je-1],et=$e[Je];let gt=ne[Ze]<ae,ot=ne[et]<ae;ue.vertexLength+((gt?1:0)+(ot?1:0))>Kt.MAX_VERTEX_ARRAY_LENGTH&&(ue=L.createNewSegment(V,G),ae=fe.count,gt=!0,ot=!0,Ce=0);const lt=lg(ne,H,J,fe,Ze,gt,ue),Ke=lg(ne,H,J,fe,et,ot,ue);G.emplaceBack(Ce+lt-ae,Ce+Ke-ae),ue.primitiveLength++}}}(v,l,S,m,C,c),i.forceNewSegmentOnNextPrepare(),v==null||v.forceNewSegmentOnNextPrepare()}function lg(c,i,l,p,m,y,v){if(y){const S=p.count;return l(i[2*m],i[2*m+1]),c[m]=p.count,p.count++,v.vertexLength++,S}return c[m]}class n1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new we,this.indexArray=new st,this.indexArray2=new Xe,this.programConfigurations=new Dl(i.layers,i.zoom),this.segments=new Kt,this.segments2=new Kt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.hasDependencies=Lv("fill",this.layers,l);const m=this.layers[0].layout.get("fill-sort-key"),y=!m.isConstant(),v=[];for(const{feature:S,id:C,index:j,sourceLayerIndex:R}of i){const L=this.layers[0]._featureFilter.needGeometry,V=Ja(S,L);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),V,p))continue;const G=y?m.evaluate(V,{},p,l.availableImages):void 0,H={id:C,properties:S.properties,type:S.type,sourceLayerIndex:R,index:j,geometry:L?V.geometry:Wo(S),patterns:{},sortKey:G};v.push(H)}y&&v.sort((S,C)=>S.sortKey-C.sortKey);for(const S of v){const{geometry:C,index:j,sourceLayerIndex:R}=S;if(this.hasDependencies){const L=e1("fill",this.layers,S,{zoom:this.zoom},l);this.patternFeatures.push(L)}else this.addFeature(S,C,j,p,{},l.subdivisionGranularity);l.featureIndex.insert(i[j].feature,C,j,R,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}addFeatures(i,l,p){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,l,p,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,m8),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,p,m,y,v){for(const S of Gu(l,500)){const C=IE(S,m,v.fill.getGranularityForZoomLevel(m.z)),j=this.layoutVertexArray;RE((R,L)=>{j.emplaceBack(R,L)},this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles,this.segments2,this.indexArray2,C.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:y,canonical:m})}}let DE,OE;bt("FillBucket",n1,{omit:["layers","patternFeatures"]});var P8={get paint(){return OE=OE||new Oi({"fill-antialias":new jt(oe.paint_fill["fill-antialias"]),"fill-opacity":new zt(oe.paint_fill["fill-opacity"]),"fill-color":new zt(oe.paint_fill["fill-color"]),"fill-outline-color":new zt(oe.paint_fill["fill-outline-color"]),"fill-translate":new jt(oe.paint_fill["fill-translate"]),"fill-translate-anchor":new jt(oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new cd(oe.paint_fill["fill-pattern"])})},get layout(){return DE=DE||new Oi({"fill-sort-key":new zt(oe.layout_fill["fill-sort-key"])})}};class E8 extends Fs{constructor(i,l){super(i,P8,l)}recalculate(i,l){super.recalculate(i,l);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new n1(i)}queryRadius(){return Dv(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:p,pixelsToTileUnits:m}){return fE(Ov(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,m),l)}isTileClipped(){return!0}}const j8=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),A8=_n([{name:"a_centroid",components:2,type:"Int16"}],4),{members:M8}=j8;class np{constructor(i,l,p,m,y){this.properties={},this.extent=p,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=m,this._values=y,i.readFields(N8,this,l)}loadGeometry(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos,p=[];let m,y=1,v=0,S=0,C=0;for(;i.pos<l;){if(v<=0){const j=i.readVarint();y=7&j,v=j>>3}if(v--,y===1||y===2)S+=i.readSVarint(),C+=i.readSVarint(),y===1&&(m&&p.push(m),m=[]),m&&m.push(new _(S,C));else{if(y!==7)throw new Error(`unknown command ${y}`);m&&m.push(m[0].clone())}}return m&&p.push(m),p}bbox(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos;let p=1,m=0,y=0,v=0,S=1/0,C=-1/0,j=1/0,R=-1/0;for(;i.pos<l;){if(m<=0){const L=i.readVarint();p=7&L,m=L>>3}if(m--,p===1||p===2)y+=i.readSVarint(),v+=i.readSVarint(),y<S&&(S=y),y>C&&(C=y),v<j&&(j=v),v>R&&(R=v);else if(p!==7)throw new Error(`unknown command ${p}`)}return[S,j,C,R]}toGeoJSON(i,l,p){const m=this.extent*Math.pow(2,p),y=this.extent*i,v=this.extent*l,S=this.loadGeometry();function C(V){return[360*(V.x+y)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(V.y+v)/m)*Math.PI))-90]}function j(V){return V.map(C)}let R;if(this.type===1){const V=[];for(const H of S)V.push(H[0]);const G=j(V);R=V.length===1?{type:"Point",coordinates:G[0]}:{type:"MultiPoint",coordinates:G}}else if(this.type===2){const V=S.map(j);R=V.length===1?{type:"LineString",coordinates:V[0]}:{type:"MultiLineString",coordinates:V}}else{if(this.type!==3)throw new Error("unknown feature type");{const V=function(H){const Y=H.length;if(Y<=1)return[H];const J=[];let ne,fe;for(let ae=0;ae<Y;ae++){const ue=I8(H[ae]);ue!==0&&(fe===void 0&&(fe=ue<0),fe===ue<0?(ne&&J.push(ne),ne=[H[ae]]):ne&&ne.push(H[ae]))}return ne&&J.push(ne),J}(S),G=[];for(const H of V)G.push(H.map(j));R=G.length===1?{type:"Polygon",coordinates:G[0]}:{type:"MultiPolygon",coordinates:G}}}const L={type:"Feature",geometry:R,properties:this.properties};return this.id!=null&&(L.id=this.id),L}}function N8(c,i,l){c===1?i.id=l.readVarint():c===2?function(p,m){const y=p.readVarint()+p.pos;for(;p.pos<y;){const v=m._keys[p.readVarint()],S=m._values[p.readVarint()];m.properties[v]=S}}(l,i):c===3?i.type=l.readVarint():c===4&&(i._geometry=l.pos)}function I8(c){let i=0;for(let l,p,m=0,y=c.length,v=y-1;m<y;v=m++)l=c[m],p=c[v],i+=(p.x-l.x)*(l.y+p.y);return i}np.types=["Unknown","Point","LineString","Polygon"];class LE{constructor(i,l){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(R8,this,l),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];const l=this._pbf.readVarint()+this._pbf.pos;return new np(this._pbf,l,this.extent,this._keys,this._values)}}function R8(c,i,l){c===15?i.version=l.readVarint():c===1?i.name=l.readString():c===5?i.extent=l.readVarint():c===2?i._features.push(l.pos):c===3?i._keys.push(l.readString()):c===4&&i._values.push(function(p){let m=null;const y=p.readVarint()+p.pos;for(;p.pos<y;){const v=p.readVarint()>>3;m=v===1?p.readString():v===2?p.readFloat():v===3?p.readDouble():v===4?p.readVarint64():v===5?p.readVarint():v===6?p.readSVarint():v===7?p.readBoolean():null}if(m==null)throw new Error("unknown feature value");return m}(l))}class FE{constructor(i,l){this.layers=i.readFields(D8,{},l)}}function D8(c,i,l){if(c===3){const p=new LE(l,l.readVarint()+l.pos);p.length&&(i[p.name]=p)}}const i1=Math.pow(2,13);function cg(c,i,l,p,m,y,v,S){c.emplaceBack(i,l,2*Math.floor(p*i1)+v,m*i1*2,y*i1*2,Math.round(S))}class s1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new me,this.centroidVertexArray=new de,this.indexArray=new st,this.programConfigurations=new Dl(i.layers,i.zoom),this.segments=new Kt,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.features=[],this.hasDependencies=Lv("fill-extrusion",this.layers,l);for(const{feature:m,id:y,index:v,sourceLayerIndex:S}of i){const C=this.layers[0]._featureFilter.needGeometry,j=Ja(m,C);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),j,p))continue;const R={id:y,sourceLayerIndex:S,index:v,geometry:C?j.geometry:Wo(m),properties:m.properties,type:m.type,patterns:{}};this.hasDependencies?this.features.push(e1("fill-extrusion",this.layers,R,{zoom:this.zoom},l)):this.addFeature(R,R.geometry,v,p,{},l.subdivisionGranularity),l.featureIndex.insert(m,R.geometry,v,S,this.index,!0)}}addFeatures(i,l,p){for(const m of this.features){const{geometry:y}=m;this.addFeature(m,y,m.index,l,p,i.subdivisionGranularity)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,M8),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,A8.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,p,m,y,v){for(const S of Gu(l,500)){const C={x:0,y:0,sampleCount:0},j=this.layoutVertexArray.length;this.processPolygon(C,m,i,S,v);const R=this.layoutVertexArray.length-j,L=Math.floor(C.x/C.sampleCount),V=Math.floor(C.y/C.sampleCount);for(let G=0;G<R;G++)this.centroidVertexArray.emplaceBack(L,V)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:y,canonical:m})}processPolygon(i,l,p,m,y){if(m.length<1||zE(m[0]))return;for(const L of m)L.length!==0&&O8(i,L);const v={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},S=y.fill.getGranularityForZoomLevel(l.z),C=np.types[p.type]==="Polygon";for(const L of m){if(L.length===0||zE(L))continue;const V=yd(L,S,C);this._generateSideFaces(V,v)}if(!C)return;const j=IE(m,l,S,!1),R=this.layoutVertexArray;RE((L,V)=>{cg(R,L,V,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,j.verticesFlattened,j.indicesTriangles)}_generateSideFaces(i,l){let p=0;for(let m=1;m<i.length;m++){const y=i[m],v=i[m-1];if(L8(y,v))continue;l.segment.vertexLength+4>Kt.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const S=y.sub(v)._perp()._unit(),C=v.dist(y);p+C>32768&&(p=0),cg(this.layoutVertexArray,y.x,y.y,S.x,S.y,0,0,p),cg(this.layoutVertexArray,y.x,y.y,S.x,S.y,0,1,p),p+=C,cg(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,0,p),cg(this.layoutVertexArray,v.x,v.y,S.x,S.y,0,1,p);const j=l.segment.vertexLength;this.indexArray.emplaceBack(j,j+2,j+1),this.indexArray.emplaceBack(j+1,j+2,j+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function O8(c,i){for(let l=0;l<i.length;l++){const p=i[l];l===i.length-1&&i[0].x===p.x&&i[0].y===p.y||(c.x+=p.x,c.y+=p.y,c.sampleCount++)}}function L8(c,i){return c.x===i.x&&(c.x<0||c.x>Le)||c.y===i.y&&(c.y<0||c.y>Le)}function zE(c){return c.every(i=>i.x<0)||c.every(i=>i.x>Le)||c.every(i=>i.y<0)||c.every(i=>i.y>Le)}let BE;bt("FillExtrusionBucket",s1,{omit:["layers","features"]});var F8={get paint(){return BE=BE||new Oi({"fill-extrusion-opacity":new jt(oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new zt(oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new jt(oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new jt(oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new cd(oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new zt(oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new zt(oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new jt(oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class z8 extends Fs{constructor(i,l){super(i,F8,l)}createBucket(i){return new s1(i)}queryRadius(){return Dv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:m,transform:y,pixelsToTileUnits:v,pixelPosMatrix:S}){const C=Ov(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,v),j=this.paint.get("fill-extrusion-height").evaluate(l,p),R=this.paint.get("fill-extrusion-base").evaluate(l,p),L=function(G,H){const Y=[];for(const J of G){const ne=[J.x,J.y,0,1];Ge(ne,ne,H),Y.push(new _(ne[0]/ne[3],ne[1]/ne[3]))}return Y}(C,S),V=function(G,H,Y,J){const ne=[],fe=[],ae=J[8]*H,ue=J[9]*H,Ce=J[10]*H,Pe=J[11]*H,$e=J[8]*Y,Je=J[9]*Y,Ze=J[10]*Y,et=J[11]*Y;for(const gt of G){const ot=[],lt=[];for(const Ke of gt){const Mt=Ke.x,Nt=Ke.y,Bt=J[0]*Mt+J[4]*Nt+J[12],Ct=J[1]*Mt+J[5]*Nt+J[13],lr=J[2]*Mt+J[6]*Nt+J[14],tn=J[3]*Mt+J[7]*Nt+J[15],Vn=lr+Ce,zi=tn+Pe,ja=Bt+$e,us=Ct+Je,Si=lr+Ze,Bi=tn+et,wn=new _((Bt+ae)/zi,(Ct+ue)/zi);wn.z=Vn/zi,ot.push(wn);const Ti=new _(ja/Bi,us/Bi);Ti.z=Si/Bi,lt.push(Ti)}ne.push(ot),fe.push(lt)}return[ne,fe]}(m,R,j,S);return function(G,H,Y){let J=1/0;fE(Y,H)&&(J=VE(Y,H[0]));for(let ne=0;ne<H.length;ne++){const fe=H[ne],ae=G[ne];for(let ue=0;ue<fe.length-1;ue++){const Ce=fe[ue],Pe=[Ce,fe[ue+1],ae[ue+1],ae[ue],Ce];pE(Y,Pe)&&(J=Math.min(J,VE(Y,Pe)))}}return J!==1/0&&J}(V[0],V[1],L)}}function ug(c,i){return c.x*i.x+c.y*i.y}function VE(c,i){if(c.length===1){let l=0;const p=i[l++];let m;for(;!m||p.equals(m);)if(m=i[l++],!m)return 1/0;for(;l<i.length;l++){const y=i[l],v=c[0],S=m.sub(p),C=y.sub(p),j=v.sub(p),R=ug(S,S),L=ug(S,C),V=ug(C,C),G=ug(j,S),H=ug(j,C),Y=R*V-L*L,J=(V*G-L*H)/Y,ne=(R*H-L*G)/Y,fe=p.z*(1-J-ne)+m.z*J+y.z*ne;if(isFinite(fe))return fe}return 1/0}{let l=1/0;for(const p of i)l=Math.min(l,p.z);return l}}const B8=_n([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:V8}=B8,$8=_n([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:U8}=$8,q8=Math.cos(Math.PI/180*37.5),$E=Math.pow(2,14)/.5;class a1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Se,this.layoutVertexArray2=new ke,this.indexArray=new st,this.programConfigurations=new Dl(i.layers,i.zoom),this.segments=new Kt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.hasDependencies=Lv("line",this.layers,l)||this.hasLineDasharray(this.layers);const m=this.layers[0].layout.get("line-sort-key"),y=!m.isConstant(),v=[];for(const{feature:S,id:C,index:j,sourceLayerIndex:R}of i){const L=this.layers[0]._featureFilter.needGeometry,V=Ja(S,L);if(!this.layers[0]._featureFilter.filter(new Or(this.zoom),V,p))continue;const G=y?m.evaluate(V,{},p):void 0,H={id:C,properties:S.properties,type:S.type,sourceLayerIndex:R,index:j,geometry:L?V.geometry:Wo(S),patterns:{},dashes:{},sortKey:G};v.push(H)}y&&v.sort((S,C)=>S.sortKey-C.sortKey);for(const S of v){const{geometry:C,index:j,sourceLayerIndex:R}=S;this.hasDependencies?(Lv("line",this.layers,l)?e1("line",this.layers,S,{zoom:this.zoom},l):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,S,this.zoom,l),this.patternFeatures.push(S)):this.addFeature(S,C,j,p,{},{},l.subdivisionGranularity),l.featureIndex.insert(i[j].feature,C,j,R,this.index)}}update(i,l,p,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p,dashPositions:m})}addFeatures(i,l,p,m){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,l,p,m,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,U8)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,V8),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,p,m,y,v,S){const C=this.layers[0].layout,j=C.get("line-join").evaluate(i,{}),R=C.get("line-cap"),L=C.get("line-miter-limit"),V=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const G of l)this.addLine(G,i,j,R,L,V,m,S);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:y,dashPositions:v,canonical:m})}addLine(i,l,p,m,y,v,S,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=yd(i,S?C.line.getGranularityForZoomLevel(S.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<i.length-1;ae++)this.totalDistance+=i[ae].dist(i[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const j=np.types[l.type]==="Polygon";let R=i.length;for(;R>=2&&i[R-1].equals(i[R-2]);)R--;let L=0;for(;L<R-1&&i[L].equals(i[L+1]);)L++;if(R<(j?3:2))return;p==="bevel"&&(y=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let H,Y,J,ne,fe;this.e1=this.e2=-1,j&&(H=i[R-2],fe=i[L].sub(H)._unit()._perp());for(let ae=L;ae<R;ae++){if(J=ae===R-1?j?i[L+1]:void 0:i[ae+1],J&&i[ae].equals(J))continue;fe&&(ne=fe),H&&(Y=H),H=i[ae],fe=J?J.sub(H)._unit()._perp():ne,ne=ne||fe;let ue=ne.add(fe);ue.x===0&&ue.y===0||ue._unit();const Ce=ne.x*fe.x+ne.y*fe.y,Pe=ue.x*fe.x+ue.y*fe.y,$e=Pe!==0?1/Pe:1/0,Je=2*Math.sqrt(2-2*Pe),Ze=Pe<q8&&Y&&J,et=ne.x*fe.y-ne.y*fe.x>0;if(Ze&&ae>L){const lt=H.dist(Y);if(lt>2*V){const Ke=H.sub(H.sub(Y)._mult(V/lt)._round());this.updateDistance(Y,Ke),this.addCurrentVertex(Ke,ne,0,0,G),Y=Ke}}const gt=Y&&J;let ot=gt?p:j?"butt":m;if(gt&&ot==="round"&&($e<v?ot="miter":$e<=2&&(ot="fakeround")),ot==="miter"&&$e>y&&(ot="bevel"),ot==="bevel"&&($e>2&&(ot="flipbevel"),$e<y&&(ot="miter")),Y&&this.updateDistance(Y,H),ot==="miter")ue._mult($e),this.addCurrentVertex(H,ue,0,0,G);else if(ot==="flipbevel"){if($e>100)ue=fe.mult(-1);else{const lt=$e*ne.add(fe).mag()/ne.sub(fe).mag();ue._perp()._mult(lt*(et?-1:1))}this.addCurrentVertex(H,ue,0,0,G),this.addCurrentVertex(H,ue.mult(-1),0,0,G)}else if(ot==="bevel"||ot==="fakeround"){const lt=-Math.sqrt($e*$e-1),Ke=et?lt:0,Mt=et?0:lt;if(Y&&this.addCurrentVertex(H,ne,Ke,Mt,G),ot==="fakeround"){const Nt=Math.round(180*Je/Math.PI/20);for(let Bt=1;Bt<Nt;Bt++){let Ct=Bt/Nt;if(Ct!==.5){const tn=Ct-.5;Ct+=Ct*tn*(Ct-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*tn*tn+(.848013+Ce*(.215638*Ce-1.06021)))}const lr=fe.sub(ne)._mult(Ct)._add(ne)._unit()._mult(et?-1:1);this.addHalfVertex(H,lr.x,lr.y,!1,et,0,G)}}J&&this.addCurrentVertex(H,fe,-Ke,-Mt,G)}else if(ot==="butt")this.addCurrentVertex(H,ue,0,0,G);else if(ot==="square"){const lt=Y?1:-1;this.addCurrentVertex(H,ue,lt,lt,G)}else ot==="round"&&(Y&&(this.addCurrentVertex(H,ne,0,0,G),this.addCurrentVertex(H,ne,1,1,G,!0)),J&&(this.addCurrentVertex(H,fe,-1,-1,G,!0),this.addCurrentVertex(H,fe,0,0,G)));if(Ze&&ae<R-1){const lt=H.dist(J);if(lt>2*V){const Ke=H.add(J.sub(H)._mult(V/lt)._round());this.updateDistance(H,Ke),this.addCurrentVertex(Ke,fe,0,0,G),H=Ke}}}}addCurrentVertex(i,l,p,m,y,v=!1){const S=l.y*m-l.x,C=-l.y-l.x*m;this.addHalfVertex(i,l.x+l.y*p,l.y-l.x*p,v,!1,p,y),this.addHalfVertex(i,S,C,v,!0,-m,y),this.distance>$E/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,p,m,y,v))}addHalfVertex({x:i,y:l},p,m,y,v,S,C){const j=.5*(this.lineClips?this.scaledDistance*($E-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(l<<1)+(v?1:0),Math.round(63*p)+128,Math.round(63*m)+128,1+(S===0?0:S<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,R,this.e2),C.primitiveLength++),v?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}hasLineDasharray(i){for(const l of i){const p=l.paint.get("line-dasharray");if(p&&!p.isConstant())return!0}return!1}addLineDashDependencies(i,l,p,m){for(const y of i){const v=y.paint.get("line-dasharray");if(!v||v.value.kind==="constant")continue;const S=y.layout.get("line-cap")==="round",C={dasharray:v.value.evaluate({zoom:p-1},l,{}),round:S},j={dasharray:v.value.evaluate({zoom:p},l,{}),round:S},R={dasharray:v.value.evaluate({zoom:p+1},l,{}),round:S},L=`${C.dasharray.join(",")},${C.round}`,V=`${j.dasharray.join(",")},${j.round}`,G=`${R.dasharray.join(",")},${R.round}`;m.dashDependencies[L]=C,m.dashDependencies[V]=j,m.dashDependencies[G]=R,l.dashes[y.id]={min:L,mid:V,max:G}}}}let UE,qE;bt("LineBucket",a1,{omit:["layers","patternFeatures"]});var WE={get paint(){return qE=qE||new Oi({"line-opacity":new zt(oe.paint_line["line-opacity"]),"line-color":new zt(oe.paint_line["line-color"]),"line-translate":new jt(oe.paint_line["line-translate"]),"line-translate-anchor":new jt(oe.paint_line["line-translate-anchor"]),"line-width":new zt(oe.paint_line["line-width"]),"line-gap-width":new zt(oe.paint_line["line-gap-width"]),"line-offset":new zt(oe.paint_line["line-offset"]),"line-blur":new zt(oe.paint_line["line-blur"]),"line-dasharray":new cd(oe.paint_line["line-dasharray"]),"line-pattern":new cd(oe.paint_line["line-pattern"]),"line-gradient":new ud(oe.paint_line["line-gradient"])})},get layout(){return UE=UE||new Oi({"line-cap":new jt(oe.layout_line["line-cap"]),"line-join":new zt(oe.layout_line["line-join"]),"line-miter-limit":new jt(oe.layout_line["line-miter-limit"]),"line-round-limit":new jt(oe.layout_line["line-round-limit"]),"line-sort-key":new zt(oe.layout_line["line-sort-key"])})}};class W8 extends zt{possiblyEvaluate(i,l){return l=new Or(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,p,m){return l=Yr({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,p,m)}}let Vv;class G8 extends Fs{constructor(i,l){super(i,WE,l),this.gradientVersion=0,Vv||(Vv=new W8(WE.paint.properties["line-width"].specification),Vv.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof yc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=Vv.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new a1(i)}queryRadius(i){const l=i,p=GE(Jh("line-width",this,l),Jh("line-gap-width",this,l)),m=Jh("line-offset",this,l);return p/2+Math.abs(m)+Dv(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:m,transform:y,pixelsToTileUnits:v}){const S=Ov(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,v),C=v/2*GE(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),j=this.paint.get("line-offset").evaluate(l,p);return j&&(m=function(R,L){const V=[];for(let G=0;G<R.length;G++){const H=R[G],Y=[];for(let J=0;J<H.length;J++){const ne=H[J-1],fe=H[J],ae=H[J+1],ue=J===0?new _(0,0):fe.sub(ne)._unit()._perp(),Ce=J===H.length-1?new _(0,0):ae.sub(fe)._unit()._perp(),Pe=ue._add(Ce)._unit(),$e=Pe.x*Ce.x+Pe.y*Ce.y;$e!==0&&Pe._mult(1/$e),Y.push(Pe._mult(L)._add(fe))}V.push(Y)}return V}(m,j*v)),function(R,L,V){for(let G=0;G<L.length;G++){const H=L[G];if(R.length>=3){for(let Y=0;Y<H.length;Y++)if(Xh(R,H[Y]))return!0}if(JB(R,H,V))return!0}return!1}(S,m,C)}isTileClipped(){return!0}}function GE(c,i){return i>0?i+2*c:c}const H8=_n([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Z8=_n([{name:"a_projected_pos",components:3,type:"Float32"}],4);_n([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const K8=_n([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);_n([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const HE=_n([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Y8=_n([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Q8(c,i,l){return c.sections.forEach(p=>{p.text=function(m,y,v){const S=y.layout.get("text-transform").evaluate(v,{});return S==="uppercase"?m=m.toLocaleUpperCase():S==="lowercase"&&(m=m.toLocaleLowerCase()),Bo.applyArabicShaping&&(m=Bo.applyArabicShaping(m)),m}(p.text,i,l)}),c}_n([{name:"triangle",components:3,type:"Uint16"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),_n([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),_n([{type:"Float32",name:"offsetX"}]),_n([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),_n([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var ai=24;const dg={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},X8={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},J8={40:!0};function ZE(c,i,l,p,m,y){if("fontStack"in i){const v=l[i.fontStack],S=v&&v[c];return S?S.metrics.advance*i.scale+m:0}{const v=p[i.imageName];return v?v.displaySize[0]*i.scale*ai/y+m:0}}function KE(c,i,l,p){const m=Math.pow(c-i,2);return p?c<i?m/2:2*m:m+Math.abs(l)*l}function eV(c,i,l){let p=0;return c===10&&(p-=1e4),l&&(p+=150),c!==40&&c!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function YE(c,i,l,p,m,y){let v=null,S=KE(i,l,m,y);for(const C of p){const j=KE(i-C.x,l,m,y)+C.badness;j<=S&&(v=C,S=j)}return{index:c,x:i,priorBreak:v,badness:S}}function QE(c){return c?QE(c.priorBreak).concat(c.index):[]}class ip{constructor(i="",l=[],p=[]){this.text=i,this.sections=l,this.sectionIndex=p,this.imageSectionID=null}static fromFeature(i,l){const p=new ip;for(let m=0;m<i.sections.length;m++){const y=i.sections[m];y.image?p.addImageSection(y):p.addTextSection(y,l)}return p}length(){return[...this.text].length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}verticalizePunctuation(){this.text=function(i){let l="",p={premature:!0,value:void 0};const m=i[Symbol.iterator]();let y=m.next();const v=i[Symbol.iterator]();v.next();let S=v.next();for(;!y.done;)l+=!S.done&&$m(S.value.codePointAt(0))&&!dg[S.value]||!p.premature&&$m(p.value.codePointAt(0))&&!dg[p.value]||!dg[y.value]?y.value:dg[y.value],p={value:y.value,premature:!1},y=m.next(),S=v.next();return l}(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const i=this.text.match(/^\s*/),l=i?i[0].length:0,p=this.text.match(/\S\s*$/),m=p?p[0].length-1:0;this.text=this.text.substring(l,this.text.length-m),this.sectionIndex=this.sectionIndex.slice(l,this.sectionIndex.length-m)}substring(i,l){const p=[...this.text].slice(i,l).join(""),m=this.sectionIndex.slice(i,l);return new ip(p,this.sections,m)}toCodeUnitIndex(i){return[...this.text].slice(0,i).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}getMaxImageSize(i){let l=0,p=0;for(let m=0;m<this.length();m++){const y=this.getSection(m);if("imageName"in y){const v=i[y.imageName];if(!v)continue;const S=v.displaySize;l=Math.max(l,S[0]),p=Math.max(p,S[1])}}return{maxImageWidth:l,maxImageHeight:p}}addTextSection(i,l){this.text+=i.text,this.sections.push({scale:i.scale||1,verticalAlign:i.verticalAlign||"bottom",fontStack:i.fontStack||l});const p=this.sections.length-1;this.sectionIndex.push(...[...i.text].map(()=>p))}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void Cr("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push({scale:1,verticalAlign:i.verticalAlign||"bottom",imageName:l}),this.sectionIndex.push(this.sections.length-1)):Cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(i,l,p,m,y){const v=[],S=this.determineAverageLineWidth(i,l,p,m,y),C=this.hasZeroWidthSpaces();let j=0,R=0;const L=this.text[Symbol.iterator]();let V=L.next();const G=this.text[Symbol.iterator]();G.next();let H=G.next();const Y=this.text[Symbol.iterator]();Y.next(),Y.next();let J=Y.next();for(;!V.done;){const ne=this.getSection(R),fe=V.value.codePointAt(0);if(wv(fe)||(j+=ZE(fe,ne,p,m,i,y)),!H.done){const ae=zw(fe),ue=H.value.codePointAt(0);(X8[fe]||ae||"imageName"in ne||!J.done&&J8[ue])&&v.push(YE(R+1,j,S,v,eV(fe,ue,ae&&C),!1))}R++,V=L.next(),H=G.next(),J=Y.next()}return QE(YE(this.length(),j,S,v,0,!0))}determineAverageLineWidth(i,l,p,m,y){let v=0,S=0;for(const C of this.text){const j=this.getSection(S);v+=ZE(C.codePointAt(0),j,p,m,i,y),S++}return v/Math.max(1,Math.ceil(v/l))}}const o1=4294967296,XE=1/o1,JE=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class l1{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,l,p=this.length){for(;this.pos<p;){const m=this.readVarint(),y=m>>3,v=this.pos;this.type=7&m,i(y,l,this),this.pos===v&&this.skip(m)}return l}readMessage(i,l){return this.readFields(i,l,this.readVarint()+this.pos)}readFixed32(){const i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){const i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*o1;return this.pos+=8,i}readSFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*o1;return this.pos+=8,i}readFloat(){const i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){const i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){const l=this.buf;let p,m;return m=l[this.pos++],p=127&m,m<128?p:(m=l[this.pos++],p|=(127&m)<<7,m<128?p:(m=l[this.pos++],p|=(127&m)<<14,m<128?p:(m=l[this.pos++],p|=(127&m)<<21,m<128?p:(m=l[this.pos],p|=(15&m)<<28,function(y,v,S){const C=S.buf;let j,R;if(R=C[S.pos++],j=(112&R)>>4,R<128||(R=C[S.pos++],j|=(127&R)<<3,R<128)||(R=C[S.pos++],j|=(127&R)<<10,R<128)||(R=C[S.pos++],j|=(127&R)<<17,R<128)||(R=C[S.pos++],j|=(127&R)<<24,R<128)||(R=C[S.pos++],j|=(1&R)<<31,R<128))return sp(y,j,v);throw new Error("Expected varint not more than 10 bytes")}(p,i,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const i=this.readVarint();return i%2==1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){const i=this.readVarint()+this.pos,l=this.pos;return this.pos=i,i-l>=12&&JE?JE.decode(this.buf.subarray(l,i)):function(p,m,y){let v="",S=m;for(;S<y;){const C=p[S];let j,R,L,V=null,G=C>239?4:C>223?3:C>191?2:1;if(S+G>y)break;G===1?C<128&&(V=C):G===2?(j=p[S+1],(192&j)==128&&(V=(31&C)<<6|63&j,V<=127&&(V=null))):G===3?(j=p[S+1],R=p[S+2],(192&j)==128&&(192&R)==128&&(V=(15&C)<<12|(63&j)<<6|63&R,(V<=2047||V>=55296&&V<=57343)&&(V=null))):G===4&&(j=p[S+1],R=p[S+2],L=p[S+3],(192&j)==128&&(192&R)==128&&(192&L)==128&&(V=(15&C)<<18|(63&j)<<12|(63&R)<<6|63&L,(V<=65535||V>=1114112)&&(V=null))),V===null?(V=65533,G=1):V>65535&&(V-=65536,v+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),v+=String.fromCharCode(V),S+=G}return v}(this.buf,l,i)}readBytes(){const i=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,i);return this.pos=i,l}readPackedVarint(i=[],l){const p=this.readPackedEnd();for(;this.pos<p;)i.push(this.readVarint(l));return i}readPackedSVarint(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFloat());return i}readPackedDouble(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(i){const l=7&i;if(l===0)for(;this.buf[this.pos++]>127;);else if(l===2)this.pos=this.readVarint()+this.pos;else if(l===5)this.pos+=4;else{if(l!==1)throw new Error(`Unimplemented type: ${l}`);this.pos+=8}}writeTag(i,l){this.writeVarint(i<<3|l)}realloc(i){let l=this.length||16;for(;l<this.pos+i;)l*=2;if(l!==this.length){const p=new Uint8Array(l);p.set(this.buf),this.buf=p,this.dataView=new DataView(p.buffer),this.length=l}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*XE),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*XE),!0),this.pos+=8}writeVarint(i){(i=+i||0)>268435455||i<0?function(l,p){let m,y;if(l>=0?(m=l%4294967296|0,y=l/4294967296|0):(m=~(-l%4294967296),y=~(-l/4294967296),4294967295^m?m=m+1|0:(m=0,y=y+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),function(v,S,C){C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,v>>>=7,C.buf[C.pos++]=127&v|128,C.buf[C.pos]=127&(v>>>=7)}(m,0,p),function(v,S){const C=(7&v)<<4;S.buf[S.pos++]|=C|((v>>>=3)?128:0),v&&(S.buf[S.pos++]=127&v|((v>>>=7)?128:0),v&&(S.buf[S.pos++]=127&v|((v>>>=7)?128:0),v&&(S.buf[S.pos++]=127&v|((v>>>=7)?128:0),v&&(S.buf[S.pos++]=127&v|((v>>>=7)?128:0),v&&(S.buf[S.pos++]=127&v)))))}(y,p)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))}writeSVarint(i){this.writeVarint(i<0?2*-i-1:2*i)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(4*i.length),this.pos++;const l=this.pos;this.pos=function(m,y,v){for(let S,C,j=0;j<y.length;j++){if(S=y.charCodeAt(j),S>55295&&S<57344){if(!C){S>56319||j+1===y.length?(m[v++]=239,m[v++]=191,m[v++]=189):C=S;continue}if(S<56320){m[v++]=239,m[v++]=191,m[v++]=189,C=S;continue}S=C-55296<<10|S-56320|65536,C=null}else C&&(m[v++]=239,m[v++]=191,m[v++]=189,C=null);S<128?m[v++]=S:(S<2048?m[v++]=S>>6|192:(S<65536?m[v++]=S>>12|224:(m[v++]=S>>18|240,m[v++]=S>>12&63|128),m[v++]=S>>6&63|128),m[v++]=63&S|128)}return v}(this.buf,i,this.pos);const p=this.pos-l;p>=128&&ej(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){const l=i.length;this.writeVarint(l),this.realloc(l);for(let p=0;p<l;p++)this.buf[this.pos++]=i[p]}writeRawMessage(i,l){this.pos++;const p=this.pos;i(l,this);const m=this.pos-p;m>=128&&ej(p,m,this),this.pos=p-1,this.writeVarint(m),this.pos+=m}writeMessage(i,l,p){this.writeTag(i,2),this.writeRawMessage(l,p)}writePackedVarint(i,l){l.length&&this.writeMessage(i,tV,l)}writePackedSVarint(i,l){l.length&&this.writeMessage(i,rV,l)}writePackedBoolean(i,l){l.length&&this.writeMessage(i,sV,l)}writePackedFloat(i,l){l.length&&this.writeMessage(i,nV,l)}writePackedDouble(i,l){l.length&&this.writeMessage(i,iV,l)}writePackedFixed32(i,l){l.length&&this.writeMessage(i,aV,l)}writePackedSFixed32(i,l){l.length&&this.writeMessage(i,oV,l)}writePackedFixed64(i,l){l.length&&this.writeMessage(i,lV,l)}writePackedSFixed64(i,l){l.length&&this.writeMessage(i,cV,l)}writeBytesField(i,l){this.writeTag(i,2),this.writeBytes(l)}writeFixed32Field(i,l){this.writeTag(i,5),this.writeFixed32(l)}writeSFixed32Field(i,l){this.writeTag(i,5),this.writeSFixed32(l)}writeFixed64Field(i,l){this.writeTag(i,1),this.writeFixed64(l)}writeSFixed64Field(i,l){this.writeTag(i,1),this.writeSFixed64(l)}writeVarintField(i,l){this.writeTag(i,0),this.writeVarint(l)}writeSVarintField(i,l){this.writeTag(i,0),this.writeSVarint(l)}writeStringField(i,l){this.writeTag(i,2),this.writeString(l)}writeFloatField(i,l){this.writeTag(i,5),this.writeFloat(l)}writeDoubleField(i,l){this.writeTag(i,1),this.writeDouble(l)}writeBooleanField(i,l){this.writeVarintField(i,+l)}}function sp(c,i,l){return l?4294967296*i+(c>>>0):4294967296*(i>>>0)+(c>>>0)}function ej(c,i,l){const p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(p);for(let m=l.pos-1;m>=c;m--)l.buf[m+p]=l.buf[m]}function tV(c,i){for(let l=0;l<c.length;l++)i.writeVarint(c[l])}function rV(c,i){for(let l=0;l<c.length;l++)i.writeSVarint(c[l])}function nV(c,i){for(let l=0;l<c.length;l++)i.writeFloat(c[l])}function iV(c,i){for(let l=0;l<c.length;l++)i.writeDouble(c[l])}function sV(c,i){for(let l=0;l<c.length;l++)i.writeBoolean(c[l])}function aV(c,i){for(let l=0;l<c.length;l++)i.writeFixed32(c[l])}function oV(c,i){for(let l=0;l<c.length;l++)i.writeSFixed32(c[l])}function lV(c,i){for(let l=0;l<c.length;l++)i.writeFixed64(c[l])}function cV(c,i){for(let l=0;l<c.length;l++)i.writeSFixed64(c[l])}function uV(c,i,l){c===1&&l.readMessage(dV,i)}function dV(c,i,l){if(c===3){const{id:p,bitmap:m,width:y,height:v,left:S,top:C,advance:j}=l.readMessage(hV,{});i.push({id:p,bitmap:new rg({width:y+6,height:v+6},m),metrics:{width:y,height:v,left:S,top:C,advance:j}})}}function hV(c,i,l){c===1?i.id=l.readVarint():c===2?i.bitmap=l.readBytes():c===3?i.width=l.readVarint():c===4?i.height=l.readVarint():c===5?i.left=l.readSVarint():c===6?i.top=l.readSVarint():c===7&&(i.advance=l.readVarint())}function tj(c){let i=0,l=0;for(const v of c)i+=v.w*v.h,l=Math.max(l,v.w);c.sort((v,S)=>S.h-v.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let m=0,y=0;for(const v of c)for(let S=p.length-1;S>=0;S--){const C=p[S];if(!(v.w>C.w||v.h>C.h)){if(v.x=C.x,v.y=C.y,y=Math.max(y,v.y+v.h),m=Math.max(m,v.x+v.w),v.w===C.w&&v.h===C.h){const j=p.pop();j&&S<p.length&&(p[S]=j)}else v.h===C.h?(C.x+=v.w,C.w-=v.w):v.w===C.w?(C.y+=v.h,C.h-=v.h):(p.push({x:C.x+v.w,y:C.y,w:C.w-v.w,h:v.h}),C.y+=v.h,C.h-=v.h);break}}return{w:m,h:y,fill:i/(m*y)||0}}class c1{constructor(i,{pixelRatio:l,version:p,stretchX:m,stretchY:y,content:v,textFitWidth:S,textFitHeight:C}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=m,this.stretchY=y,this.content=v,this.version=p,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class rj{constructor(i,l){const p={},m={};this.haveRenderCallbacks=[];const y=[];this.addImages(i,p,y),this.addImages(l,m,y);const{w:v,h:S}=tj(y),C=new _s({width:v||1,height:S||1});for(const j in i){const R=i[j],L=p[j].paddedRect;_s.copy(R.data,C,{x:0,y:0},{x:L.x+1,y:L.y+1},R.data)}for(const j in l){const R=l[j],L=m[j].paddedRect,V=L.x+1,G=L.y+1,H=R.data.width,Y=R.data.height;_s.copy(R.data,C,{x:0,y:0},{x:V,y:G},R.data),_s.copy(R.data,C,{x:0,y:Y-1},{x:V,y:G-1},{width:H,height:1}),_s.copy(R.data,C,{x:0,y:0},{x:V,y:G+Y},{width:H,height:1}),_s.copy(R.data,C,{x:H-1,y:0},{x:V-1,y:G},{width:1,height:Y}),_s.copy(R.data,C,{x:0,y:0},{x:V+H,y:G},{width:1,height:Y})}this.image=C,this.iconPositions=p,this.patternPositions=m}addImages(i,l,p){for(const m in i){const y=i[m],v={x:0,y:0,w:y.data.width+2,h:y.data.height+2};p.push(v),l[m]=new c1(v,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),l)}patchUpdatedImage(i,l,p){if(!i||!l||i.version===l.version)return;i.version=l.version;const[m,y]=i.tl;p.update(l.data,void 0,{x:m,y})}}var Mc;function $v(c,i,l,p,m,y,v,S,C,j,R,L,V,G,H){const Y=ip.fromFeature(c,m);let J;L===h.ay.vertical&&Y.verticalizePunctuation();let ne=Y.determineLineBreaks(j,y,i,p,G);const{processBidirectionalText:fe,processStyledBidirectionalText:ae}=Bo;if(fe&&Y.sections.length===1){J=[],ne=ne.map($e=>Y.toCodeUnitIndex($e));const Pe=fe(Y.toString(),ne);for(const $e of Pe){const Je=[...$e].map(()=>0);J.push(new ip($e,Y.sections,Je))}}else if(ae){J=[],ne=ne.map(Ze=>Y.toCodeUnitIndex(Ze));let Pe=0;const $e=[];for(const Ze of Y.text)$e.push(...Array(Ze.length).fill(Y.sectionIndex[Pe])),Pe++;const Je=ae(Y.text,$e,ne);for(const Ze of Je){const et=[];let gt="";for(const ot of Ze[0])et.push(Ze[1][gt.length]),gt+=ot;J.push(new ip(Ze[0],Y.sections,et))}}else J=function(Pe,$e){const Je=[];let Ze=0;for(const et of $e)Je.push(Pe.substring(Ze,et)),Ze=et;return Ze<Pe.length()&&Je.push(Pe.substring(Ze,Pe.length())),Je}(Y,ne);const ue=[],Ce={positionedLines:ue,text:Y.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:L,iconsInText:!1,verticalizable:!1};return function(Pe,$e,Je,Ze,et,gt,ot,lt,Ke,Mt,Nt,Bt){let Ct=0,lr=0,tn=0,Vn=0;const zi=lt==="right"?1:lt==="left"?0:.5,ja=ai/Bt;let us=0;for(const wn of et){wn.trim();const Ti=wn.getMaxScale(),Yi={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[us]=Yi;const Qi=Yi.positionedGlyphs;let bs=0;if(!wn.length()){lr+=gt,++us;continue}const Vi=pV(Ze,wn,ja);let ws=0;for(const ci of wn.text){const cn=wn.getSection(ws),$n=ci.codePointAt(0),mn=fV(Ke,Nt,$n),ui={glyph:$n,imageName:null,x:Ct,y:lr+-17,vertical:mn,scale:1,fontStack:"",sectionIndex:wn.getSectionIndex(ws),metrics:null,rect:null};let Fl;if("fontStack"in cn){if(Fl=mV(cn,$n,mn,Vi,$e,Je),!Fl)continue;ui.fontStack=cn.fontStack}else{if(Pe.iconsInText=!0,cn.scale*=ja,Fl=gV(cn,mn,Ti,Vi,Ze),!Fl)continue;bs=Math.max(bs,Fl.imageOffset),ui.imageName=cn.imageName}const{rect:ro,metrics:bg,baselineOffset:Oc}=Fl;ui.y+=Oc,ui.scale=cn.scale,ui.metrics=bg,ui.rect=ro,Qi.push(ui),mn?(Pe.verticalizable=!0,Ct+=("imageName"in cn?bg.advance:ai)*cn.scale+Mt):Ct+=bg.advance*cn.scale+Mt,ws++}Qi.length!==0&&(tn=Math.max(Ct-Mt,tn),yV(Qi,0,Qi.length-1,zi)),Ct=0,Yi.lineOffset=Math.max(bs,(Ti-1)*ai);const Aa=gt*Ti+bs;lr+=Aa,Vn=Math.max(Aa,Vn),++us}const{horizontalAlign:Si,verticalAlign:Bi}=u1(ot);(function(wn,Ti,Yi,Qi,bs,Vi,ws,Aa,ci){const cn=(Ti-Yi)*bs;let $n=0;$n=Vi!==ws?-Aa*Qi- -17:-Qi*ci*ws+.5*ws;for(const mn of wn)for(const ui of mn.positionedGlyphs)ui.x+=cn,ui.y+=$n})(Pe.positionedLines,zi,Si,Bi,tn,Vn,gt,lr,et.length),Pe.top+=-Bi*lr,Pe.bottom=Pe.top+lr,Pe.left+=-Si*tn,Pe.right=Pe.left+tn}(Ce,i,l,p,J,v,S,C,L,j,V,H),!function(Pe){for(const $e of Pe)if($e.positionedGlyphs.length!==0)return!1;return!0}(ue)&&Ce}function u1(c){let i=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function pV(c,i,l){const p=i.getMaxScale()*ai,{maxImageWidth:m,maxImageHeight:y}=i.getMaxImageSize(c),v=Math.max(p,y*l);return{verticalLineContentWidth:Math.max(p,m*l),horizontalLineContentHeight:v}}function nj(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function fV(c,i,l){return!(c===h.ay.horizontal||!i&&!Ec(l)||i&&(wv(l)||(p=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(p)))));var p}function mV(c,i,l,p,m,y){const v=y[c.fontStack],S=function(j,R,L,V){if(j&&j.rect)return j;const G=R[L.fontStack],H=G&&G[V];return H?{rect:null,metrics:H.metrics}:null}(v&&v[i],m,c,i);if(S===null)return null;let C;if(l)C=p.verticalLineContentWidth-c.scale*ai;else{const j=nj(c.verticalAlign);C=(p.horizontalLineContentHeight-c.scale*ai)*j}return{rect:S.rect,metrics:S.metrics,baselineOffset:C}}function gV(c,i,l,p,m){const y=m[c.imageName];if(!y)return null;const v=y.paddedRect,S=y.displaySize,C={width:S[0],height:S[1],left:1,top:-3,advance:i?S[1]:S[0]};let j;if(i)j=p.verticalLineContentWidth-S[1]*c.scale;else{const R=nj(c.verticalAlign);j=(p.horizontalLineContentHeight-S[1]*c.scale)*R}return{rect:v,metrics:C,baselineOffset:j,imageOffset:(i?S[0]:S[1])*c.scale-ai*l}}function yV(c,i,l,p){if(p===0)return;const m=c[l],y=(c[l].x+m.metrics.advance*m.scale)*p;for(let v=i;v<=l;v++)c[v].x-=y}function xV(c,i,l){const{horizontalAlign:p,verticalAlign:m}=u1(l),y=i[0]-c.displaySize[0]*p,v=i[1]-c.displaySize[1]*m;return{image:c,top:v,bottom:v+c.displaySize[1],left:y,right:y+c.displaySize[0]}}function ij(c){var i,l;let p=c.left,m=c.top,y=c.right-p,v=c.bottom-m;const S=(i=c.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",C=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",j=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&y/v<j||S==="proportional"){const R=Math.ceil(v*j);p*=R/y,y=R}}else if(S==="proportional"&&C==="stretchOnly"&&j!==0&&y/v>j){const R=Math.ceil(y/j);m*=R/v,v=R}return{x1:p,y1:m,x2:p+y,y2:m+v}}function sj(c,i,l,p,m,y){const v=c.image;let S;if(v.content){const J=v.content,ne=v.pixelRatio||1;S=[J[0]/ne,J[1]/ne,v.displaySize[0]-J[2]/ne,v.displaySize[1]-J[3]/ne]}const C=i.left*y,j=i.right*y;let R,L,V,G;l==="width"||l==="both"?(G=m[0]+C-p[3],L=m[0]+j+p[1]):(G=m[0]+(C+j-v.displaySize[0])/2,L=G+v.displaySize[0]);const H=i.top*y,Y=i.bottom*y;return l==="height"||l==="both"?(R=m[1]+H-p[0],V=m[1]+Y+p[2]):(R=m[1]+(H+Y-v.displaySize[1])/2,V=R+v.displaySize[1]),{image:v,top:R,right:L,bottom:V,left:G,collisionPadding:S}}bt("ImagePosition",c1),bt("ImageAtlas",rj),h.ay=void 0,(Mc=h.ay||(h.ay={}))[Mc.none=0]="none",Mc[Mc.horizontal=1]="horizontal",Mc[Mc.vertical=2]="vertical",Mc[Mc.horizontalOnly=3]="horizontalOnly";const Ol=128,Nc=32640;function aj(c,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Or(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:m}=l;let y=0;for(;y<p.length&&p[y]<=c;)y++;y=Math.max(0,y-1);let v=y;for(;v<p.length&&p[v]<c+1;)v++;v=Math.min(p.length-1,v);const S=p[y],C=p[v];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:m}:{kind:"camera",minZoom:S,maxZoom:C,minSize:l.evaluate(new Or(S)),maxSize:l.evaluate(new Or(C)),interpolationType:m}}}function d1(c,i,l){let p="never";const m=c.get(i);return m?p=m:c.get(l)&&(p="always"),p}const vV=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uv(c,i,l,p,m,y,v,S,C,j,R,L,V){const G=S?Math.min(Nc,Math.round(S[0])):0,H=S?Math.min(Nc,Math.round(S[1])):0;c.emplaceBack(i,l,Math.round(32*p),Math.round(32*m),y,v,(G<<1)+(C?1:0),H,16*j,16*R,256*L,256*V)}function h1(c,i,l){c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l)}function _V(c){for(const i of c.sections)if(kv(i.text))return!0;return!1}class p1{constructor(i){this.layoutVertexArray=new qe,this.indexArray=new st,this.programConfigurations=i,this.segments=new Kt,this.dynamicLayoutVertexArray=new Fe,this.opacityVertexArray=new ze,this.hasVisibleVertices=!1,this.placedSymbolArray=new N}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,p,m){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,H8.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Z8.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,vV,!0),this.opacityVertexBuffer.itemSize=1),(p||m)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}bt("SymbolBuffers",p1);class f1{constructor(i,l,p){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new p,this.segments=new Kt,this.collisionVertexArray=new ut}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,K8.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}bt("CollisionBuffers",f1);class ap{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(v=>v.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=aj(this.zoom,l["text-size"]),this.iconSizeData=aj(this.zoom,l["icon-size"]);const p=this.layers[0].layout,m=p.get("symbol-sort-key"),y=p.get("symbol-z-order");this.canOverlap=d1(p,"text-overlap","text-allow-overlap")!=="never"||d1(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(v=>h.ay[v])),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=i.sourceID}createArrays(){this.text=new p1(new Dl(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new p1(new Dl(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new K,this.lineVertexArray=new Z,this.symbolInstances=new B,this.textAnchorOffsets=new re}calculateGlyphDependencies(i,l,p,m,y){for(const v of i)if(l[v.codePointAt(0)]=!0,(p||m)&&y){const S=dg[v];S&&(l[S.codePointAt(0)]=!0)}}populate(i,l,p){const m=this.layers[0],y=m.layout,v=y.get("text-font"),S=y.get("text-field"),C=y.get("icon-image"),j=(S.value.kind!=="constant"||S.value.value instanceof Ln&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(v.value.kind!=="constant"||v.value.value.length>0),R=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,L=y.get("symbol-sort-key");if(this.features=[],!j&&!R)return;const V=l.iconDependencies,G=l.glyphDependencies,H=l.availableImages,Y=new Or(this.zoom);for(const{feature:J,id:ne,index:fe,sourceLayerIndex:ae}of i){const ue=m._featureFilter.needGeometry,Ce=Ja(J,ue);if(!m._featureFilter.filter(Y,Ce,p))continue;let Pe,$e;if(ue||(Ce.geometry=Wo(J)),j){const Ze=m.getValueAndResolveTokens("text-field",Ce,p,H),et=Ln.factory(Ze),gt=this.hasRTLText=this.hasRTLText||_V(et);(!gt||Bo.getRTLTextPluginStatus()==="unavailable"||gt&&Bo.isParsed())&&(Pe=Q8(et,m,Ce))}if(R){const Ze=m.getValueAndResolveTokens("icon-image",Ce,p,H);$e=Ze instanceof ss?Ze:ss.fromString(Ze)}if(!Pe&&!$e)continue;const Je=this.sortFeaturesByKey?L.evaluate(Ce,{},p):void 0;if(this.features.push({id:ne,text:Pe,icon:$e,index:fe,sourceLayerIndex:ae,geometry:Ce.geometry,properties:J.properties,type:np.types[J.type],sortKey:Je}),$e&&(V[$e.name]=!0),Pe){const Ze=v.evaluate(Ce,{},p).join(","),et=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ay.vertical)>=0;for(const gt of Pe.sections)if(gt.image)V[gt.image.name]=!0;else{const ot=ad(Pe.toString()),lt=gt.fontStack||Ze,Ke=G[lt]=G[lt]||{};this.calculateGlyphDependencies(gt.text,Ke,et,this.allowVerticalPlacement,ot)}}}y.get("symbol-placement")==="line"&&(this.features=function(J){const ne={},fe={},ae=[];let ue=0;function Ce(Ze){ae.push(J[Ze]),ue++}function Pe(Ze,et,gt){const ot=fe[Ze];return delete fe[Ze],fe[et]=ot,ae[ot].geometry[0].pop(),ae[ot].geometry[0]=ae[ot].geometry[0].concat(gt[0]),ot}function $e(Ze,et,gt){const ot=ne[et];return delete ne[et],ne[Ze]=ot,ae[ot].geometry[0].shift(),ae[ot].geometry[0]=gt[0].concat(ae[ot].geometry[0]),ot}function Je(Ze,et,gt){const ot=gt?et[0][et[0].length-1]:et[0][0];return`${Ze}:${ot.x}:${ot.y}`}for(let Ze=0;Ze<J.length;Ze++){const et=J[Ze],gt=et.geometry,ot=et.text?et.text.toString():null;if(!ot){Ce(Ze);continue}const lt=Je(ot,gt),Ke=Je(ot,gt,!0);if(lt in fe&&Ke in ne&&fe[lt]!==ne[Ke]){const Mt=$e(lt,Ke,gt),Nt=Pe(lt,Ke,ae[Mt].geometry);delete ne[lt],delete fe[Ke],fe[Je(ot,ae[Nt].geometry,!0)]=Nt,ae[Mt].geometry=null}else lt in fe?Pe(lt,Ke,gt):Ke in ne?$e(lt,Ke,gt):(Ce(Ze),ne[lt]=ue-1,fe[Ke]=ue-1)}return ae.filter(Ze=>Ze.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(i,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:p}),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:p}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const p=this.lineVertexArray.length;if(i.segment!==void 0){let m=i.dist(l[i.segment+1]),y=i.dist(l[i.segment]);const v={};for(let S=i.segment+1;S<l.length;S++)v[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:m},S<l.length-1&&(m+=l[S+1].dist(l[S]));for(let S=i.segment||0;S>=0;S--)v[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:y},S>0&&(y+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const C=v[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,l,p,m,y,v,S,C,j,R,L,V){const G=i.indexArray,H=i.layoutVertexArray,Y=i.segments.prepareSegment(4*l.length,H,G,this.canOverlap?v.sortKey:void 0),J=this.glyphOffsetArray.length,ne=Y.vertexLength,fe=this.allowVerticalPlacement&&S===h.ay.vertical?Math.PI/2:0,ae=v.text&&v.text.sections;for(let ue=0;ue<l.length;ue++){const{tl:Ce,tr:Pe,bl:$e,br:Je,tex:Ze,pixelOffsetTL:et,pixelOffsetBR:gt,minFontScaleX:ot,minFontScaleY:lt,glyphOffset:Ke,isSDF:Mt,sectionIndex:Nt}=l[ue],Bt=Y.vertexLength,Ct=Ke[1];Uv(H,C.x,C.y,Ce.x,Ct+Ce.y,Ze.x,Ze.y,p,Mt,et.x,et.y,ot,lt),Uv(H,C.x,C.y,Pe.x,Ct+Pe.y,Ze.x+Ze.w,Ze.y,p,Mt,gt.x,et.y,ot,lt),Uv(H,C.x,C.y,$e.x,Ct+$e.y,Ze.x,Ze.y+Ze.h,p,Mt,et.x,gt.y,ot,lt),Uv(H,C.x,C.y,Je.x,Ct+Je.y,Ze.x+Ze.w,Ze.y+Ze.h,p,Mt,gt.x,gt.y,ot,lt),h1(i.dynamicLayoutVertexArray,C,fe),G.emplaceBack(Bt,Bt+2,Bt+1),G.emplaceBack(Bt+1,Bt+2,Bt+3),Y.vertexLength+=4,Y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ke[0]),ue!==l.length-1&&Nt===l[ue+1].sectionIndex||i.programConfigurations.populatePaintArrays(H.length,v,v.index,{imagePositions:{},canonical:V,formattedSection:ae&&ae[Nt]})}i.placedSymbolArray.emplaceBack(C.x,C.y,J,this.glyphOffsetArray.length-J,ne,j,R,C.segment,p?p[0]:0,p?p[1]:0,m[0],m[1],S,0,!1,0,L)}_addCollisionDebugVertex(i,l,p,m,y,v){return l.emplaceBack(0,0),i.emplaceBack(p.x,p.y,m,y,Math.round(v.x),Math.round(v.y))}addCollisionDebugVertices(i,l,p,m,y,v,S){const C=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),j=C.vertexLength,R=y.layoutVertexArray,L=y.collisionVertexArray,V=S.anchorX,G=S.anchorY;this._addCollisionDebugVertex(R,L,v,V,G,new _(i,l)),this._addCollisionDebugVertex(R,L,v,V,G,new _(p,l)),this._addCollisionDebugVertex(R,L,v,V,G,new _(p,m)),this._addCollisionDebugVertex(R,L,v,V,G,new _(i,m)),C.vertexLength+=4;const H=y.indexArray;H.emplaceBack(j,j+1),H.emplaceBack(j+1,j+2),H.emplaceBack(j+2,j+3),H.emplaceBack(j+3,j),C.primitiveLength+=4}addDebugCollisionBoxes(i,l,p,m){for(let y=i;y<l;y++){const v=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(v.x1,v.y1,v.x2,v.y2,m?this.textCollisionBox:this.iconCollisionBox,v.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new f1(Ue,HE.members,Xe),this.iconCollisionBox=new f1(Ue,HE.members,Xe);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,p,m,y,v,S,C,j){const R={};for(let L=l;L<p;L++){const V=i.get(L);R.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.textFeatureIndex=V.featureIndex;break}for(let L=m;L<y;L++){const V=i.get(L);R.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.verticalTextFeatureIndex=V.featureIndex;break}for(let L=v;L<S;L++){const V=i.get(L);R.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.iconFeatureIndex=V.featureIndex;break}for(let L=C;L<j;L++){const V=i.get(L);R.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.verticalIconFeatureIndex=V.featureIndex;break}return R}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const p=i.placedSymbolArray.get(l),m=p.vertexStartIndex+4*p.numGlyphs;for(let y=p.vertexStartIndex;y<m;y+=4)i.indexArray.emplaceBack(y,y+2,y+1),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),p=Math.cos(i),m=[],y=[],v=[];for(let S=0;S<this.symbolInstances.length;++S){v.push(S);const C=this.symbolInstances.get(S);m.push(0|Math.round(l*C.anchorX+p*C.anchorY)),y.push(C.featureIndex)}return v.sort((S,C)=>m[S]-m[C]||y[C]-y[S]),v}addToSortKeyRanges(i,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((m,y,v)=>{m>=0&&v.indexOf(m)===y&&this.addIndicesForPlacedSymbol(this.text,m)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let oj,lj;bt("SymbolBucket",ap,{omit:["layers","collisionBoxArray","features","compareText"]}),ap.MAX_GLYPHS=65535,ap.addDynamicAttributes=h1;var m1={get paint(){return lj=lj||new Oi({"icon-opacity":new zt(oe.paint_symbol["icon-opacity"]),"icon-color":new zt(oe.paint_symbol["icon-color"]),"icon-halo-color":new zt(oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new zt(oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new zt(oe.paint_symbol["icon-halo-blur"]),"icon-translate":new jt(oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new jt(oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new zt(oe.paint_symbol["text-opacity"]),"text-color":new zt(oe.paint_symbol["text-color"],{runtimeType:is,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new zt(oe.paint_symbol["text-halo-color"]),"text-halo-width":new zt(oe.paint_symbol["text-halo-width"]),"text-halo-blur":new zt(oe.paint_symbol["text-halo-blur"]),"text-translate":new jt(oe.paint_symbol["text-translate"]),"text-translate-anchor":new jt(oe.paint_symbol["text-translate-anchor"])})},get layout(){return oj=oj||new Oi({"symbol-placement":new jt(oe.layout_symbol["symbol-placement"]),"symbol-spacing":new jt(oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new jt(oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new zt(oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new jt(oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new jt(oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new jt(oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new jt(oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new jt(oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new jt(oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new zt(oe.layout_symbol["icon-size"]),"icon-text-fit":new jt(oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new jt(oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new zt(oe.layout_symbol["icon-image"]),"icon-rotate":new zt(oe.layout_symbol["icon-rotate"]),"icon-padding":new zt(oe.layout_symbol["icon-padding"]),"icon-keep-upright":new jt(oe.layout_symbol["icon-keep-upright"]),"icon-offset":new zt(oe.layout_symbol["icon-offset"]),"icon-anchor":new zt(oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new jt(oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new jt(oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new jt(oe.layout_symbol["text-rotation-alignment"]),"text-field":new zt(oe.layout_symbol["text-field"]),"text-font":new zt(oe.layout_symbol["text-font"]),"text-size":new zt(oe.layout_symbol["text-size"]),"text-max-width":new zt(oe.layout_symbol["text-max-width"]),"text-line-height":new jt(oe.layout_symbol["text-line-height"]),"text-letter-spacing":new zt(oe.layout_symbol["text-letter-spacing"]),"text-justify":new zt(oe.layout_symbol["text-justify"]),"text-radial-offset":new zt(oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new jt(oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new zt(oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new zt(oe.layout_symbol["text-anchor"]),"text-max-angle":new jt(oe.layout_symbol["text-max-angle"]),"text-writing-mode":new jt(oe.layout_symbol["text-writing-mode"]),"text-rotate":new zt(oe.layout_symbol["text-rotate"]),"text-padding":new jt(oe.layout_symbol["text-padding"]),"text-keep-upright":new jt(oe.layout_symbol["text-keep-upright"]),"text-transform":new zt(oe.layout_symbol["text-transform"]),"text-offset":new zt(oe.layout_symbol["text-offset"]),"text-allow-overlap":new jt(oe.layout_symbol["text-allow-overlap"]),"text-overlap":new jt(oe.layout_symbol["text-overlap"]),"text-ignore-placement":new jt(oe.layout_symbol["text-ignore-placement"]),"text-optional":new jt(oe.layout_symbol["text-optional"])})}};class cj{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:$r,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}bt("FormatSectionOverride",cj,{omit:["defaultValue"]});class qv extends Fs{constructor(i,l){super(i,m1,l)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const m=[];for(const y of p)m.indexOf(y)<0&&m.push(y);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,p,m){const y=this.layout.get(i).evaluate(l,{},p,m),v=this._unevaluatedLayout._values[i];return v.isDataDriven()||Rh(v.value)||!y?y:function(S,C){return C.replace(/{([^{}]+)}/g,(j,R)=>S&&R in S?String(S[R]):"")}(l.properties,y)}createBucket(i){return new ap(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of m1.paint.overridableProperties){if(!qv.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),p=new cj(l),m=new Ih(p,l.property.specification);let y=null;y=l.value.kind==="constant"||l.value.kind==="source"?new Cl("source",m):new Oh("composite",m,l.value.zoomStops),this.paint._values[i]=new ia(l.property,y,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&qv.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const p=i.get("text-field"),m=m1.paint.properties[l];let y=!1;const v=S=>{for(const C of S)if(m.overrides&&m.overrides.hasOverride(C))return void(y=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ln)v(p.value.value.sections);else if(p.value.kind==="source"||p.value.kind==="composite"){const S=j=>{y||(j instanceof Lo&&Xr(j.value)===lc?v(j.value.sections):j instanceof bl?v(j.sections):j.eachChild(S))},C=p.value;C._styleExpression&&S(C._styleExpression.expression)}return y}}let uj;var bV={get paint(){return uj=uj||new Oi({"background-color":new jt(oe.paint_background["background-color"]),"background-pattern":new Ev(oe.paint_background["background-pattern"]),"background-opacity":new jt(oe.paint_background["background-opacity"])})}};class wV extends Fs{constructor(i,l){super(i,bV,l)}}class SV extends Fs{constructor(i,l){super(i,{},l),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class TV{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const kV={once:!0},g1=63710088e-1;class Ic{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ic(er(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,p=this.lat*l,m=i.lat*l,y=Math.sin(p)*Math.sin(m)+Math.cos(p)*Math.cos(m)*Math.cos((i.lng-this.lng)*l);return g1*Math.acos(Math.min(y,1))}static convert(i){if(i instanceof Ic)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ic(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ic(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const dj=2*Math.PI*g1;function hj(c){return dj*Math.cos(c*Math.PI/180)}function pj(c){return(180+c)/360}function fj(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function mj(c,i){return c/hj(i)}function gj(c){return 360*c-180}function Wv(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function yj(c,i){return c*hj(Wv(i))}class hg{constructor(i,l,p=0){this.x=+i,this.y=+l,this.z=+p}static fromLngLat(i,l=0){const p=Ic.convert(i);return new hg(pj(p.lng),fj(p.lat),mj(l,p.lat))}toLngLat(){return new Ic(gj(this.x),Wv(this.y))}toAltitude(){return yj(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/dj*(i=Wv(this.y),1/Math.cos(i*Math.PI/180));var i}}function xj(c,i,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[c*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class y1{constructor(i,l,p){if(!function(m,y,v){return!(m<0||m>25||v<0||v>=Math.pow(2,m)||y<0||y>=Math.pow(2,m))}(i,l,p))throw new Error(`x=${l}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=p,this.key=op(0,i,i,l,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,p){const m=(v=this.y,S=this.z,C=xj(256*(y=this.x),256*(v=Math.pow(2,S)-v-1),S),j=xj(256*(y+1),256*(v+1),S),C[0]+","+C[1]+","+j[0]+","+j[1]);var y,v,S,C,j;const R=function(L,V,G){let H,Y="";for(let J=L;J>0;J--)H=1<<J-1,Y+=(V&H?1:0)+(G&H?2:0);return Y}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,m)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new _((i.x*l-this.x)*Le,(i.y*l-this.y)*Le)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vj{constructor(i,l){this.wrap=i,this.canonical=l,this.key=op(i,l.z,l.z,l.x,l.y)}}class sa{constructor(i,l,p,m,y){if(this.terrainRttPosMatrix32f=null,i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=l,this.canonical=new y1(p,+m,+y),this.key=op(l,i,p,m,y)}clone(){return new sa(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new sa(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new sa(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?op(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):op(this.wrap*+l,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap||this.overscaledZ-i.overscaledZ<=0)return!1;if(i.overscaledZ===0)return this.overscaledZ>0;const l=this.canonical.z-i.canonical.z;return!(l<0)&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new sa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,m=2*this.canonical.y;return[new sa(l,this.wrap,l,p,m),new sa(l,this.wrap,l,p+1,m),new sa(l,this.wrap,l,p,m+1),new sa(l,this.wrap,l,p+1,m+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new sa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new sa(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vj(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new hg(i.x-this.wrap,i.y))}}function op(c,i,l,p,m){(c*=2)<0&&(c=-1*c-1);const y=1<<l;return(y*y*c+y*m+p).toString(36)+l.toString(36)+i.toString(36)}function pg(c,i){return i?c.properties[i]:c.id}function CV(c,i){const l={id:c.id};if(i.removeAllProperties&&(delete c.removeProperties,delete c.addOrUpdateProperties,delete i.removeProperties),i.removeProperties)for(const p of i.removeProperties){const m=c.addOrUpdateProperties.findIndex(y=>y.key===p);m>-1&&c.addOrUpdateProperties.splice(m,1)}return(c.removeAllProperties||i.removeAllProperties)&&(l.removeAllProperties=!0),(c.removeProperties||i.removeProperties)&&(l.removeProperties=[...c.removeProperties||[],...i.removeProperties||[]]),(c.addOrUpdateProperties||i.addOrUpdateProperties)&&(l.addOrUpdateProperties=[...c.addOrUpdateProperties||[],...i.addOrUpdateProperties||[]]),(c.newGeometry||i.newGeometry)&&(l.newGeometry=i.newGeometry||c.newGeometry),l}function _j(c){var i,l;if(!c)return{};const p={};return p.removeAll=c.removeAll,p.remove=new Set(c.remove||[]),p.add=new Map((i=c.add)===null||i===void 0?void 0:i.map(m=>[m.id,m])),p.update=new Map((l=c.update)===null||l===void 0?void 0:l.map(m=>[m.id,m])),p}bt("CanonicalTileID",y1),bt("OverscaledTileID",sa,{omit:["terrainRttPosMatrix32f"]});class bj{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const p=i[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class wj{constructor(i,l,p,m,y){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=p,i._y=m,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class lp{constructor(i,l,p){It(this,"_name");It(this,"dataBuffer");It(this,"nullabilityBuffer");It(this,"_size");this._name=i,this.dataBuffer=l,typeof p=="number"?this._size=p:(this.nullabilityBuffer=p,this._size=p.size())}getValue(i){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(i)?null:this.getValueFromBuffer(i)}has(i){return this.nullabilityBuffer&&this.nullabilityBuffer.get(i)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Gv extends lp{}class x1 extends Gv{getValueFromBuffer(i){return this.dataBuffer[i]}}class v1 extends Gv{getValueFromBuffer(i){return this.dataBuffer[i]}}class Sj extends lp{constructor(l,p,m,y){super(l,p,y);It(this,"delta");this.delta=m}}class _1 extends Sj{constructor(i,l,p,m){super(i,Int32Array.of(l),p,m)}getValueFromBuffer(i){return this.dataBuffer[0]+i*this.delta}}class b1 extends lp{constructor(i,l,p){super(i,Int32Array.of(l),p)}getValueFromBuffer(i){return this.dataBuffer[0]}}class PV{constructor(i,l,p,m,y=4096){It(this,"_name");It(this,"_geometryVector");It(this,"_idVector");It(this,"_propertyVectors");It(this,"_extent");It(this,"propertyVectorsMap");this._name=i,this._geometryVector=l,this._idVector=p,this._propertyVectors=m,this._extent=y}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(i){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map(l=>[l.name,l]))),this.propertyVectorsMap.get(i)}*[Symbol.iterator](){const i=this.geometryVector[Symbol.iterator]();let l=0;for(;l<this.numFeatures;){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(l)):this.idVector.getValue(l));const m=i==null?void 0:i.next().value,y={};for(const v of this.propertyVectors){if(!v)continue;const S=v.name,C=v.getValue(l);C!==null&&(y[S]=C)}l++,yield{id:p,geometry:m,properties:y}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const i=[],l=this.geometryVector.getGeometries();for(let p=0;p<this.numFeatures;p++){let m;this.idVector&&(m=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(p)):this.idVector.getValue(p));const y={coordinates:l[p],type:this.geometryVector.geometryType(p)},v={};for(const S of this.propertyVectors){if(!S)continue;const C=S.name,j=S.getValue(p);j!==null&&(v[C]=j)}i.push({id:m,geometry:y,properties:v})}return i}containsMaxSaveIntegerValues(i){return i instanceof x1||i instanceof b1&&i instanceof _1||i instanceof v1}}class EV{constructor(i){It(this,"value");this.value=i}get(){return this.value}set(i){this.value=i}increment(){return this.value++}add(i){this.value+=i}}var Li,fr,Ll,eo,xd,Bs,oi,li,Tj,aa;(function(c){c.PRESENT="PRESENT",c.DATA="DATA",c.OFFSET="OFFSET",c.LENGTH="LENGTH"})(Li||(Li={}));class w1{constructor(i,l,p){It(this,"_dictionaryType");It(this,"_offsetType");It(this,"_lengthType");this._dictionaryType=i,this._offsetType=l,this._lengthType=p}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Qn(c,i,l){const p=new Int32Array(l);let m=0,y=i.get();for(let v=0;v<p.length;v++){let S=c[y++],C=127&S;S<128||(S=c[y++],C|=(127&S)<<7,S<128||(S=c[y++],C|=(127&S)<<14,S<128||(S=c[y++],C|=(127&S)<<21,S<128||(S=c[y++],C|=(15&S)<<28)))),p[m++]=C}return i.set(y),p}function Hv(c,i,l){const p=new BigInt64Array(l);for(let m=0;m<p.length;m++)p[m]=AV(c,i);return p}function jV(c,i){let l,p;return p=c[i.get()],i.increment(),l=127&p,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<7,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<14,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<21,p<128?l:(p=c[i.get()],l|=(15&p)<<28,function(m,y,v){let S,C;if(C=y[v.get()],v.increment(),S=(112&C)>>4,C<128||(C=y[v.get()],v.increment(),S|=(127&C)<<3,C<128)||(C=y[v.get()],v.increment(),S|=(127&C)<<10,C<128)||(C=y[v.get()],v.increment(),S|=(127&C)<<17,C<128)||(C=y[v.get()],v.increment(),S|=(127&C)<<24,C<128)||(C=y[v.get()],v.increment(),S|=(1&C)<<31,C<128))return 4294967296*S+(m>>>0);throw new Error("Expected varint not more than 10 bytes")}(l,c,i)))))}function kj(c,i,l,p){throw new Error("FastPFor is not implemented yet.")}function vd(c){return c>>>1^-(1&c)}function cp(c){return c>>1n^-(1n&c)}function AV(c,i){let l=0n,p=0,m=i.get();for(;m<c.length;){const y=c[m++];if(l|=BigInt(127&y)<<BigInt(p),!(128&y))break;if(p+=7,p>=64)throw new Error("Varint too long")}return i.set(m),l}function Cj(c,i,l){const p=new Int32Array(l);let m=0;for(let y=0;y<i;y++){const v=c[y];p.fill(c[y+i],m,m+v),m+=v}return p}function Pj(c,i,l){const p=new BigInt64Array(l);let m=0;for(let y=0;y<i;y++){const v=Number(c[y]);p.fill(c[y+i],m,m+v),m+=v}return p}function Ej(c,i,l){const p=new Float64Array(l);let m=0;for(let y=0;y<i;y++){const v=c[y];p.fill(c[y+i],m,m+v),m+=v}return p}function S1(c){const i=c.length/4*4;let l=1;if(i>=4)for(let p=c[0];l<i-4;l+=4)p=c[l]+=p,p=c[l+1]+=p,p=c[l+2]+=p,p=c[l+3]+=p;for(;l!=c.length;)c[l]+=c[l-1],++l}function jj(c){c[0]=c[0]>>>1^-(1&c[0]),c[1]=c[1]>>>1^-(1&c[1]);const i=c.length/4*4;let l=2;if(i>=4)for(;l<i-4;l+=4){const p=c[l],m=c[l+1],y=c[l+2],v=c[l+3];c[l]=(p>>>1^-(1&p))+c[l-2],c[l+1]=(m>>>1^-(1&m))+c[l-1],c[l+2]=(y>>>1^-(1&y))+c[l],c[l+3]=(v>>>1^-(1&v))+c[l+1]}for(;l!=c.length;l+=2)c[l]=(c[l]>>>1^-(1&c[l]))+c[l-2],c[l+1]=(c[l+1]>>>1^-(1&c[l+1]))+c[l-1]}function Rc(c,i,l){return Math.min(l,Math.max(i,c))}(function(c){c.NONE="NONE",c.DELTA="DELTA",c.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",c.RLE="RLE",c.MORTON="MORTON",c.PDE="PDE"})(fr||(fr={})),function(c){c.NONE="NONE",c.FAST_PFOR="FAST_PFOR",c.VARINT="VARINT",c.ALP="ALP"}(Ll||(Ll={})),function(c){c.NONE="NONE",c.SINGLE="SINGLE",c.SHARED="SHARED",c.VERTEX="VERTEX",c.MORTON="MORTON",c.FSST="FSST"}(eo||(eo={})),function(c){c.VERTEX="VERTEX",c.INDEX="INDEX",c.STRING="STRING",c.KEY="KEY"}(xd||(xd={})),function(c){c.VAR_BINARY="VAR_BINARY",c.GEOMETRIES="GEOMETRIES",c.PARTS="PARTS",c.RINGS="RINGS",c.TRIANGLES="TRIANGLES",c.SYMBOL="SYMBOL",c.DICTIONARY="DICTIONARY"}(Bs||(Bs={}));class _d{constructor(i,l,p,m,y,v,S){It(this,"_physicalStreamType");It(this,"_logicalStreamType");It(this,"_logicalLevelTechnique1");It(this,"_logicalLevelTechnique2");It(this,"_physicalLevelTechnique");It(this,"_numValues");It(this,"_byteLength");this._physicalStreamType=i,this._logicalStreamType=l,this._logicalLevelTechnique1=p,this._logicalLevelTechnique2=m,this._physicalLevelTechnique=y,this._numValues=v,this._byteLength=S}static decode(i,l){const p=i[l.get()],m=Object.values(Li)[p>>4];let y=null;switch(m){case Li.DATA:y=new w1(Object.values(eo)[15&p]);break;case Li.OFFSET:y=new w1(null,Object.values(xd)[15&p]);break;case Li.LENGTH:y=new w1(null,null,Object.values(Bs)[15&p])}l.increment();const v=i[l.get()],S=Object.values(fr)[v>>5],C=Object.values(fr)[v>>2&7],j=Object.values(Ll)[3&v];l.increment();const R=Qn(i,l,2);return new _d(m,y,S,C,j,R[0],R[1])}get physicalStreamType(){return this._physicalStreamType}get logicalStreamType(){return this._logicalStreamType}get logicalLevelTechnique1(){return this._logicalLevelTechnique1}get logicalLevelTechnique2(){return this._logicalLevelTechnique2}get physicalLevelTechnique(){return this._physicalLevelTechnique}get numValues(){return this._numValues}get byteLength(){return this._byteLength}getDecompressedCount(){return this._numValues}}class Zv extends _d{constructor(l,p,m,y,v,S,C,j,R){super(l,p,m,y,v,S,C);It(this,"num_bits");It(this,"coordinate_shift");this.num_bits=j,this.coordinate_shift=R}static decode(l,p){const m=_d.decode(l,p),y=Qn(l,p,2);return new Zv(m.physicalStreamType,m.logicalStreamType,m.logicalLevelTechnique1,m.logicalLevelTechnique2,m.physicalLevelTechnique,m.numValues,m.byteLength,y[0],y[1])}static decodePartial(l,p,m){const y=Qn(p,m,2);return new Zv(l.physicalStreamType,l.logicalStreamType,l.logicalLevelTechnique1,l.logicalLevelTechnique2,l.physicalLevelTechnique,l.numValues,l.byteLength,y[0],y[1])}numBits(){return this.num_bits}coordinateShift(){return this.coordinate_shift}}class fg extends _d{constructor(l,p,m,y,v,S,C,j,R){super(l,p,m,y,v,S,C);It(this,"_runs");It(this,"_numRleValues");this._runs=j,this._numRleValues=R}static decode(l,p){const m=_d.decode(l,p),y=Qn(l,p,2);return new fg(m.physicalStreamType,m.logicalStreamType,m.logicalLevelTechnique1,m.logicalLevelTechnique2,m.physicalLevelTechnique,m.numValues,m.byteLength,y[0],y[1])}static decodePartial(l,p,m){const y=Qn(p,m,2);return new fg(l.physicalStreamType,l.logicalStreamType,l.logicalLevelTechnique1,l.logicalLevelTechnique2,l.physicalLevelTechnique,l.numValues,l.byteLength,y[0],y[1])}get runs(){return this._runs}get numRleValues(){return this._numRleValues}getDecompressedCount(){return this._numRleValues}}class Ki{static decode(i,l){const p=_d.decode(i,l);return p.logicalLevelTechnique1===fr.MORTON?Zv.decodePartial(p,i,l):fr.RLE!==p.logicalLevelTechnique1&&fr.RLE!==p.logicalLevelTechnique2||Ll.NONE===p.physicalLevelTechnique?p:fg.decodePartial(p,i,l)}}(function(c){c[c.FLAT=0]="FLAT",c[c.CONST=1]="CONST",c[c.SEQUENCE=2]="SEQUENCE",c[c.DICTIONARY=3]="DICTIONARY",c[c.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(oi||(oi={}));class to{constructor(i,l){It(this,"values");It(this,"_size");this.values=i,this._size=l}get(i){const l=Math.floor(i/8);return(this.values[l]>>i%8&1)==1}set(i,l){const p=Math.floor(i/8);this.values[p]=this.values[p]|(l?1:0)<<i%8}getInt(i){const l=Math.floor(i/8);return this.values[l]>>i%8&1}size(){return this._size}getBuffer(){return this.values}}class Jt{constructor(){}static decodeIntStream(i,l,p,m,y){const v=Jt.decodePhysicalLevelTechnique(i,l,p);return this.decodeIntBuffer(v,p,m,y)}static decodeLengthStreamToOffsetBuffer(i,l,p){const m=Jt.decodePhysicalLevelTechnique(i,l,p);return this.decodeLengthToOffsetBuffer(m,p)}static decodePhysicalLevelTechnique(i,l,p){const m=p.physicalLevelTechnique;if(m===Ll.FAST_PFOR)return kj();if(m===Ll.VARINT)return Qn(i,l,p.numValues);if(m===Ll.NONE){const y=l.get();l.add(p.byteLength);const v=i.subarray(y,l.get());return new Int32Array(v)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}static decodeConstIntStream(i,l,p,m){const y=Jt.decodePhysicalLevelTechnique(i,l,p);if(y.length===1){const v=y[0];return m?vd(v):v}return m?function(v){return vd(v[1])}(y):function(v){return v[1]}(y)}static decodeSequenceIntStream(i,l,p){return function(m){if(m.length==2){const y=vd(m[1]);return[y,y]}return[vd(m[2]),vd(m[3])]}(Jt.decodePhysicalLevelTechnique(i,l,p))}static decodeSequenceLongStream(i,l,p){return function(m){if(m.length==2){const y=cp(m[1]);return[y,y]}return[cp(m[2]),cp(m[3])]}(Hv(i,l,p.numValues))}static decodeLongStream(i,l,p,m){const y=Hv(i,l,p.numValues);return this.decodeLongBuffer(y,p,m)}static decodeLongFloat64Stream(i,l,p,m){const y=function(v,S,C){const j=new Float64Array(S);for(let R=0;R<S;R++)j[R]=jV(v,C);return j}(i,p.numValues,l);return this.decodeFloat64Buffer(y,p,m)}static decodeConstLongStream(i,l,p,m){const y=Hv(i,l,p.numValues);if(y.length===1){const v=y[0];return m?cp(v):v}return m?function(v){return cp(v[1])}(y):function(v){return v[1]}(y)}static decodeIntBuffer(i,l,p,m){switch(l.logicalLevelTechnique1){case fr.DELTA:return l.logicalLevelTechnique2===fr.RLE?function(y,v,S){const C=new Int32Array(S);let j=0,R=0;for(let L=0;L<v;L++){const V=y[L],G=vd(y[L+v]);for(let H=0;H<V;H++)R+=G,C[j++]=R}return C}(i,l.runs,l.numRleValues):(function(y){y[0]=y[0]>>>1^-(1&y[0]);const v=y.length/4*4;let S=1;if(v>=4)for(;S<v-4;S+=4){const C=y[S],j=y[S+1],R=y[S+2],L=y[S+3];y[S]=(C>>>1^-(1&C))+y[S-1],y[S+1]=(j>>>1^-(1&j))+y[S],y[S+2]=(R>>>1^-(1&R))+y[S+1],y[S+3]=(L>>>1^-(1&L))+y[S+2]}for(;S!=y.length;++S)y[S]=(y[S]>>>1^-(1&y[S]))+y[S-1]}(i),i);case fr.RLE:return function(y,v,S){return S?function(C,j,R){const L=new Int32Array(R);let V=0;for(let G=0;G<j;G++){const H=C[G];let Y=C[G+j];Y=Y>>>1^-(1&Y),L.fill(Y,V,V+H),V+=H}return L}(y,v.runs,v.numRleValues):Cj(y,v.runs,v.numRleValues)}(i,l,p);case fr.MORTON:return S1(i),i;case fr.COMPONENTWISE_DELTA:return m?(function(y,v,S,C){let j=y[0]>>>1^-(1&y[0]),R=y[1]>>>1^-(1&y[1]);y[0]=Rc(Math.round(j*v),S,C),y[1]=Rc(Math.round(R*v),S,C);const L=y.length/16;let V=2;if(L>=4)for(;V<L-4;V+=4){const G=y[V],H=y[V+1],Y=(G>>>1^-(1&G))+j,J=(H>>>1^-(1&H))+R;y[V]=Rc(Math.round(Y*v),S,C),y[V+1]=Rc(Math.round(J*v),S,C);const ne=y[V+2],fe=y[V+3];j=(ne>>>1^-(1&ne))+Y,R=(fe>>>1^-(1&fe))+J,y[V+2]=Rc(Math.round(j*v),S,C),y[V+3]=Rc(Math.round(R*v),S,C)}for(;V!=y.length;V+=2)j+=y[V]>>>1^-(1&y[V]),R+=y[V+1]>>>1^-(1&y[V+1]),y[V]=Rc(Math.round(j*v),S,C),y[V+1]=Rc(Math.round(R*v),S,C)}(i,m.scale,m.min,m.max),i):(jj(i),i);case fr.NONE:return p&&function(y){for(let v=0;v<y.length;v++){const S=y[v];y[v]=S>>>1^-(1&S)}}(i),i;default:throw new Error(`The specified Logical level technique is not supported: ${l.logicalLevelTechnique1}`)}}static decodeLongBuffer(i,l,p){switch(l.logicalLevelTechnique1){case fr.DELTA:return l.logicalLevelTechnique2===fr.RLE?function(m,y,v){const S=new BigInt64Array(v);let C=0,j=0n;for(let R=0;R<y;R++){const L=Number(m[R]),V=cp(m[R+y]);for(let G=0;G<L;G++)j+=V,S[C++]=j}return S}(i,l.runs,l.numRleValues):(function(m){m[0]=m[0]>>1n^-(1n&m[0]);const y=m.length/4*4;let v=1;if(y>=4)for(;v<y-4;v+=4){const S=m[v],C=m[v+1],j=m[v+2],R=m[v+3];m[v]=(S>>1n^-(1n&S))+m[v-1],m[v+1]=(C>>1n^-(1n&C))+m[v],m[v+2]=(j>>1n^-(1n&j))+m[v+1],m[v+3]=(R>>1n^-(1n&R))+m[v+2]}for(;v!=m.length;++v)m[v]=(m[v]>>1n^-(1n&m[v]))+m[v-1]}(i),i);case fr.RLE:return function(m,y,v){return v?function(S,C,j){const R=new BigInt64Array(j);let L=0;for(let V=0;V<C;V++){const G=Number(S[V]);let H=S[V+C];H=H>>1n^-(1n&H),R.fill(H,L,L+G),L+=G}return R}(m,y.runs,y.numRleValues):Pj(m,y.runs,y.numRleValues)}(i,l,p);case fr.NONE:return p&&function(m){for(let y=0;y<m.length;y++){const v=m[y];m[y]=v>>1n^-(1n&v)}}(i),i;default:throw new Error(`The specified Logical level technique is not supported: ${l.logicalLevelTechnique1}`)}}static decodeFloat64Buffer(i,l,p){switch(l.logicalLevelTechnique1){case fr.DELTA:return l.logicalLevelTechnique2===fr.RLE&&(i=Ej(i,l.runs,l.numRleValues)),function(m){m[0]=m[0]%2==1?(m[0]+1)/-2:m[0]/2;const y=m.length/4*4;let v=1;if(y>=4)for(;v<y-4;v+=4){const S=m[v],C=m[v+1],j=m[v+2],R=m[v+3];m[v]=(S%2==1?(S+1)/-2:S/2)+m[v-1],m[v+1]=(C%2==1?(C+1)/-2:C/2)+m[v],m[v+2]=(j%2==1?(j+1)/-2:j/2)+m[v+1],m[v+3]=(R%2==1?(R+1)/-2:R/2)+m[v+2]}for(;v!=m.length;++v)m[v]=(m[v]%2==1?(m[v]+1)/-2:m[v]/2)+m[v-1]}(i),i;case fr.RLE:return function(m,y,v){return v?function(S,C,j){const R=new Float64Array(j);let L=0;for(let V=0;V<C;V++){const G=S[V];let H=S[V+C];H=H%2==1?(H+1)/-2:H/2,R.fill(H,L,L+G),L+=G}return R}(m,y.runs,y.numRleValues):Ej(m,y.runs,y.numRleValues)}(i,l,p);case fr.NONE:return p&&function(m){for(let y=0;y<m.length;y++){const v=m[y];m[y]=v%2==1?(v+1)/-2:v/2}}(i),i;default:throw new Error(`The specified Logical level technique is not supported: ${l.logicalLevelTechnique1}`)}}static decodeLengthToOffsetBuffer(i,l){if(l.logicalLevelTechnique1===fr.DELTA&&l.logicalLevelTechnique2===fr.NONE)return function(p){const m=new Int32Array(p.length+1);m[0]=0,m[1]=vd(p[0]);let y=m[1],v=2;for(;v!=m.length;++v){const S=p[v-1];y+=S>>>1^-(1&S),m[v]=m[v-1]+y}return m}(i);if(l.logicalLevelTechnique1===fr.RLE&&l.logicalLevelTechnique2===fr.NONE)return function(p,m,y){const v=new Int32Array(y+1);v[0]=0;let S=1,C=v[0];for(let j=0;j<m;j++){const R=p[j],L=p[j+m];for(let V=S;V<S+R;V++)v[V]=L+C,C=v[V];S+=R}return v}(i,l.runs,l.numRleValues);if(l.logicalLevelTechnique1===fr.NONE&&l.logicalLevelTechnique2===fr.NONE){(function(m){let y=0;for(let v=0;v<m.length;v++)m[v]+=y,y=m[v]})(i);const p=new Int32Array(l.numValues+1);return p[0]=0,p.set(i,1),p}if(l.logicalLevelTechnique1===fr.DELTA&&l.logicalLevelTechnique2===fr.RLE){const p=function(m,y,v){const S=new Int32Array(v+1);S[0]=0;let C=1,j=S[0];for(let R=0;R<y;R++){const L=m[R];let V=m[R+y];V=V>>>1^-(1&V);for(let G=C;G<C+L;G++)S[G]=V+j,j=S[G];C+=L}return S}(i,l.runs,l.numRleValues);return S1(p),p}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")}static decodeNullableIntStream(i,l,p,m,y){const v=p.physicalLevelTechnique===Ll.FAST_PFOR?kj():Qn(i,l,p.numValues);return this.decodeNullableIntBuffer(v,p,m,y)}static decodeNullableLongStream(i,l,p,m,y){const v=Hv(i,l,p.numValues);return this.decodeNullableLongBuffer(v,p,m,y)}static decodeNullableIntBuffer(i,l,p,m){switch(l.logicalLevelTechnique1){case fr.DELTA:return l.logicalLevelTechnique2===fr.RLE&&(i=Cj(i,l.runs,l.numRleValues)),function(y,v){const S=new Int32Array(y.size());let C=0;y.get(0)?(S[0]=y.get(0)?v[0]>>>1^-(1&v[0]):0,C=1):S[0]=0;let j=1;for(;j!=S.length;++j)S[j]=y.get(j)?S[j-1]+(v[C]>>>1^-(1&v[C++])):S[j-1];return S}(m,i);case fr.RLE:return function(y,v,S,C){const j=v;return S?function(R,L,V){const G=new Int32Array(R.size());let H=0;for(let Y=0;Y<V;Y++){const J=L[Y];let ne=L[Y+V];ne=ne>>>1^-(1&ne);for(let fe=H;fe<H+J;fe++)R.get(fe)?G[fe]=ne:(G[fe]=0,H++);H+=J}return G}(C,y,j.runs):function(R,L,V){const G=new Int32Array(R.size());let H=0;for(let Y=0;Y<V;Y++){const J=L[Y],ne=L[Y+V];for(let fe=H;fe<H+J;fe++)R.get(fe)?G[fe]=ne:(G[fe]=0,H++);H+=J}return G}(C,y,j.runs)}(i,l,p,m);case fr.MORTON:return S1(i),i;case fr.COMPONENTWISE_DELTA:return jj(i),i;case fr.NONE:return i=p?function(y,v){const S=new Int32Array(y.size());let C=0,j=0;for(;j!=S.length;++j)if(y.get(j)){const R=v[C++];S[j]=R>>>1^-(1&R)}else S[j]=0;return S}(m,i):function(y,v){const S=new Int32Array(y.size());let C=0,j=0;for(;j!=S.length;++j)S[j]=y.get(j)?v[C++]:0;return S}(m,i),i;default:throw new Error("The specified Logical level technique is not supported")}}static decodeNullableLongBuffer(i,l,p,m){switch(l.logicalLevelTechnique1){case fr.DELTA:return l.logicalLevelTechnique2===fr.RLE&&(i=Pj(i,l.runs,l.numRleValues)),function(y,v){const S=new BigInt64Array(y.size());let C=0;y.get(0)?(S[0]=y.get(0)?v[0]>>1n^-(1n&v[0]):0n,C=1):S[0]=0n;let j=1;for(;j!=S.length;++j)S[j]=y.get(j)?S[j-1]+(v[C]>>1n^-(1n&v[C++])):S[j-1];return S}(m,i);case fr.RLE:return function(y,v,S,C){const j=v;return S?function(R,L,V){const G=new BigInt64Array(R.size());let H=0;for(let Y=0;Y<V;Y++){const J=Number(L[Y]);let ne=L[Y+V];ne=ne>>1n^-(1n&ne);for(let fe=H;fe<H+J;fe++)R.get(fe)?G[fe]=ne:(G[fe]=0n,H++);H+=J}return G}(C,y,j.runs):function(R,L,V){const G=new BigInt64Array(R.size());let H=0;for(let Y=0;Y<V;Y++){const J=Number(L[Y]),ne=L[Y+V];for(let fe=H;fe<H+J;fe++)R.get(fe)?G[fe]=ne:(G[fe]=0n,H++);H+=J}return G}(C,y,j.runs)}(i,l,p,m);case fr.NONE:return i=p?function(y,v){const S=new BigInt64Array(y.size());let C=0,j=0;for(;j!=S.length;++j)if(y.get(j)){const R=v[C++];S[j]=R>>1n^-(1n&R)}else S[j]=0n;return S}(m,i):function(y,v){const S=new BigInt64Array(y.size());let C=0,j=0;for(;j!=S.length;++j)S[j]=y.get(j)?v[C++]:0n;return S}(m,i),i;default:throw new Error("The specified Logical level technique is not supported")}}static getVectorType(i,l,p,m){const y=i.logicalLevelTechnique1;if(y===fr.RLE)return i.runs===1?oi.CONST:oi.FLAT;const v=l instanceof to?l.size():l;if(y===fr.DELTA&&i.logicalLevelTechnique2===fr.RLE){const S=i.runs,C=2;if(i.numRleValues!==v)return oi.FLAT;if(S===1)return oi.SEQUENCE;if(S===2){const j=m.get();let R;if(i.physicalLevelTechnique===Ll.VARINT)R=Qn(p,m,4);else{const L=m.get();R=new Int32Array(p.buffer,p.byteOffset+L,4)}if(m.set(j),R[2]===C&&R[3]===C)return oi.SEQUENCE}}return i.numValues===1?oi.CONST:oi.FLAT}}class Aj extends Gv{getValueFromBuffer(i){return this.dataBuffer[i]}}class Mj extends Sj{constructor(i,l,p,m){super(i,BigInt64Array.of(l),p,m)}getValueFromBuffer(i){return this.dataBuffer[0]+BigInt(i)*this.delta}}class up{constructor(i,l,p){It(this,"_geometryOffsets");It(this,"_partOffsets");It(this,"_ringOffsets");this._geometryOffsets=i,this._partOffsets=l,this._ringOffsets=p}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}class MV{constructor(i,l){It(this,"tileExtent");It(this,"_numBits");It(this,"_coordinateShift");It(this,"minBound");It(this,"maxBound");this._coordinateShift=i<0?Math.abs(i):0,this.tileExtent=l+this._coordinateShift,this._numBits=Math.ceil(Math.log2(this.tileExtent)),this.minBound=i,this.maxBound=l}validateCoordinates(i){if(i.x<this.minBound||i.y<this.minBound||i.x>this.maxBound||i.y>this.maxBound)throw new Error("The specified tile buffer size is currently not supported.")}numBits(){return this._numBits}coordinateShift(){return this._coordinateShift}}class dp extends MV{encode(i){this.validateCoordinates(i);const l=i.x+this._coordinateShift,p=i.y+this._coordinateShift;let m=0;for(let y=0;y<this._numBits;y++)m|=(l&1<<y)<<y|(p&1<<y)<<y+1;return m}decode(i){return{x:this.decodeMorton(i)-this._coordinateShift,y:this.decodeMorton(i>>1)-this._coordinateShift}}decodeMorton(i){let l=0;for(let p=0;p<this._numBits;p++)l|=(i&1<<2*p)>>p;return l}static decode(i,l,p){return{x:dp.decodeMorton(i,l)-p,y:dp.decodeMorton(i>>1,l)-p}}static decodeMorton(i,l){let p=0;for(let m=0;m<l;m++)p|=(i&1<<2*m)>>m;return p}}(function(c){c[c.POINT=0]="POINT",c[c.LINESTRING=1]="LINESTRING",c[c.POLYGON=2]="POLYGON",c[c.MULTIPOINT=3]="MULTIPOINT",c[c.MULTILINESTRING=4]="MULTILINESTRING",c[c.MULTIPOLYGON=5]="MULTIPOLYGON"})(li||(li={})),function(c){c[c.POINT=0]="POINT",c[c.LINESTRING=1]="LINESTRING",c[c.POLYGON=2]="POLYGON"}(Tj||(Tj={})),function(c){c[c.MORTON=0]="MORTON",c[c.VEC_2=1]="VEC_2",c[c.VEC_3=2]="VEC_3"}(aa||(aa={}));class NV{createPoint(i){return[[i]]}createMultiPoint(i){return i.map(l=>[l])}createLineString(i){return[i]}createMultiLineString(i){return i}createPolygon(i,l){return[i,...l]}createMultiPolygon(i){return i.flat()}}function Nj(c){const i=new Array(c.numGeometries);let l=1,p=1,m=1,y=0;const v=new NV;let S=0,C=0;const j=c.mortonSettings,R=c.topologyVector,L=R.geometryOffsets,V=R.partOffsets,G=R.ringOffsets,H=c.vertexOffsets,Y=c.containsPolygonGeometry(),J=c.vertexBuffer;for(let ne=0;ne<c.numGeometries;ne++){const fe=c.geometryType(ne);if(fe===li.POINT){if(H&&H.length!==0)if(c.vertexBufferType===aa.VEC_2){const ae=2*H[C++],ue=new _(J[ae],J[ae+1]);i[y++]=v.createPoint(ue)}else{const ae=H[C++],ue=dp.decode(J[ae],j.numBits,j.coordinateShift),Ce=new _(ue.x,ue.y);i[y++]=v.createPoint(Ce)}else{const ae=new _(J[S++],J[S++]);i[y++]=v.createPoint(ae)}L&&m++,V&&l++,G&&p++}else if(fe===li.MULTIPOINT){const ae=L[m]-L[m-1];m++;const ue=new Array(ae);if(H&&H.length!==0){for(let Ce=0;Ce<ae;Ce++){const Pe=2*H[C++];ue[Ce]=new _(J[Pe],J[Pe+1])}i[y++]=v.createMultiPoint(ue)}else{for(let Ce=0;Ce<ae;Ce++){const Pe=J[S++],$e=J[S++];ue[Ce]=new _(Pe,$e)}i[y++]=v.createMultiPoint(ue)}}else if(fe===li.LINESTRING){let ae,ue=0;Y?(ue=G[p]-G[p-1],p++):ue=V[l]-V[l-1],l++,H&&H.length!==0?(ae=c.vertexBufferType===aa.VEC_2?k1(J,H,C,ue,!1):C1(J,H,C,ue,!1,j),C+=ue):(ae=T1(J,S,ue,!1),S+=2*ue),i[y++]=v.createLineString(ae),L&&m++}else if(fe===li.POLYGON){const ae=V[l]-V[l-1];l++;const ue=new Array(ae-1);let Ce=G[p]-G[p-1];if(p++,H&&H.length!==0){const Pe=c.vertexBufferType===aa.VEC_2?Yv(J,H,C,Ce):Qv(J,H,C,Ce,0,j);C+=Ce;for(let $e=0;$e<ue.length;$e++)Ce=G[p]-G[p-1],p++,ue[$e]=c.vertexBufferType===aa.VEC_2?Yv(J,H,C,Ce):Qv(J,H,C,Ce,0,j),C+=Ce;i[y++]=v.createPolygon(Pe,ue)}else{const Pe=Kv(J,S,Ce);S+=2*Ce;for(let $e=0;$e<ue.length;$e++)Ce=G[p]-G[p-1],p++,ue[$e]=Kv(J,S,Ce),S+=2*Ce;i[y++]=v.createPolygon(Pe,ue)}L&&m++}else if(fe===li.MULTILINESTRING){const ae=L[m]-L[m-1];m++;const ue=new Array(ae);if(H&&H.length!==0){for(let Ce=0;Ce<ae;Ce++){let Pe=0;Y?(Pe=G[p]-G[p-1],p++):Pe=V[l]-V[l-1],l++;const $e=c.vertexBufferType===aa.VEC_2?k1(J,H,C,Pe,!1):C1(J,H,C,Pe,!1,j);ue[Ce]=$e,C+=Pe}i[y++]=v.createMultiLineString(ue)}else{for(let Ce=0;Ce<ae;Ce++){let Pe=0;Y?(Pe=G[p]-G[p-1],p++):Pe=V[l]-V[l-1],l++,ue[Ce]=T1(J,S,Pe,!1),S+=2*Pe}i[y++]=v.createMultiLineString(ue)}}else{if(fe!==li.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const ae=L[m]-L[m-1];m++;const ue=new Array(ae);let Ce=0;if(H&&H.length!==0){for(let Pe=0;Pe<ae;Pe++){const $e=V[l]-V[l-1];l++;const Je=new Array($e-1);Ce=G[p]-G[p-1],p++;const Ze=c.vertexBufferType===aa.VEC_2?Yv(J,H,C,Ce):Qv(J,H,C,Ce,0,j);C+=Ce;for(let et=0;et<Je.length;et++)Ce=G[p]-G[p-1],p++,Je[et]=c.vertexBufferType===aa.VEC_2?Yv(J,H,C,Ce):Qv(J,H,C,Ce,0,j),C+=Ce;ue[Pe]=v.createPolygon(Ze,Je)}i[y++]=v.createMultiPolygon(ue)}else{for(let Pe=0;Pe<ae;Pe++){const $e=V[l]-V[l-1];l++;const Je=new Array($e-1);Ce=G[p]-G[p-1],p++;const Ze=Kv(J,S,Ce);S+=2*Ce;for(let et=0;et<Je.length;et++){const gt=G[p]-G[p-1];p++,Je[et]=Kv(J,S,gt),S+=2*gt}ue[Pe]=v.createPolygon(Ze,Je)}i[y++]=v.createMultiPolygon(ue)}}}}return i}function Kv(c,i,l){return T1(c,i,l,!0)}function Yv(c,i,l,p){return k1(c,i,l,p,!0)}function Qv(c,i,l,p,m,y){return C1(c,i,l,p,!0,y)}function T1(c,i,l,p){const m=new Array(p?l+1:l);for(let y=0;y<2*l;y+=2)m[y/2]=new _(c[i+y],c[i+y+1]);return p&&(m[m.length-1]=m[0]),m}function k1(c,i,l,p,m){const y=new Array(m?p+1:p);for(let v=0;v<2*p;v+=2){const S=2*i[l+v/2];y[v/2]=new _(c[S],c[S+1])}return m&&(y[y.length-1]=y[0]),y}function C1(c,i,l,p,m,y){const v=new Array(m?p+1:p);for(let S=0;S<p;S++){const C=dp.decode(c[i[l+S]],y.numBits,y.coordinateShift);v[S]=new _(C.x,C.y)}return m&&(v[v.length-1]=v[0]),v}class Ij{constructor(i,l,p,m,y){It(this,"_vertexBufferType");It(this,"_topologyVector");It(this,"_vertexOffsets");It(this,"_vertexBuffer");It(this,"_mortonSettings");this._vertexBufferType=i,this._topologyVector=l,this._vertexOffsets=p,this._vertexBuffer=m,this._mortonSettings=y}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const i=Nj(this);let l=0;for(;l<this.numGeometries;)yield{coordinates:i[l],type:this.geometryType(l)},l++}getSimpleEncodedVertex(i){const l=this.vertexOffsets?2*this.vertexOffsets[i]:2*i;return[this.vertexBuffer[l],this.vertexBuffer[l+1]]}getVertex(i){if(this.vertexOffsets&&this.mortonSettings){const p=dp.decode(this.vertexBuffer[this.vertexOffsets[i]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[p.x,p.y]}const l=this.vertexOffsets?2*this.vertexOffsets[i]:2*i;return[this.vertexBuffer[l],this.vertexBuffer[l+1]]}getGeometries(){return Nj(this)}get mortonSettings(){return this._mortonSettings}}class mg extends Ij{constructor(l,p,m,y,v,S,C){super(m,y,v,S,C);It(this,"_numGeometries");It(this,"_geometryType");this._numGeometries=l,this._geometryType=p}static createMortonEncoded(l,p,m,y,v,S){return new mg(l,p,aa.MORTON,m,y,v,S)}static create(l,p,m,y,v){return new mg(l,p,aa.VEC_2,m,y,v)}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===li.POLYGON||this._geometryType===li.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class gg extends Ij{constructor(l,p,m,y,v,S){super(l,m,y,v,S);It(this,"_geometryTypes");this._geometryTypes=p}static createMortonEncoded(l,p,m,y,v){return new gg(aa.MORTON,l,p,m,y,v)}static create(l,p,m,y){return new gg(aa.VEC_2,l,p,m,y)}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let l=0;l<this.numGeometries;l++)if(this.geometryType(l)===li.POLYGON||this.geometryType(l)===li.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Rj{constructor(i,l,p,m){It(this,"_triangleOffsets");It(this,"_indexBuffer");It(this,"_vertexBuffer");It(this,"_topologyVector");this._triangleOffsets=i,this._indexBuffer=l,this._vertexBuffer=p,this._topologyVector=m}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const i=new Array(this.numGeometries),l=this._topologyVector,p=l.partOffsets,m=l.ringOffsets,y=l.geometryOffsets;let v=0,S=1,C=1,j=1;for(let R=0;R<this.numGeometries;R++)switch(this.geometryType(R)){case li.POLYGON:{const L=p[S]-p[S-1];S++;const V=[];for(let G=0;G<L;G++){const H=m[C]-m[C-1];C++;const Y=[];for(let J=0;J<H;J++){const ne=this._vertexBuffer[v++],fe=this._vertexBuffer[v++];Y.push(new _(ne,fe))}Y.length>0&&Y.push(Y[0]),V.push(Y)}i[R]=V,y&&j++}break;case li.MULTIPOLYGON:{const L=y[j]-y[j-1];j++;const V=[];for(let G=0;G<L;G++){const H=p[S]-p[S-1];S++;for(let Y=0;Y<H;Y++){const J=m[C]-m[C-1];C++;const ne=[];for(let fe=0;fe<J;fe++){const ae=this._vertexBuffer[v++],ue=this._vertexBuffer[v++];ne.push(new _(ae,ue))}ne.length>0&&ne.push(ne[0]),V.push(ne)}}i[R]=V}}return i}[Symbol.iterator](){return null}}class Xv extends Rj{constructor(l,p,m,y,v,S){super(m,y,v,S);It(this,"_numGeometries");It(this,"_geometryType");this._numGeometries=l,this._geometryType=p}static create(l,p,m,y,v,S){return new Xv(l,p,m,y,v,S)}geometryType(l){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}class Jv extends Rj{constructor(l,p,m,y,v){super(p,m,y,v);It(this,"_geometryTypes");this._geometryTypes=l}static create(l,p,m,y,v){return new Jv(l,p,m,y,v)}geometryType(l){return this._geometryTypes[l]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function IV(c,i,l,p,m){const y=Ki.decode(c,l);let v=null,S=null,C=null,j=null,R=null,L=null,V=null,G=null;if(Jt.getVectorType(y,p,c,l)===oi.CONST){const Y=Jt.decodeConstIntStream(c,l,y,!1);for(let J=0;J<i-1;J++){const ne=Ki.decode(c,l);switch(ne.physicalStreamType){case Li.LENGTH:switch(ne.logicalStreamType.lengthType){case Bs.GEOMETRIES:v=Jt.decodeLengthStreamToOffsetBuffer(c,l,ne);break;case Bs.PARTS:S=Jt.decodeLengthStreamToOffsetBuffer(c,l,ne);break;case Bs.RINGS:C=Jt.decodeLengthStreamToOffsetBuffer(c,l,ne);break;case Bs.TRIANGLES:V=Jt.decodeLengthStreamToOffsetBuffer(c,l,ne)}break;case Li.OFFSET:switch(ne.logicalStreamType.offsetType){case xd.VERTEX:j=Jt.decodeIntStream(c,l,ne,!1);break;case xd.INDEX:G=Jt.decodeIntStream(c,l,ne,!1)}break;case Li.DATA:if(eo.VERTEX===ne.logicalStreamType.dictionaryType)R=Jt.decodeIntStream(c,l,ne,!0,m);else{const fe=ne;L={numBits:fe.numBits(),coordinateShift:fe.coordinateShift()},R=Jt.decodeIntStream(c,l,ne,!1,m)}}}if(G!==null){if(v!=null||S!=null){const J=new up(v,S,C);return Xv.create(p,Y,V,G,R,J)}return Xv.create(p,Y,V,G,R)}return L===null?mg.create(p,Y,new up(v,S,C),j,R):mg.createMortonEncoded(p,Y,new up(v,S,C),j,R,L)}const H=Jt.decodeIntStream(c,l,y,!1);for(let Y=0;Y<i-1;Y++){const J=Ki.decode(c,l);switch(J.physicalStreamType){case Li.LENGTH:switch(J.logicalStreamType.lengthType){case Bs.GEOMETRIES:v=Jt.decodeIntStream(c,l,J,!1);break;case Bs.PARTS:S=Jt.decodeIntStream(c,l,J,!1);break;case Bs.RINGS:C=Jt.decodeIntStream(c,l,J,!1);break;case Bs.TRIANGLES:V=Jt.decodeLengthStreamToOffsetBuffer(c,l,J)}break;case Li.OFFSET:switch(J.logicalStreamType.offsetType){case xd.VERTEX:j=Jt.decodeIntStream(c,l,J,!1);break;case xd.INDEX:G=Jt.decodeIntStream(c,l,J,!1)}break;case Li.DATA:if(eo.VERTEX===J.logicalStreamType.dictionaryType)R=Jt.decodeIntStream(c,l,J,!0,m);else{const ne=J;L={numBits:ne.numBits(),coordinateShift:ne.coordinateShift()},R=Jt.decodeIntStream(c,l,J,!1,m)}}}return G!==null&&S===null?Jv.create(H,V,G,R):(v!==null?(v=P1(H,v,2),S!==null&&C!==null?(S=Dj(H,v,S,!1),C=function(Y,J,ne,fe){const ae=new Int32Array(ne[ne.length-1]+1);let ue=0;ae[0]=ue;let Ce=1,Pe=1,$e=0;for(let Je=0;Je<Y.length;Je++){const Ze=Y[Je],et=J[Je+1]-J[Je];if(Ze!==0&&Ze!==3)for(let gt=0;gt<et;gt++){const ot=ne[Ce]-ne[Ce-1];Ce++;for(let lt=0;lt<ot;lt++)ue=ae[Pe++]=ue+fe[$e++]}else for(let gt=0;gt<et;gt++)ae[Pe++]=++ue,Ce++}return ae}(H,v,S,C)):S!==null&&(S=function(Y,J,ne){const fe=new Int32Array(J[J.length-1]+1);let ae=0;fe[0]=ae;let ue=1,Ce=0;for(let Pe=0;Pe<Y.length;Pe++){const $e=Y[Pe],Je=J[Pe+1]-J[Pe];if($e===4||$e===1)for(let Ze=0;Ze<Je;Ze++)ae=fe[ue++]=ae+ne[Ce++];else for(let Ze=0;Ze<Je;Ze++)fe[ue++]=++ae}return fe}(H,v,S))):S!==null&&C!==null?(S=P1(H,S,1),C=Dj(H,S,C,!0)):S!==null&&(S=P1(H,S,0)),G!==null?Jv.create(H,V,G,R,new up(v,S,C)):L===null?gg.create(H,new up(v,S,C),j,R):gg.createMortonEncoded(H,new up(v,S,C),j,R,L))}function P1(c,i,l){const p=new Int32Array(c.length+1);let m=0;p[0]=m;let y=0;for(let v=0;v<c.length;v++)m=p[v+1]=m+(c[v]>l?i[y++]:1);return p}function Dj(c,i,l,p){const m=new Int32Array(i[i.length-1]+1);let y=0;m[0]=y;let v=1,S=0;for(let C=0;C<c.length;C++){const j=c[C],R=i[C+1]-i[C];if(j===5||j===2||p&&(j===4||j===1))for(let L=0;L<R;L++)y=m[v++]=y+l[S++];else for(let L=0;L<R;L++)m[v++]=++y}return m}class RV extends lp{constructor(l,p,m){super(l,p.getBuffer(),m);It(this,"dataVector");this.dataVector=p}getValueFromBuffer(l){return this.dataVector.get(l)}}class DV extends Gv{getValueFromBuffer(i){return this.dataBuffer[i]}}class Oj extends lp{constructor(i,l,p){super(i,BigInt64Array.of(l),p)}getValueFromBuffer(i){return this.dataBuffer[0]}}function OV(c,i,l){for(let p=0;p<c;p++){const m=Ki.decode(i,l);l.add(m.byteLength)}}function yg(c,i,l){return Lj(c,Math.ceil(i/8),l)}function Lj(c,i,l){const p=new Uint8Array(i);let m=0;for(;m<i;){const y=c[l.increment()];if(y<=127){const v=y+3,S=c[l.increment()],C=m+v;p.fill(S,m,C),m=C}else{const v=256-y;for(let S=0;S<v;S++)p[m++]=c[l.increment()]}}return p}const LV=new TextDecoder;function E1(c,i,l){return l-i>=12?LV.decode(c.subarray(i,l)):function(p,m,y){let v="",S=m;for(;S<y;){const C=p[S];let j,R,L,V=null,G=C>239?4:C>223?3:C>191?2:1;if(S+G>y)break;G===1?C<128&&(V=C):G===2?(j=p[S+1],(192&j)==128&&(V=(31&C)<<6|63&j,V<=127&&(V=null))):G===3?(j=p[S+1],R=p[S+2],(192&j)==128&&(192&R)==128&&(V=(15&C)<<12|(63&j)<<6|63&R,(V<=2047||V>=55296&&V<=57343)&&(V=null))):G===4&&(j=p[S+1],R=p[S+2],L=p[S+3],(192&j)==128&&(192&R)==128&&(192&L)==128&&(V=(15&C)<<18|(63&j)<<12|(63&R)<<6|63&L,(V<=65535||V>=1114112)&&(V=null))),V===null?(V=65533,G=1):V>65535&&(V-=65536,v+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),v+=String.fromCharCode(V),S+=G}return v}(c,i,l)}class j1 extends lp{constructor(l,p,m,y){super(l,m,y);It(this,"offsetBuffer");this.offsetBuffer=p}}class Fj extends j1{constructor(l,p,m,y){super(l,p,m,y??p.length-1);It(this,"textEncoder");this.textEncoder=new TextEncoder}getValueFromBuffer(l){return E1(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class hp extends j1{constructor(l,p,m,y,v){super(l,m,y,v??p.length);It(this,"indexBuffer");It(this,"textEncoder");this.indexBuffer=p,this.indexBuffer=p,this.textEncoder=new TextEncoder}getValueFromBuffer(l){const p=this.indexBuffer[l];return E1(this.dataBuffer,this.offsetBuffer[p],this.offsetBuffer[p+1])}}class zj extends j1{constructor(l,p,m,y,v,S,C){super(l,m,y,C);It(this,"indexBuffer");It(this,"symbolOffsetBuffer");It(this,"symbolTableBuffer");It(this,"textEncoder");It(this,"symbolLengthBuffer");It(this,"lengthBuffer");It(this,"decodedDictionary");this.indexBuffer=p,this.symbolOffsetBuffer=v,this.symbolTableBuffer=S,this.textEncoder=new TextEncoder}getValueFromBuffer(l){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=function(m,y,v){const S=[],C=new Array(y.length).fill(0);for(let j=1;j<y.length;j++)C[j]=C[j-1]+y[j-1];for(let j=0;j<v.length;j++)if(v[j]===255)S.push(v[++j]);else{const R=y[v[j]],L=C[v[j]];for(let V=0;V<R;V++)S.push(m[L+V])}return new Uint8Array(S)}(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const p=this.indexBuffer[l];return E1(this.decodedDictionary,this.offsetBuffer[p],this.offsetBuffer[p+1])}offsetToLengthBuffer(l){const p=new Uint32Array(l.length-1);let m=l[0];for(let y=1;y<l.length;y++){const v=l[y];p[y-1]=v-m,m=v}return p}}const fp=class fp{constructor(){}static decode(i,l,p,m,y){let v=null,S=null,C=null,j=null,R=null,L=null,V=null,G=null;for(let H=0;H<m;H++){const Y=Ki.decode(l,p);if(Y.byteLength!==0)switch(Y.physicalStreamType){case Li.PRESENT:{const J=yg(l,Y.numValues,p);L=new to(J,Y.numValues);break}case Li.OFFSET:S=y!=null||L!=null?Jt.decodeNullableIntStream(l,p,Y,!1,y??L):Jt.decodeIntStream(l,p,Y,!1);break;case Li.LENGTH:{const J=Jt.decodeLengthStreamToOffsetBuffer(l,p,Y);Bs.DICTIONARY===Y.logicalStreamType.lengthType?v=J:Bs.SYMBOL===Y.logicalStreamType.lengthType?j=J:V=J;break}case Li.DATA:{const J=l.subarray(p.get(),p.get()+Y.byteLength);p.add(Y.byteLength);const ne=Y.logicalStreamType.dictionaryType;eo.FSST===ne?R=J:eo.SINGLE===ne||eo.SHARED===ne?C=J:eo.NONE===ne&&(G=J);break}}}return this.decodeFsstDictionaryVector(i,R,S,v,C,j,y??L)??this.decodeDictionaryVector(i,C,S,v,y??L)??this.decodePlainStringVector(i,V,G,S,y??L)}static decodeFsstDictionaryVector(i,l,p,m,y,v,S){return l?new zj(i,p,m,y,v,l,S):null}static decodeDictionaryVector(i,l,p,m,y){return l?y?new hp(i,p,m,l,y):new hp(i,p,m,l):null}static decodePlainStringVector(i,l,p,m,y){if(!l||!p)return null;if(m)return y?new hp(i,m,l,p,y):new hp(i,m,l,p);if(y&&y.size()!==l.length-1){const v=new Int32Array(y.size());let S=0;for(let C=0;C<y.size();C++)v[C]=y.get(C)?S++:0;return new hp(i,v,l,p,y)}return y?new Fj(i,l,p,y):new Fj(i,l,p)}static decodeSharedDictionary(i,l,p,m,y){let v=null,S=null,C=null,j=null,R=!1;for(;!R;){const H=Ki.decode(i,l);switch(H.physicalStreamType){case Li.LENGTH:Bs.DICTIONARY===H.logicalStreamType.lengthType?v=Jt.decodeLengthStreamToOffsetBuffer(i,l,H):C=Jt.decodeLengthStreamToOffsetBuffer(i,l,H);break;case Li.DATA:eo.SINGLE===H.logicalStreamType.dictionaryType||eo.SHARED===H.logicalStreamType.dictionaryType?(S=i.subarray(l.get(),l.get()+H.byteLength),R=!0):j=i.subarray(l.get(),l.get()+H.byteLength),l.add(H.byteLength)}}const L=p.complexType.children,V=[];let G=0;for(const H of L){const Y=Qn(i,l,1)[0];if(Y==0)continue;const J=`${p.name}${H.name===fp.ROOT_COLUMN_NAME?"":fp.NESTED_COLUMN_SEPARATOR+H.name}`;if(y&&!y.has(J)){OV(Y,i,l);continue}if(Y!==2||H.type!=="scalarField"||H.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const ne=Ki.decode(i,l),fe=yg(i,ne.numValues,l),ae=Ki.decode(i,l),ue=(ae instanceof fg?ae.numRleValues:ae.numValues)!==m?Jt.decodeNullableIntStream(i,l,ae,!1,new to(fe,ne.numValues)):Jt.decodeIntStream(i,l,ae,!1);V[G++]=j?new zj(J,ue,v,S,C,j,new to(fe,ne.numValues)):new hp(J,ue,v,S,new to(fe,ne.numValues))}return V}};It(fp,"ROOT_COLUMN_NAME","default"),It(fp,"NESTED_COLUMN_SEPARATOR",":");let e0=fp;function FV(c,i,l,p,m,y){return l.type==="scalarType"?function(v,S,C,j,R,L){let V=null,G=0;if(v===0)return null;if(L.nullable){const Y=Ki.decode(S,C);G=Y.numValues;const J=C.get(),ne=yg(S,G,C);C.set(J+Y.byteLength),V=new to(ne,Y.numValues)}const H=V??j;switch(R.physicalType){case 4:case 3:return function(Y,J,ne,fe,ae){const ue=Ki.decode(Y,J),Ce=Jt.getVectorType(ue,ae,Y,J),Pe=fe.physicalType===3;if(Ce===oi.FLAT){const $e=xg(ae)?Jt.decodeNullableIntStream(Y,J,ue,Pe,ae):Jt.decodeIntStream(Y,J,ue,Pe);return new x1(ne.name,$e,ae)}if(Ce===oi.SEQUENCE){const $e=Jt.decodeSequenceIntStream(Y,J,ue);return new _1(ne.name,$e[0],$e[1],ue.numRleValues)}{const $e=Jt.decodeConstIntStream(Y,J,ue,Pe);return new b1(ne.name,$e,ae)}}(S,C,L,R,H);case 9:return e0.decode(L.name,S,C,L.nullable?v-1:v,V);case 0:return function(Y,J,ne,fe,ae){const ue=Ki.decode(Y,J),Ce=ue.numValues,Pe=J.get(),$e=xg(ae)?function(Ze,et,gt,ot){const lt=Lj(Ze,Math.ceil(et/8),gt),Ke=new to(lt,et),Mt=ot.size(),Nt=new to(new Uint8Array(Mt),Mt);let Bt=0;for(let Ct=0;Ct<ot.size();Ct++){const lr=!!ot.get(Ct)&&Ke.get(Bt++);Nt.set(Ct,lr)}return Nt.getBuffer()}(Y,Ce,J,ae):yg(Y,Ce,J);J.set(Pe+ue.byteLength);const Je=new to($e,Ce);return new RV(ne.name,Je,ae)}(S,C,L,0,H);case 6:case 5:return function(Y,J,ne,fe,ae){const ue=Ki.decode(Y,J),Ce=Jt.getVectorType(ue,fe,Y,J),Pe=ae.physicalType===5;if(Ce===oi.FLAT){const $e=xg(fe)?Jt.decodeNullableLongStream(Y,J,ue,Pe,fe):Jt.decodeLongStream(Y,J,ue,Pe);return new Aj(ne.name,$e,fe)}if(Ce===oi.SEQUENCE){const $e=Jt.decodeSequenceLongStream(Y,J,ue);return new Mj(ne.name,$e[0],$e[1],ue.numRleValues)}{const $e=Jt.decodeConstLongStream(Y,J,ue,Pe);return new Oj(ne.name,$e,fe)}}(S,C,L,H,R);case 7:return function(Y,J,ne,fe){const ae=Ki.decode(Y,J),ue=xg(fe)?function(Ce,Pe,$e,Je){const Ze=Pe.get(),et=Ze+Je*Float32Array.BYTES_PER_ELEMENT,gt=new Uint8Array(Ce.subarray(Ze,et)).buffer,ot=new Float32Array(gt);Pe.set(et);const lt=$e.size(),Ke=new Float32Array(lt);let Mt=0;for(let Nt=0;Nt<lt;Nt++)Ke[Nt]=$e.get(Nt)?ot[Mt++]:0;return Ke}(Y,J,fe,ae.numValues):function(Ce,Pe,$e){const Je=Pe.get(),Ze=Je+$e*Float32Array.BYTES_PER_ELEMENT,et=new Uint8Array(Ce.subarray(Je,Ze)).buffer,gt=new Float32Array(et);return Pe.set(Ze),gt}(Y,J,ae.numValues);return new DV(ne.name,ue,fe)}(S,C,L,H);case 8:return function(Y,J,ne,fe){const ae=Ki.decode(Y,J),ue=xg(fe)?function(Ce,Pe,$e,Je){const Ze=Pe.get(),et=Ze+Je*Float64Array.BYTES_PER_ELEMENT,gt=new Uint8Array(Ce.subarray(Ze,et)).buffer,ot=new Float64Array(gt);Pe.set(et);const lt=$e.size(),Ke=new Float64Array(lt);let Mt=0;for(let Nt=0;Nt<lt;Nt++)Ke[Nt]=$e.get(Nt)?ot[Mt++]:0;return Ke}(Y,J,fe,ae.numValues):function(Ce,Pe,$e){const Je=Pe.get(),Ze=Je+$e*Float64Array.BYTES_PER_ELEMENT,et=new Uint8Array(Ce.subarray(Je,Ze)).buffer,gt=new Float64Array(et);return Pe.set(Ze),gt}(Y,J,ae.numValues);return new v1(ne.name,ue,fe)}(S,C,L,H);default:throw new Error(`The specified data type for the field is currently not supported: ${R}`)}}(p,c,i,m,l.scalarType,l):p!=1?null:e0.decodeSharedDictionary(c,i,l,m,y)}function xg(c){return c instanceof to}class t0{static decodeColumnType(i){switch(i){case 0:case 1:case 2:case 3:{const l={};l.nullable=!!(1&i),l.columnScope=0;const p={};return p.physicalType=i>1?6:4,p.type="physicalType",l.scalarType=p,l.type="scalarType",l}case 4:{const l={nullable:!1,columnScope:0},p={type:"physicalType",physicalType:0};return l.type="complexType",l.complexType=p,l}case 30:{const l={nullable:!1,columnScope:0},p={type:"physicalType",physicalType:1};return l.type="complexType",l.complexType=p,l}default:return this.mapScalarType(i)}}static columnTypeHasName(i){return i>=10}static columnTypeHasChildren(i){return i===30}static hasStreamCount(i){if(i.name==="id")return!1;if(i.type==="scalarType"){const l=i.scalarType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(l.type==="logicalType")return!1}else if(i.type==="complexType"){const l=i.complexType;if(l.type==="physicalType")switch(l.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",i),!1}static mapScalarType(i){let l=null;switch(i){case 10:case 11:l=0;break;case 12:case 13:l=1;break;case 14:case 15:l=2;break;case 16:case 17:l=3;break;case 18:case 19:l=4;break;case 20:case 21:l=5;break;case 22:case 23:l=6;break;case 24:case 25:l=7;break;case 26:case 27:l=8;break;case 28:case 29:l=9;break;default:return null}const p={};p.nullable=!!(1&i),p.columnScope=0;const m={type:"physicalType"};return m.physicalType=l,p.type="scalarType",p.scalarType=m,p}}const zV=new TextDecoder;function Bj(c,i){const l=Qn(c,i,1)[0];if(l===0)return"";const p=i.get(),m=c.subarray(p,p+l);return i.add(l),zV.decode(m)}function Vj(c,i){const l=Qn(c,i,1)[0]>>>0,p=!!(4&l),m=!!(2&l),y=Qn(c,i,1)[0]>>>0,v={};if(1&l&&(v.nullable=!0),m){const S={};if(p?(S.type="logicalType",S.logicalType=y):(S.type="physicalType",S.physicalType=y),8&l){const C=Qn(c,i,1)[0]>>>0;S.children=new Array(C);for(let j=0;j<C;j++)S.children[j]=Vj(c,i)}v.type="complexField",v.complexField=S}else{const S={};p?(S.type="logicalType",S.logicalType=y):(S.type="physicalType",S.physicalType=y),v.type="scalarField",v.scalarField=S}return v}function BV(c,i){const l=Qn(c,i,1)[0]>>>0,p=t0.decodeColumnType(l);if(!p)throw new Error(`Unsupported column type code: ${l}`);if(t0.columnTypeHasName(l)?p.name=Bj(c,i):l>=0&&l<=3?p.name="id":l===4&&(p.name="geometry"),t0.columnTypeHasChildren(l)){const m=Qn(c,i,1)[0]>>>0,y=p.complexType;y.children=new Array(m);for(let v=0;v<m;v++)y.children[v]=Vj(c,i)}return p}function VV(c,i){const l={featureTables:[]},p={};p.name=Bj(c,i);const m=Qn(c,i,1)[0]>>>0,y=Qn(c,i,1)[0]>>>0;p.columns=new Array(y);for(let v=0;v<y;v++)p.columns[v]=BV(c,i);return l.featureTables.push(p),[l,m]}function $V(c,i,l,p,m,y,v=!1){const S=i.scalarType.physicalType,C=Jt.getVectorType(m,y,c,l);if(S===4)switch(C){case oi.FLAT:{const j=Jt.decodeIntStream(c,l,m,!1);return new x1(p,j,y)}case oi.SEQUENCE:{const j=Jt.decodeSequenceIntStream(c,l,m);return new _1(p,j[0],j[1],m.numRleValues)}case oi.CONST:{const j=Jt.decodeConstIntStream(c,l,m,!1);return new b1(p,j,y)}}else switch(C){case oi.FLAT:{if(v){const R=Jt.decodeLongFloat64Stream(c,l,m,!1);return new v1(p,R,y)}const j=Jt.decodeLongStream(c,l,m,!1);return new Aj(p,j,y)}case oi.SEQUENCE:{const j=Jt.decodeSequenceLongStream(c,l,m);return new Mj(p,j[0],j[1],m.numRleValues)}case oi.CONST:{const j=Jt.decodeConstLongStream(c,l,m,!1);return new Oj(p,j,y)}}throw new Error("Vector type not supported for id column.")}class UV{constructor(i,l){var p;switch(this._featureData=i,this.properties=this._featureData.properties||{},(p=this._featureData.geometry)===null||p===void 0?void 0:p.type){case li.POINT:case li.MULTIPOINT:this.type=1;break;case li.LINESTRING:case li.MULTILINESTRING:this.type=2;break;case li.POLYGON:case li.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=l,this.id=Number(this._featureData.id)}projectPoint(i,l,p,m){return[360*(i.x+l)/m-180,360/Math.PI*Math.atan(Math.exp((1-2*(i.y+p)/m)*Math.PI))-90]}projectLine(i,l,p,m){return i.map(y=>this.projectPoint(y,l,p,m))}toGeoJSON(i,l,p){const m=this.extent*Math.pow(2,p),y=this.extent*i,v=this.extent*l,S=this.loadGeometry();let C;switch(this.type){case 1:{const R=[];for(const V of S)R.push(V[0]);const L=this.projectLine(R,y,v,m);C=R.length===1?{type:"Point",coordinates:L[0]}:{type:"MultiPoint",coordinates:L};break}case 2:{const R=S.map(L=>this.projectLine(L,y,v,m));C=R.length===1?{type:"LineString",coordinates:R[0]}:{type:"MultiLineString",coordinates:R};break}case 3:{const R=Gu(S),L=[];for(const V of R)L.push(V.map(G=>this.projectLine(G,y,v,m)));C=L.length===1?{type:"Polygon",coordinates:L[0]}:{type:"MultiPolygon",coordinates:L};break}default:throw new Error(`unknown feature type: ${this.type}`)}const j={type:"Feature",geometry:C,properties:this.properties};return this.id!=null&&(j.id=this.id),j}loadGeometry(){const i=[];for(const l of this._featureData.geometry.coordinates){const p=[];for(const m of l)p.push(new _(m.x,m.y));i.push(p)}return i}bbox(){return[0,0,0,0]}}class qV{constructor(i){this.features=[],this.featureTable=i,this.name=i.name,this.extent=i.extent,this.version=2,this.features=i.getFeatures(),this.length=this.features.length}feature(i){return new UV(this.features[i],this.extent)}}class $j{constructor(i){this.layers={};const l=function(p,m,y=!0){const v=new EV(0),S=[];for(;v.get()<p.length;){const C=Qn(p,v,1)[0]>>>0,j=v.get()+C;if(j>p.length)throw new Error(`Block overruns tile: ${j} > ${p.length}`);if(Qn(p,v,1)[0]>>>0!=1){v.set(j);continue}const R=VV(p,v),L=R[1],V=R[0].featureTables[0];let G=null,H=null;const Y=[];let J=0;for(const fe of V.columns){const ae=fe.name;if(ae==="id"){let ue=null;if(fe.nullable){const Pe=Ki.decode(p,v),$e=v.get(),Je=yg(p,Pe.numValues,v);v.set($e+Pe.byteLength),ue=new to(Je,Pe.numValues)}const Ce=Ki.decode(p,v);J=Ce.getDecompressedCount(),G=$V(p,fe,v,ae,Ce,ue??J,y)}else if(ae==="geometry"){const ue=Qn(p,v,1)[0];if(J===0){const Ce=v.get();J=Ki.decode(p,v).getDecompressedCount(),v.set(Ce)}H=IV(p,ue,v,J,m)}else{const ue=t0.hasStreamCount(fe)?Qn(p,v,1)[0]:1;if(ue===0&&fe.type==="scalarType")continue;const Ce=FV(p,v,fe,ue,J,void 0);Ce&&(Array.isArray(Ce)?Y.push(...Ce):Y.push(Ce))}}const ne=new PV(V.name,H,G,Y,L);S.push(ne),v.set(j)}return S}(new Uint8Array(i));this.layers=l.reduce((p,m)=>Object.assign(Object.assign({},p),{[m.name]:new qV(m)}),{})}}class bd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new bd;return l.extend(i(new _(this.minX,this.minY))),l.extend(i(new _(this.maxX,this.minY))),l.extend(i(new _(this.minX,this.maxY))),l.extend(i(new _(this.maxX,this.maxY))),l}static fromPoints(i){const l=new bd;for(const p of i)l.extend(p);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}const A1="_geojsonTileLayer";class Uj{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new id(Le,16,0),this.grid3D=new id(Le,16,0),this.featureIndexArray=new ce,this.promoteId=l}insert(i,l,p,m,y,v){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,m,y);const C=v?this.grid3D:this.grid;for(let j=0;j<l.length;j++){const R=l[j],L=[1/0,1/0,-1/0,-1/0];for(let V=0;V<R.length;V++){const G=R[V];L[0]=Math.min(L[0],G.x),L[1]=Math.min(L[1],G.y),L[2]=Math.max(L[2],G.x),L[3]=Math.max(L[3],G.y)}L[0]<Le&&L[1]<Le&&L[2]>=0&&L[3]>=0&&C.insert(S,L[0],L[1],L[2],L[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new FE(new l1(this.rawTileData)).layers:new $j(this.rawTileData).layers,this.sourceLayerCoder=new bj(this.vtLayers?Object.keys(this.vtLayers).sort():[A1])),this.vtLayers}query(i,l,p,m){this.loadVTLayers();const y=i.params,v=Le/i.tileSize/i.scale,S=Qu(y.filter,y.globalState),C=i.queryGeometry,j=i.queryPadding*v,R=bd.fromPoints(C),L=this.grid.query(R.minX-j,R.minY-j,R.maxX+j,R.maxY+j),V=bd.fromPoints(i.cameraQueryGeometry).expandBy(j),G=this.grid3D.query(V.minX,V.minY,V.maxX,V.maxY,(J,ne,fe,ae)=>function(ue,Ce,Pe,$e,Je){for(const et of ue)if(Ce<=et.x&&Pe<=et.y&&$e>=et.x&&Je>=et.y)return!0;const Ze=[new _(Ce,Pe),new _(Ce,Je),new _($e,Je),new _($e,Pe)];if(ue.length>2){for(const et of Ze)if(Xh(ue,et))return!0}for(let et=0;et<ue.length-1;et++)if(t8(ue[et],ue[et+1],Ze))return!0;return!1}(i.cameraQueryGeometry,J-j,ne-j,fe+j,ae+j));for(const J of G)L.push(J);L.sort(WV);const H={};let Y;for(let J=0;J<L.length;J++){const ne=L[J];if(ne===Y)continue;Y=ne;const fe=this.featureIndexArray.get(ne);let ae=null;this.loadMatchingFeature(H,fe.bucketIndex,fe.sourceLayerIndex,fe.featureIndex,S,y.layers,y.availableImages,l,p,m,(ue,Ce,Pe)=>(ae||(ae=Wo(ue)),Ce.queryIntersectsFeature({queryGeometry:C,feature:ue,featureState:Pe,geometry:ae,zoom:this.z,transform:i.transform,pixelsToTileUnits:v,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return H}loadMatchingFeature(i,l,p,m,y,v,S,C,j,R,L){const V=this.bucketLayerIDs[l];if(v&&!V.some(J=>v.has(J)))return;const G=this.sourceLayerCoder.decode(p),H=this.vtLayers[G].feature(m);if(y.needGeometry){const J=Ja(H,!0);if(!y.filter(new Or(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!y.filter(new Or(this.tileID.overscaledZ),H))return;const Y=this.getId(H,G);for(let J=0;J<V.length;J++){const ne=V[J];if(v&&!v.has(ne))continue;const fe=C[ne];if(!fe)continue;let ae={};Y&&R&&(ae=R.getState(fe.sourceLayer||A1,Y));const ue=Yr({},j[ne]);ue.paint=qj(ue.paint,fe.paint,H,ae,S),ue.layout=qj(ue.layout,fe.layout,H,ae,S);const Ce=!L||L(H,fe,ae);if(!Ce)continue;const Pe=new wj(H,this.z,this.x,this.y,Y);Pe.layer=ue;let $e=i[ne];$e===void 0&&($e=i[ne]=[]),$e.push({featureIndex:m,feature:Pe,intersectionZ:Ce})}}lookupSymbolFeatures(i,l,p,m,y,v,S,C){const j={};this.loadVTLayers();const R=Qu(y.filterSpec,y.globalState);for(const L of i)this.loadMatchingFeature(j,p,m,L,R,v,S,C,l);return j}hasLayer(i){for(const l of this.bucketLayerIDs)for(const p of l)if(i===p)return!0;return!1}getId(i,l){var p;let m=i.id;return this.promoteId&&(m=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((p=i.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(m=Number(i.properties.cluster_id))),m}}function qj(c,i,l,p,m){return Rn(c,(y,v)=>{const S=i instanceof jl?i.get(v):null;return S&&S.evaluate?S.evaluate(l,p,m):S})}function WV(c,i){return i-c}function Wj(c,i,l,p,m){const y=[];for(let v=0;v<c.length;v++){const S=c[v];let C;for(let j=0;j<S.length-1;j++){let R=S[j],L=S[j+1];R.x<i&&L.x<i||(R.x<i?R=new _(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x<i&&(L=new _(i,R.y+(i-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y<l&&L.y<l||(R.y<l?R=new _(R.x+(l-R.y)/(L.y-R.y)*(L.x-R.x),l)._round():L.y<l&&(L=new _(R.x+(l-R.y)/(L.y-R.y)*(L.x-R.x),l)._round()),R.x>=p&&L.x>=p||(R.x>=p?R=new _(p,R.y+(p-R.x)/(L.x-R.x)*(L.y-R.y))._round():L.x>=p&&(L=new _(p,R.y+(p-R.x)/(L.x-R.x)*(L.y-R.y))._round()),R.y>=m&&L.y>=m||(R.y>=m?R=new _(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round():L.y>=m&&(L=new _(R.x+(m-R.y)/(L.y-R.y)*(L.x-R.x),m)._round()),C&&R.equals(C[C.length-1])||(C=[R],y.push(C)),C.push(L)))))}}return y}function Gj(c,i,l,p,m){switch(i){case 1:return function(y,v,S,C){const j=[];for(const R of y)for(const L of R){const V=C===0?L.x:L.y;V>=v&&V<=S&&j.push([L])}return j}(c,l,p,m);case 2:return Hj(c,l,p,m,!1);case 3:return Hj(c,l,p,m,!0)}return[]}function GV(c,i,l,p,m){const y=p===0?HV:ZV;let v=[];const S=[];for(let R=0;R<c.length-1;R++){const L=c[R],V=c[R+1],G=p===0?L.x:L.y,H=p===0?V.x:V.y;let Y=!1;G<i?H>i&&v.push(y(L,V,i)):G>l?H<l&&v.push(y(L,V,l)):v.push(L),H<i&&G>=i&&(v.push(y(L,V,i)),Y=!0),H>l&&G<=l&&(v.push(y(L,V,l)),Y=!0),!m&&Y&&(S.push(v),v=[])}const C=c.length-1,j=p===0?c[C].x:c[C].y;return j>=i&&j<=l&&v.push(c[C]),m&&v.length>0&&!v[0].equals(v[v.length-1])&&v.push(new _(v[0].x,v[0].y)),v.length>0&&S.push(v),S}function Hj(c,i,l,p,m){const y=[];for(const v of c){const S=GV(v,i,l,p,m);S.length>0&&y.push(...S)}return y}function HV(c,i,l){return new _(l,c.y+(l-c.x)/(i.x-c.x)*(i.y-c.y))}function ZV(c,i,l){return new _(c.x+(l-c.y)/(i.y-c.y)*(i.x-c.x),l)}bt("FeatureIndex",Uj,{omit:["rawTileData","sourceLayerCoder"]});class Dc extends _{constructor(i,l,p,m){super(i,l),this.angle=p,m!==void 0&&(this.segment=m)}clone(){return new Dc(this.x,this.y,this.angle,this.segment)}}function Zj(c,i,l,p,m){if(i.segment===void 0||l===0)return!0;let y=i,v=i.segment+1,S=0;for(;S>-l/2;){if(v--,v<0)return!1;S-=c[v].dist(y),y=c[v]}S+=c[v].dist(c[v+1]),v++;const C=[];let j=0;for(;S<l/2;){const R=c[v],L=c[v+1];if(!L)return!1;let V=c[v-1].angleTo(R)-R.angleTo(L);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:V}),j+=V;S-C[0].distance>p;)j-=C.shift().angleDelta;if(j>m)return!1;v++,S+=R.dist(L)}return!0}function Kj(c){let i=0;for(let l=0;l<c.length-1;l++)i+=c[l].dist(c[l+1]);return i}function Yj(c,i,l){return c?.6*i*l:0}function Qj(c,i){return Math.max(c?c.right-c.left:0,i?i.right-i.left:0)}function KV(c,i,l,p,m,y){const v=Yj(l,m,y),S=Qj(l,p)*y;let C=0;const j=Kj(c)/2;for(let R=0;R<c.length-1;R++){const L=c[R],V=c[R+1],G=L.dist(V);if(C+G>j){const H=(j-C)/G,Y=ta.number(L.x,V.x,H),J=ta.number(L.y,V.y,H),ne=new Dc(Y,J,V.angleTo(L),R);return ne._round(),!v||Zj(c,ne,S,v,i)?ne:void 0}C+=G}}function YV(c,i,l,p,m,y,v,S,C){const j=Yj(p,y,v),R=Qj(p,m),L=R*v,V=c[0].x===0||c[0].x===C||c[0].y===0||c[0].y===C;return i-L<i/4&&(i=L+i/4),Xj(c,V?i/2*S%i:(R/2+2*y)*v*S%i,i,j,l,L,V,!1,C)}function Xj(c,i,l,p,m,y,v,S,C){const j=y/2,R=Kj(c);let L=0,V=i-l,G=[];for(let H=0;H<c.length-1;H++){const Y=c[H],J=c[H+1],ne=Y.dist(J),fe=J.angleTo(Y);for(;V+l<L+ne;){V+=l;const ae=(V-L)/ne,ue=ta.number(Y.x,J.x,ae),Ce=ta.number(Y.y,J.y,ae);if(ue>=0&&ue<C&&Ce>=0&&Ce<C&&V-j>=0&&V+j<=R){const Pe=new Dc(ue,Ce,fe,H);Pe._round(),p&&!Zj(c,Pe,y,p,m)||G.push(Pe)}}L+=ne}return S||G.length||v||(G=Xj(c,L/2,l,p,m,y,v,!0,C)),G}function Jj(c,i,l,p){const m=[],y=c.image,v=y.pixelRatio,S=y.paddedRect.w-2,C=y.paddedRect.h-2;let j={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const R=y.stretchX||[[0,S]],L=y.stretchY||[[0,C]],V=(Ke,Mt)=>Ke+Mt[1]-Mt[0],G=R.reduce(V,0),H=L.reduce(V,0),Y=S-G,J=C-H;let ne=0,fe=G,ae=0,ue=H,Ce=0,Pe=Y,$e=0,Je=J;if(y.content&&p){const Ke=y.content,Mt=Ke[2]-Ke[0],Nt=Ke[3]-Ke[1];(y.textFitWidth||y.textFitHeight)&&(j=ij(c)),ne=r0(R,0,Ke[0]),ae=r0(L,0,Ke[1]),fe=r0(R,Ke[0],Ke[2]),ue=r0(L,Ke[1],Ke[3]),Ce=Ke[0]-ne,$e=Ke[1]-ae,Pe=Mt-fe,Je=Nt-ue}const Ze=j.x1,et=j.y1,gt=j.x2-Ze,ot=j.y2-et,lt=(Ke,Mt,Nt,Bt)=>{const Ct=n0(Ke.stretch-ne,fe,gt,Ze),lr=i0(Ke.fixed-Ce,Pe,Ke.stretch,G),tn=n0(Mt.stretch-ae,ue,ot,et),Vn=i0(Mt.fixed-$e,Je,Mt.stretch,H),zi=n0(Nt.stretch-ne,fe,gt,Ze),ja=i0(Nt.fixed-Ce,Pe,Nt.stretch,G),us=n0(Bt.stretch-ae,ue,ot,et),Si=i0(Bt.fixed-$e,Je,Bt.stretch,H),Bi=new _(Ct,tn),wn=new _(zi,tn),Ti=new _(zi,us),Yi=new _(Ct,us),Qi=new _(lr/v,Vn/v),bs=new _(ja/v,Si/v),Vi=i*Math.PI/180;if(Vi){const ci=Math.sin(Vi),cn=Math.cos(Vi),$n=[cn,-ci,ci,cn];Bi._matMult($n),wn._matMult($n),Yi._matMult($n),Ti._matMult($n)}const ws=Ke.stretch+Ke.fixed,Aa=Mt.stretch+Mt.fixed;return{tl:Bi,tr:wn,bl:Yi,br:Ti,tex:{x:y.paddedRect.x+1+ws,y:y.paddedRect.y+1+Aa,w:Nt.stretch+Nt.fixed-ws,h:Bt.stretch+Bt.fixed-Aa},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Qi,pixelOffsetBR:bs,minFontScaleX:Pe/v/gt,minFontScaleY:Je/v/ot,isSDF:l}};if(p&&(y.stretchX||y.stretchY)){const Ke=eA(R,Y,G),Mt=eA(L,J,H);for(let Nt=0;Nt<Ke.length-1;Nt++){const Bt=Ke[Nt],Ct=Ke[Nt+1];for(let lr=0;lr<Mt.length-1;lr++)m.push(lt(Bt,Mt[lr],Ct,Mt[lr+1]))}}else m.push(lt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return m}function r0(c,i,l){let p=0;for(const m of c)p+=Math.max(i,Math.min(l,m[1]))-Math.max(i,Math.min(l,m[0]));return p}function eA(c,i,l){const p=[{fixed:-1,stretch:0}];for(const[m,y]of c){const v=p[p.length-1];p.push({fixed:m-v.stretch,stretch:v.stretch}),p.push({fixed:m-v.stretch,stretch:v.stretch+(y-m)})}return p.push({fixed:i+1,stretch:l}),p}function n0(c,i,l,p){return c/i*l+p}function i0(c,i,l,p){return c-i*l/p}bt("Anchor",Dc);class s0{constructor(i,l,p,m,y,v,S,C,j,R){var L;if(this.boxStartIndex=i.length,j){let V=v.top,G=v.bottom;const H=v.collisionPadding;H&&(V-=H[1],G+=H[3]);let Y=G-V;Y>0&&(Y=Math.max(10,Y),this.circleDiameter=Y)}else{const V=!((L=v.image)===null||L===void 0)&&L.content&&(v.image.textFitWidth||v.image.textFitHeight)?ij(v):{x1:v.left,y1:v.top,x2:v.right,y2:v.bottom};V.y1=V.y1*S-C[0],V.y2=V.y2*S+C[2],V.x1=V.x1*S-C[3],V.x2=V.x2*S+C[1];const G=v.collisionPadding;if(G&&(V.x1-=G[0]*S,V.y1-=G[1]*S,V.x2+=G[2]*S,V.y2+=G[3]*S),R){const H=new _(V.x1,V.y1),Y=new _(V.x2,V.y1),J=new _(V.x1,V.y2),ne=new _(V.x2,V.y2),fe=R*Math.PI/180;H._rotate(fe),Y._rotate(fe),J._rotate(fe),ne._rotate(fe),V.x1=Math.min(H.x,Y.x,J.x,ne.x),V.x2=Math.max(H.x,Y.x,J.x,ne.x),V.y1=Math.min(H.y,Y.y,J.y,ne.y),V.y2=Math.max(H.y,Y.y,J.y,ne.y)}i.emplaceBack(l.x,l.y,V.x1,V.y1,V.x2,V.y2,p,m,y)}this.boxEndIndex=i.length}}class QV{constructor(i=[],l=(p,m)=>p<m?-1:p>m?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:p}=this,m=l[i];for(;i>0;){const y=i-1>>1,v=l[y];if(p(m,v)>=0)break;l[i]=v,i=y}l[i]=m}_down(i){const{data:l,compare:p}=this,m=this.length>>1,y=l[i];for(;i<m;){let v=1+(i<<1);const S=v+1;if(S<this.length&&p(l[S],l[v])<0&&(v=S),p(l[v],y)>=0)break;l[i]=l[v],i=v}l[i]=y}}function XV(c,i=1,l=!1){const p=bd.fromPoints(c[0]),m=Math.min(p.width(),p.height());let y=m/2;const v=new QV([],JV),{minX:S,minY:C,maxX:j,maxY:R}=p;if(m===0)return new _(S,C);for(let G=S;G<j;G+=m)for(let H=C;H<R;H+=m)v.push(new pp(G+y,H+y,y,c));let L=function(G){let H=0,Y=0,J=0;const ne=G[0];for(let fe=0,ae=ne.length,ue=ae-1;fe<ae;ue=fe++){const Ce=ne[fe],Pe=ne[ue],$e=Ce.x*Pe.y-Pe.x*Ce.y;Y+=(Ce.x+Pe.x)*$e,J+=(Ce.y+Pe.y)*$e,H+=3*$e}return new pp(Y/H,J/H,0,G)}(c),V=v.length;for(;v.length;){const G=v.pop();(G.d>L.d||!L.d)&&(L=G,l&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,V)),G.max-L.d<=i||(y=G.h/2,v.push(new pp(G.p.x-y,G.p.y-y,y,c)),v.push(new pp(G.p.x+y,G.p.y-y,y,c)),v.push(new pp(G.p.x-y,G.p.y+y,y,c)),v.push(new pp(G.p.x+y,G.p.y+y,y,c)),V+=4)}return l&&(console.log(`num probes: ${V}`),console.log(`best distance: ${L.d}`)),L.p}function JV(c,i){return i.max-c.max}function pp(c,i,l,p){this.p=new _(c,i),this.h=l,this.d=function(m,y){let v=!1,S=1/0;for(let C=0;C<y.length;C++){const j=y[C];for(let R=0,L=j.length,V=L-1;R<L;V=R++){const G=j[R],H=j[V];G.y>m.y!=H.y>m.y&&m.x<(H.x-G.x)*(m.y-G.y)/(H.y-G.y)+G.x&&(v=!v),S=Math.min(S,mE(m,G,H))}}return(v?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var Fi;h.aO=void 0,(Fi=h.aO||(h.aO={}))[Fi.center=1]="center",Fi[Fi.left=2]="left",Fi[Fi.right=3]="right",Fi[Fi.top=4]="top",Fi[Fi.bottom=5]="bottom",Fi[Fi["top-left"]=6]="top-left",Fi[Fi["top-right"]=7]="top-right",Fi[Fi["bottom-left"]=8]="bottom-left",Fi[Fi["bottom-right"]=9]="bottom-right";const M1=Number.POSITIVE_INFINITY;function tA(c,i){return i[1]!==M1?function(l,p,m){let y=0,v=0;switch(p=Math.abs(p),m=Math.abs(m),l){case"top-right":case"top-left":case"top":v=m-7;break;case"bottom-right":case"bottom-left":case"bottom":v=7-m}switch(l){case"top-right":case"bottom-right":case"right":y=-p;break;case"top-left":case"bottom-left":case"left":y=p}return[y,v]}(c,i[0],i[1]):function(l,p){let m=0,y=0;p<0&&(p=0);const v=p/Math.SQRT2;switch(l){case"top-right":case"top-left":y=v-7;break;case"bottom-right":case"bottom-left":y=7-v;break;case"bottom":y=7-p;break;case"top":y=p-7}switch(l){case"top-right":case"bottom-right":m=-v;break;case"top-left":case"bottom-left":m=v;break;case"left":m=p;break;case"right":m=-p}return[m,y]}(c,i[0])}function rA(c,i,l){var p;const m=c.layout,y=(p=m.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(i,{},l);if(y){const S=y.values,C=[];for(let j=0;j<S.length;j+=2){const R=C[j]=S[j],L=S[j+1].map(V=>V*ai);R.startsWith("top")?L[1]-=7:R.startsWith("bottom")&&(L[1]+=7),C[j+1]=L}return new Hi(C)}const v=m.get("text-variable-anchor");if(v){let S;S=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(i,{},l)*ai,M1]:m.get("text-offset").evaluate(i,{},l).map(j=>j*ai);const C=[];for(const j of v)C.push(j,tA(j,S));return new Hi(C)}return null}function N1(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function e$(c,i,l,p,m,y,v,S,C,j,R,L){let V=y.textMaxSize.evaluate(i,{});V===void 0&&(V=v);const G=c.layers[0].layout,H=G.get("icon-offset").evaluate(i,{},R),Y=iA(l.horizontal),J=v/24,ne=c.tilePixelRatio*J,fe=c.tilePixelRatio*V/24,ae=c.tilePixelRatio*S,ue=c.tilePixelRatio*G.get("symbol-spacing"),Ce=G.get("text-padding")*c.tilePixelRatio,Pe=function(Nt,Bt,Ct,lr=1){const tn=Nt.get("icon-padding").evaluate(Bt,{},Ct),Vn=tn&&tn.values;return[Vn[0]*lr,Vn[1]*lr,Vn[2]*lr,Vn[3]*lr]}(G,i,R,c.tilePixelRatio),$e=G.get("text-max-angle")/180*Math.PI,Je=G.get("text-rotation-alignment")!=="viewport"&&G.get("symbol-placement")!=="point",Ze=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",et=G.get("symbol-placement"),gt=ue/2,ot=G.get("icon-text-fit");let lt;p&&ot!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(lt=sj(p,l.vertical,ot,G.get("icon-text-fit-padding"),H,J)),Y&&(p=sj(p,Y,ot,G.get("icon-text-fit-padding"),H,J)));const Ke=R?L.line.getGranularityForZoomLevel(R.z):1,Mt=(Nt,Bt)=>{Bt.x<0||Bt.x>=Le||Bt.y<0||Bt.y>=Le||function(Ct,lr,tn,Vn,zi,ja,us,Si,Bi,wn,Ti,Yi,Qi,bs,Vi,ws,Aa,ci,cn,$n,mn,ui,Fl,ro,bg){const Oc=Ct.addToLineVertexArray(lr,tn);let wd,mp,gp,yp,lA=0,cA=0,uA=0,dA=0,B1=-1,V1=-1;const zl={};let hA=Ya("");if(Ct.allowVerticalPlacement&&Vn.vertical){const Xi=Si.layout.get("text-rotate").evaluate(mn,{},ro)+90;gp=new s0(Bi,lr,wn,Ti,Yi,Vn.vertical,Qi,bs,Vi,Xi),us&&(yp=new s0(Bi,lr,wn,Ti,Yi,us,Aa,ci,Vi,Xi))}if(zi){const Xi=Si.layout.get("icon-rotate").evaluate(mn,{}),oa=Si.layout.get("icon-text-fit")!=="none",Sd=Jj(zi,Xi,Fl,oa),io=us?Jj(us,Xi,Fl,oa):void 0;mp=new s0(Bi,lr,wn,Ti,Yi,zi,Aa,ci,!1,Xi),lA=4*Sd.length;const Td=Ct.iconSizeData;let Go=null;Td.kind==="source"?(Go=[Ol*Si.layout.get("icon-size").evaluate(mn,{})],Go[0]>Nc&&Cr(`${Ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Td.kind==="composite"&&(Go=[Ol*ui.compositeIconSizes[0].evaluate(mn,{},ro),Ol*ui.compositeIconSizes[1].evaluate(mn,{},ro)],(Go[0]>Nc||Go[1]>Nc)&&Cr(`${Ct.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ct.addSymbols(Ct.icon,Sd,Go,$n,cn,mn,h.ay.none,lr,Oc.lineStartIndex,Oc.lineLength,-1,ro),B1=Ct.icon.placedSymbolArray.length-1,io&&(cA=4*io.length,Ct.addSymbols(Ct.icon,io,Go,$n,cn,mn,h.ay.vertical,lr,Oc.lineStartIndex,Oc.lineLength,-1,ro),V1=Ct.icon.placedSymbolArray.length-1)}const pA=Object.keys(Vn.horizontal);for(const Xi of pA){const oa=Vn.horizontal[Xi];if(!wd){hA=Ya(oa.text);const io=Si.layout.get("text-rotate").evaluate(mn,{},ro);wd=new s0(Bi,lr,wn,Ti,Yi,oa,Qi,bs,Vi,io)}const Sd=oa.positionedLines.length===1;if(uA+=nA(Ct,lr,oa,ja,Si,Vi,mn,ws,Oc,Vn.vertical?h.ay.horizontal:h.ay.horizontalOnly,Sd?pA:[Xi],zl,B1,ui,ro),Sd)break}Vn.vertical&&(dA+=nA(Ct,lr,Vn.vertical,ja,Si,Vi,mn,ws,Oc,h.ay.vertical,["vertical"],zl,V1,ui,ro));const n$=wd?wd.boxStartIndex:Ct.collisionBoxArray.length,i$=wd?wd.boxEndIndex:Ct.collisionBoxArray.length,s$=gp?gp.boxStartIndex:Ct.collisionBoxArray.length,a$=gp?gp.boxEndIndex:Ct.collisionBoxArray.length,o$=mp?mp.boxStartIndex:Ct.collisionBoxArray.length,l$=mp?mp.boxEndIndex:Ct.collisionBoxArray.length,c$=yp?yp.boxStartIndex:Ct.collisionBoxArray.length,u$=yp?yp.boxEndIndex:Ct.collisionBoxArray.length;let no=-1;const o0=(Xi,oa)=>Xi&&Xi.circleDiameter?Math.max(Xi.circleDiameter,oa):oa;no=o0(wd,no),no=o0(gp,no),no=o0(mp,no),no=o0(yp,no);const fA=no>-1?1:0;fA&&(no*=bg/ai),Ct.glyphOffsetArray.length>=ap.MAX_GLYPHS&&Cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mn.sortKey!==void 0&&Ct.addToSortKeyRanges(Ct.symbolInstances.length,mn.sortKey);const d$=rA(Si,mn,ro),[h$,p$]=function(Xi,oa){const Sd=Xi.length,io=oa==null?void 0:oa.values;if((io==null?void 0:io.length)>0)for(let Td=0;Td<io.length;Td+=2){const Go=io[Td+1];Xi.emplaceBack(h.aO[io[Td]],Go[0],Go[1])}return[Sd,Xi.length]}(Ct.textAnchorOffsets,d$);Ct.symbolInstances.emplaceBack(lr.x,lr.y,zl.right>=0?zl.right:-1,zl.center>=0?zl.center:-1,zl.left>=0?zl.left:-1,zl.vertical||-1,B1,V1,hA,n$,i$,s$,a$,o$,l$,c$,u$,wn,uA,dA,lA,cA,fA,0,Qi,no,h$,p$)}(c,Bt,Nt,l,p,m,lt,c.layers[0],c.collisionBoxArray,i.index,i.sourceLayerIndex,c.index,ne,[Ce,Ce,Ce,Ce],Je,C,ae,Pe,Ze,H,i,y,j,R,v)};if(et==="line")for(const Nt of Wj(i.geometry,0,0,Le,Le)){const Bt=yd(Nt,Ke),Ct=YV(Bt,ue,$e,l.vertical||Y,p,24,fe,c.overscaling,Le);for(const lr of Ct)Y&&t$(c,Y.text,gt,lr)||Mt(Bt,lr)}else if(et==="line-center"){for(const Nt of i.geometry)if(Nt.length>1){const Bt=yd(Nt,Ke),Ct=KV(Bt,$e,l.vertical||Y,p,24,fe);Ct&&Mt(Bt,Ct)}}else if(i.type==="Polygon")for(const Nt of Gu(i.geometry,0)){const Bt=XV(Nt,16);Mt(yd(Nt[0],Ke,!0),new Dc(Bt.x,Bt.y,0))}else if(i.type==="LineString")for(const Nt of i.geometry){const Bt=yd(Nt,Ke);Mt(Bt,new Dc(Bt[0].x,Bt[0].y,0))}else if(i.type==="Point")for(const Nt of i.geometry)for(const Bt of Nt)Mt([Bt],new Dc(Bt.x,Bt.y,0))}function nA(c,i,l,p,m,y,v,S,C,j,R,L,V,G,H){const Y=function(fe,ae,ue,Ce,Pe,$e,Je,Ze){const et=Ce.layout.get("text-rotate").evaluate($e,{})*Math.PI/180,gt=[];for(const ot of ae.positionedLines)for(const lt of ot.positionedGlyphs){if(!lt.rect)continue;const Ke=lt.rect||{};let Mt=4,Nt=!0,Bt=1,Ct=0;const lr=(Pe||Ze)&&lt.vertical,tn=lt.metrics.advance*lt.scale/2;if(Ze&&ae.verticalizable&&(Ct=ot.lineOffset/2-(lt.imageName?-(ai-lt.metrics.width*lt.scale)/2:(lt.scale-1)*ai)),lt.imageName){const ci=Je[lt.imageName];Nt=ci.sdf,Bt=ci.pixelRatio,Mt=1/Bt}const Vn=Pe?[lt.x+tn,lt.y]:[0,0];let zi=Pe?[0,0]:[lt.x+tn+ue[0],lt.y+ue[1]-Ct],ja=[0,0];lr&&(ja=zi,zi=[0,0]);const us=lt.metrics.isDoubleResolution?2:1,Si=(lt.metrics.left-Mt)*lt.scale-tn+zi[0],Bi=(-lt.metrics.top-Mt)*lt.scale+zi[1],wn=Si+Ke.w/us*lt.scale/Bt,Ti=Bi+Ke.h/us*lt.scale/Bt,Yi=new _(Si,Bi),Qi=new _(wn,Bi),bs=new _(Si,Ti),Vi=new _(wn,Ti);if(lr){const ci=new _(-tn,tn- -17),cn=-Math.PI/2,$n=12-tn,mn=new _(22-$n,-(lt.imageName?$n:0)),ui=new _(...ja);Yi._rotateAround(cn,ci)._add(mn)._add(ui),Qi._rotateAround(cn,ci)._add(mn)._add(ui),bs._rotateAround(cn,ci)._add(mn)._add(ui),Vi._rotateAround(cn,ci)._add(mn)._add(ui)}if(et){const ci=Math.sin(et),cn=Math.cos(et),$n=[cn,-ci,ci,cn];Yi._matMult($n),Qi._matMult($n),bs._matMult($n),Vi._matMult($n)}const ws=new _(0,0),Aa=new _(0,0);gt.push({tl:Yi,tr:Qi,bl:bs,br:Vi,tex:Ke,writingMode:ae.writingMode,glyphOffset:Vn,sectionIndex:lt.sectionIndex,isSDF:Nt,pixelOffsetTL:ws,pixelOffsetBR:Aa,minFontScaleX:0,minFontScaleY:0})}return gt}(0,l,S,m,y,v,p,c.allowVerticalPlacement),J=c.textSizeData;let ne=null;J.kind==="source"?(ne=[Ol*m.layout.get("text-size").evaluate(v,{})],ne[0]>Nc&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):J.kind==="composite"&&(ne=[Ol*G.compositeTextSizes[0].evaluate(v,{},H),Ol*G.compositeTextSizes[1].evaluate(v,{},H)],(ne[0]>Nc||ne[1]>Nc)&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,Y,ne,S,y,v,j,i,C.lineStartIndex,C.lineLength,V,H);for(const fe of R)L[fe]=c.text.placedSymbolArray.length-1;return 4*Y.length}function iA(c){for(const i in c)return c[i];return null}function t$(c,i,l,p){const m=c.compareText;if(i in m){const y=m[i];for(let v=y.length-1;v>=0;v--)if(p.dist(y[v])<l)return!0}else m[i]=[];return m[i].push(p),!1}const sA=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class I1{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=p>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const y=sA[15&p];if(!y)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(i,2,1),[S]=new Uint32Array(i,4,1);return new I1(S,v,y,i)}constructor(i,l=64,p=Float64Array,m){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const y=sA.indexOf(this.ArrayType),v=2*i*this.ArrayType.BYTES_PER_ELEMENT,S=i*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${p}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+C,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+v+S+C),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+C,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=l,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return R1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,p,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:v,nodeSize:S}=this,C=[0,y.length-1,0],j=[];for(;C.length;){const R=C.pop()||0,L=C.pop()||0,V=C.pop()||0;if(L-V<=S){for(let J=V;J<=L;J++){const ne=v[2*J],fe=v[2*J+1];ne>=i&&ne<=p&&fe>=l&&fe<=m&&j.push(y[J])}continue}const G=V+L>>1,H=v[2*G],Y=v[2*G+1];H>=i&&H<=p&&Y>=l&&Y<=m&&j.push(y[G]),(R===0?i<=H:l<=Y)&&(C.push(V),C.push(G-1),C.push(1-R)),(R===0?p>=H:m>=Y)&&(C.push(G+1),C.push(L),C.push(1-R))}return j}within(i,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:y,nodeSize:v}=this,S=[0,m.length-1,0],C=[],j=p*p;for(;S.length;){const R=S.pop()||0,L=S.pop()||0,V=S.pop()||0;if(L-V<=v){for(let J=V;J<=L;J++)oA(y[2*J],y[2*J+1],i,l)<=j&&C.push(m[J]);continue}const G=V+L>>1,H=y[2*G],Y=y[2*G+1];oA(H,Y,i,l)<=j&&C.push(m[G]),(R===0?i-p<=H:l-p<=Y)&&(S.push(V),S.push(G-1),S.push(1-R)),(R===0?i+p>=H:l+p>=Y)&&(S.push(G+1),S.push(L),S.push(1-R))}return C}}function R1(c,i,l,p,m,y){if(m-p<=l)return;const v=p+m>>1;aA(c,i,v,p,m,y),R1(c,i,l,p,v-1,1-y),R1(c,i,l,v+1,m,1-y)}function aA(c,i,l,p,m,y){for(;m>p;){if(m-p>600){const j=m-p+1,R=l-p+1,L=Math.log(j),V=.5*Math.exp(2*L/3),G=.5*Math.sqrt(L*V*(j-V)/j)*(R-j/2<0?-1:1);aA(c,i,l,Math.max(p,Math.floor(l-R*V/j+G)),Math.min(m,Math.floor(l+(j-R)*V/j+G)),y)}const v=i[2*l+y];let S=p,C=m;for(vg(c,i,p,l),i[2*m+y]>v&&vg(c,i,p,m);S<C;){for(vg(c,i,S,C),S++,C--;i[2*S+y]<v;)S++;for(;i[2*C+y]>v;)C--}i[2*p+y]===v?vg(c,i,p,C):(C++,vg(c,i,C,m)),C<=l&&(p=C+1),l<=C&&(m=C-1)}}function vg(c,i,l,p){D1(c,l,p),D1(i,2*l,2*p),D1(i,2*l+1,2*p+1)}function D1(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}function oA(c,i,l,p){const m=c-l,y=i-p;return m*m+y*y}var O1;h.cG=void 0,(O1=h.cG||(h.cG={})).create="create",O1.load="load",O1.fullLoad="fullLoad";let a0=null,_g=[];const L1=1e3/60,F1="loadTime",z1="fullLoadTime",r$={mark(c){performance.mark(c)},frame(c){const i=c;a0!=null&&_g.push(i-a0),a0=i},clearMetrics(){a0=null,_g=[],performance.clearMeasures(F1),performance.clearMeasures(z1);for(const c in h.cG)performance.clearMarks(h.cG[c])},getPerformanceMetrics(){performance.measure(F1,h.cG.create,h.cG.load),performance.measure(z1,h.cG.create,h.cG.fullLoad);const c=performance.getEntriesByName(F1)[0].duration,i=performance.getEntriesByName(z1)[0].duration,l=_g.length,p=1/(_g.reduce((y,v)=>y+v,0)/l/1e3),m=_g.filter(y=>y>L1).reduce((y,v)=>y+(v-L1)/L1,0);return{loadTime:c,fullLoadTime:i,fps:p,percentDroppedFrames:m/(l+m)*100,totalFrames:l}}};h.$=q,h.A=W,h.B=qh,h.C=El,h.D=jt,h.E=Ie,h.F=function([c,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(i)*Math.sin(l),y:c*Math.sin(i)*Math.sin(l),z:c*Math.cos(l)}},h.G=ta,h.H=Or,h.I=c1,h.J=Fw,h.K=function(c){if(Nr==null){const i=c.navigator?c.navigator.userAgent:null;Nr=!!c.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Nr},h.L=class{constructor(c,i){this.target=c,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new TV(()=>this.process()),this.subscription=xt(this.target,"message",l=>this.receive(l),!1),this.globalScope=xi(self)?c:window}registerMessageHandler(c,i){this.messageHandlers[c]=i}unregisterMessageHandler(c){delete this.messageHandlers[c]}sendAsync(c,i){return new Promise((l,p)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=i?xt(i.signal,"abort",()=>{y==null||y.unsubscribe(),delete this.resolveRejects[m];const C={id:m,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},kV):null;this.resolveRejects[m]={resolve:C=>{y==null||y.unsubscribe(),l(C)},reject:C=>{y==null||y.unsubscribe(),p(C)}};const v=[],S=Object.assign(Object.assign({},c),{id:m,sourceMapId:this.mapId,origin:location.origin,data:sd(c.data,v)});this.target.postMessage(S,{transfer:v})})}receive(c){const i=c.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const p=this.abortControllers[l];return delete this.abortControllers[l],void(p&&p.abort())}if(xi(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),i=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(c,i)}processTask(c,i){return o(this,void 0,void 0,function*(){if(i.type==="<response>"){const m=this.resolveRejects[c];return delete this.resolveRejects[c],m?void(i.error?m.reject(Za(i.error)):m.resolve(Za(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Za(i.data),p=new AbortController;this.abortControllers[c]=p;try{const m=yield this.messageHandlers[i.type](i.sourceMapId,l,p);this.completeTask(c,null,m)}catch(m){this.completeTask(c,m)}})}completeTask(c,i,l){const p=[];delete this.abortControllers[c];const m={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?sd(i):null,data:sd(l,p)};this.target.postMessage(m,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.M=Rs,h.N=function(){var c=new W(16);return W!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},h.O=function(c,i,l){var p,m,y,v,S,C,j,R,L,V,G,H,Y=l[0],J=l[1],ne=l[2];return i===c?(c[12]=i[0]*Y+i[4]*J+i[8]*ne+i[12],c[13]=i[1]*Y+i[5]*J+i[9]*ne+i[13],c[14]=i[2]*Y+i[6]*J+i[10]*ne+i[14],c[15]=i[3]*Y+i[7]*J+i[11]*ne+i[15]):(m=i[1],y=i[2],v=i[3],S=i[4],C=i[5],j=i[6],R=i[7],L=i[8],V=i[9],G=i[10],H=i[11],c[0]=p=i[0],c[1]=m,c[2]=y,c[3]=v,c[4]=S,c[5]=C,c[6]=j,c[7]=R,c[8]=L,c[9]=V,c[10]=G,c[11]=H,c[12]=p*Y+S*J+L*ne+i[12],c[13]=m*Y+C*J+V*ne+i[13],c[14]=y*Y+j*J+G*ne+i[14],c[15]=v*Y+R*J+H*ne+i[15]),c},h.P=_,h.Q=function(c,i,l){var p=l[0],m=l[1],y=l[2];return c[0]=i[0]*p,c[1]=i[1]*p,c[2]=i[2]*p,c[3]=i[3]*p,c[4]=i[4]*m,c[5]=i[5]*m,c[6]=i[6]*m,c[7]=i[7]*m,c[8]=i[8]*y,c[9]=i[9]*y,c[10]=i[10]*y,c[11]=i[11]*y,c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},h.R=_s,h.S=function(c,i,l){var p=i[0],m=i[1],y=i[2],v=i[3],S=i[4],C=i[5],j=i[6],R=i[7],L=i[8],V=i[9],G=i[10],H=i[11],Y=i[12],J=i[13],ne=i[14],fe=i[15],ae=l[0],ue=l[1],Ce=l[2],Pe=l[3];return c[0]=ae*p+ue*S+Ce*L+Pe*Y,c[1]=ae*m+ue*C+Ce*V+Pe*J,c[2]=ae*y+ue*j+Ce*G+Pe*ne,c[3]=ae*v+ue*R+Ce*H+Pe*fe,c[4]=(ae=l[4])*p+(ue=l[5])*S+(Ce=l[6])*L+(Pe=l[7])*Y,c[5]=ae*m+ue*C+Ce*V+Pe*J,c[6]=ae*y+ue*j+Ce*G+Pe*ne,c[7]=ae*v+ue*R+Ce*H+Pe*fe,c[8]=(ae=l[8])*p+(ue=l[9])*S+(Ce=l[10])*L+(Pe=l[11])*Y,c[9]=ae*m+ue*C+Ce*V+Pe*J,c[10]=ae*y+ue*j+Ce*G+Pe*ne,c[11]=ae*v+ue*R+Ce*H+Pe*fe,c[12]=(ae=l[12])*p+(ue=l[13])*S+(Ce=l[14])*L+(Pe=l[15])*Y,c[13]=ae*m+ue*C+Ce*V+Pe*J,c[14]=ae*y+ue*j+Ce*G+Pe*ne,c[15]=ae*v+ue*R+Ce*H+Pe*fe,c},h.T=Jw,h.U=function(c,i){const l={};for(let p=0;p<i.length;p++){const m=i[p];m in c&&(l[m]=c[m])}return l},h.V=Ic,h.W=er,h.X=fj,h.Y=pj,h.Z=D,h._=o,h.a=ii,h.a$=Re,h.a0=Ee,h.a1=sa,h.a2=gj,h.a3=Wv,h.a4=Le,h.a5=function(c,i,l){if(!c)return i||{};if(!i)return c||{};const p=_j(c),m=_j(i);(function(v,S){S.removeAll&&(v.add.clear(),v.update.clear(),v.remove.clear(),S.remove.clear());for(const C of S.remove)v.add.delete(C),v.update.delete(C);for(const[C,j]of S.update){const R=v.update.get(C);R&&(S.update.set(C,CV(R,j)),v.update.delete(C))}})(p,m);const y={};if((p.removeAll||m.removeAll)&&(y.removeAll=!0),y.remove=new Set([...p.remove,...m.remove]),y.add=new Map([...p.add,...m.add]),y.update=new Map([...p.update,...m.update]),y.remove.size&&y.add.size)for(const v of y.add.keys())y.remove.delete(v);return function(v){const S={};return v.removeAll&&(S.removeAll=v.removeAll),v.remove&&(S.remove=Array.from(v.remove)),v.add&&(S.add=Array.from(v.add.values())),v.update&&(S.update=Array.from(v.update.values())),S}(y)},h.a6=function(c,i){if(c==null)return!0;if(c.type==="Feature")return pg(c,i)!=null;if(c.type==="FeatureCollection"){const l=new Set;for(const p of c.features){const m=pg(p,i);if(m==null||l.has(m))return!1;l.add(m)}return!0}return!1},h.a7=function(c,i){const l=new Map;if(c!=null)if(c.type==="Feature")l.set(pg(c,i),c);else for(const p of c.features)l.set(pg(p,i),p);return l},h.a8=function(c,i,l){var p,m;if(i.removeAll)c.clear();else if(i.remove)for(const y of i.remove)c.delete(y);if(i.add)for(const y of i.add){const v=pg(y,l);v!=null&&c.set(v,y)}if(i.update)for(const y of i.update){let v=c.get(y.id);if(!v)continue;const S=!!y.newGeometry,C=y.removeAllProperties||((p=y.removeProperties)===null||p===void 0?void 0:p.length)>0||((m=y.addOrUpdateProperties)===null||m===void 0?void 0:m.length)>0;if((S||C)&&(v=Object.assign({},v),c.set(y.id,v),S&&(v.geometry=y.newGeometry),C)){if(v.properties=y.removeAllProperties?{}:Object.assign({},v.properties||{}),y.removeProperties)for(const j of y.removeProperties)delete v.properties[j];if(y.addOrUpdateProperties)for(const{key:j,value:R}of y.addOrUpdateProperties)v.properties[j]=R}}},h.a9=A1,h.aA=function(c,i){var l=i[0],p=i[1],m=i[2],y=i[3],v=i[4],S=i[5],C=i[6],j=i[7],R=i[8],L=i[9],V=i[10],G=i[11],H=i[12],Y=i[13],J=i[14],ne=i[15],fe=l*S-p*v,ae=l*C-m*v,ue=l*j-y*v,Ce=p*C-m*S,Pe=p*j-y*S,$e=m*j-y*C,Je=R*Y-L*H,Ze=R*J-V*H,et=R*ne-G*H,gt=L*J-V*Y,ot=L*ne-G*Y,lt=V*ne-G*J,Ke=fe*lt-ae*ot+ue*gt+Ce*et-Pe*Ze+$e*Je;return Ke?(c[0]=(S*lt-C*ot+j*gt)*(Ke=1/Ke),c[1]=(m*ot-p*lt-y*gt)*Ke,c[2]=(Y*$e-J*Pe+ne*Ce)*Ke,c[3]=(V*Pe-L*$e-G*Ce)*Ke,c[4]=(C*et-v*lt-j*Ze)*Ke,c[5]=(l*lt-m*et+y*Ze)*Ke,c[6]=(J*ue-H*$e-ne*ae)*Ke,c[7]=(R*$e-V*ue+G*ae)*Ke,c[8]=(v*ot-S*et+j*Je)*Ke,c[9]=(p*et-l*ot-y*Je)*Ke,c[10]=(H*Pe-Y*ue+ne*fe)*Ke,c[11]=(L*ue-R*Pe-G*fe)*Ke,c[12]=(S*Ze-v*gt-C*Je)*Ke,c[13]=(l*gt-p*Ze+m*Je)*Ke,c[14]=(Y*ae-H*Ce-J*fe)*Ke,c[15]=(R*Ce-L*ae+V*fe)*Ke,c):null},h.aB=Ve,h.aC=function(c){var i=c[0],l=c[1];return Math.sqrt(i*i+l*l)},h.aD=function(c){return c[0]=0,c[1]=0,c},h.aE=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c},h.aF=h1,h.aG=Ge,h.aH=function(c,i,l,p){const m=i.y-c.y,y=i.x-c.x,v=p.y-l.y,S=p.x-l.x,C=v*y-S*m;if(C===0)return null;const j=(S*(c.y-l.y)-v*(c.x-l.x))/C;return new _(c.x+j*y,c.y+j*m)},h.aI=Wj,h.aJ=pE,h.aK=function(c){let i=1/0,l=1/0,p=-1/0,m=-1/0;for(const y of c)i=Math.min(i,y.x),l=Math.min(l,y.y),p=Math.max(p,y.x),m=Math.max(m,y.y);return[i,l,p,m]},h.aL=ai,h.aM=ft,h.aN=function(c,i,l,p,m=!1){if(!l[0]&&!l[1])return[0,0];const y=m?p==="map"?-c.bearingInRadians:0:p==="viewport"?c.bearingInRadians:0;if(y){const v=Math.sin(y),S=Math.cos(y);l=[l[0]*S-l[1]*v,l[0]*v+l[1]*S]}return[m?l[0]:ft(i,l[0],c.zoom),m?l[1]:ft(i,l[1],c.zoom)]},h.aP=d1,h.aQ=N1,h.aR=u1,h.aS=I1,h.aT=_n,h.aU=Bv,h.aV=de,h.aW=Kt,h.aX=st,h.aY=dt,h.aZ=yj,h.a_=Me,h.aa=hg,h.ab=bd,h.ac=25,h.ad=y1,h.ae=c=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const p of c){const m=window.document.createElement("source");Q(p)||(i.crossOrigin="Anonymous"),m.src=p,i.appendChild(m)}})},h.af=it,h.ag=function(){return Zn++},h.ah=k,h.ai=ap,h.aj=Qu,h.ak=Ja,h.al=wj,h.am=function(c){const i={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,p,m,y)=>{const v=m||y;return i[p]=!v||v.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},h.an=kr,h.ao=85.051129,h.ap=vt,h.aq=function(c){return Math.pow(2,c)},h.ar=se,h.as=mj,h.at=function(c){return Math.log(c)/Math.LN2},h.au=function(c){var i=c[0],l=c[1];return i*i+l*l},h.av=class{constructor(c,i){this.max=c,this.onRemove=i,this.reset()}reset(){for(const c in this.data)for(const i of this.data[c])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(c,i,l){const p=c.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const m={value:i,timeout:void 0};if(l!==void 0&&(m.timeout=setTimeout(()=>{this.remove(c,m)},l)),this.data[p].push(m),this.order.push(p),this.order.length>this.max){const y=this._getAndRemoveByKey(this.order[0]);y&&this.onRemove(y)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const i=this.data[c].shift();return i.timeout&&clearTimeout(i.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),i.value}getByKey(c){const i=this.data[c];return i?i[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,i){if(!this.has(c))return this;const l=c.wrapped().key,p=i===void 0?0:this.data[l].indexOf(i),m=this.data[l][p];return this.data[l].splice(p,1),m.timeout&&clearTimeout(m.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(m.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(c){const i=[];for(const l in this.data)for(const p of this.data[l])c(p.value)||i.push(p);for(const l of i)this.remove(l.value.tileID,l)}},h.aw=function(c){if(!c.length)return new Set;const i=Math.max(...c.map(C=>C.canonical.z));let l=1/0,p=-1/0,m=1/0,y=-1/0;const v=[];for(const C of c){const{x:j,y:R,z:L}=C.canonical,V=Math.pow(2,i-L),G=j*V,H=R*V;v.push({id:C,x:G,y:H}),G<l&&(l=G),G>p&&(p=G),H<m&&(m=H),H>y&&(y=H)}const S=new Set;for(const C of v)C.x!==l&&C.x!==p&&C.y!==m&&C.y!==y||S.add(C.id);return S},h.ax=function(c,i){let l=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:m,minZoom:y,maxZoom:v}=c,S=m?kr(wi.interpolationFactor(m,i,y,v),0,1):0;c.kind==="camera"?p=ta.number(c.minSize,c.maxSize,S):l=S}return{uSizeT:l,uSize:p}},h.az=function(c,{uSize:i,uSizeT:l},{lowerSize:p,upperSize:m}){return c.kind==="source"?p/Ol:c.kind==="composite"?ta.number(p/Ol,m/Ol,l):i},h.b=vi,h.b$=class extends zs{constructor(c,i){super(c,i),this.current=Il}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let i=1;i<16;i++)if(c[i]!==this.current[i]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},h.b0=function(c){var i=new W(3);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i},h.b1=function(c,i,l){return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],c},h.b2=function(c,i){var l=i[0],p=i[1],m=i[2],y=l*l+p*p+m*m;return y>0&&(y=1/Math.sqrt(y)),c[0]=i[0]*y,c[1]=i[1]*y,c[2]=i[2]*y,c},h.b3=pt,h.b4=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]},h.b5=function(c,i,l){return c[0]=i[0]*l[0],c[1]=i[1]*l[1],c[2]=i[2]*l[2],c[3]=i[3]*l[3],c},h.b6=pe,h.b7=function(c,i,l){const p=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return p===0?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/p},h.b8=Ye,h.b9=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c[3]=i[3]*l,c},h.bA=nt,h.bB=function(c,i,l){var p=l[0],m=l[1],y=l[2],v=l[3],S=i[0],C=i[1],j=i[2],R=m*j-y*C,L=y*S-p*j,V=p*C-m*S;return c[0]=S+v*(R+=R)+m*(V+=V)-y*(L+=L),c[1]=C+v*L+y*R-p*V,c[2]=j+v*V+p*L-m*R,c},h.bC=function(c,i,l){const p=(m=[c[0],c[1],c[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((R=m[8])*(v=m[4])-(S=m[5])*(j=m[7]))+m[1]*(-R*(y=m[3])+S*(C=m[6]))+m[2]*(j*y-v*C);var m,y,v,S,C,j,R;if(p===0)return null;const L=pt([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),V=pt([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),G=pt([],[c[0],c[1],c[2]],[i[0],i[1],i[2]]),H=Me([],L,-c[3]);return Re(H,H,Me([],V,-i[3])),Re(H,H,Me([],G,-l[3])),Me(H,H,1/p),H},h.bD=g1,h.bE=function(){return new Float64Array(4)},h.bF=function(c,i,l,p){var m=[],y=[];return m[0]=i[0]-l[0],m[1]=i[1]-l[1],m[2]=i[2]-l[2],y[0]=m[0]*Math.cos(p)-m[1]*Math.sin(p),y[1]=m[0]*Math.sin(p)+m[1]*Math.cos(p),y[2]=m[2],c[0]=y[0]+l[0],c[1]=y[1]+l[1],c[2]=y[2]+l[2],c},h.bG=function(c,i,l,p){var m=[],y=[];return m[0]=i[0]-l[0],m[1]=i[1]-l[1],m[2]=i[2]-l[2],y[0]=m[0],y[1]=m[1]*Math.cos(p)-m[2]*Math.sin(p),y[2]=m[1]*Math.sin(p)+m[2]*Math.cos(p),c[0]=y[0]+l[0],c[1]=y[1]+l[1],c[2]=y[2]+l[2],c},h.bH=function(c,i,l,p){var m=[],y=[];return m[0]=i[0]-l[0],m[1]=i[1]-l[1],m[2]=i[2]-l[2],y[0]=m[2]*Math.sin(p)+m[0]*Math.cos(p),y[1]=m[1],y[2]=m[2]*Math.cos(p)-m[0]*Math.sin(p),c[0]=y[0]+l[0],c[1]=y[1]+l[1],c[2]=y[2]+l[2],c},h.bI=function(c,i,l){var p=Math.sin(l),m=Math.cos(l),y=i[0],v=i[1],S=i[2],C=i[3],j=i[8],R=i[9],L=i[10],V=i[11];return i!==c&&(c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=y*m-j*p,c[1]=v*m-R*p,c[2]=S*m-L*p,c[3]=C*m-V*p,c[8]=y*p+j*m,c[9]=v*p+R*m,c[10]=S*p+L*m,c[11]=C*p+V*m,c},h.bJ=function(c,i){const l=yt(c,360),p=yt(i,360),m=p-l,y=p>l?m-360:m+360;return Math.abs(m)<Math.abs(y)?m:y},h.bK=function(c){return c[0]=0,c[1]=0,c[2]=0,c},h.bL=function(c,i,l,p){const m=Math.sqrt(c*c+i*i),y=Math.sqrt(l*l+p*p);c/=m,i/=m,l/=y,p/=y;const v=Math.acos(c*l+i*p);return-i*l+c*p>0?v:-v},h.bM=function(c,i){const l=yt(c,2*Math.PI),p=yt(i,2*Math.PI);return Math.min(Math.abs(l-p),Math.abs(l-p+2*Math.PI),Math.abs(l-p-2*Math.PI))},h.bN=function(){const c={},i=oe.$version;for(const l in oe.$root){const p=oe.$root[l];if(p.required){let m=null;m=l==="version"?i:p.type==="array"?[]:{},m!=null&&(c[l]=m)}}return c},h.bO=nn,h.bP=Bm,h.bQ=function c(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let p=0;p<i.length;p++)if(!c(i[p],l[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const p in i)if(!c(i[p],l[p]))return!1;return!0}return i===l},h.bR=function(c){c=c.slice();const i=Object.create(null);for(let l=0;l<c.length;l++)i[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=We(c[l],i[c[l].ref]));return c},h.bS=function(c,i){if(c.type==="custom")return new SV(c,i);switch(c.type){case"background":return new wV(c,i);case"circle":return new o8(c,i);case"color-relief":return new p8(c,i);case"fill":return new E8(c,i);case"fill-extrusion":return new z8(c,i);case"heatmap":return new c8(c,i);case"hillshade":return new d8(c,i);case"line":return new G8(c,i);case"raster":return new Uw(c,i);case"symbol":return new qv(c,i)}},h.bT=c=>c.type==="raster",h.bU=vn,h.bV=function(c,i){if(!c)return[{command:"setStyle",args:[i]}];let l=[];try{if(!Ne(c.version,i.version))return[{command:"setStyle",args:[i]}];Ne(c.center,i.center)||l.push({command:"setCenter",args:[i.center]}),Ne(c.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),Ne(c.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),Ne(c.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),Ne(c.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),Ne(c.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),Ne(c.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),Ne(c.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),Ne(c.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),Ne(c.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),Ne(c.light,i.light)||l.push({command:"setLight",args:[i.light]}),Ne(c.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),Ne(c.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),Ne(c.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const p={},m=[];(function(v,S,C,j){let R;for(R in S=S||{},v=v||{})Object.prototype.hasOwnProperty.call(v,R)&&(Object.prototype.hasOwnProperty.call(S,R)||kt(R,C,j));for(R in S)Object.prototype.hasOwnProperty.call(S,R)&&(Object.prototype.hasOwnProperty.call(v,R)?Ne(v[R],S[R])||(v[R].type==="geojson"&&S[R].type==="geojson"&&Pr(v,S,R)?De(C,{command:"setGeoJSONSourceData",args:[R,S[R].data]}):Ft(R,S,C,j)):ct(R,S,C))})(c.sources,i.sources,m,p);const y=[];c.layers&&c.layers.forEach(v=>{"source"in v&&p[v.source]?l.push({command:"removeLayer",args:[v.id]}):y.push(v)}),l=l.concat(m),function(v,S,C){S=S||[];const j=(v=v||[]).map(nr),R=S.map(nr),L=v.reduce(_r,{}),V=S.reduce(_r,{}),G=j.slice(),H=Object.create(null);let Y,J,ne,fe,ae;for(let ue=0,Ce=0;ue<j.length;ue++)Y=j[ue],Object.prototype.hasOwnProperty.call(V,Y)?Ce++:(De(C,{command:"removeLayer",args:[Y]}),G.splice(G.indexOf(Y,Ce),1));for(let ue=0,Ce=0;ue<R.length;ue++)Y=R[R.length-1-ue],G[G.length-1-ue]!==Y&&(Object.prototype.hasOwnProperty.call(L,Y)?(De(C,{command:"removeLayer",args:[Y]}),G.splice(G.lastIndexOf(Y,G.length-Ce),1)):Ce++,fe=G[G.length-ue],De(C,{command:"addLayer",args:[V[Y],fe]}),G.splice(G.length-ue,0,Y),H[Y]=!0);for(let ue=0;ue<R.length;ue++)if(Y=R[ue],J=L[Y],ne=V[Y],!H[Y]&&!Ne(J,ne))if(Ne(J.source,ne.source)&&Ne(J["source-layer"],ne["source-layer"])&&Ne(J.type,ne.type)){for(ae in Yt(J.layout,ne.layout,C,Y,null,"setLayoutProperty"),Yt(J.paint,ne.paint,C,Y,null,"setPaintProperty"),Ne(J.filter,ne.filter)||De(C,{command:"setFilter",args:[Y,ne.filter]}),Ne(J.minzoom,ne.minzoom)&&Ne(J.maxzoom,ne.maxzoom)||De(C,{command:"setLayerZoomRange",args:[Y,ne.minzoom,ne.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,ae)&&ae!=="layout"&&ae!=="paint"&&ae!=="filter"&&ae!=="metadata"&&ae!=="minzoom"&&ae!=="maxzoom"&&(ae.indexOf("paint.")===0?Yt(J[ae],ne[ae],C,Y,ae.slice(6),"setPaintProperty"):Ne(J[ae],ne[ae])||De(C,{command:"setLayerProperty",args:[Y,ae,ne[ae]]}));for(ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&!Object.prototype.hasOwnProperty.call(J,ae)&&ae!=="layout"&&ae!=="paint"&&ae!=="filter"&&ae!=="metadata"&&ae!=="minzoom"&&ae!=="maxzoom"&&(ae.indexOf("paint.")===0?Yt(J[ae],ne[ae],C,Y,ae.slice(6),"setPaintProperty"):Ne(J[ae],ne[ae])||De(C,{command:"setLayerProperty",args:[Y,ae,ne[ae]]}))}else De(C,{command:"removeLayer",args:[Y]}),fe=G[G.lastIndexOf(Y)+1],De(C,{command:"addLayer",args:[ne,fe]})}(y,i.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:"setStyle",args:[i]}]}return l},h.bW=function(c){const i=[],l=c.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},h.bX=Rn,h.bY=ri,h.bZ=class extends zs{constructor(c,i){super(c,i),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},h.b_=Xa,h.ba=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]},h.bb=vj,h.bc=op,h.bd=function(c,i,l,p,m){var y=1/Math.tan(i/2);if(c[0]=y/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=y,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,m!=null&&m!==1/0){var v=1/(p-m);c[10]=(m+p)*v,c[14]=2*m*p*v}else c[10]=-1,c[14]=-2*p;return c},h.be=function(c){var i=new W(16);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i},h.bf=function(c,i,l){var p=Math.sin(l),m=Math.cos(l),y=i[0],v=i[1],S=i[2],C=i[3],j=i[4],R=i[5],L=i[6],V=i[7];return i!==c&&(c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=y*m+j*p,c[1]=v*m+R*p,c[2]=S*m+L*p,c[3]=C*m+V*p,c[4]=j*m-y*p,c[5]=R*m-v*p,c[6]=L*m-S*p,c[7]=V*m-C*p,c},h.bg=function(c,i,l){var p=Math.sin(l),m=Math.cos(l),y=i[4],v=i[5],S=i[6],C=i[7],j=i[8],R=i[9],L=i[10],V=i[11];return i!==c&&(c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[4]=y*m+j*p,c[5]=v*m+R*p,c[6]=S*m+L*p,c[7]=C*m+V*p,c[8]=j*m-y*p,c[9]=R*m-v*p,c[10]=L*m-S*p,c[11]=V*m-C*p,c},h.bh=function(){const c=new Float32Array(16);return se(c),c},h.bi=function(){const c=new Float64Array(16);return se(c),c},h.bj=function(){return new Float64Array(16)},h.bk=function(c,i,l){const p=new Float64Array(4);return nt(p,c,i-90,l),p},h.bl=function(c,i,l,p){var m,y,v,S,C,j=i[0],R=i[1],L=i[2],V=i[3],G=l[0],H=l[1],Y=l[2],J=l[3];return(y=j*G+R*H+L*Y+V*J)<0&&(y=-y,G=-G,H=-H,Y=-Y,J=-J),1-y>$?(m=Math.acos(y),v=Math.sin(m),S=Math.sin((1-p)*m)/v,C=Math.sin(p*m)/v):(S=1-p,C=p),c[0]=S*j+C*G,c[1]=S*R+C*H,c[2]=S*L+C*Y,c[3]=S*V+C*J,c},h.bm=function(c){const i=new Float64Array(9);var l,p,m,y,v,S,C,j,R,L,V,G,H,Y,J,ne,fe,ae;L=(m=(p=c)[0])*(C=m+m),V=(y=p[1])*C,H=(v=p[2])*C,Y=v*(j=y+y),ne=(S=p[3])*C,fe=S*j,ae=S*(R=v+v),(l=i)[0]=1-(G=y*j)-(J=v*R),l[3]=V-ae,l[6]=H+fe,l[1]=V+ae,l[4]=1-L-J,l[7]=Y-ne,l[2]=H-fe,l[5]=Y+ne,l[8]=1-L-G;const ue=dt(-Math.asin(kr(i[2],-1,1)));let Ce,Pe;return Math.hypot(i[5],i[8])<.001?(Ce=0,Pe=-dt(Math.atan2(i[3],i[4]))):(Ce=dt(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Pe=dt(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:Ce,pitch:ue+90,bearing:Pe}},h.bn=function(c,i){return c.roll==i.roll&&c.pitch==i.pitch&&c.bearing==i.bearing},h.bo=hr,h.bp=Qa,h.bq=rp,h.br=og,h.bs=tp,h.bt=wt,h.bu=Lt,h.bv=Di,h.bw=function(c,i,l,p,m){return wt(p,m,kr((c-i)/(l-i),0,1))},h.bx=yt,h.by=function(){return new Float64Array(3)},h.bz=function(c,i,l,p){return c[0]=i[0]+l[0]*p,c[1]=i[1]+l[1]*p,c[2]=i[2]+l[2]*p,c},h.c=Tn,h.c$=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},h.c0=vs,h.c1=class extends zs{constructor(c,i){super(c,i),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},h.c2=class extends zs{constructor(c,i){super(c,i),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},h.c3=te,h.c4=function(c,i){var l=Math.sin(i),p=Math.cos(i);return c[0]=p,c[1]=l,c[2]=0,c[3]=-l,c[4]=p,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},h.c5=function(c,i,l){var p=i[0],m=i[1],y=i[2];return c[0]=p*l[0]+m*l[3]+y*l[6],c[1]=p*l[1]+m*l[4]+y*l[7],c[2]=p*l[2]+m*l[5]+y*l[8],c},h.c6=function(c,i,l,p,m,y,v){var S=1/(i-l),C=1/(p-m),j=1/(y-v);return c[0]=-2*S,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*j,c[11]=0,c[12]=(i+l)*S,c[13]=(m+p)*C,c[14]=(v+y)*j,c[15]=1,c},h.c7=class extends zs{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)i[4*l]=c[l].r,i[4*l+1]=c[l].g,i[4*l+2]=c[l].b,i[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,i)}}},h.c8=class extends zs{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(c);this.gl.uniform1fv(this.location,i)}}},h.c9=class extends Hh{},h.cA=function(c){return Tt[c]||or[c]},h.cB=function(c,i,l){var p=i[0],m=i[1];return c[0]=l[0]*p+l[4]*m+l[12],c[1]=l[1]*p+l[5]*m+l[13],c},h.cC=function(c,i){const{x:l,y:p}=hg.fromLngLat(i);return!(c<0||c>25||p<0||p>=1||l<0||l>=1)},h.cD=function(c,i){return c[0]=i[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},h.cE=class extends pd{},h.cF=r$,h.cH=function(c){return c.message===vr},h.cI=Kn,h.cJ=function(c,i){ii.REGISTERED_PROTOCOLS[c]=i},h.cK=function(c){delete ii.REGISTERED_PROTOCOLS[c]},h.cL=function(c,i){const l={};for(let m=0;m<c.length;m++){const y=i&&i[c[m].id]||dv(c[m]);i&&(i[c[m].id]=y);let v=l[y];v||(v=l[y]=[]),v.push(c[m])}const p=[];for(const m in l)p.push(l[m]);return p},h.cM=bt,h.cN=bj,h.cO=Uj,h.cP=rj,h.cQ=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Le/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const i=c.bucket.layers[0],l=i.layout,p=i._unevaluatedLayout._values,m={layoutIconSize:p["icon-size"].possiblyEvaluate(new Or(c.bucket.zoom+1),c.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Or(c.bucket.zoom+1),c.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Or(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:j,maxZoom:R}=c.bucket.textSizeData;m.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Or(j),c.canonical),p["text-size"].possiblyEvaluate(new Or(R),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:j,maxZoom:R}=c.bucket.iconSizeData;m.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Or(j),c.canonical),p["icon-size"].possiblyEvaluate(new Or(R),c.canonical)]}const y=l.get("text-line-height")*ai,v=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),C=l.get("text-size");for(const j of c.bucket.features){const R=l.get("text-font").evaluate(j,{},c.canonical).join(","),L=C.evaluate(j,{},c.canonical),V=m.layoutTextSize.evaluate(j,{},c.canonical),G=m.layoutIconSize.evaluate(j,{},c.canonical),H={horizontal:{},vertical:void 0},Y=j.text;let J,ne=[0,0];if(Y){const ue=Y.toString(),Ce=l.get("text-letter-spacing").evaluate(j,{},c.canonical)*ai,Pe=Wh(ue)?Ce:0,$e=l.get("text-anchor").evaluate(j,{},c.canonical),Je=rA(i,j,c.canonical);if(!Je){const ot=l.get("text-radial-offset").evaluate(j,{},c.canonical);ne=ot?tA($e,[ot*ai,M1]):l.get("text-offset").evaluate(j,{},c.canonical).map(lt=>lt*ai)}let Ze=v?"center":l.get("text-justify").evaluate(j,{},c.canonical);const et=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(j,{},c.canonical)*ai:1/0,gt=()=>{c.bucket.allowVerticalPlacement&&ad(ue)&&(H.vertical=$v(Y,c.glyphMap,c.glyphPositions,c.imagePositions,R,et,y,$e,"left",Pe,ne,h.ay.vertical,!0,V,L))};if(!v&&Je){const ot=new Set;if(Ze==="auto")for(let Ke=0;Ke<Je.values.length;Ke+=2)ot.add(N1(Je.values[Ke]));else ot.add(Ze);let lt=!1;for(const Ke of ot)if(!H.horizontal[Ke])if(lt)H.horizontal[Ke]=H.horizontal[0];else{const Mt=$v(Y,c.glyphMap,c.glyphPositions,c.imagePositions,R,et,y,"center",Ke,Pe,ne,h.ay.horizontal,!1,V,L);Mt&&(H.horizontal[Ke]=Mt,lt=Mt.positionedLines.length===1)}gt()}else{Ze==="auto"&&(Ze=N1($e));const ot=$v(Y,c.glyphMap,c.glyphPositions,c.imagePositions,R,et,y,$e,Ze,Pe,ne,h.ay.horizontal,!1,V,L);ot&&(H.horizontal[Ze]=ot),gt(),ad(ue)&&v&&S&&(H.vertical=$v(Y,c.glyphMap,c.glyphPositions,c.imagePositions,R,et,y,$e,Ze,Pe,ne,h.ay.vertical,!1,V,L))}}let fe=!1;if(j.icon&&j.icon.name){const ue=c.imageMap[j.icon.name];ue&&(J=xV(c.imagePositions[j.icon.name],l.get("icon-offset").evaluate(j,{},c.canonical),l.get("icon-anchor").evaluate(j,{},c.canonical)),fe=!!ue.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=fe:c.bucket.sdfIcons!==fe&&Cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ue.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ae=iA(H.horizontal)||H.vertical;c.bucket.iconsInText=!!ae&&ae.iconsInText,(ae||J)&&e$(c.bucket,j,H,J,c.imageMap,m,V,G,ne,fe,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},h.cR=n1,h.cS=s1,h.cT=a1,h.cU=LE,h.cV=l1,h.cW=np,h.cX=function(c,i,l,p,m,y){let v=Gj(c,i,l,m,0);return v=Gj(v,i,p,y,1),v},h.cY=class{constructor(c){this.maxEntries=c,this.map=new Map}get(c){const i=this.map.get(c);return i!==void 0&&(this.map.delete(c),this.map.set(c,i)),i}set(c,i){if(this.map.has(c))this.map.delete(c);else if(this.map.size>=this.maxEntries){const l=this.map.keys().next().value;this.map.delete(l)}this.map.set(c,i)}clear(){this.map.clear()}},h.cZ=FE,h.c_=$j,h.ca=Y8,h.cb=class extends Zh{},h.cc=Xw,h.cd=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},h.ce=SE,h.cf=function(c,i,l){var p=i[0],m=i[1],y=i[2],v=l[3]*p+l[7]*m+l[11]*y+l[15];return c[0]=(l[0]*p+l[4]*m+l[8]*y+l[12])/(v=v||1),c[1]=(l[1]*p+l[5]*m+l[9]*y+l[13])/v,c[2]=(l[2]*p+l[6]*m+l[10]*y+l[14])/v,c},h.cg=class extends Zm{},h.ch=class extends g{},h.ci=function(c,i){return c[0]===i[0]&&c[1]===i[1]&&c[2]===i[2]&&c[3]===i[3]&&c[4]===i[4]&&c[5]===i[5]&&c[6]===i[6]&&c[7]===i[7]&&c[8]===i[8]&&c[9]===i[9]&&c[10]===i[10]&&c[11]===i[11]&&c[12]===i[12]&&c[13]===i[13]&&c[14]===i[14]&&c[15]===i[15]},h.cj=function(c,i){var l=c[0],p=c[1],m=c[2],y=c[3],v=c[4],S=c[5],C=c[6],j=c[7],R=c[8],L=c[9],V=c[10],G=c[11],H=c[12],Y=c[13],J=c[14],ne=c[15],fe=i[0],ae=i[1],ue=i[2],Ce=i[3],Pe=i[4],$e=i[5],Je=i[6],Ze=i[7],et=i[8],gt=i[9],ot=i[10],lt=i[11],Ke=i[12],Mt=i[13],Nt=i[14],Bt=i[15];return Math.abs(l-fe)<=$*Math.max(1,Math.abs(l),Math.abs(fe))&&Math.abs(p-ae)<=$*Math.max(1,Math.abs(p),Math.abs(ae))&&Math.abs(m-ue)<=$*Math.max(1,Math.abs(m),Math.abs(ue))&&Math.abs(y-Ce)<=$*Math.max(1,Math.abs(y),Math.abs(Ce))&&Math.abs(v-Pe)<=$*Math.max(1,Math.abs(v),Math.abs(Pe))&&Math.abs(S-$e)<=$*Math.max(1,Math.abs(S),Math.abs($e))&&Math.abs(C-Je)<=$*Math.max(1,Math.abs(C),Math.abs(Je))&&Math.abs(j-Ze)<=$*Math.max(1,Math.abs(j),Math.abs(Ze))&&Math.abs(R-et)<=$*Math.max(1,Math.abs(R),Math.abs(et))&&Math.abs(L-gt)<=$*Math.max(1,Math.abs(L),Math.abs(gt))&&Math.abs(V-ot)<=$*Math.max(1,Math.abs(V),Math.abs(ot))&&Math.abs(G-lt)<=$*Math.max(1,Math.abs(G),Math.abs(lt))&&Math.abs(H-Ke)<=$*Math.max(1,Math.abs(H),Math.abs(Ke))&&Math.abs(Y-Mt)<=$*Math.max(1,Math.abs(Y),Math.abs(Mt))&&Math.abs(J-Nt)<=$*Math.max(1,Math.abs(J),Math.abs(Nt))&&Math.abs(ne-Bt)<=$*Math.max(1,Math.abs(ne),Math.abs(Bt))},h.ck=function(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},h.cl=c=>c.type==="symbol",h.cm=c=>c.type==="circle",h.cn=c=>c.type==="heatmap",h.co=c=>c.type==="line",h.cp=c=>c.type==="fill",h.cq=c=>c.type==="fill-extrusion",h.cr=c=>c.type==="hillshade",h.cs=c=>c.type==="color-relief",h.ct=c=>c.type==="background",h.cu=c=>c.type==="custom",h.cv=Wt,h.cw=function(c,i,l){const p=_e(i.x-l.x,i.y-l.y),m=_e(c.x-l.x,c.y-l.y);var y,v;return dt(Math.atan2(p[0]*m[1]-p[1]*m[0],(y=p)[0]*(v=m)[0]+y[1]*v[1]))},h.cx=wr,h.cy=function(c,i){return or[i]&&(c instanceof MouseEvent||c instanceof WheelEvent)},h.cz=function(c,i){return Tt[i]&&"touches"in c},h.d=Q,h.d0=function(c,i,l,p,m){return o(this,void 0,void 0,function*(){if(q())try{return yield Ee(c,i,l,p,m)}catch{}return function(y,v,S,C,j){const R=y.width,L=y.height;Be&&He||(Be=new OffscreenCanvas(R,L),He=Be.getContext("2d",{willReadFrequently:!0})),Be.width=R,Be.height=L,He.drawImage(y,0,0,R,L);const V=He.getImageData(v,S,C,j);return He.clearRect(0,0,R,L),V.data}(c,i,l,p,m)})},h.d1=CE,h.d2=T,h.d3=Dh,h.d4=Bo,h.e=Yr,h.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.g=_i,h.h=c=>new Promise((i,l)=>{const p=new Image;p.onload=()=>{i(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=Dn})},p.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(c)],{type:"image/png"});p.src=c.byteLength?URL.createObjectURL(m):Dn}),h.i=xi,h.j=(c,i)=>Te(Yr(c,{type:"json"}),i),h.k=be,h.l=ge,h.m=Te,h.n=(c,i)=>Te(Yr(c,{type:"arrayBuffer"}),i),h.o=function(c){return new l1(c).readFields(uV,[])},h.p=tj,h.q=function(c){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))},h.r=rg,h.s=xt,h.t=Oi,h.u=oe,h.v=rd,h.w=Cr,h.x=Cv,h.y=Lw,h.z=od}),a("worker",["./shared"],function(h){class o{constructor(Q,ee){this.keyCache={},Q&&this.replace(Q,ee)}replace(Q,ee){this._layerConfigs={},this._layers={},this.update(Q,[],ee)}update(Q,ee,ie){for(const be of Q){this._layerConfigs[be.id]=be;const Ie=this._layers[be.id]=h.bS(be,ie);Ie._featureFilter=h.aj(Ie.filter,ie),this.keyCache[be.id]&&delete this.keyCache[be.id]}for(const be of ee)delete this.keyCache[be],delete this._layerConfigs[be],delete this._layers[be];this.familiesBySource={};const ge=h.cL(Object.values(this._layerConfigs),this.keyCache);for(const be of ge){const Ie=be.map(ct=>this._layers[ct.id]),oe=Ie[0];if(oe.visibility==="none")continue;const je=oe.source||"";let We=this.familiesBySource[je];We||(We=this.familiesBySource[je]={});const Ne=oe.sourceLayer||h.a9;let De=We[Ne];De||(De=We[Ne]=[]),De.push(Ie)}}}class _{constructor(Q){const ee={},ie=[];for(const oe in Q){const je=Q[oe],We=ee[oe]={};for(const Ne in je){const De=je[+Ne];if(!De||De.bitmap.width===0||De.bitmap.height===0)continue;const ct={x:0,y:0,w:De.bitmap.width+2,h:De.bitmap.height+2};ie.push(ct),We[Ne]={rect:ct,metrics:De.metrics}}}const{w:ge,h:be}=h.p(ie),Ie=new h.r({width:ge||1,height:be||1});for(const oe in Q){const je=Q[oe];for(const We in je){const Ne=je[+We];if(!Ne||Ne.bitmap.width===0||Ne.bitmap.height===0)continue;const De=ee[oe][We].rect;h.r.copy(Ne.bitmap,Ie,{x:0,y:0},{x:De.x+1,y:De.y+1},Ne.bitmap)}}this.image=Ie,this.positions=ee}}h.cM("GlyphAtlas",_);class T{constructor(Q){this.tileID=new h.a1(Q.tileID.overscaledZ,Q.tileID.wrap,Q.tileID.canonical.z,Q.tileID.canonical.x,Q.tileID.canonical.y),this.uid=Q.uid,this.zoom=Q.zoom,this.pixelRatio=Q.pixelRatio,this.tileSize=Q.tileSize,this.source=Q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Q.showCollisionBoxes,this.collectResourceTiming=!!Q.collectResourceTiming,this.returnDependencies=!!Q.returnDependencies,this.promoteId=Q.promoteId,this.inFlightDependencies=[]}parse(Q,ee,ie,ge,be){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=Q,this.collisionBoxArray=new h.ah;const Ie=new h.cN(Object.keys(Q.layers).sort()),oe=new h.cO(this.tileID,this.promoteId);oe.bucketLayerIDs=[];const je={},We={featureIndex:oe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ie,subdivisionGranularity:be},Ne=ee.familiesBySource[this.source];for(const Et in Ne){const Vt=Q.layers[Et];if(!Vt)continue;Vt.version===1&&h.w(`Vector tile source "${this.source}" layer "${Et}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const is=Ie.encode(Et),yl=[];for(let si=0;si<Vt.length;si++){const Ht=Vt.feature(si),Wa=oe.getId(Ht,Et);yl.push({feature:Ht,id:Wa,index:si,sourceLayerIndex:is})}for(const si of Ne[Et]){const Ht=si[0];Ht.source!==this.source&&h.w(`layer.source = ${Ht.source} does not equal this.source = ${this.source}`),Ht.isHidden(this.zoom,!0)||(P(si,this.zoom,ie),(je[Ht.id]=Ht.createBucket({index:oe.bucketLayerIDs.length,layers:si,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:is,sourceID:this.source})).populate(yl,We,this.tileID.canonical),oe.bucketLayerIDs.push(si.map(Wa=>Wa.id)))}}const De=h.bX(We.glyphDependencies,Et=>Object.keys(Et).map(Number));this.inFlightDependencies.forEach(Et=>Et==null?void 0:Et.abort()),this.inFlightDependencies=[];let ct=Promise.resolve({});if(Object.keys(De).length){const Et=new AbortController;this.inFlightDependencies.push(Et),ct=ge.sendAsync({type:"GG",data:{stacks:De,source:this.source,tileID:this.tileID,type:"glyphs"}},Et)}const kt=Object.keys(We.iconDependencies);let Ft=Promise.resolve({});if(kt.length){const Et=new AbortController;this.inFlightDependencies.push(Et),Ft=ge.sendAsync({type:"GI",data:{icons:kt,source:this.source,tileID:this.tileID,type:"icons"}},Et)}const Pr=Object.keys(We.patternDependencies);let Yt=Promise.resolve({});if(Pr.length){const Et=new AbortController;this.inFlightDependencies.push(Et),Yt=ge.sendAsync({type:"GI",data:{icons:Pr,source:this.source,tileID:this.tileID,type:"patterns"}},Et)}const nr=We.dashDependencies;let _r=Promise.resolve({});if(Object.keys(nr).length){const Et=new AbortController;this.inFlightDependencies.push(Et),_r=ge.sendAsync({type:"GDA",data:{dashes:nr}},Et)}const[it,Qr,Vr,On]=yield Promise.all([ct,Ft,Yt,_r]),$r=new _(it),at=new h.cP(Qr,Vr);for(const Et in je){const Vt=je[Et];Vt instanceof h.ai?(P(Vt.layers,this.zoom,ie),h.cQ({bucket:Vt,glyphMap:it,glyphPositions:$r.positions,imageMap:Qr,imagePositions:at.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:We.subdivisionGranularity})):Vt.hasDependencies&&(Vt instanceof h.cR||Vt instanceof h.cS||Vt instanceof h.cT)&&(P(Vt.layers,this.zoom,ie),Vt.addFeatures(We,this.tileID.canonical,at.patternPositions,On))}return this.status="done",{buckets:Object.values(je).filter(Et=>!Et.isEmpty()),featureIndex:oe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:$r.image,imageAtlas:at,dashPositions:On,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?Qr:null,glyphPositions:this.returnDependencies?$r.positions:null}})}}function P(Te,Q,ee){const ie=new h.H(Q);for(const ge of Te)ge.recalculate(ie,ee)}class E extends h.cW{constructor(Q,ee){super(new h.cV,0,ee,[],[]),this.feature=Q,this.type=Q.type,this.properties=Q.tags?Q.tags:{},"id"in Q&&(typeof Q.id=="string"?this.id=parseInt(Q.id,10):typeof Q.id!="number"||isNaN(Q.id)||(this.id=Q.id))}loadGeometry(){const Q=[],ee=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const ie of ee){const ge=[];for(const be of ie)ge.push(new h.P(be[0],be[1]));Q.push(ge)}return Q}}class M extends h.cU{constructor(Q,ee){super(new h.cV),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=ee?ee.version:1,this.extent=ee?ee.extent:4096,this.length=Q.length,this.features=Q}feature(Q){return new E(this.features[Q],this.extent)}}function I(Te,Q){Q.writeVarintField(15,Te.version||1),Q.writeStringField(1,Te.name||""),Q.writeVarintField(5,Te.extent||4096);const ee={keys:[],values:[],keycache:{},valuecache:{}};for(let be=0;be<Te.length;be++)ee.feature=Te.feature(be),Q.writeMessage(2,z,ee);const ie=ee.keys;for(const be of ie)Q.writeStringField(3,be);const ge=ee.values;for(const be of ge)Q.writeMessage(4,W,be)}function z(Te,Q){if(!Te.feature)return;const ee=Te.feature;ee.id!==void 0&&Q.writeVarintField(1,ee.id),Q.writeMessage(2,F,Te),Q.writeVarintField(3,ee.type),Q.writeMessage(4,$,ee)}function F(Te,Q){var ee;for(const ie in(ee=Te.feature)==null?void 0:ee.properties){let ge=Te.feature.properties[ie],be=Te.keycache[ie];if(ge===null)continue;be===void 0&&(Te.keys.push(ie),be=Te.keys.length-1,Te.keycache[ie]=be),Q.writeVarint(be),typeof ge!="string"&&typeof ge!="boolean"&&typeof ge!="number"&&(ge=JSON.stringify(ge));const Ie=typeof ge+":"+ge;let oe=Te.valuecache[Ie];oe===void 0&&(Te.values.push(ge),oe=Te.values.length-1,Te.valuecache[Ie]=oe),Q.writeVarint(oe)}}function D(Te,Q){return(Q<<3)+(7&Te)}function q(Te){return Te<<1^Te>>31}function $(Te,Q){const ee=Te.loadGeometry(),ie=Te.type;let ge=0,be=0;for(const Ie of ee){let oe=1;ie===1&&(oe=Ie.length),Q.writeVarint(D(1,oe));const je=ie===3?Ie.length-1:Ie.length;for(let We=0;We<je;We++){We===1&&ie!==1&&Q.writeVarint(D(2,je-1));const Ne=Ie[We].x-ge,De=Ie[We].y-be;Q.writeVarint(q(Ne)),Q.writeVarint(q(De)),ge+=Ne,be+=De}Te.type===3&&Q.writeVarint(D(7,1))}}function W(Te,Q){const ee=typeof Te;ee==="string"?Q.writeStringField(1,Te):ee==="boolean"?Q.writeBooleanField(7,Te):ee==="number"&&(Te%1!=0?Q.writeDoubleField(3,Te):Te<0?Q.writeSVarintField(6,Te):Q.writeVarintField(5,Te))}class te extends h.cW{constructor(Q,ee,ie,ge,be){super(new h.cV,0,be,[],[]),this.type=Q,this.properties=ie||{},this.extent=be,this.pointsArray=ee,this.id=ge}loadGeometry(){return this.pointsArray.map(Q=>Q.map(ee=>new h.P(ee.x,ee.y)))}}class se extends h.cU{constructor(Q,ee,ie){super(new h.cV),this.version=2,this._myFeatures=Q,this.name=ee,this.length=Q.length,this.extent=ie}feature(Q){return this._myFeatures[Q]}}class he{constructor(){this.layers={}}addLayer(Q){this.layers[Q.name]=Q}}function pe(Te){let Q=function(ee){const ie=new h.cV;return function(ge,be){for(const Ie in ge.layers)be.writeMessage(3,I,ge.layers[Ie])}(ee,ie),ie.finish()}(Te);return Q.byteOffset===0&&Q.byteLength===Q.buffer.byteLength||(Q=new Uint8Array(Q)),{vectorTile:Te,rawData:Q.buffer}}function xe(Te,Q,ee){const{extent:ie}=Te,ge=Math.pow(2,ee.z-Q.z),be=(ee.x-Q.x*ge)*ie,Ie=(ee.y-Q.y*ge)*ie,oe=[];for(let je=0;je<Te.length;je++){const We=Te.feature(je);let Ne=We.loadGeometry();for(const ct of Ne)for(const kt of ct)kt.x=kt.x*ge-be,kt.y=kt.y*ge-Ie;const De=128;Ne=h.cX(Ne,We.type,-De,-De,ie+De,ie+De),Ne.length!==0&&oe.push(new te(We.type,Ne,We.properties,We.id,ie))}return new se(oe,Te.name,ie)}class Re{constructor(Q,ee,ie){this.actor=Q,this.layerIndex=ee,this.availableImages=ie,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new h.cY(1e3)}loadVectorTile(Q,ee){return h._(this,void 0,void 0,function*(){const ie=yield h.n(Q.request,ee);try{return{vectorTile:Q.encoding!=="mlt"?new h.cZ(new h.cV(ie.data)):new h.c_(ie.data),rawData:ie.data,cacheControl:ie.cacheControl,expires:ie.expires}}catch(ge){const be=new Uint8Array(ie.data);let Ie=`Unable to parse the tile at ${Q.request.url}, `;throw Ie+=be[0]===31&&be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ge.message}`,new Error(Ie)}})}loadTile(Q){return h._(this,void 0,void 0,function*(){const{uid:ee,overzoomParameters:ie}=Q;ie&&(Q.request=ie.overzoomRequest);const ge=!!(Q&&Q.request&&Q.request.collectResourceTiming)&&new h.c$(Q.request),be=new T(Q);this.loading[ee]=be;const Ie=new AbortController;be.abort=Ie;try{const oe=yield this.loadVectorTile(Q,Ie);if(delete this.loading[ee],!oe)return null;if(ie){const ct=this._getOverzoomTile(Q,oe.vectorTile);oe.rawData=ct.rawData,oe.vectorTile=ct.vectorTile}const je=oe.rawData,We={};oe.expires&&(We.expires=oe.expires),oe.cacheControl&&(We.cacheControl=oe.cacheControl);const Ne={};if(ge){const ct=ge.finish();ct&&(Ne.resourceTiming=JSON.parse(JSON.stringify(ct)))}be.vectorTile=oe.vectorTile;const De=be.parse(oe.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);this.loaded[ee]=be,this.fetching[ee]={rawTileData:je,cacheControl:We,resourceTiming:Ne};try{const ct=yield De;return h.e({rawTileData:je.slice(0),encoding:Q.encoding},ct,We,Ne)}finally{delete this.fetching[ee]}}catch(oe){throw delete this.loading[ee],be.status="done",this.loaded[ee]=be,oe}})}_getOverzoomTile(Q,ee){const{tileID:ie,source:ge,overzoomParameters:be}=Q,{maxZoomTileID:Ie}=be,oe=`${Ie.key}_${ie.key}`,je=this.overzoomedTileResultCache.get(oe);if(je)return je;const We=new he,Ne=this.layerIndex.familiesBySource[ge];for(const ct in Ne){const kt=ee.layers[ct];if(!kt)continue;const Ft=xe(kt,Ie,ie.canonical);Ft.length>0&&We.addLayer(Ft)}const De=pe(We);return this.overzoomedTileResultCache.set(oe,De),De}reloadTile(Q){return h._(this,void 0,void 0,function*(){const ee=Q.uid;if(!this.loaded||!this.loaded[ee])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ie=this.loaded[ee];if(ie.showCollisionBoxes=Q.showCollisionBoxes,ie.status==="parsing"){const ge=yield ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity);let be;if(this.fetching[ee]){const{rawTileData:Ie,cacheControl:oe,resourceTiming:je}=this.fetching[ee];delete this.fetching[ee],be=h.e({rawTileData:Ie.slice(0),encoding:Q.encoding},ge,oe,je)}else be=ge;return be}if(ie.status==="done"&&ie.vectorTile)return ie.parse(ie.vectorTile,this.layerIndex,this.availableImages,this.actor,Q.subdivisionGranularity)})}abortTile(Q){return h._(this,void 0,void 0,function*(){const ee=this.loading,ie=Q.uid;ee&&ee[ie]&&ee[ie].abort&&(ee[ie].abort.abort(),delete ee[ie])})}removeTile(Q){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Q.uid]&&delete this.loaded[Q.uid]})}}class Me{constructor(){this.loaded={}}loadTile(Q){return h._(this,void 0,void 0,function*(){const{uid:ee,encoding:ie,rawImageData:ge,redFactor:be,greenFactor:Ie,blueFactor:oe,baseShift:je}=Q,We=ge.width+2,Ne=ge.height+2,De=h.b(ge)?new h.R({width:We,height:Ne},yield h.d0(ge,-1,-1,We,Ne)):ge,ct=new h.d1(ee,De,ie,be,Ie,oe,je);return this.loaded=this.loaded||{},this.loaded[ee]=ct,ct})}removeTile(Q){const ee=this.loaded,ie=Q.uid;ee&&ee[ie]&&delete ee[ie]}}var pt,Oe,Ye=function(){if(Oe)return pt;function Te(ee,ie){if(ee.length!==0){Q(ee[0],ie);for(var ge=1;ge<ee.length;ge++)Q(ee[ge],!ie)}}function Q(ee,ie){for(var ge=0,be=0,Ie=0,oe=ee.length,je=oe-1;Ie<oe;je=Ie++){var We=(ee[Ie][0]-ee[je][0])*(ee[je][1]+ee[Ie][1]),Ne=ge+We;be+=Math.abs(ge)>=Math.abs(We)?ge-Ne+We:We-Ne+ge,ge=Ne}ge+be>=0!=!!ie&&ee.reverse()}return Oe=1,pt=function ee(ie,ge){var be,Ie=ie&&ie.type;if(Ie==="FeatureCollection")for(be=0;be<ie.features.length;be++)ee(ie.features[be],ge);else if(Ie==="GeometryCollection")for(be=0;be<ie.geometries.length;be++)ee(ie.geometries[be],ge);else if(Ie==="Feature")ee(ie.geometry,ge);else if(Ie==="Polygon")Te(ie.coordinates,ge);else if(Ie==="MultiPolygon")for(be=0;be<ie.coordinates.length;be++)Te(ie.coordinates[be],ge);return ie}}(),Ge=h.d2(Ye);const rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},nt=Math.fround||(Ve=new Float32Array(1),Te=>(Ve[0]=+Te,Ve[0]));var Ve;class _e{constructor(Q){this.options=Object.assign(Object.create(rt),Q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Q){const{log:ee,minZoom:ie,maxZoom:ge}=this.options;ee&&console.time("total time");const be=`prepare ${Q.length} points`;ee&&console.time(be),this.points=Q;const Ie=[];for(let je=0;je<Q.length;je++){const We=Q[je];if(!We.geometry)continue;const[Ne,De]=We.geometry.coordinates,ct=nt(yt(Ne)),kt=nt(wt(De));Ie.push(ct,kt,1/0,je,-1,1),this.options.reduce&&Ie.push(0)}let oe=this.trees[ge+1]=this._createTree(Ie);ee&&console.timeEnd(be);for(let je=ge;je>=ie;je--){const We=+Date.now();oe=this.trees[je]=this._createTree(this._cluster(oe,je)),ee&&console.log("z%d: %d clusters in %dms",je,oe.numItems,+Date.now()-We)}return ee&&console.timeEnd("total time"),this}getClusters(Q,ee){let ie=((Q[0]+180)%360+360)%360-180;const ge=Math.max(-90,Math.min(90,Q[1]));let be=Q[2]===180?180:((Q[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,Q[3]));if(Q[2]-Q[0]>=360)ie=-180,be=180;else if(ie>be){const De=this.getClusters([ie,ge,180,Ie],ee),ct=this.getClusters([-180,ge,be,Ie],ee);return De.concat(ct)}const oe=this.trees[this._limitZoom(ee)],je=oe.range(yt(ie),wt(Ie),yt(be),wt(ge)),We=oe.data,Ne=[];for(const De of je){const ct=this.stride*De;Ne.push(We[ct+5]>1?Le(We,ct,this.clusterProps):this.points[We[ct+3]])}return Ne}getChildren(Q){const ee=this._getOriginId(Q),ie=this._getOriginZoom(Q),ge="No cluster with the specified id.",be=this.trees[ie];if(!be)throw new Error(ge);const Ie=be.data;if(ee*this.stride>=Ie.length)throw new Error(ge);const oe=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),je=be.within(Ie[ee*this.stride],Ie[ee*this.stride+1],oe),We=[];for(const Ne of je){const De=Ne*this.stride;Ie[De+4]===Q&&We.push(Ie[De+5]>1?Le(Ie,De,this.clusterProps):this.points[Ie[De+3]])}if(We.length===0)throw new Error(ge);return We}getLeaves(Q,ee,ie){const ge=[];return this._appendLeaves(ge,Q,ee=ee||10,ie=ie||0,0),ge}getTile(Q,ee,ie){const ge=this.trees[this._limitZoom(Q)],be=Math.pow(2,Q),{extent:Ie,radius:oe}=this.options,je=oe/Ie,We=(ie-je)/be,Ne=(ie+1+je)/be,De={features:[]};return this._addTileFeatures(ge.range((ee-je)/be,We,(ee+1+je)/be,Ne),ge.data,ee,ie,be,De),ee===0&&this._addTileFeatures(ge.range(1-je/be,We,1,Ne),ge.data,be,ie,be,De),ee===be-1&&this._addTileFeatures(ge.range(0,We,je/be,Ne),ge.data,-1,ie,be,De),De.features.length?De:null}getClusterExpansionZoom(Q){let ee=this._getOriginZoom(Q)-1;for(;ee<=this.options.maxZoom;){const ie=this.getChildren(Q);if(ee++,ie.length!==1)break;Q=ie[0].properties.cluster_id}return ee}_appendLeaves(Q,ee,ie,ge,be){const Ie=this.getChildren(ee);for(const oe of Ie){const je=oe.properties;if(je&&je.cluster?be+je.point_count<=ge?be+=je.point_count:be=this._appendLeaves(Q,je.cluster_id,ie,ge,be):be<ge?be++:Q.push(oe),Q.length===ie)break}return be}_createTree(Q){const ee=new h.aS(Q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ie=0;ie<Q.length;ie+=this.stride)ee.add(Q[ie],Q[ie+1]);return ee.finish(),ee.data=Q,ee}_addTileFeatures(Q,ee,ie,ge,be,Ie){for(const oe of Q){const je=oe*this.stride,We=ee[je+5]>1;let Ne,De,ct;if(We)Ne=ft(ee,je,this.clusterProps),De=ee[je],ct=ee[je+1];else{const Pr=this.points[ee[je+3]];Ne=Pr.properties;const[Yt,nr]=Pr.geometry.coordinates;De=yt(Yt),ct=wt(nr)}const kt={type:1,geometry:[[Math.round(this.options.extent*(De*be-ie)),Math.round(this.options.extent*(ct*be-ge))]],tags:Ne};let Ft;Ft=We||this.options.generateId?ee[je+3]:this.points[ee[je+3]].id,Ft!==void 0&&(kt.id=Ft),Ie.features.push(kt)}}_limitZoom(Q){return Math.max(this.options.minZoom,Math.min(Math.floor(+Q),this.options.maxZoom+1))}_cluster(Q,ee){const{radius:ie,extent:ge,reduce:be,minPoints:Ie}=this.options,oe=ie/(ge*Math.pow(2,ee)),je=Q.data,We=[],Ne=this.stride;for(let De=0;De<je.length;De+=Ne){if(je[De+2]<=ee)continue;je[De+2]=ee;const ct=je[De],kt=je[De+1],Ft=Q.within(je[De],je[De+1],oe),Pr=je[De+5];let Yt=Pr;for(const nr of Ft){const _r=nr*Ne;je[_r+2]>ee&&(Yt+=je[_r+5])}if(Yt>Pr&&Yt>=Ie){let nr,_r=ct*Pr,it=kt*Pr,Qr=-1;const Vr=(De/Ne<<5)+(ee+1)+this.points.length;for(const On of Ft){const $r=On*Ne;if(je[$r+2]<=ee)continue;je[$r+2]=ee;const at=je[$r+5];_r+=je[$r]*at,it+=je[$r+1]*at,je[$r+4]=Vr,be&&(nr||(nr=this._map(je,De,!0),Qr=this.clusterProps.length,this.clusterProps.push(nr)),be(nr,this._map(je,$r)))}je[De+4]=Vr,We.push(_r/Yt,it/Yt,1/0,Vr,-1,Yt),be&&We.push(Qr)}else{for(let nr=0;nr<Ne;nr++)We.push(je[De+nr]);if(Yt>1)for(const nr of Ft){const _r=nr*Ne;if(!(je[_r+2]<=ee)){je[_r+2]=ee;for(let it=0;it<Ne;it++)We.push(je[_r+it])}}}}return We}_getOriginId(Q){return Q-this.points.length>>5}_getOriginZoom(Q){return(Q-this.points.length)%32}_map(Q,ee,ie){if(Q[ee+5]>1){const Ie=this.clusterProps[Q[ee+6]];return ie?Object.assign({},Ie):Ie}const ge=this.points[Q[ee+3]].properties,be=this.options.map(ge);return ie&&be===ge?Object.assign({},be):be}}function Le(Te,Q,ee){return{type:"Feature",id:Te[Q+3],properties:ft(Te,Q,ee),geometry:{type:"Point",coordinates:[(ie=Te[Q],360*(ie-.5)),Lt(Te[Q+1])]}};var ie}function ft(Te,Q,ee){const ie=Te[Q+5],ge=ie>=1e4?`${Math.round(ie/1e3)}k`:ie>=1e3?Math.round(ie/100)/10+"k":ie,be=Te[Q+6],Ie=be===-1?{}:Object.assign({},ee[be]);return Object.assign(Ie,{cluster:!0,cluster_id:Te[Q+3],point_count:ie,point_count_abbreviated:ge})}function yt(Te){return Te/360+.5}function wt(Te){const Q=Math.sin(Te*Math.PI/180),ee=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ee<0?0:ee>1?1:ee}function Lt(Te){const Q=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(Q))/Math.PI-90}function Wt(Te,Q,ee,ie){let ge=ie;const be=Q+(ee-Q>>1);let Ie,oe=ee-Q;const je=Te[Q],We=Te[Q+1],Ne=Te[ee],De=Te[ee+1];for(let ct=Q+3;ct<ee;ct+=3){const kt=wr(Te[ct],Te[ct+1],je,We,Ne,De);if(kt>ge)Ie=ct,ge=kt;else if(kt===ge){const Ft=Math.abs(ct-be);Ft<oe&&(Ie=ct,oe=Ft)}}ge>ie&&(Ie-Q>3&&Wt(Te,Q,Ie,ie),Te[Ie+2]=ge,ee-Ie>3&&Wt(Te,Ie,ee,ie))}function wr(Te,Q,ee,ie,ge,be){let Ie=ge-ee,oe=be-ie;if(Ie!==0||oe!==0){const je=((Te-ee)*Ie+(Q-ie)*oe)/(Ie*Ie+oe*oe);je>1?(ee=ge,ie=be):je>0&&(ee+=Ie*je,ie+=oe*je)}return Ie=Te-ee,oe=Q-ie,Ie*Ie+oe*oe}function kr(Te,Q,ee,ie){const ge={id:Te??null,type:Q,geometry:ee,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Q==="Point"||Q==="MultiPoint"||Q==="LineString")er(ge,ee);else if(Q==="Polygon")er(ge,ee[0]);else if(Q==="MultiLineString")for(const be of ee)er(ge,be);else if(Q==="MultiPolygon")for(const be of ee)er(ge,be[0]);return ge}function er(Te,Q){for(let ee=0;ee<Q.length;ee+=3)Te.minX=Math.min(Te.minX,Q[ee]),Te.minY=Math.min(Te.minY,Q[ee+1]),Te.maxX=Math.max(Te.maxX,Q[ee]),Te.maxY=Math.max(Te.maxY,Q[ee+1])}function Yr(Te,Q,ee,ie){if(!Q.geometry)return;const ge=Q.geometry.coordinates;if(ge&&ge.length===0)return;const be=Q.geometry.type,Ie=Math.pow(ee.tolerance/((1<<ee.maxZoom)*ee.extent),2);let oe=[],je=Q.id;if(ee.promoteId?je=Q.properties[ee.promoteId]:ee.generateId&&(je=ie||0),be==="Point")Zn(ge,oe);else if(be==="MultiPoint")for(const We of ge)Zn(We,oe);else if(be==="LineString")Rn(ge,oe,Ie,!1);else if(be==="MultiLineString"){if(ee.lineMetrics){for(const We of ge)oe=[],Rn(We,oe,Ie,!1),Te.push(kr(je,"LineString",oe,Q.properties));return}ri(ge,oe,Ie,!1)}else if(be==="Polygon")ri(ge,oe,Ie,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(const We of Q.geometry.geometries)Yr(Te,{id:je,geometry:We,properties:Q.properties},ee,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const We of ge){const Ne=[];ri(We,Ne,Ie,!0),oe.push(Ne)}}Te.push(kr(je,be,oe,Q.properties))}function Zn(Te,Q){Q.push(vn(Te[0]),Ni(Te[1]),0)}function Rn(Te,Q,ee,ie){let ge,be,Ie=0;for(let je=0;je<Te.length;je++){const We=vn(Te[je][0]),Ne=Ni(Te[je][1]);Q.push(We,Ne,0),je>0&&(Ie+=ie?(ge*Ne-We*be)/2:Math.sqrt(Math.pow(We-ge,2)+Math.pow(Ne-be,2))),ge=We,be=Ne}const oe=Q.length-3;Q[2]=1,Wt(Q,0,oe,ee),Q[oe+2]=1,Q.size=Math.abs(Ie),Q.start=0,Q.end=Q.size}function ri(Te,Q,ee,ie){for(let ge=0;ge<Te.length;ge++){const be=[];Rn(Te[ge],be,ee,ie),Q.push(be)}}function vn(Te){return Te/360+.5}function Ni(Te){const Q=Math.sin(Te*Math.PI/180),ee=.5-.25*Math.log((1+Q)/(1-Q))/Math.PI;return ee<0?0:ee>1?1:ee}function Cr(Te,Q,ee,ie,ge,be,Ie,oe){if(ie/=Q,be>=(ee/=Q)&&Ie<ie)return Te;if(Ie<ee||be>=ie)return null;const je=[];for(const We of Te){const Ne=We.geometry;let De=We.type;const ct=ge===0?We.minX:We.minY,kt=ge===0?We.maxX:We.maxY;if(ct>=ee&&kt<ie){je.push(We);continue}if(kt<ee||ct>=ie)continue;let Ft=[];if(De==="Point"||De==="MultiPoint")ni(Ne,Ft,ee,ie,ge);else if(De==="LineString")xi(Ne,Ft,ee,ie,ge,!1,oe.lineMetrics);else if(De==="MultiLineString")vi(Ne,Ft,ee,ie,ge,!1);else if(De==="Polygon")vi(Ne,Ft,ee,ie,ge,!0);else if(De==="MultiPolygon")for(const Pr of Ne){const Yt=[];vi(Pr,Yt,ee,ie,ge,!0),Yt.length&&Ft.push(Yt)}if(Ft.length){if(oe.lineMetrics&&De==="LineString"){for(const Pr of Ft)je.push(kr(We.id,De,Pr,We.tags));continue}De!=="LineString"&&De!=="MultiLineString"||(Ft.length===1?(De="LineString",Ft=Ft[0]):De="MultiLineString"),De!=="Point"&&De!=="MultiPoint"||(De=Ft.length===3?"Point":"MultiPoint"),je.push(kr(We.id,De,Ft,We.tags))}}return je.length?je:null}function ni(Te,Q,ee,ie,ge){for(let be=0;be<Te.length;be+=3){const Ie=Te[be+ge];Ie>=ee&&Ie<=ie&&Dn(Q,Te[be],Te[be+1],Te[be+2])}}function xi(Te,Q,ee,ie,ge,be,Ie){let oe=Nr(Te);const je=ge===0?Ee:Be;let We,Ne,De=Te.start;for(let Yt=0;Yt<Te.length-3;Yt+=3){const nr=Te[Yt],_r=Te[Yt+1],it=Te[Yt+2],Qr=Te[Yt+3],Vr=Te[Yt+4],On=ge===0?nr:_r,$r=ge===0?Qr:Vr;let at=!1;Ie&&(We=Math.sqrt(Math.pow(nr-Qr,2)+Math.pow(_r-Vr,2))),On<ee?$r>ee&&(Ne=je(oe,nr,_r,Qr,Vr,ee),Ie&&(oe.start=De+We*Ne)):On>ie?$r<ie&&(Ne=je(oe,nr,_r,Qr,Vr,ie),Ie&&(oe.start=De+We*Ne)):Dn(oe,nr,_r,it),$r<ee&&On>=ee&&(Ne=je(oe,nr,_r,Qr,Vr,ee),at=!0),$r>ie&&On<=ie&&(Ne=je(oe,nr,_r,Qr,Vr,ie),at=!0),!be&&at&&(Ie&&(oe.end=De+We*Ne),Q.push(oe),oe=Nr(Te)),Ie&&(De+=We)}let ct=Te.length-3;const kt=Te[ct],Ft=Te[ct+1],Pr=ge===0?kt:Ft;Pr>=ee&&Pr<=ie&&Dn(oe,kt,Ft,Te[ct+2]),ct=oe.length-3,be&&ct>=3&&(oe[ct]!==oe[0]||oe[ct+1]!==oe[1])&&Dn(oe,oe[0],oe[1],oe[2]),oe.length&&Q.push(oe)}function Nr(Te){const Q=[];return Q.size=Te.size,Q.start=Te.start,Q.end=Te.end,Q}function vi(Te,Q,ee,ie,ge,be){for(const Ie of Te)xi(Ie,Q,ee,ie,ge,be,!1)}function Dn(Te,Q,ee,ie){Te.push(Q,ee,ie)}function Ee(Te,Q,ee,ie,ge,be){const Ie=(be-Q)/(ie-Q);return Dn(Te,be,ee+(ge-ee)*Ie,1),Ie}function Be(Te,Q,ee,ie,ge,be){const Ie=(be-ee)/(ge-ee);return Dn(Te,Q+(ie-Q)*Ie,be,1),Ie}function He(Te,Q){const ee=[];for(let ie=0;ie<Te.length;ie++){const ge=Te[ie],be=ge.type;let Ie;if(be==="Point"||be==="MultiPoint"||be==="LineString")Ie=xt(ge.geometry,Q);else if(be==="MultiLineString"||be==="Polygon"){Ie=[];for(const oe of ge.geometry)Ie.push(xt(oe,Q))}else if(be==="MultiPolygon"){Ie=[];for(const oe of ge.geometry){const je=[];for(const We of oe)je.push(xt(We,Q));Ie.push(je)}}ee.push(kr(ge.id,be,Ie,ge.tags))}return ee}function xt(Te,Q){const ee=[];ee.size=Te.size,Te.start!==void 0&&(ee.start=Te.start,ee.end=Te.end);for(let ie=0;ie<Te.length;ie+=3)ee.push(Te[ie]+Q,Te[ie+1],Te[ie+2]);return ee}function vt(Te,Q){if(Te.transformed)return Te;const ee=1<<Te.z,ie=Te.x,ge=Te.y;for(const be of Te.features){const Ie=be.geometry,oe=be.type;if(be.geometry=[],oe===1)for(let je=0;je<Ie.length;je+=2)be.geometry.push(dt(Ie[je],Ie[je+1],Q,ee,ie,ge));else for(let je=0;je<Ie.length;je++){const We=[];for(let Ne=0;Ne<Ie[je].length;Ne+=2)We.push(dt(Ie[je][Ne],Ie[je][Ne+1],Q,ee,ie,ge));be.geometry.push(We)}}return Te.transformed=!0,Te}function dt(Te,Q,ee,ie,ge,be){return[Math.round(ee*(Te*ie-ge)),Math.round(ee*(Q*ie-be))]}function Tt(Te,Q,ee,ie,ge){const be=Q===ge.maxZoom?0:ge.tolerance/((1<<Q)*ge.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:Te.length,source:null,x:ee,y:ie,z:Q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const oe of Te)or(Ie,oe,be,ge);return Ie}function or(Te,Q,ee,ie){const ge=Q.geometry,be=Q.type,Ie=[];if(Te.minX=Math.min(Te.minX,Q.minX),Te.minY=Math.min(Te.minY,Q.minY),Te.maxX=Math.max(Te.maxX,Q.maxX),Te.maxY=Math.max(Te.maxY,Q.maxY),be==="Point"||be==="MultiPoint")for(let oe=0;oe<ge.length;oe+=3)Ie.push(ge[oe],ge[oe+1]),Te.numPoints++,Te.numSimplified++;else if(be==="LineString")vr(Ie,ge,Te,ee,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(let oe=0;oe<ge.length;oe++)vr(Ie,ge[oe],Te,ee,be==="Polygon",oe===0);else if(be==="MultiPolygon")for(let oe=0;oe<ge.length;oe++){const je=ge[oe];for(let We=0;We<je.length;We++)vr(Ie,je[We],Te,ee,!0,We===0)}if(Ie.length){let oe=Q.tags||null;if(be==="LineString"&&ie.lineMetrics){oe={};for(const We in Q.tags)oe[We]=Q.tags[We];oe.mapbox_clip_start=ge.start/ge.size,oe.mapbox_clip_end=ge.end/ge.size}const je={geometry:Ie,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:oe};Q.id!==null&&(je.id=Q.id),Te.features.push(je)}}function vr(Te,Q,ee,ie,ge,be){const Ie=ie*ie;if(ie>0&&Q.size<(ge?Ie:ie))return void(ee.numPoints+=Q.length/3);const oe=[];for(let je=0;je<Q.length;je+=3)(ie===0||Q[je+2]>Ie)&&(ee.numSimplified++,oe.push(Q[je],Q[je+1])),ee.numPoints++;ge&&function(je,We){let Ne=0;for(let De=0,ct=je.length,kt=ct-2;De<ct;kt=De,De+=2)Ne+=(je[De]-je[kt])*(je[De+1]+je[kt+1]);if(Ne>0===We)for(let De=0,ct=je.length;De<ct/2;De+=2){const kt=je[De],Ft=je[De+1];je[De]=je[ct-2-De],je[De+1]=je[ct-1-De],je[ct-2-De]=kt,je[ct-1-De]=Ft}}(oe,be),Te.push(oe)}const Tn={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ii{constructor(Q,ee){const ie=(ee=this.options=function(be,Ie){for(const oe in Ie)be[oe]=Ie[oe];return be}(Object.create(Tn),ee)).debug;if(ie&&console.time("preprocess data"),ee.maxZoom<0||ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ee.promoteId&&ee.generateId)throw new Error("promoteId and generateId cannot be used together.");let ge=function(be,Ie){const oe=[];if(be.type==="FeatureCollection")for(let je=0;je<be.features.length;je++)Yr(oe,be.features[je],Ie,je);else Yr(oe,be.type==="Feature"?be:{geometry:be},Ie);return oe}(Q,ee);this.tiles={},this.tileCoords=[],ie&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ee.indexMaxZoom,ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ge=function(be,Ie){const oe=Ie.buffer/Ie.extent;let je=be;const We=Cr(be,1,-1-oe,oe,0,-1,2,Ie),Ne=Cr(be,1,1-oe,2+oe,0,-1,2,Ie);return(We||Ne)&&(je=Cr(be,1,-oe,1+oe,0,-1,2,Ie)||[],We&&(je=He(We,1).concat(je)),Ne&&(je=je.concat(He(Ne,-1)))),je}(ge,ee),ge.length&&this.splitTile(ge,0,0,0),ie&&(ge.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Q,ee,ie,ge,be,Ie,oe){const je=[Q,ee,ie,ge],We=this.options,Ne=We.debug;for(;je.length;){ge=je.pop(),ie=je.pop(),ee=je.pop(),Q=je.pop();const De=1<<ee,ct=_i(ee,ie,ge);let kt=this.tiles[ct];if(!kt&&(Ne>1&&console.time("creation"),kt=this.tiles[ct]=Tt(Q,ee,ie,ge,We),this.tileCoords.push({z:ee,x:ie,y:ge}),Ne)){Ne>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ee,ie,ge,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));const at=`z${ee}`;this.stats[at]=(this.stats[at]||0)+1,this.total++}if(kt.source=Q,be==null){if(ee===We.indexMaxZoom||kt.numPoints<=We.indexMaxPoints)continue}else{if(ee===We.maxZoom||ee===be)continue;if(be!=null){const at=be-ee;if(ie!==Ie>>at||ge!==oe>>at)continue}}if(kt.source=null,Q.length===0)continue;Ne>1&&console.time("clipping");const Ft=.5*We.buffer/We.extent,Pr=.5-Ft,Yt=.5+Ft,nr=1+Ft;let _r=null,it=null,Qr=null,Vr=null,On=Cr(Q,De,ie-Ft,ie+Yt,0,kt.minX,kt.maxX,We),$r=Cr(Q,De,ie+Pr,ie+nr,0,kt.minX,kt.maxX,We);Q=null,On&&(_r=Cr(On,De,ge-Ft,ge+Yt,1,kt.minY,kt.maxY,We),it=Cr(On,De,ge+Pr,ge+nr,1,kt.minY,kt.maxY,We),On=null),$r&&(Qr=Cr($r,De,ge-Ft,ge+Yt,1,kt.minY,kt.maxY,We),Vr=Cr($r,De,ge+Pr,ge+nr,1,kt.minY,kt.maxY,We),$r=null),Ne>1&&console.timeEnd("clipping"),je.push(_r||[],ee+1,2*ie,2*ge),je.push(it||[],ee+1,2*ie,2*ge+1),je.push(Qr||[],ee+1,2*ie+1,2*ge),je.push(Vr||[],ee+1,2*ie+1,2*ge+1)}}getTile(Q,ee,ie){Q=+Q,ee=+ee,ie=+ie;const ge=this.options,{extent:be,debug:Ie}=ge;if(Q<0||Q>24)return null;const oe=1<<Q,je=_i(Q,ee=ee+oe&oe-1,ie);if(this.tiles[je])return vt(this.tiles[je],be);Ie>1&&console.log("drilling down to z%d-%d-%d",Q,ee,ie);let We,Ne=Q,De=ee,ct=ie;for(;!We&&Ne>0;)Ne--,De>>=1,ct>>=1,We=this.tiles[_i(Ne,De,ct)];return We&&We.source?(Ie>1&&(console.log("found parent tile z%d-%d-%d",Ne,De,ct),console.time("drilling down")),this.splitTile(We.source,Ne,De,ct,Q,ee,ie),Ie>1&&console.timeEnd("drilling down"),this.tiles[je]?vt(this.tiles[je],be):null):null}}function _i(Te,Q,ee){return 32*((1<<Te)*ee+Q)+Te}class Rs extends Re{constructor(Q,ee,ie,ge=Kn){super(Q,ee,ie),this._dataUpdateable=new Map,this._createGeoJSONIndex=ge}loadVectorTile(Q,ee){return h._(this,void 0,void 0,function*(){const ie=Q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ge=this._geoJSONIndex.getTile(ie.z,ie.x,ie.y);return ge?pe(new M(ge.features,{version:2,extent:h.a4})):null})}loadData(Q){return h._(this,void 0,void 0,function*(){var ee;(ee=this._pendingRequest)===null||ee===void 0||ee.abort();const ie=this._startPerformance(Q);this._pendingRequest=new AbortController;try{(!this._pendingData||Q.request||Q.data||Q.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(Q,this._pendingRequest));const ge=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(ge,Q),this.loaded={};const be=Q.dataDiff&&h.a6(ge)?{applyDiff:!0}:{data:ge};return this._finishPerformance(ie,Q,be),be}catch(ge){if(delete this._pendingRequest,h.cH(ge))return{abandoned:!0};throw ge}})}_startPerformance(Q){var ee;if(!((ee=Q==null?void 0:Q.request)===null||ee===void 0)&&ee.collectResourceTiming)return new h.c$(Q.request)}_finishPerformance(Q,ee,ie){if(!Q)return;const ge=Q.finish();ge&&(ie.resourceTiming={},ie.resourceTiming[ee.source]=JSON.parse(JSON.stringify(ge)))}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Q){const ee=this.loaded;return ee&&ee[Q.uid]?super.reloadTile(Q):this.loadTile(Q)}loadAndProcessGeoJSON(Q,ee){return h._(this,void 0,void 0,function*(){let ie;if(Q.request?ie=yield this.loadGeoJSONFromUrl(Q.request,Q.promoteId,ee):Q.data?ie=this._loadGeoJSONFromObject(Q.data,Q.promoteId):Q.dataDiff&&(ie=this._loadGeoJSONFromDiff(Q.dataDiff,Q.promoteId,Q.source)),delete this._pendingRequest,typeof ie!="object")throw new Error(`Input data given to '${Q.source}' is not a valid GeoJSON object.`);return Ge(ie,!0),Q.filter&&(ie=this._filterGeoJSON(ie,Q.filter)),ie})}loadGeoJSONFromUrl(Q,ee,ie){return h._(this,void 0,void 0,function*(){const ge=yield h.j(Q,ie);return this._dataUpdateable=h.a6(ge.data,ee)?h.a7(ge.data,ee):void 0,ge.data})}_loadGeoJSONFromObject(Q,ee){return this._dataUpdateable=h.a6(Q,ee)?h.a7(Q,ee):void 0,Q}_loadGeoJSONFromDiff(Q,ee,ie){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ie}`);h.a8(this._dataUpdateable,Q,ee);const ge=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(ge)}_filterGeoJSON(Q,ee){const ie=h.d3(ee,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(be=>`${be.key}: ${be.message}`).join(", "));const ge=Q.features.filter(be=>ie.value.evaluate({zoom:0},be));return this._toFeatureCollection(ge)}_toFeatureCollection(Q){return{type:"FeatureCollection",features:Q}}removeSource(Q){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Q){return this._geoJSONIndex.getClusterExpansionZoom(Q.clusterId)}getClusterChildren(Q){return this._geoJSONIndex.getChildren(Q.clusterId)}getClusterLeaves(Q){return this._geoJSONIndex.getLeaves(Q.clusterId,Q.limit,Q.offset)}}function Kn(Te,Q){return Q.cluster?new _e(function({superclusterOptions:ee,clusterProperties:ie}){if(!ie||!ee)return ee;const ge={},be={},Ie={accumulated:null,zoom:0},oe={properties:null},je=Object.keys(ie);for(const We of je){const[Ne,De]=ie[We],ct=h.d3(De),kt=h.d3(typeof Ne=="string"?[Ne,["accumulated"],["get",We]]:Ne);ge[We]=ct.value,be[We]=kt.value}return ee.map=We=>{oe.properties=We;const Ne={};for(const De of je)Ne[De]=ge[De].evaluate(Ie,oe);return Ne},ee.reduce=(We,Ne)=>{oe.properties=Ne;for(const De of je)Ie.accumulated=We[De],We[De]=be[De].evaluate(Ie,oe)},ee}(Q)).load(Te.features):function(ee,ie){return new ii(ee,ie)}(Te,Q.geojsonVtOptions)}class nn{constructor(Q){this.self=Q,this.actor=new h.L(Q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ee,ie)=>{if(this.externalWorkerSourceTypes[ee])throw new Error(`Worker source with name "${ee}" already registered.`);this.externalWorkerSourceTypes[ee]=ie},this.self.addProtocol=h.cJ,this.self.removeProtocol=h.cK,this.self.registerRTLTextPlugin=ee=>{h.d4.setMethods(ee)},this.actor.registerMessageHandler("LDT",(ee,ie)=>this._getDEMWorkerSource(ee,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RDT",(ee,ie)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ee,ie.source).removeTile(ie)})),this.actor.registerMessageHandler("GCEZ",(ee,ie)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ee,ie.type,ie.source).getClusterExpansionZoom(ie)})),this.actor.registerMessageHandler("GCC",(ee,ie)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ee,ie.type,ie.source).getClusterChildren(ie)})),this.actor.registerMessageHandler("GCL",(ee,ie)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(ee,ie.type,ie.source).getClusterLeaves(ie)})),this.actor.registerMessageHandler("LD",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).loadData(ie)),this.actor.registerMessageHandler("GD",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).getData()),this.actor.registerMessageHandler("LT",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).loadTile(ie)),this.actor.registerMessageHandler("RT",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).reloadTile(ie)),this.actor.registerMessageHandler("AT",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).abortTile(ie)),this.actor.registerMessageHandler("RMT",(ee,ie)=>this._getWorkerSource(ee,ie.type,ie.source).removeTile(ie)),this.actor.registerMessageHandler("RS",(ee,ie)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[ee]||!this.workerSources[ee][ie.type]||!this.workerSources[ee][ie.type][ie.source])return;const ge=this.workerSources[ee][ie.type][ie.source];delete this.workerSources[ee][ie.type][ie.source],ge.removeSource!==void 0&&ge.removeSource(ie)})),this.actor.registerMessageHandler("RM",ee=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[ee],delete this.availableImages[ee],delete this.workerSources[ee],delete this.demWorkerSources[ee],this.globalStates.delete(ee)})),this.actor.registerMessageHandler("SR",(ee,ie)=>h._(this,void 0,void 0,function*(){this.referrer=ie})),this.actor.registerMessageHandler("SRPS",(ee,ie)=>this._syncRTLPluginState(ee,ie)),this.actor.registerMessageHandler("IS",(ee,ie)=>h._(this,void 0,void 0,function*(){this.self.importScripts(ie)})),this.actor.registerMessageHandler("SI",(ee,ie)=>this._setImages(ee,ie)),this.actor.registerMessageHandler("UL",(ee,ie)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(ee).update(ie.layers,ie.removedIds,this._getGlobalState(ee))})),this.actor.registerMessageHandler("UGS",(ee,ie)=>h._(this,void 0,void 0,function*(){const ge=this._getGlobalState(ee);for(const be in ie)ge[be]=ie[be]})),this.actor.registerMessageHandler("SL",(ee,ie)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(ee).replace(ie,this._getGlobalState(ee))}))}_getGlobalState(Q){let ee=this.globalStates.get(Q);return ee||(ee={},this.globalStates.set(Q,ee)),ee}_setImages(Q,ee){return h._(this,void 0,void 0,function*(){this.availableImages[Q]=ee;for(const ie in this.workerSources[Q]){const ge=this.workerSources[Q][ie];for(const be in ge)ge[be].availableImages=ee}})}_syncRTLPluginState(Q,ee){return h._(this,void 0,void 0,function*(){return yield h.d4.syncState(ee,this.self.importScripts)})}_getAvailableImages(Q){let ee=this.availableImages[Q];return ee||(ee=[]),ee}_getLayerIndex(Q){let ee=this.layerIndexes[Q];return ee||(ee=this.layerIndexes[Q]=new o),ee}_getWorkerSource(Q,ee,ie){if(this.workerSources[Q]||(this.workerSources[Q]={}),this.workerSources[Q][ee]||(this.workerSources[Q][ee]={}),!this.workerSources[Q][ee][ie]){const ge={sendAsync:(be,Ie)=>(be.targetMapId=Q,this.actor.sendAsync(be,Ie))};switch(ee){case"vector":this.workerSources[Q][ee][ie]=new Re(ge,this._getLayerIndex(Q),this._getAvailableImages(Q));break;case"geojson":this.workerSources[Q][ee][ie]=new Rs(ge,this._getLayerIndex(Q),this._getAvailableImages(Q));break;default:this.workerSources[Q][ee][ie]=new this.externalWorkerSourceTypes[ee](ge,this._getLayerIndex(Q),this._getAvailableImages(Q))}}return this.workerSources[Q][ee][ie]}_getDEMWorkerSource(Q,ee){return this.demWorkerSources[Q]||(this.demWorkerSources[Q]={}),this.demWorkerSources[Q][ee]||(this.demWorkerSources[Q][ee]=new Me),this.demWorkerSources[Q][ee]}}return h.i(self)&&(self.worker=new nn(self)),nn}),a("index",["exports","./shared"],function(h,o){var _="5.13.0";function T(){var b=new o.A(4);return o.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let P,E,M;const I={frame(b,s,d){const g=requestAnimationFrame(w=>{x(),s(w)}),{unsubscribe:x}=o.s(b.signal,"abort",()=>{x(),cancelAnimationFrame(g),d(o.c())},!1)},frameAsync(b){return new Promise((s,d)=>{this.frame(b,s,d)})},getImageData(b,s=0){return this.getImageCanvasContext(b).getImageData(-s,-s,b.width+2*s,b.height+2*s)},getImageCanvasContext(b){const s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=b.width,s.height=b.height,d.drawImage(b,0,0,b.width,b.height),d},resolveURL:b=>(P||(P=document.createElement("a")),P.href=b,P.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return M!==void 0?M:!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)},set prefersReducedMotion(b){M=b}},z=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(b){this._frozenAt=b}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function F(){return z.getCurrentTime()}class D{static testProp(s){if(!D.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in D.docStyle)return s[d];return s[0]}static create(s,d,g){const x=window.document.createElement(s);return d!==void 0&&(x.className=d),g&&g.appendChild(x),x}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){D.docStyle&&D.selectProp&&(D.userSelect=D.docStyle[D.selectProp],D.docStyle[D.selectProp]="none")}static enableDrag(){D.docStyle&&D.selectProp&&(D.docStyle[D.selectProp]=D.userSelect)}static setTransform(s,d){s.style[D.transformProp]=d}static addEventListener(s,d,g,x={}){s.addEventListener(d,g,"passive"in x?x:x.capture)}static removeEventListener(s,d,g,x={}){s.removeEventListener(d,g,"passive"in x?x:x.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",D.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",D.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",D.suppressClickInternal,!0)},0)}static getScale(s){const d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,g){const x=d.boundingClientRect;return new o.P((g.clientX-x.left)/d.x-s.clientLeft,(g.clientY-x.top)/d.y-s.clientTop)}static mousePos(s,d){const g=D.getScale(s);return D.getPoint(s,g,d)}static touchPos(s,d){const g=[],x=D.getScale(s);for(let w=0;w<d.length;w++)g.push(D.getPoint(s,x,d[w]));return g}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}static sanitize(s){const d=new DOMParser().parseFromString(s,"text/html").body||document.createElement("body"),g=d.querySelectorAll("script");for(const x of g)x.remove();return D.clean(d),d.innerHTML}static isPossiblyDangerous(s,d){const g=d.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(s)||!g.includes("javascript:")&&!g.includes("data:"))||!!s.startsWith("on")||void 0}static clean(s){const d=s.children;for(const g of d)D.removeAttributes(g),D.clean(g)}static removeAttributes(s){for(const{name:d,value:g}of s.attributes)D.isPossiblyDangerous(d,g)&&s.removeAttribute(d)}}D.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,D.selectProp=D.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),D.transformProp=D.testProp(["transform","WebkitTransform"]);const q={supported:!1,testSupport:function(b){!te&&W&&(se?he(b):$=b)}};let $,W,te=!1,se=!1;function he(b){const s=b.createTexture();b.bindTexture(b.TEXTURE_2D,s);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,W),b.isContextLost())return;q.supported=!0}catch{}b.deleteTexture(s),te=!0}var pe;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{$&&he($),$=null,se=!0},W.onerror=()=>{te=!0,$=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let s,d,g,x;b.resetRequestQueue=()=>{s=[],d=0,g=0,x={}},b.addThrottleControl=N=>{const O=g++;return x[O]=N,O},b.removeThrottleControl=N=>{delete x[N],k()},b.getImage=(N,O,B=!0)=>new Promise((K,Z)=>{q.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),s.push({abortController:O,requestParameters:N,supportImageRefresh:B,state:"queued",onError:X=>{Z(X)},onSuccess:X=>{K(X)}}),k()});const w=N=>o._(this,void 0,void 0,function*(){N.state="running";const{requestParameters:O,supportImageRefresh:B,onError:K,onSuccess:Z,abortController:X}=N,re=B===!1&&!o.i(self)&&!o.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((de,ye)=>de&&ye==="accept",!0));d++;const le=re?A(O,X):o.m(O,X);try{const de=yield le;delete N.abortController,N.state="completed",de.data instanceof HTMLImageElement||o.b(de.data)?Z(de):de.data&&Z({data:yield(ce=de.data,typeof createImageBitmap=="function"?o.f(ce):o.h(ce)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete N.abortController,K(de)}finally{d--,k()}var ce}),k=()=>{const N=(()=>{for(const O of Object.keys(x))if(x[O]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=d;O<N&&s.length>0;O++){const B=s.shift();B.abortController.signal.aborted?O--:w(B)}},A=(N,O)=>new Promise((B,K)=>{const Z=new Image,X=N.url,re=N.credentials;re&&re==="include"?Z.crossOrigin="use-credentials":(re&&re==="same-origin"||!o.d(X))&&(Z.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{Z.src="",K(o.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,B({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,O.signal.aborted||K(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=X})}(pe||(pe={})),pe.resetRequestQueue();class xe{constructor(s){this._transformRequestFn=s??null}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function Re(b){const s=[];if(typeof b=="string")s.push({id:"default",url:b});else if(b&&b.length>0){const d=[];for(const{id:g,url:x}of b){const w=`${g}${x}`;d.indexOf(w)===-1&&(d.push(w),s.push({id:g,url:x}))}}return s}function Me(b,s,d){try{const g=new URL(b);return g.pathname+=`${s}${d}`,g.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function pt(b){const{userImage:s}=b;return!!(s&&s.render&&s.render())&&(b.data.replace(new Uint8Array(s.data.buffer)),!0)}class Oe extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const s of Object.keys(this.images))this.removeImage(s);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(const{ids:d,promiseResolve:g}of this.requestors)g(this._getImagesForIds(d));this.requestors=[]}}getImage(s){const d=this.images[s];if(d&&!d.data&&d.spriteData){const g=d.spriteData;d.data=new o.R({width:g.width,height:g.height},g.context.getImageData(g.x,g.y,g.width,g.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let g=!0;const x=d.data||d.spriteData;return this._validateStretch(d.stretchX,x&&x.width)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,x&&x.height)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new o.k(new Error(`Image "${s}" has invalid "content" value`))),g=!1),g}_validateStretch(s,d){if(!s)return!0;let g=0;for(const x of s){if(x[0]<g||x[1]<x[0]||d<x[1])return!1;g=x[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;const g=d.spriteData,x=g&&g.width||d.data.width,w=g&&g.height||d.data.height;return!(s[0]<0||x<s[0]||s[1]<0||w<s[1]||s[2]<0||x<s[2]||s[3]<0||w<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,g=!0){const x=this.getImage(s);if(g&&(x.data.width!==d.data.width||x.data.height!==d.data.height))throw new Error(`size mismatch between old image (${x.data.width}x${x.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=x.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){const d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,g)=>{let x=!0;if(!this.isLoaded())for(const w of s)this.images[w]||(x=!1);this.isLoaded()||x?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){const d={};for(const g of s){let x=this.getImage(g);x||(this.fire(new o.l("styleimagemissing",{id:g})),x=this.getImage(g)),x?d[g]={data:x.data.clone(),pixelRatio:x.pixelRatio,sdf:x.sdf,version:x.version,stretchX:x.stretchX,stretchY:x.stretchY,content:x.content,textFitWidth:x.textFitWidth,textFitHeight:x.textFitHeight,hasRenderCallback:!!(x.userImage&&x.userImage.render)}:o.w(`Image "${g}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){const d=this.patterns[s],g=this.getImage(s);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const x={w:g.data.width+2,h:g.data.height+2,x:0,y:0},w=new o.I(x,g);this.patterns[s]={bin:x,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){const d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const s=[];for(const w in this.patterns)s.push(this.patterns[w].bin);const{w:d,h:g}=o.p(s),x=this.atlasImage;x.resize({width:d||1,height:g||1});for(const w in this.patterns){const{bin:k}=this.patterns[w],A=k.x+1,N=k.y+1,O=this.getImage(w).data,B=O.width,K=O.height;o.R.copy(O,x,{x:0,y:0},{x:A,y:N},{width:B,height:K}),o.R.copy(O,x,{x:0,y:K-1},{x:A,y:N-1},{width:B,height:1}),o.R.copy(O,x,{x:0,y:0},{x:A,y:N+K},{width:B,height:1}),o.R.copy(O,x,{x:B-1,y:0},{x:A-1,y:N},{width:1,height:K}),o.R.copy(O,x,{x:0,y:0},{x:A+B,y:N},{width:1,height:K})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(const d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.getImage(d);g||o.w(`Image with ID: "${d}" was not found`),pt(g)&&this.updateImage(d,g)}}cloneImages(){const s={};for(const d in this.images){const g=this.images[d];s[d]=Object.assign(Object.assign({},g),{data:g.data?g.data.clone():null})}return s}}const Ye=1e20;function Ge(b,s,d,g,x,w,k,A,N){for(let O=s;O<s+g;O++)rt(b,d*w+O,w,x,k,A,N);for(let O=d;O<d+x;O++)rt(b,O*w+s,1,g,k,A,N)}function rt(b,s,d,g,x,w,k){w[0]=0,k[0]=-Ye,k[1]=Ye,x[0]=b[s];for(let A=1,N=0,O=0;A<g;A++){x[A]=b[s+A*d];const B=A*A;do{const K=w[N];O=(x[A]-x[K]+B-K*K)/(A-K)/2}while(O<=k[N]&&--N>-1);N++,w[N]=A,k[N]=O,k[N+1]=Ye}for(let A=0,N=0;A<g;A++){for(;k[N+1]<A;)N++;const O=w[N],B=A-O;b[s+A*d]=x[O]+B*B}}const nt=o.v.layout_symbol["text-font"].default.join(",");class Ve{constructor(s,d,g){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={},this.lang=g}setURL(s){this.url=s}getGlyphs(s){return o._(this,void 0,void 0,function*(){const d=[];for(const w in s)for(const k of s[w])d.push(this._getAndCacheGlyphsPromise(w,k));const g=yield Promise.all(d),x={};for(const{stack:w,id:k,glyph:A}of g)x[w]||(x[w]={}),x[w][k]=A&&{id:A.id,bitmap:A.bitmap.clone(),metrics:A.metrics};return x})}_getAndCacheGlyphsPromise(s,d){return o._(this,void 0,void 0,function*(){let g=this.entries[s];g||(g=this.entries[s]={glyphs:{},requests:{},ranges:{}});let x=g.glyphs[d];return x!==void 0?{stack:s,id:d,glyph:x}:!this.url||this._charUsesLocalIdeographFontFamily(d)?(x=g.glyphs[d]=this._drawGlyph(g,s,d),{stack:s,id:d,glyph:x}):yield this._downloadAndCacheRangePromise(s,d)})}_downloadAndCacheRangePromise(s,d){return o._(this,void 0,void 0,function*(){const g=this.entries[s],x=Math.floor(d/256);if(g.ranges[x])return{stack:s,id:d,glyph:null};if(!g.requests[x]){const w=Ve.loadGlyphRange(s,x,this.url,this.requestManager);g.requests[x]=w}try{const w=yield g.requests[x];for(const k in w)g.glyphs[+k]=w[+k];return g.ranges[x]=!0,{stack:s,id:d,glyph:w[d]||null}}catch(w){const k=g.glyphs[d]=this._drawGlyph(g,s,d);return this._warnOnMissingGlyphRange(k,x,d,w),{stack:s,id:d,glyph:k}}})}_warnOnMissingGlyphRange(s,d,g,x){const w=256*d,k=w+255,A=g.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${d}, ${w}-${k}. Rendering codepoint U+${A} locally instead. ${x}`)}_charUsesLocalIdeographFontFamily(s){return!!this.localIdeographFontFamily&&o.q(s)}_drawGlyph(s,d,g){const x=d===nt&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(g),w=x?"ideographTinySDF":"tinySDF";s[w]||(s[w]=this._createTinySDF(x?this.localIdeographFontFamily:d));const k=s[w].draw(String.fromCodePoint(g));return{id:g,bitmap:new o.r({width:k.width||60,height:k.height||60},k.data),metrics:{width:k.glyphWidth/2||24,height:k.glyphHeight/2||24,left:k.glyphLeft/2+.5||0,top:k.glyphTop/2-27.5||-8,advance:k.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(s){const d=s?s.split(","):[];d.push("sans-serif");const g=d.map(x=>/[-\w]+/.test(x)?x:`'${CSS.escape(x)}'`).join(",");return new Ve.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:g,fontWeight:this._fontWeight(d[0]),fontStyle:this._fontStyle(d[0]),lang:this.lang})}_fontStyle(s){return/italic/i.test(s)?"italic":/oblique/i.test(s)?"oblique":"normal"}_fontWeight(s){const d={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let g;for(const[x,w]of Object.entries(d))new RegExp(`\\b${x}\\b`,"i").test(s)&&(g=`${w}`);return g}destroy(){for(const s in this.entries){const d=this.entries[s];d.tinySDF&&(d.tinySDF=null),d.ideographTinySDF&&(d.ideographTinySDF=null),d.glyphs={},d.requests={},d.ranges={}}this.entries={}}}Ve.loadGlyphRange=function(b,s,d,g){return o._(this,void 0,void 0,function*(){const x=256*s,w=x+255,k=g.transformRequest(d.replace("{fontstack}",b).replace("{range}",`${x}-${w}`),"Glyphs"),A=yield o.n(k,new AbortController);if(!A||!A.data)throw new Error(`Could not load glyph range. range: ${s}, ${x}-${w}`);const N={};for(const O of o.o(A.data))N[O.id]=O;return N})},Ve.TinySDF=class{constructor({fontSize:b=24,buffer:s=3,radius:d=8,cutoff:g=.25,fontFamily:x="sans-serif",fontWeight:w="normal",fontStyle:k="normal",lang:A=null}={}){this.buffer=s,this.cutoff=g,this.radius=d,this.lang=A;const N=this.size=b+4*s,O=this._createCanvas(N),B=this.ctx=O.getContext("2d",{willReadFrequently:!0});B.font=`${k} ${w} ${b}px ${x}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(b){const s=document.createElement("canvas");return s.width=s.height=b,s}draw(b){const{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:x,actualBoundingBoxRight:w}=this.ctx.measureText(b),k=Math.ceil(d),A=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-x))),N=Math.min(this.size-this.buffer,k+Math.ceil(g)),O=A+2*this.buffer,B=N+2*this.buffer,K=Math.max(O*B,0),Z=new Uint8ClampedArray(K),X={data:Z,width:O,height:B,glyphWidth:A,glyphHeight:N,glyphTop:k,glyphLeft:0,glyphAdvance:s};if(A===0||N===0)return X;const{ctx:re,buffer:le,gridInner:ce,gridOuter:de}=this;this.lang&&(re.lang=this.lang),re.clearRect(le,le,A,N),re.fillText(b,le,le+k);const ye=re.getImageData(le,le,A,N);de.fill(Ye,0,K),ce.fill(0,0,K);for(let we=0;we<N;we++)for(let me=0;me<A;me++){const Se=ye.data[4*(we*A+me)+3]/255;if(Se===0)continue;const ke=(we+le)*O+me+le;if(Se===1)de[ke]=0,ce[ke]=Ye;else{const ve=.5-Se;de[ke]=ve>0?ve*ve:0,ce[ke]=ve<0?ve*ve:0}}Ge(de,0,0,O,B,O,this.f,this.v,this.z),Ge(ce,le,le,A,N,O,this.f,this.v,this.z);for(let we=0;we<K;we++){const me=Math.sqrt(de[we])-Math.sqrt(ce[we]);Z[we]=Math.round(255-255*(me/this.radius+this.cutoff))}return X}};class _e{constructor(){this.specification=o.u.light.position}possiblyEvaluate(s,d){return o.F(s.expression.evaluate(d))}interpolate(s,d,g){return{x:o.G.number(s.x,d.x,g),y:o.G.number(s.y,d.y,g),z:o.G.number(s.z,d.z,g)}}}let Le;class ft extends o.E{constructor(s){super(),Le=Le||new o.t({anchor:new o.D(o.u.light.anchor),position:new _e,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Le,void 0),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(o.y,s,d))for(const g in s){const x=s[g];g.endsWith(o.z)?this._transitionable.setTransition(g.slice(0,-o.z.length),x):this._transitionable.setValue(g,x)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g){return(!g||g.validate!==!1)&&o.B(this,s.call(o.C,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const yt=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class wt extends o.E{constructor(s){super(),this._transitionable=new o.x(yt,void 0),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(s,d={}){if(!this._validate(o.J,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const g in s){const x=s[g];g.endsWith(o.z)?this._transitionable.setTransition(g.slice(0,-o.z.length),x):this._transitionable.setValue(g,x)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,g={}){return(g==null?void 0:g.validate)!==!1&&o.B(this,s.call(o.C,o.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class Lt{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){const g=s.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(s,d)),this.dashEntry[g]}getDashRanges(s,d,g){const x=[];let w=s.length%2==1?-s[s.length-1]*g:0,k=s[0]*g,A=!0;x.push({left:w,right:k,isDash:A,zeroLength:s[0]===0});let N=s[0];for(let O=1;O<s.length;O++){A=!A;const B=s[O];w=N*g,N+=B,k=N*g,x.push({left:w,right:k,isDash:A,zeroLength:B===0})}return x}addRoundDash(s,d,g){const x=d/2;for(let w=-g;w<=g;w++){const k=this.width*(this.nextRow+g+w);let A=0,N=s[A];for(let O=0;O<this.width;O++){O/N.right>1&&(N=s[++A]);const B=Math.abs(O-N.left),K=Math.abs(O-N.right),Z=Math.min(B,K);let X;const re=w/g*(x+1);if(N.isDash){const le=x-Math.abs(re);X=Math.sqrt(Z*Z+le*le)}else X=x-Math.sqrt(Z*Z+re*re);this.data[k+O]=Math.max(0,Math.min(255,X+128))}}}addRegularDash(s){for(let A=s.length-1;A>=0;--A){const N=s[A],O=s[A+1];N.zeroLength?s.splice(A,1):O&&O.isDash===N.isDash&&(O.left=N.left,s.splice(A,1))}const d=s[0],g=s[s.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const x=this.width*this.nextRow;let w=0,k=s[w];for(let A=0;A<this.width;A++){A/k.right>1&&(k=s[++w]);const N=Math.abs(A-k.left),O=Math.abs(A-k.right),B=Math.min(N,O);this.data[x+A]=Math.max(0,Math.min(255,(k.isDash?B:-B)+128))}}addDash(s,d){const g=d?7:0,x=2*g+1;if(this.nextRow+x>this.height)return o.w("LineAtlas out of space"),null;let w=0;for(let A=0;A<s.length;A++)w+=s[A];if(w!==0){const A=this.width/w,N=this.getDashRanges(s,this.width,A);d?this.addRoundDash(N,A,g):this.addRegularDash(N)}const k={y:this.nextRow+g,height:2*g,width:w};return this.nextRow+=x,this.dirty=!0,k}bind(s){const d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const Wt="maplibre_preloaded_worker_pool";class wr{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<wr.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Wt]}numActive(){return Object.keys(this.active).length}}const kr=Math.floor(I.hardwareConcurrency/2);let er,Yr;function Zn(){return er||(er=new wr),er}wr.workerCount=o.K(globalThis)?Math.max(Math.min(kr,3),1):1;class Rn{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;const g=this.workerPool.acquire(d);for(let x=0;x<g.length;x++){const w=new o.L(g[x],d);w.name=`Worker ${x}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){const g=[];for(const x of this.actors)g.push(x.sendAsync({type:s,data:d}));return Promise.all(g)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(const g of this.actors)g.registerMessageHandler(s,d)}unregisterMessageHandler(s){for(const d of this.actors)d.unregisterMessageHandler(s)}}function ri(){return Yr||(Yr=new Rn(Zn(),o.M),Yr.registerMessageHandler("GR",(b,s,d)=>o.m(s,d))),Yr}function vn(b,s){const d=o.N();return o.O(d,d,[1,1,0]),o.Q(d,d,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?o.S(d,d,b.calculatePosMatrix(s.toUnwrapped())):d}function Ni(b,s,d,g,x,w,k){var A;const N=function(Z,X,re){if(Z)for(const le of Z){const ce=X[le];if(ce&&ce.source===re&&ce.type==="fill-extrusion")return!0}else for(const le in X){const ce=X[le];if(ce.source===re&&ce.type==="fill-extrusion")return!0}return!1}((A=x==null?void 0:x.layers)!==null&&A!==void 0?A:null,s,b.id),O=w.maxPitchScaleFactor(),B=b.tilesIn(g,O,N);B.sort(Cr);const K=[];for(const Z of B)K.push({wrappedTileID:Z.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(s,d,b.getState(),Z.queryGeometry,Z.cameraQueryGeometry,Z.scale,x,w,O,vn(w,Z.tileID),k?(X,re)=>k(Z.tileID,X,re):void 0)});return function(Z,X){for(const re in Z)for(const le of Z[re])ni(le,X);return Z}(function(Z){const X={},re={};for(const le of Z){const ce=le.queryResults,de=le.wrappedTileID,ye=re[de]=re[de]||{};for(const we in ce){const me=ce[we],Se=ye[we]=ye[we]||{},ke=X[we]=X[we]||[];for(const ve of me)Se[ve.featureIndex]||(Se[ve.featureIndex]=!0,ke.push(ve))}}return X}(K),b)}function Cr(b,s){const d=b.tileID,g=s.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}function ni(b,s){const d=b.feature,g=s.getFeatureState(d.layer["source-layer"],d.id);d.source=d.layer.source,d.layer["source-layer"]&&(d.sourceLayer=d.layer["source-layer"]),d.state=g}function xi(b,s,d){return o._(this,void 0,void 0,function*(){let g=b;if(b.url?g=(yield o.j(s.transformRequest(b.url,"Source"),d)).data:yield I.frameAsync(d),!g)return null;const x=o.U(o.e(g,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in g&&g.vector_layers&&(x.vectorLayerIds=g.vector_layers.map(w=>w.id)),x})}class Nr{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof o.V?new o.V(s.lng,s.lat):o.V.convert(s),this}setSouthWest(s){return this._sw=s instanceof o.V?new o.V(s.lng,s.lat):o.V.convert(s),this}extend(s){const d=this._sw,g=this._ne;let x,w;if(s instanceof o.V)x=s,w=s;else{if(!(s instanceof Nr))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Nr.convert(s)):this.extend(o.V.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(o.V.convert(s)):this;if(x=s._sw,w=s._ne,!x||!w)return this}return d||g?(d.lng=Math.min(x.lng,d.lng),d.lat=Math.min(x.lat,d.lat),g.lng=Math.max(w.lng,g.lng),g.lat=Math.max(w.lat,g.lat)):(this._sw=new o.V(x.lng,x.lat),this._ne=new o.V(w.lng,w.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:d,lat:g}=o.V.convert(s);let x=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(x=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=g&&g<=this._ne.lat&&x}intersects(s){if((s=Nr.convert(s)).getNorth()<this.getSouth()||s.getSouth()>this.getNorth())return!1;const d=o.W(this.getWest(),-180,180),g=o.W(this.getEast(),-180,180),x=o.W(s.getWest(),-180,180),w=o.W(s.getEast(),-180,180),k=d>g,A=x>w;return!(!k||!A)||(k?w>=d||x<=g:A?g>=x||d<=w:!(x>g||w<d))}static convert(s){return s instanceof Nr?s:s&&new Nr(s)}static fromLngLat(s,d=0){const g=360*d/40075017,x=g/Math.cos(Math.PI/180*s.lat);return new Nr(new o.V(s.lng-x,s.lat-g),new o.V(s.lng+x,s.lat+g))}adjustAntiMeridian(){const s=new o.V(this._sw.lng,this._sw.lat),d=new o.V(this._ne.lng,this._ne.lat);return new Nr(s,s.lng>d.lng?new o.V(d.lng+360,d.lat):d)}}class vi{constructor(s,d,g){this.bounds=Nr.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){const d=Math.pow(2,s.z),g=Math.floor(o.Y(this.bounds.getWest())*d),x=Math.floor(o.X(this.bounds.getNorth())*d),w=Math.ceil(o.Y(this.bounds.getEast())*d),k=Math.ceil(o.X(this.bounds.getSouth())*d);return s.x>=g&&s.x<w&&s.y>=x&&s.y<k}}class Dn extends o.E{constructor(s,d,g,x){if(super(),this.id=s,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(d,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield xi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),s&&(o.e(this,s),s.bounds&&(this.tileBounds=new vi(s.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this._loaded=!0,this.fire(new o.k(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(s){return o._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(s)};g.request.collectResourceTiming=this._collectResourceTiming;let x="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((w,k)=>{s.reloadPromise={resolve:w,reject:k}})}else s.actor=this.dispatcher.getActor(),x="LT";s.abortController=new AbortController;try{const w=yield s.actor.sendAsync({type:x,data:g},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,w)}catch(w){if(delete s.abortController,s.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(s,null)}})}_getOverzoomParameters(s){if(s.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const d=s.tileID.scaledTo(this.maxzoom).canonical,g=d.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:d,overzoomRequest:this.map._requestManager.transformRequest(g,"Tile")}}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){const g=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(g.resolve).catch(g.reject)}}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ee extends o.E{constructor(s,d,g,x){super(),this.id=s,this.dispatcher=g,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},d),o.e(this,o.U(d,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(s=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const d=yield xi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,d&&(o.e(this,d),d.bounds&&(this.tileBounds=new vi(d.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:s})))}catch(d){this._tileJSONRequest=null,this._loaded=!0,this.fire(new o.k(d))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load(!0)}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return o.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return o._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{const g=yield pe.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(g&&g.data){this.map._refreshExpiredTiles&&(g.cacheControl||g.expires)&&s.setExpiryData({cacheControl:g.cacheControl,expires:g.expires});const x=this.map.painter.context,w=x.gl,k=g.data;s.texture=this.map.painter.getTileTexture(k.width),s.texture?s.texture.update(k,{useMipmap:!0}):(s.texture=new o.T(x,k,w.RGBA,{useMipmap:!0}),s.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(g){if(delete s.abortController,s.aborted)s.state="unloaded";else if(g)throw s.state="errored",g}})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class Be extends Ee{constructor(s,d,g,x){super(s,d,g,x),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return o._(this,void 0,void 0,function*(){const d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),g=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{const x=yield pe.getImage(g,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(x&&x.data){const w=x.data;this.map._refreshExpiredTiles&&(x.cacheControl||x.expires)&&s.setExpiryData({cacheControl:x.cacheControl,expires:x.expires});const k=o.b(w)&&o.Z()?w:yield this.readImageNow(w),A={type:this.type,uid:s.uid,source:this.id,rawImageData:k,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();const N=yield s.actor.sendAsync({type:"LDT",data:A});s.dem=N,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(x){if(delete s.abortController,s.aborted)s.state="unloaded";else if(x)throw s.state="errored",x}})}readImageNow(s){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.$()){const d=s.width+2,g=s.height+2;try{return new o.R({width:d,height:g},yield o.a0(s,-1,-1,d,g))}catch{}}return I.getImageData(s,1)})}_getNeighboringTiles(s){const d=s.canonical,g=Math.pow(2,d.z),x=(d.x-1+g)%g,w=d.x===0?s.wrap-1:s.wrap,k=(d.x+1+g)%g,A=d.x+1===g?s.wrap+1:s.wrap,N={};return N[new o.a1(s.overscaledZ,w,d.z,x,d.y).key]={backfilled:!1},N[new o.a1(s.overscaledZ,A,d.z,k,d.y).key]={backfilled:!1},d.y>0&&(N[new o.a1(s.overscaledZ,w,d.z,x,d.y-1).key]={backfilled:!1},N[new o.a1(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},N[new o.a1(s.overscaledZ,A,d.z,k,d.y-1).key]={backfilled:!1}),d.y+1<g&&(N[new o.a1(s.overscaledZ,w,d.z,x,d.y+1).key]={backfilled:!1},N[new o.a1(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},N[new o.a1(s.overscaledZ,A,d.z,k,d.y+1).key]={backfilled:!1}),N}unloadTile(s){return o._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}function He(b){return b.type==="GeometryCollection"?b.geometries.map(s=>s.coordinates).flat(1/0):b.coordinates.flat(1/0)}function xt(b){const s=new Nr;let d;switch(b.type){case"FeatureCollection":d=b.features.map(g=>He(g.geometry)).flat(1/0);break;case"Feature":d=He(b.geometry);break;default:d=He(b)}if(d.length==0)return s;for(let g=0;g<d.length-1;g+=2)s.extend([d[g],d[g+1]]);return s}class vt extends o.E{constructor(s,d,g,x){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:d.data},this.actor=g.getActor(),this.setEventedParent(x),this._data=typeof d.data=="string"?{url:d.data}:{geojson:d.data},this._options=o.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId,d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(d.buffer!==void 0?d.buffer:128),tolerance:this._pixelsToTileUnits(d.tolerance!==void 0?d.tolerance:.375),extent:o.a4,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(d.clusterMaxZoom),minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.a4,radius:this._pixelsToTileUnits(d.clusterRadius||50),log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(s){return s*(o.a4/this.tileSize)}_getClusterMaxZoom(s){const d=s?Math.round(s):this.maxzoom-1;return Number.isInteger(s)||s===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${s}" rounded to "${d}"`),d}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s,d){this._data=typeof s=="string"?{url:s}:{geojson:s},this._pendingWorkerUpdate={data:s};const g=this._updateWorkerData();return d?g:this}updateData(s,d){this._pendingWorkerUpdate.diff=o.a5(this._pendingWorkerUpdate.diff,s);const g=this._updateWorkerData();return d?g:this}getData(){return o._(this,void 0,void 0,function*(){const s=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}getBounds(){return o._(this,void 0,void 0,function*(){return xt(yield this.getData())})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(s.clusterRadius)),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(s.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,g){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:g}})}_updateWorkerData(){return o._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:s,diff:d}=this._pendingWorkerUpdate,g=o.e({type:this.type},this.workerOptions);s?(typeof s=="string"?(g.request=this.map._requestManager.transformRequest(I.resolveURL(s),"Source"),g.request.collectResourceTiming=this._collectResourceTiming):g.data=s,this._pendingWorkerUpdate.data=void 0):d&&(g.dataDiff=d,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const x=yield this.actor.sendAsync({type:"LD",data:g});if(this._isUpdatingWorker=!1,this._removed||x.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));x.applyDiff?this._applyDiff(d):this._data={geojson:x.data};let w=null;x.resourceTiming&&x.resourceTiming[this.id]&&(w=x.resourceTiming[this.id].slice(0));const k={dataType:"source"};this._collectResourceTiming&&w&&w.length>0&&o.e(k,{resourceTiming:w}),this.fire(new o.l("data",Object.assign(Object.assign({},k),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},k),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(d)})))}catch(x){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(x))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}})}_applyDiff(s){const d=typeof this.promoteId=="string"?this.promoteId:void 0;this._data.url||this._data.updateable||!o.a6(this._data.geojson,d)||(this._data={updateable:o.a7(this._data.geojson,d)}),s&&this._data.updateable?o.a8(this._data.updateable,s,d):o.w("Cannot apply GeoJSONSource#updateData due to internal error")}_getShouldReloadTileOptions(s){if(this._options.cluster||!s||s.removeAll)return;const{add:d=[],update:g=[],remove:x=[]}=s||{},w=new Set([...g.map(k=>k.id),...x]);for(const k of w.values())if(typeof k!="number"&&this.promoteId==null)return void o.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs (e.g. "${k}"). Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...g.map(k=>k.newGeometry),...d.map(k=>k.geometry)].filter(Boolean).map(k=>xt(k)),prevIds:w}}shouldReloadTile(s,{nextBounds:d,prevIds:g}){if(!s.latestFeatureIndex)return s.state!=="unloaded";const x=s.latestFeatureIndex.loadVTLayers();for(let N=0;N<s.latestFeatureIndex.featureIndexArray.length;N++){const O=s.latestFeatureIndex.featureIndexArray.get(N),B=x[o.a9].feature(O.featureIndex),K=s.latestFeatureIndex.getId(B,o.a9);if(g.has(K))return!0}const{buffer:w,extent:k}=this.workerOptions.geojsonVtOptions,A=function({x:N,y:O,z:B},K=0){const Z=o.a2((N-K)/Math.pow(2,B)),X=o.a3((O+1+K)/Math.pow(2,B)),re=o.a2((N+1+K)/Math.pow(2,B)),le=o.a3((O-K)/Math.pow(2,B));return new Nr([Z,X],[re,le])}(s.tileID.canonical,w/k);for(const N of d)if(A.intersects(N))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(s){return o._(this,void 0,void 0,function*(){const d=s.actor?"RT":"LT";s.actor=this.actor;const g={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};s.abortController=new AbortController;const x=yield this.actor.sendAsync({type:d,data:g},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(x,this.map.painter,d==="RT")})}abortTile(s){return o._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return o._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class dt extends o.E{constructor(s,d,g,x){super(),this.flippedWindingOrder=!1,this.id=s,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=d}load(s){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield pe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new o.k(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;const d=s.map(o.aa.fromLngLat);var g;return this.tileID=function(x){const w=o.ab.fromPoints(x),k=w.width(),A=w.height(),N=Math.max(k,A),O=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),B=Math.pow(2,O);return new o.ad(O,Math.floor((w.minX+w.maxX)/2*B),Math.floor((w.minY+w.maxY)/2*B))}(d),this.terrainTileRanges=this._getOverlappingTileRanges(d),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=d.map(x=>this.tileID.getTilePoint(x)._round()),this.flippedWindingOrder=((g=this.tileCoords)[1].x-g[0].x)*(g[2].y-g[0].y)-(g[1].y-g[0].y)*(g[2].x-g[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const s=this.map.painter.context,d=s.gl;this.texture||(this.texture=new o.T(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const x in this.tiles){const w=this.tiles[x];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(s){const{minX:d,minY:g,maxX:x,maxY:w}=o.ab.fromPoints(s),k={};for(let A=0;A<=o.ac;A++){const N=Math.pow(2,A),O=Math.floor(d*N),B=Math.floor(g*N),K=Math.floor(x*N),Z=Math.floor(w*N);k[A]={minTileX:O,minTileY:B,maxTileX:K,maxTileY:Z}}return k}}class Tt extends dt{constructor(s,d,g,x){super(s,d,g,x),this.roundZoom=!0,this.type="video",this.options=d}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const s=this.options;this.urls=[];for(const d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield o.ae(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new o.k(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){const d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new o.k(new o.af(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const s=this.map.painter.context,d=s.gl;this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let g=!1;for(const x in this.tiles){const w=this.tiles[x];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,g=!0)}g&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class or extends dt{constructor(s,d,g,x){super(s,d,g,x),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(k=>typeof k!="number"))||this.fire(new o.k(new o.af(`sources.${s}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.af(`sources.${s}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.k(new o.af(`sources.${s}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.af(`sources.${s}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.af(`sources.${s}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,g=d.gl;this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(d,this.canvas,g.RGBA,{premultiply:!0});let x=!1;for(const w in this.tiles){const k=this.tiles[w];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture,x=!0)}x&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}const vr={},Tn=b=>{switch(b){case"geojson":return vt;case"image":return dt;case"raster":return Ee;case"raster-dem":return Be;case"vector":return Dn;case"video":return Tt;case"canvas":return or}return vr[b]},ii="RTLPluginLoaded";class _i extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=ri()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return o._(this,arguments,void 0,function*(d,g=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=I.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!g)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(ii))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Rs=null;function Kn(){return Rs||(Rs=new _i),Rs}var nn,Te;(function(b){b[b.Base=0]="Base",b[b.Parent=1]="Parent"})(nn||(nn={})),function(b){b[b.Departing=0]="Departing",b[b.Incoming=1]="Incoming"}(Te||(Te={}));class Q{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=s,this.uid=o.ag(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(s){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(s||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:s,fadingDirection:d,fadingParentID:g,fadeEndTime:x}){this.resetFadeLogic(),this.fadingRole=s,this.fadingDirection=d,this.fadingParentID=g,this.fadeEndTime=x}setSelfFadeLogic(s){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=s}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=F(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData,this.latestFeatureIndex.encoding=s.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(x,w){const k={};if(!w)return k;for(const A of x){const N=A.layerIds.map(O=>w.getLayer(O)).filter(Boolean);if(N.length!==0){A.layers=N,A.stateDependentLayerIds&&(A.stateDependentLayers=A.stateDependentLayerIds.map(O=>N.filter(B=>B.id===O)[0]));for(const O of N)k[O.id]=A}}return k}(s.buckets,d==null?void 0:d.style),this.hasSymbolBuckets=!1;for(const x in this.buckets){const w=this.buckets[x];if(w instanceof o.ai){if(this.hasSymbolBuckets=!0,!g)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const x in this.buckets){const w=this.buckets[x];if(w instanceof o.ai&&w.hasRTLText){this.hasRTLText=!0,Kn().lazyLoad();break}}this.queryPadding=0;for(const x in this.buckets){const w=this.buckets[x];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(x).queryRadius(w))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage),this.dashPositions=s.dashPositions}else this.collisionBoxArray=new o.ah}unloadVectorData(){for(const s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(const g in this.buckets){const x=this.buckets[g];x.uploadPending()&&x.upload(s)}const d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,g,x,w,k,A,N,O,B,K){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:x,cameraQueryGeometry:w,scale:k,tileSize:this.tileSize,pixelPosMatrix:B,transform:N,params:A,queryPadding:this.queryPadding*O,getElevation:K},s,d,g):{}}querySourceFeatures(s,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const x=g.loadVTLayers(),w=d&&d.sourceLayer?d.sourceLayer:"",k=x[o.a9]||x[w];if(!k)return;const A=o.aj(d==null?void 0:d.filter,d==null?void 0:d.globalState),{z:N,x:O,y:B}=this.tileID.canonical,K={z:N,x:O,y:B};for(let Z=0;Z<k.length;Z++){const X=k.feature(Z);if(A.needGeometry){const ce=o.ak(X,!0);if(!A.filter(new o.H(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!A.filter(new o.H(this.tileID.overscaledZ),X))continue;const re=g.getId(X,w),le=new o.al(X,N,O,B,re);le.tile=K,s.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){const d=this.expirationTime;if(s.cacheControl){const g=o.am(s.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){const g=Date.now();let x=!1;if(this.expirationTime>g)x=!1;else if(d)if(this.expirationTime<d)x=!0;else{const w=this.expirationTime-d;w?this.expirationTime=g+Math.max(w,3e4):x=!0}else x=!0;x?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const x in this.buckets){if(!d.style.hasLayer(x))continue;const w=this.buckets[x],k=w.layers[0].sourceLayer||o.a9,A=g[k],N=s[k];if(!A||!N||Object.keys(N).length===0)continue;w.update(N,A,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const O=d&&d.style&&d.style.getLayer(x);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(w)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(s){this.symbolFadeHoldUntil=F()+s}setDependencies(s,d){const g={};for(const x of d)g[x]=!0;this.dependencies[s]=g}hasDependency(s,d){for(const g of s){const x=this.dependencies[g];if(x){for(const w of d)if(x[w])return!0}}return!1}}class ee{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,g){const x=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][x]=this.stateChanges[s][x]||{},o.e(this.stateChanges[s][x],g),this.deletedStates[s]===null){this.deletedStates[s]={};for(const w in this.state[s])w!==x&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][x]===null){this.deletedStates[s][x]={};for(const w in this.state[s][x])g[w]||(this.deletedStates[s][x][w]=null)}else for(const w in g)this.deletedStates[s]&&this.deletedStates[s][x]&&this.deletedStates[s][x][w]===null&&delete this.deletedStates[s][x][w]}removeFeatureState(s,d,g){if(this.deletedStates[s]===null)return;const x=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},g&&d!==void 0)this.deletedStates[s][x]!==null&&(this.deletedStates[s][x]=this.deletedStates[s][x]||{},this.deletedStates[s][x][g]=null);else if(d!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][x])for(g in this.deletedStates[s][x]={},this.stateChanges[s][x])this.deletedStates[s][x][g]=null;else this.deletedStates[s][x]=null;else this.deletedStates[s]=null}getState(s,d){const g=String(d),x=o.e({},(this.state[s]||{})[g],(this.stateChanges[s]||{})[g]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){const w=this.deletedStates[s][d];if(w===null)return{};for(const k in w)delete x[k]}return x}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){const g={};for(const x in this.stateChanges){this.state[x]=this.state[x]||{};const w={};for(const k in this.stateChanges[x])this.state[x][k]||(this.state[x][k]={}),o.e(this.state[x][k],this.stateChanges[x][k]),w[k]=this.state[x][k];g[x]=w}for(const x in this.deletedStates){this.state[x]=this.state[x]||{};const w={};if(this.deletedStates[x]===null)for(const k in this.state[x])w[k]={},this.state[x][k]={};else for(const k in this.deletedStates[x]){if(this.deletedStates[x][k]===null)this.state[x][k]={};else for(const A of Object.keys(this.deletedStates[x][k]))delete this.state[x][k][A];w[k]=this.state[x][k]}g[x]=g[x]||{},o.e(g[x],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const x in s)s[x].setFeatureState(g,d)}}const ie=89.25;function ge(b,s){const d=o.an(s.lat,-o.ao,o.ao);return new o.P(o.Y(s.lng)*b,o.X(d)*b)}function be(b,s){return new o.aa(s.x/b,s.y/b).toLngLat()}function Ie(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(o.ap(90-b.pitch)),Math.tan(o.ap(ie-b.pitch)))}function oe(b,s){const d=b.canonical,g=s/o.aq(d.z),x=d.x+Math.pow(2,d.z)*b.wrap,w=o.ar(new Float64Array(16));return o.O(w,w,[x*g,d.y*g,0]),o.Q(w,w,[g/o.a4,g/o.a4,1]),w}function je(b,s,d,g,x){const w=o.aa.fromLngLat(b,s),k=x*o.as(1,b.lat),A=k*Math.cos(o.ap(d)),N=Math.sqrt(k*k-A*A),O=N*Math.sin(o.ap(-g)),B=N*Math.cos(o.ap(-g));return new o.aa(w.x+O,w.y+B,w.z+A)}function We(b,s,d){const g=s.intersectsFrustum(b);if(!d||g===0)return g;const x=s.intersectsPlane(d);return x===0?0:g===2&&x===2?2:1}function Ne(b,s,d){let g=0;const x=(d-s)/10;for(let w=0;w<10;w++)g+=x*Math.pow(Math.cos(s+(w+.5)/10*(d-s)),b);return g}function De(b,s){return function(d,g,x,w,k){const A=2*((b-1)/o.at(Math.cos(o.ap(ie-k))/Math.cos(o.ap(ie)))-1),N=Math.acos(x/w),O=2*Ne(A-1,0,o.ap(k/2)),B=Math.min(o.ap(ie),N+o.ap(k/2)),K=Ne(A-1,Math.min(B,N-o.ap(k/2)),B),Z=Math.atan(g/x),X=Math.hypot(g,x);let re=d;return re+=o.at(w/X/Math.max(.5,Math.cos(o.ap(k/2)))),re+=A*o.at(Math.cos(Z))/2,re-=o.at(Math.max(1,K/O/s))/2,re}}const ct=De(9.314,3);function kt(b,s){const d=(s.roundZoom?Math.round:Math.floor)(b.zoom+o.at(b.tileSize/s.tileSize));return Math.max(0,d)}function Ft(b,s){const d=b.getCameraFrustum(),g=b.getClippingPlane(),x=b.screenPointToMercatorCoordinate(b.getCameraPoint()),w=o.aa.fromLngLat(b.center,b.elevation);x.z=w.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const k=b.getCoveringTilesDetailsProvider(),A=k.allowVariableZoom(b,s),N=kt(b,s),O=s.minzoom||0,B=s.maxzoom!==void 0?s.maxzoom:b.maxZoom,K=Math.min(Math.max(0,N),B),Z=Math.pow(2,K),X=[Z*x.x,Z*x.y,0],re=[Z*w.x,Z*w.y,0],le=Math.hypot(w.x-x.x,w.y-x.y),ce=Math.abs(w.z-x.z),de=Math.hypot(le,ce),ye=Se=>({zoom:0,x:0,y:0,wrap:Se,fullyVisible:!1}),we=[],me=[];if(b.renderWorldCopies&&k.allowWorldCopies())for(let Se=1;Se<=3;Se++)we.push(ye(-Se)),we.push(ye(Se));for(we.push(ye(0));we.length>0;){const Se=we.pop(),ke=Se.x,ve=Se.y;let Ae=Se.fullyVisible;const qe={x:ke,y:ve,z:Se.zoom},Fe=k.getTileBoundingVolume(qe,Se.wrap,b.elevation,s);if(!Ae){const st=We(d,Fe,g);if(st===0)continue;Ae=st===2}const ze=k.distanceToTile2d(x.x,x.y,qe,Fe);let Ue=N;A&&(Ue=(s.calculateTileZoom||ct)(b.zoom+o.at(b.tileSize/s.tileSize),ze,ce,de,b.fov)),Ue=(s.roundZoom?Math.round:Math.floor)(Ue),Ue=Math.max(0,Ue);const ut=Math.min(Ue,B);if(Se.wrap=k.getWrap(w,qe,Se.wrap),Se.zoom>=ut){if(Se.zoom<O)continue;const st=K-Se.zoom,Xe=X[0]-.5-(ke<<st),Pt=X[1]-.5-(ve<<st),Qt=s.reparseOverscaled?Math.max(Se.zoom,Ue):Se.zoom;me.push({tileID:new o.a1(Se.zoom===B?Qt:Se.zoom,Se.wrap,Se.zoom,ke,ve),distanceSq:o.au([re[0]-.5-ke,re[1]-.5-ve]),tileDistanceToCamera:Math.sqrt(Xe*Xe+Pt*Pt)})}else for(let st=0;st<4;st++)we.push({zoom:Se.zoom+1,x:(ke<<1)+st%2,y:(ve<<1)+(st>>1),wrap:Se.wrap,fullyVisible:Ae})}return me.sort((Se,ke)=>Se.distanceSq-ke.distanceSq).map(Se=>Se.tileID)}const Pr=o.ab.fromPoints([new o.P(0,0),new o.P(o.a4,o.a4)]);class Yt extends o.E{constructor(s,d,g){super(),this.id=s,this.dispatcher=g,this.on("data",x=>this._dataHandler(x)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((x,w,k,A)=>{const N=new(Tn(w.type))(x,w,k,A);if(N.id!==x)throw new Error(`Expected Source id to be ${x} instead of ${N.id}`);return N})(s,d,g,this),this._tiles={},this._cache=new o.av(0,x=>this._unloadTile(x)),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ee,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const s in this._tiles){const d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,g){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,g)}catch(x){s.state="errored",x.status!==404?this._source.fire(new o.k(x,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new o.l("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(s),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(nr).map(s=>s.key)}getRenderableIds(s){const d=[];for(const g in this._tiles)this._isIdRenderable(g,s)&&d.push(this._tiles[g]);return s?d.sort((g,x)=>{const w=g.tileID,k=x.tileID,A=new o.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),N=new o.P(k.canonical.x,k.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-k.overscaledZ||N.y-A.y||N.x-A.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(nr).map(g=>g.key)}hasRenderableParent(s){const d=s.overscaledZ-1;if(d>=this._source.minzoom){const g=this.getLoadedTile(s.scaledTo(d));if(g)return this._isIdRenderable(g.tileID.key)}return!1}_isIdRenderable(s,d=!1){var g;return(g=this._tiles[s])===null||g===void 0?void 0:g.isRenderable(d)}reload(s,d=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const g in this._tiles)d&&this._source.shouldReloadTile&&!this._source.shouldReloadTile(this._tiles[g],d)||(s?this._reloadTile(g,"expired"):this._tiles[g].state!=="errored"&&this._reloadTile(g,"reloading"))}}_reloadTile(s,d){return o._(this,void 0,void 0,function*(){const g=this._tiles[s];g&&(g.state!=="loading"&&(g.state=d),yield this._loadTile(g,s,d))})}_tileLoaded(s,d,g){s.timeAdded=F(),s.selfFading&&(s.fadeEndTime=s.timeAdded+this._rasterFadeDuration),g==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){const d=this.getRenderableIds();for(let x=0;x<d.length;x++){const w=d[x];if(s.neighboringTiles&&s.neighboringTiles[w]){const k=this.getTileByID(w);g(s,k),g(k,s)}}function g(x,w){x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let k=w.tileID.canonical.x-x.tileID.canonical.x;const A=w.tileID.canonical.y-x.tileID.canonical.y,N=Math.pow(2,x.tileID.canonical.z),O=w.tileID.key;k===0&&A===0||Math.abs(A)>1||(Math.abs(k)>1&&(Math.abs(k+N)===1?k+=N:Math.abs(k-N)===1&&(k-=N)),w.dem&&x.dem&&(x.dem.backfillBorder(w.dem,k,A),x.neighboringTiles&&x.neighboringTiles[O]&&(x.neighboringTiles[O].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d){const g=this._getLoadedDescendents(d),x=new Set;for(const w of d){const k=g[w.key];if(!(k!=null&&k.length)){x.add(w);continue}const A=w.overscaledZ+Yt.maxOverzooming,N=k.filter(K=>K.tileID.overscaledZ<=A);if(!N.length){x.add(w);continue}const O=Math.min(...N.map(K=>K.tileID.overscaledZ)),B=N.filter(K=>K.tileID.overscaledZ===O).map(K=>K.tileID);for(const K of B)s[K.key]=K;this._areDescendentsComplete(B,O,w.overscaledZ)||x.add(w)}return x}_getLoadedDescendents(s){var d;const g={};for(const x in this._tiles){const w=this._tiles[x];if(w.hasData())for(const k of s)w.tileID.isChildOf(k)&&(g[d=k.key]||(g[d]=[])).push(w)}return g}_areDescendentsComplete(s,d,g){return s.length===1&&s[0].isOverscaled()?s[0].overscaledZ===d:Math.pow(4,d-g)===s.length}getLoadedTile(s){const d=this._tiles[s.key];return d!=null&&d.hasData()?d:null}updateCacheSize(s){const d=Math.ceil(s.width/this._source.tileSize)+1,g=Math.ceil(s.height/this._source.tileSize)+1,x=Math.floor(d*g*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,x):x;this._cache.setMaxSize(w)}handleWrapJump(s){const d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){const g={};for(const x in this._tiles){const w=this._tiles[x];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),g[w.tileID.key]=w}this._tiles=g,this._resetTileReloadTimers()}}update(s,d){if(!this._sourceLoaded||this._paused)return;let g;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?g=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new o.a1(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(g=Ft(s,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?s.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(g=g.filter(N=>this._source.hasTile(N)))):g=[],this.usedForTerrain&&(g=this._addTerrainIdealTiles(g));const x=g.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,x&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const w=kt(s,this._source),k=this._updateRetainedTiles(g,w),A=_r(this._source.type);A&&this._rasterFadeDuration>0&&!d&&this._updateFadingTiles(g,k),A?this._cleanUpRasterTiles(k):this._cleanUpVectorTiles(k)}_cleanUpRasterTiles(s){for(const d in this._tiles)s[d]||this._removeTile(d)}_cleanUpVectorTiles(s){for(const d in this._tiles){const g=this._tiles[d];s[d]?g.clearSymbolFadeHold():g.hasSymbolBuckets?g.holdingForSymbolFade()?g.symbolFadeFinished()&&this._removeTile(d):g.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(d)}}_addTerrainIdealTiles(s){const d=[];for(const g of s)if(g.canonical.z>this._source.minzoom){const x=g.scaledTo(g.canonical.z-1);d.push(x);const w=g.scaledTo(Math.max(this._source.minzoom,Math.min(g.canonical.z,5)));d.push(w)}return s.concat(d)}releaseSymbolFadeTiles(){for(const s in this._tiles)this._tiles[s].holdingForSymbolFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var g;const x=new Set;for(const O of s)this._addTile(O).hasData()||x.add(O);const w=s.reduce((O,B)=>(O[B.key]=B,O),{}),k=this._retainLoadedChildren(w,x),A={},N=Math.max(d-Yt.maxUnderzooming,this._source.minzoom);for(const O of k){let B=this._tiles[O.key],K=B==null?void 0:B.wasRequested();for(let Z=O.overscaledZ-1;Z>=N;--Z){const X=O.scaledTo(Z);if(A[X.key])break;if(A[X.key]=!0,B=this.getTile(X),!B&&K&&(B=this._addTile(X)),B){const re=B.hasData();if((re||!(!((g=this.map)===null||g===void 0)&&g.cancelPendingTileRequestsWhileZooming)||K)&&(w[X.key]=X),K=B.wasRequested(),re)break}}}return w}_updateFadingTiles(s,d){const g=F(),x=o.aw(s);for(const w of s){const k=this._tiles[w.key];k.fadingDirection!==Te.Departing&&k.fadeOpacity!==0||k.resetFadeLogic(),this._updateFadingAncestor(k,d,g)||this._updateFadingDescendents(k,d,g)||this._updateFadingEdge(k,x,g)||k.resetFadeLogic()}}_updateFadingAncestor(s,d,g){if(!s.hasData())return!1;const{tileID:x,fadingRole:w,fadingDirection:k,fadingParentID:A}=s;if(w===nn.Base&&k===Te.Incoming&&A)return d[A.key]=A,!0;const N=Math.max(x.overscaledZ-this._maxFadingAncestorLevels,this._source.minzoom);for(let O=x.overscaledZ-1;O>=N;O--){const B=x.scaledTo(O),K=this.getLoadedTile(B);if(K)return s.setCrossFadeLogic({fadingRole:nn.Base,fadingDirection:Te.Incoming,fadingParentID:K.tileID,fadeEndTime:g+this._rasterFadeDuration}),K.setCrossFadeLogic({fadingRole:nn.Parent,fadingDirection:Te.Departing,fadeEndTime:g+this._rasterFadeDuration}),d[B.key]=B,!0}return!1}_updateFadingDescendents(s,d,g){if(!s.hasData())return!1;const x=s.tileID.children(this._source.maxzoom);let w=this._updateFadingChildren(s,x,d,g);if(w)return!0;for(const k of x){const A=k.children(this._source.maxzoom);this._updateFadingChildren(s,A,d,g)&&(w=!0)}return w}_updateFadingChildren(s,d,g,x){if(d[0].overscaledZ>=this._source.maxzoom)return!1;let w=!1;for(const k of d){const A=this.getLoadedTile(k);if(!A)continue;const{fadingRole:N,fadingDirection:O,fadingParentID:B}=A;N===nn.Base&&O===Te.Departing&&B||(A.setCrossFadeLogic({fadingRole:nn.Base,fadingDirection:Te.Departing,fadingParentID:s.tileID,fadeEndTime:x+this._rasterFadeDuration}),s.setCrossFadeLogic({fadingRole:nn.Parent,fadingDirection:Te.Incoming,fadeEndTime:x+this._rasterFadeDuration})),g[k.key]=k,w=!0}return w}_updateFadingEdge(s,d,g){const x=s.tileID;return!!s.selfFading||!s.hasData()&&!!d.has(x)&&(s.setSelfFadeLogic(g+this._rasterFadeDuration),!0)}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(d.resetFadeLogic(),this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null));const g=d;return d||(d=new Q(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,g||this._source.fire(new o.l("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){this._clearTileReloadTimer(s);const g=d.getExpiryTimeout();g&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},g))}_clearTileReloadTimer(s){const d=this._timers[s];d&&(clearTimeout(d),delete this._timers[s])}_resetTileReloadTimers(){for(const s in this._timers)clearTimeout(this._timers[s]),delete this._timers[s];for(const s in this._tiles)this._setTileReloadTimer(s,this._tiles[s])}refreshTiles(s){for(const d in this._tiles)(this._isIdRenderable(d)||this._tiles[d].state=="errored")&&s.some(g=>g.equals(this._tiles[d].tileID.canonical))&&this._reloadTile(d,"expired")}_removeTile(s){const d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._clearTileReloadTimer(s),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){s.dataType==="source"&&(s.sourceDataType!=="metadata"?s.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(s.sourceDataChanged,s.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,g){const x=[],w=this.transform;if(!w)return x;const k=w.getCoveringTilesDetailsProvider().allowWorldCopies(),A=g?w.getCameraQueryGeometry(s):s,N=X=>w.screenPointToMercatorCoordinate(X,this.terrain),O=this.transformBbox(s,N,!k),B=this.transformBbox(A,N,!k),K=this.getIds(),Z=o.ab.fromPoints(B);for(let X=0;X<K.length;X++){const re=this._tiles[K[X]];if(re.holdingForSymbolFade())continue;const le=k?[re.tileID]:[re.tileID.unwrapTo(-1),re.tileID.unwrapTo(0)],ce=Math.pow(2,w.zoom-re.tileID.overscaledZ),de=d*re.queryPadding*o.a4/re.tileSize/ce;for(const ye of le){const we=Z.map(me=>ye.getTilePoint(new o.aa(me.x,me.y)));if(we.expandBy(de),we.intersects(Pr)){const me=O.map(ke=>ye.getTilePoint(ke)),Se=B.map(ke=>ye.getTilePoint(ke));x.push({tile:re,tileID:k?ye:ye.unwrapTo(0),queryGeometry:me,cameraQueryGeometry:Se,scale:ce})}}}return x}transformBbox(s,d,g){let x=s.map(d);if(g){const w=o.ab.fromPoints(s);w.shrinkBy(.001*Math.min(w.width(),w.height()));const k=w.map(d);o.ab.fromPoints(x).covers(k)||(x=x.map(A=>A.x>.5?new o.aa(A.x-1,A.y,A.z):A))}return x}getVisibleCoordinates(s){const d=this.getRenderableIds(s).map(g=>this._tiles[g].tileID);return this.transform&&this.transform.populateCache(d),d}hasTransition(){if(this._source.hasTransition())return!0;if(_r(this._source.type)&&this._rasterFadeDuration>0){const s=F();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setRasterFadeDuration(s){this._rasterFadeDuration=s}setFeatureState(s,d,g){this._state.updateState(s=s||o.a9,d,g)}removeFeatureState(s,d,g){this._state.removeFeatureState(s=s||o.a9,d,g)}getFeatureState(s,d){return this._state.getState(s=s||o.a9,d)}setDependencies(s,d,g){const x=this._tiles[s];x&&x.setDependencies(d,g)}reloadTilesForDependencies(s,d){for(const g in this._tiles)this._tiles[g].hasDependency(s,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(s,d))}}function nr(b,s){const d=Math.abs(2*b.wrap)-+(b.wrap<0),g=Math.abs(2*s.wrap)-+(s.wrap<0);return b.overscaledZ-s.overscaledZ||g-d||s.canonical.y-b.canonical.y||s.canonical.x-b.canonical.x}function _r(b){return b==="raster"||b==="image"||b==="video"}Yt.maxUnderzooming=10,Yt.maxOverzooming=3;class it{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=o.an(s,0,1);let d=1,g=this._distances[d];const x=s*this.paddedLength+this.padding;for(;g<x&&d<this._distances.length;)g=this._distances[++d];const w=d-1,k=this._distances[w],A=g-k,N=A>0?(x-k)/A:0;return this.points[w].mult(1-N).add(this.points[d].mult(N))}}function Qr(b,s){let d=!0;return b==="always"||b!=="never"&&s!=="never"||(d=!1),d}class Vr{constructor(s,d,g){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/g),this.yCellCount=Math.ceil(d/g);for(let k=0;k<this.xCellCount*this.yCellCount;k++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,g,x,w){this._forEachCell(d,g,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(s,d,g,x){this._forEachCell(d-x,g-x,d+x,g+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(g),this.circles.push(x)}_insertBoxCell(s,d,g,x,w,k){this.boxCells[w].push(k)}_insertCircleCell(s,d,g,x,w,k){this.circleCells[w].push(k)}_query(s,d,g,x,w,k,A){if(g<0||s>this.width||x<0||d>this.height)return[];const N=[];if(s<=0&&d<=0&&this.width<=g&&this.height<=x){if(w)return[{key:null,x1:s,y1:d,x2:g,y2:x}];for(let O=0;O<this.boxKeys.length;O++)N.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){const B=this.circles[3*O],K=this.circles[3*O+1],Z=this.circles[3*O+2];N.push({key:this.circleKeys[O],x1:B-Z,y1:K-Z,x2:B+Z,y2:K+Z})}}else this._forEachCell(s,d,g,x,this._queryCell,N,{hitTest:w,overlapMode:k,seenUids:{box:{},circle:{}}},A);return N}query(s,d,g,x){return this._query(s,d,g,x,!1,null)}hitTest(s,d,g,x,w,k){return this._query(s,d,g,x,!0,w,k).length>0}hitTestCircle(s,d,g,x,w){const k=s-g,A=s+g,N=d-g,O=d+g;if(A<0||k>this.width||O<0||N>this.height)return!1;const B=[];return this._forEachCell(k,N,A,O,this._queryCellCircle,B,{hitTest:!0,overlapMode:x,circle:{x:s,y:d,radius:g},seenUids:{box:{},circle:{}}},w),B.length>0}_queryCell(s,d,g,x,w,k,A,N){const{seenUids:O,hitTest:B,overlapMode:K}=A,Z=this.boxCells[w];if(Z!==null){const re=this.bboxes;for(const le of Z)if(!O.box[le]){O.box[le]=!0;const ce=4*le,de=this.boxKeys[le];if(s<=re[ce+2]&&d<=re[ce+3]&&g>=re[ce+0]&&x>=re[ce+1]&&(!N||N(de))&&(!B||!Qr(K,de.overlapMode))&&(k.push({key:de,x1:re[ce],y1:re[ce+1],x2:re[ce+2],y2:re[ce+3]}),B))return!0}}const X=this.circleCells[w];if(X!==null){const re=this.circles;for(const le of X)if(!O.circle[le]){O.circle[le]=!0;const ce=3*le,de=this.circleKeys[le];if(this._circleAndRectCollide(re[ce],re[ce+1],re[ce+2],s,d,g,x)&&(!N||N(de))&&(!B||!Qr(K,de.overlapMode))){const ye=re[ce],we=re[ce+1],me=re[ce+2];if(k.push({key:de,x1:ye-me,y1:we-me,x2:ye+me,y2:we+me}),B)return!0}}}return!1}_queryCellCircle(s,d,g,x,w,k,A,N){const{circle:O,seenUids:B,overlapMode:K}=A,Z=this.boxCells[w];if(Z!==null){const re=this.bboxes;for(const le of Z)if(!B.box[le]){B.box[le]=!0;const ce=4*le,de=this.boxKeys[le];if(this._circleAndRectCollide(O.x,O.y,O.radius,re[ce+0],re[ce+1],re[ce+2],re[ce+3])&&(!N||N(de))&&!Qr(K,de.overlapMode))return k.push(!0),!0}}const X=this.circleCells[w];if(X!==null){const re=this.circles;for(const le of X)if(!B.circle[le]){B.circle[le]=!0;const ce=3*le,de=this.circleKeys[le];if(this._circlesCollide(re[ce],re[ce+1],re[ce+2],O.x,O.y,O.radius)&&(!N||N(de))&&!Qr(K,de.overlapMode))return k.push(!0),!0}}}_forEachCell(s,d,g,x,w,k,A,N){const O=this._convertToXCellCoord(s),B=this._convertToYCellCoord(d),K=this._convertToXCellCoord(g),Z=this._convertToYCellCoord(x);for(let X=O;X<=K;X++)for(let re=B;re<=Z;re++)if(w.call(this,s,d,g,x,this.xCellCount*re+X,k,A,N))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,g,x,w,k){const A=x-s,N=w-d,O=g+k;return O*O>A*A+N*N}_circleAndRectCollide(s,d,g,x,w,k,A){const N=(k-x)/2,O=Math.abs(s-(x+N));if(O>N+g)return!1;const B=(A-w)/2,K=Math.abs(d-(w+B));if(K>B+g)return!1;if(O<=N||K<=B)return!0;const Z=O-N,X=K-B;return Z*Z+X*X<=g*g}}function On(b,s,d){const g=o.N();if(!b){const{vecSouth:K,vecEast:Z}=at(s),X=T();X[0]=Z[0],X[1]=Z[1],X[2]=K[0],X[3]=K[1],x=X,(B=(k=(w=X)[0])*(O=w[3])-(N=w[2])*(A=w[1]))&&(x[0]=O*(B=1/B),x[1]=-A*B,x[2]=-N*B,x[3]=k*B),g[0]=X[0],g[1]=X[1],g[4]=X[2],g[5]=X[3]}var x,w,k,A,N,O,B;return o.Q(g,g,[1/d,1/d,1]),g}function $r(b,s,d,g){if(b){const x=o.N();if(!s){const{vecSouth:w,vecEast:k}=at(d);x[0]=k[0],x[1]=k[1],x[4]=w[0],x[5]=w[1]}return o.Q(x,x,[g,g,1]),x}return d.pixelsToClipSpaceMatrix}function at(b){const s=Math.cos(b.rollInRadians),d=Math.sin(b.rollInRadians),g=Math.cos(b.pitchInRadians),x=Math.cos(b.bearingInRadians),w=Math.sin(b.bearingInRadians),k=o.aB();k[0]=-x*g*d-w*s,k[1]=-w*g*d+x*s;const A=o.aC(k);A<1e-9?o.aD(k):o.aE(k,k,1/A);const N=o.aB();N[0]=x*g*s-w*d,N[1]=w*g*s+x*d;const O=o.aC(N);return O<1e-9?o.aD(N):o.aE(N,N,1/O),{vecEast:N,vecSouth:k}}function Et(b,s,d,g){let x;g?(x=[b,s,g(b,s),1],o.aG(x,x,d)):(x=[b,s,0,1],Lu(x,x,d));const w=x[3];return{point:new o.P(x[0]/w,x[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function Vt(b,s){return .5+b/s*.5}function is(b,s){return b.x>=-s[0]&&b.x<=s[0]&&b.y>=-s[1]&&b.y<=s[1]}function yl(b,s,d,g,x,w,k,A,N,O,B,K,Z){const X=d?b.textSizeData:b.iconSizeData,re=o.ax(X,s.transform.zoom),le=[256/s.width*2+1,256/s.height*2+1],ce=d?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ce.clear();const de=b.lineVertexArray,ye=d?b.text.placedSymbolArray:b.icon.placedSymbolArray,we=s.transform.width/s.transform.height;let me=!1;for(let Se=0;Se<ye.length;Se++){const ke=ye.get(Se);if(ke.hidden||ke.writingMode===o.ay.vertical&&!me){wa(ke.numGlyphs,ce);continue}me=!1;const ve=new o.P(ke.anchorX,ke.anchorY),Ae={getElevation:Z,pitchedLabelPlaneMatrix:g,lineVertexArray:de,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:s.transform,tileAnchorPoint:ve,unwrappedTileID:N,width:O,height:B,translation:K},qe=uc(ke.anchorX,ke.anchorY,Ae);if(!is(qe.point,le)){wa(ke.numGlyphs,ce);continue}const Fe=Vt(s.transform.cameraToCenterDistance,qe.signedDistanceFromCamera),ze=o.az(X,re,ke),Ue=w?ze*s.transform.getPitchedTextCorrection(ke.anchorX,ke.anchorY,N)/Fe:ze*Fe,ut=Wa({projectionContext:Ae,pitchedLabelPlaneMatrixInverse:x,symbol:ke,fontSize:Ue,flip:!1,keepUpright:k,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:ce,aspectRatio:we,rotateToLine:A});me=ut.useVertical,(ut.notEnoughRoom||me||ut.needsFlipping&&Wa({projectionContext:Ae,pitchedLabelPlaneMatrixInverse:x,symbol:ke,fontSize:Ue,flip:!0,keepUpright:k,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:ce,aspectRatio:we,rotateToLine:A}).notEnoughRoom)&&wa(ke.numGlyphs,ce)}d?b.text.dynamicLayoutVertexBuffer.updateData(ce):b.icon.dynamicLayoutVertexBuffer.updateData(ce)}function si(b,s,d,g,x,w,k,A){const N=w.glyphStartIndex+w.numGlyphs,O=w.lineStartIndex,B=w.lineStartIndex+w.lineLength,K=s.getoffsetX(w.glyphStartIndex),Z=s.getoffsetX(N-1),X=Ur(b*K,d,g,x,w.segment,O,B,A,k);if(!X)return null;const re=Ur(b*Z,d,g,x,w.segment,O,B,A,k);return re?A.projectionCache.anyProjectionOccluded?null:{first:X,last:re}:null}function Ht(b,s,d,g){return b===o.ay.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*g?{useVertical:!0}:(b===o.ay.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function Wa(b){const{projectionContext:s,pitchedLabelPlaneMatrixInverse:d,symbol:g,fontSize:x,flip:w,keepUpright:k,glyphOffsetArray:A,dynamicLayoutVertexArray:N,aspectRatio:O,rotateToLine:B}=b,K=x/24,Z=g.lineOffsetX*K,X=g.lineOffsetY*K;let re;if(g.numGlyphs>1){const le=g.glyphStartIndex+g.numGlyphs,ce=g.lineStartIndex,de=g.lineStartIndex+g.lineLength,ye=si(K,A,Z,X,w,g,B,s);if(!ye)return{notEnoughRoom:!0};const we=xl(ye.first.point.x,ye.first.point.y,s,d),me=xl(ye.last.point.x,ye.last.point.y,s,d);if(k&&!w){const Se=Ht(g.writingMode,we,me,O);if(Se)return Se}re=[ye.first];for(let Se=g.glyphStartIndex+1;Se<le-1;Se++){const ke=Ur(K*A.getoffsetX(Se),Z,X,w,g.segment,ce,de,s,B);if(!ke)return{notEnoughRoom:!0};re.push(ke)}re.push(ye.last)}else{if(k&&!w){const ce=Js(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,de=g.lineStartIndex+g.segment+1,ye=new o.P(s.lineVertexArray.getx(de),s.lineVertexArray.gety(de)),we=Js(ye.x,ye.y,s),me=we.signedDistanceFromCamera>0?we.point:lc(s.tileAnchorPoint,ye,ce,1,s),Se=xl(ce.x,ce.y,s,d),ke=xl(me.x,me.y,s,d),ve=Ht(g.writingMode,Se,ke,O);if(ve)return ve}const le=Ur(K*A.getoffsetX(g.glyphStartIndex),Z,X,w,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,s,B);if(!le||s.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[le]}for(const le of re)o.aF(N,le.point,le.angle);return{}}function lc(b,s,d,g,x){const w=b.add(b.sub(s)._unit()),k=Js(w.x,w.y,x).point,A=d.sub(k);return d.add(A._mult(g/A.mag()))}function cc(b,s,d){const g=s.projectionCache;if(g.projections[b])return g.projections[b];const x=new o.P(s.lineVertexArray.getx(b),s.lineVertexArray.gety(b)),w=Js(x.x,x.y,s);if(w.signedDistanceFromCamera>0)return g.projections[b]=w.point,g.anyProjectionOccluded=g.anyProjectionOccluded||w.isOccluded,w.point;const k=b-d.direction;return lc(d.distanceFromAnchor===0?s.tileAnchorPoint:new o.P(s.lineVertexArray.getx(k),s.lineVertexArray.gety(k)),x,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function Js(b,s,d){const g=b+d.translation[0],x=s+d.translation[1];let w;return d.pitchWithMap?(w=Et(g,x,d.pitchedLabelPlaneMatrix,d.getElevation),w.isOccluded=!1):(w=d.transform.projectTileCoordinates(g,x,d.unwrappedTileID,d.getElevation),w.point.x=(.5*w.point.x+.5)*d.width,w.point.y=(.5*-w.point.y+.5)*d.height),w}function xl(b,s,d,g){if(d.pitchWithMap){const x=[b,s,0,1];return o.aG(x,x,g),d.transform.projectTileCoordinates(x[0]/x[3],x[1]/x[3],d.unwrappedTileID,d.getElevation).point}return{x:b/d.width*2-1,y:1-s/d.height*2}}function uc(b,s,d){return d.transform.projectTileCoordinates(b,s,d.unwrappedTileID,d.getElevation)}function dc(b,s,d){return b._unit()._perp()._mult(s*d)}function xs(b,s,d,g,x,w,k,A,N){if(A.projectionCache.offsets[b])return A.projectionCache.offsets[b];const O=d.add(s);if(b+N.direction<g||b+N.direction>=x)return A.projectionCache.offsets[b]=O,O;const B=cc(b+N.direction,A,N),K=dc(B.sub(d),k,N.direction),Z=d.add(K),X=B.add(K);return A.projectionCache.offsets[b]=o.aH(w,O,Z,X)||O,A.projectionCache.offsets[b]}function Ur(b,s,d,g,x,w,k,A,N){const O=g?b-s:b+s;let B=O>0?1:-1,K=0;g&&(B*=-1,K=Math.PI),B<0&&(K+=Math.PI);let Z,X=B>0?w+x:w+x+1;A.projectionCache.cachedAnchorPoint?Z=A.projectionCache.cachedAnchorPoint:(Z=Js(A.tileAnchorPoint.x,A.tileAnchorPoint.y,A).point,A.projectionCache.cachedAnchorPoint=Z);let re,le,ce=Z,de=Z,ye=0,we=0;const me=Math.abs(O),Se=[];let ke;for(;ye+we<=me;){if(X+=B,X<w||X>=k)return null;ye+=we,de=ce,le=re;const qe={absOffsetX:me,direction:B,distanceFromAnchor:ye,previousVertex:de};if(ce=cc(X,A,qe),d===0)Se.push(de),ke=ce.sub(de);else{let Fe;const ze=ce.sub(de);Fe=ze.mag()===0?dc(cc(X+B,A,qe).sub(ce),d,B):dc(ze,d,B),le||(le=de.add(Fe)),re=xs(X,Fe,ce,w,k,le,d,A,qe),Se.push(le),ke=re.sub(le)}we=ke.mag()}const ve=ke._mult((me-ye)/we)._add(le||de),Ae=K+Math.atan2(ce.y-de.y,ce.x-de.x);return Se.push(ve),{point:ve,angle:N?Ae:0,path:Se}}const _w=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function wa(b,s){for(let d=0;d<b;d++){const g=s.length;s.resize(g+4),s.float32.set(_w,3*g)}}function Lu(b,s,d){const g=s[0],x=s[1];return b[0]=d[0]*g+d[4]*x+d[12],b[1]=d[1]*g+d[5]*x+d[13],b[3]=d[3]*g+d[7]*x+d[15],b}const sn=100;class Io{constructor(s,d=new Vr(s.width+200,s.height+200,25),g=new Vr(s.width+200,s.height+200,25)){this.transform=s,this.grid=d,this.ignoredGrid=g,this.pitchFactor=Math.cos(s.pitch*Math.PI/180)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+sn,this.screenBottomBoundary=s.height+sn,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,g,x,w,k,A,N,O,B,K,Z){const X=this.projectAndGetPerspectiveRatio(s.anchorPointX+N[0],s.anchorPointY+N[1],w,B,Z),re=g*X.perspectiveRatio;let le;if(k||A)le=this._projectCollisionBox(s,re,x,w,k,A,N,X,B,K,Z);else{const ke=X.x+(K?K.x*re:0),ve=X.y+(K?K.y*re:0);le={allPointsOccluded:!1,box:[ke+s.x1*re,ve+s.y1*re,ke+s.x2*re,ve+s.y2*re]}}const[ce,de,ye,we]=le.box,me=k?le.allPointsOccluded:X.isOccluded;let Se=me;return Se||(Se=X.perspectiveRatio<this.perspectiveRatioCutoff),Se||(Se=!this.isInsideGrid(ce,de,ye,we)),Se||d!=="always"&&this.grid.hitTest(ce,de,ye,we,d,O)?{box:[ce,de,ye,we],placeable:!1,offscreen:!1,occluded:me}:{box:[ce,de,ye,we],placeable:!0,offscreen:this.isOffscreen(ce,de,ye,we),occluded:me}}placeCollisionCircles(s,d,g,x,w,k,A,N,O,B,K,Z,X,re){const le=[],ce=new o.P(d.anchorX,d.anchorY),de=this.getPerspectiveRatio(ce.x,ce.y,k,re),ye=(O?w*this.transform.getPitchedTextCorrection(d.anchorX,d.anchorY,k)/de:w*de)/o.aL,we={getElevation:re,pitchedLabelPlaneMatrix:A,lineVertexArray:g,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ce,unwrappedTileID:k,width:this.transform.width,height:this.transform.height,translation:X},me=si(ye,x,d.lineOffsetX*ye,d.lineOffsetY*ye,!1,d,!1,we);let Se=!1,ke=!1,ve=!0;if(me){const Ae=.5*K*de+Z,qe=new o.P(-100,-100),Fe=new o.P(this.screenRightBoundary,this.screenBottomBoundary),ze=new it,Ue=me.first,ut=me.last;let st=[];for(let Qt=Ue.path.length-1;Qt>=1;Qt--)st.push(Ue.path[Qt]);for(let Qt=1;Qt<ut.path.length;Qt++)st.push(ut.path[Qt]);const Xe=2.5*Ae;if(O){const Qt=this.projectPathToScreenSpace(st,we);st=Qt.some(Kt=>Kt.signedDistanceFromCamera<=0)?[]:Qt.map(Kt=>Kt.point)}let Pt=[];if(st.length>0){const Qt=st[0].clone(),Kt=st[0].clone();for(let Wr=1;Wr<st.length;Wr++)Qt.x=Math.min(Qt.x,st[Wr].x),Qt.y=Math.min(Qt.y,st[Wr].y),Kt.x=Math.max(Kt.x,st[Wr].x),Kt.y=Math.max(Kt.y,st[Wr].y);Pt=Qt.x>=qe.x&&Kt.x<=Fe.x&&Qt.y>=qe.y&&Kt.y<=Fe.y?[st]:Kt.x<qe.x||Qt.x>Fe.x||Kt.y<qe.y||Qt.y>Fe.y?[]:o.aI([st],qe.x,qe.y,Fe.x,Fe.y)}for(const Qt of Pt){ze.reset(Qt,.25*Ae);let Kt=0;Kt=ze.length<=.5*Ae?1:Math.ceil(ze.paddedLength/Xe)+1;for(let Wr=0;Wr<Kt;Wr++){const Gr=Wr/Math.max(Kt-1,1),on=ze.lerp(Gr),Fr=on.x+sn,zn=on.y+sn;le.push(Fr,zn,Ae,0);const en=Fr-Ae,kn=zn-Ae,bn=Fr+Ae,Cn=zn+Ae;if(ve=ve&&this.isOffscreen(en,kn,bn,Cn),ke=ke||this.isInsideGrid(en,kn,bn,Cn),s!=="always"&&this.grid.hitTestCircle(Fr,zn,Ae,s,B)&&(Se=!0,!N))return{circles:[],offscreen:!1,collisionDetected:Se}}}}return{circles:!N&&Se||!ke||de<this.perspectiveRatioCutoff?[]:le,offscreen:ve,collisionDetected:Se}}projectPathToScreenSpace(s,d){const g=function(x,w){const k=o.N();return o.aA(k,w.pitchedLabelPlaneMatrix),x.map(A=>{const N=Et(A.x,A.y,k,w.getElevation),O=w.transform.projectTileCoordinates(N.point.x,N.point.y,w.unwrappedTileID,w.getElevation);return O.point.x=(.5*O.point.x+.5)*w.width,O.point.y=(.5*-O.point.y+.5)*w.height,O})}(s,d);return function(x){let w=0,k=0,A=0,N=0;for(let O=0;O<x.length;O++)x[O].isOccluded?(A=O+1,N=0):(N++,N>k&&(k=N,w=A));return x.slice(w,w+k)}(g)}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[],g=new o.ab;for(const K of s){const Z=new o.P(K.x+sn,K.y+sn);g.extend(Z),d.push(Z)}const{minX:x,minY:w,maxX:k,maxY:A}=g,N=this.grid.query(x,w,k,A).concat(this.ignoredGrid.query(x,w,k,A)),O={},B={};for(const K of N){const Z=K.key;if(O[Z.bucketInstanceId]===void 0&&(O[Z.bucketInstanceId]={}),O[Z.bucketInstanceId][Z.featureIndex])continue;const X=[new o.P(K.x1,K.y1),new o.P(K.x2,K.y1),new o.P(K.x2,K.y2),new o.P(K.x1,K.y2)];o.aJ(d,X)&&(O[Z.bucketInstanceId][Z.featureIndex]=!0,B[Z.bucketInstanceId]===void 0&&(B[Z.bucketInstanceId]=[]),B[Z.bucketInstanceId].push(Z.featureIndex))}return B}insertCollisionBox(s,d,g,x,w,k){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:w,collisionGroupID:k,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,g,x,w,k){const A=g?this.ignoredGrid:this.grid,N={bucketInstanceId:x,featureIndex:w,collisionGroupID:k,overlapMode:d};for(let O=0;O<s.length;O+=4)A.insertCircle(N,s[O],s[O+1],s[O+2])}projectAndGetPerspectiveRatio(s,d,g,x,w){if(w){let k;x?(k=[s,d,x(s,d),1],o.aG(k,k,w)):(k=[s,d,0,1],Lu(k,k,w));const A=k[3];return{x:(k[0]/A+1)/2*this.transform.width+sn,y:(-k[1]/A+1)/2*this.transform.height+sn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/A*.5,isOccluded:!1,signedDistanceFromCamera:A}}{const k=this.transform.projectTileCoordinates(s,d,g,x);return{x:(k.point.x+1)/2*this.transform.width+sn,y:(1-k.point.y)/2*this.transform.height+sn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/k.signedDistanceFromCamera*.5,isOccluded:k.isOccluded,signedDistanceFromCamera:k.signedDistanceFromCamera}}}getPerspectiveRatio(s,d,g,x){const w=this.transform.projectTileCoordinates(s,d,g,x);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(s,d,g,x){return g<sn||s>=this.screenRightBoundary||x<sn||d>this.screenBottomBoundary}isInsideGrid(s,d,g,x){return g>=0&&s<this.gridRightBoundary&&x>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const s=o.ar([]);return o.O(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,g,x,w,k,A,N,O,B,K){let Z=1,X=0,re=0,le=1;const ce=s.anchorPointX+A[0],de=s.anchorPointY+A[1];if(k&&!w){const st=this.projectAndGetPerspectiveRatio(ce+1,de,x,O,K),Xe=st.x-N.x,Pt=Math.atan((st.y-N.y)/Xe)+(Xe<0?Math.PI:0),Qt=Math.sin(Pt),Kt=Math.cos(Pt);Z=Kt,X=Qt,re=-Qt,le=Kt}else if(!k&&w){const st=at(this.transform);Z=st.vecEast[0],X=st.vecEast[1],re=st.vecSouth[0],le=st.vecSouth[1]}let ye=N.x,we=N.y,me=d;w&&(ye=ce,we=de,me=Math.pow(2,-(this.transform.zoom-g.overscaledZ)),me*=this.transform.getPitchedTextCorrection(ce,de,x),B||(me*=o.an(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),B&&(ye+=Z*B.x*me+re*B.y*me,we+=X*B.x*me+le*B.y*me);const Se=s.x1*me,ke=s.x2*me,ve=(Se+ke)/2,Ae=s.y1*me,qe=s.y2*me,Fe=(Ae+qe)/2,ze=[{offsetX:Se,offsetY:Ae},{offsetX:ve,offsetY:Ae},{offsetX:ke,offsetY:Ae},{offsetX:ke,offsetY:Fe},{offsetX:ke,offsetY:qe},{offsetX:ve,offsetY:qe},{offsetX:Se,offsetY:qe},{offsetX:Se,offsetY:Fe}];let Ue=[];for(const{offsetX:st,offsetY:Xe}of ze)Ue.push(new o.P(ye+Z*st+re*Xe,we+X*st+le*Xe));let ut=!1;if(w){const st=Ue.map(Xe=>this.projectAndGetPerspectiveRatio(Xe.x,Xe.y,x,O,K));ut=st.some(Xe=>!Xe.isOccluded),Ue=st.map(Xe=>new o.P(Xe.x,Xe.y))}else ut=!0;return{box:o.aK(Ue),allPointsOccluded:!ut}}}class nm{constructor(s,d,g,x){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):x&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class hc{constructor(s,d,g,x,w){this.text=new nm(s?s.text:null,d,g,w),this.icon=new nm(s?s.icon:null,d,x,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class im{constructor(s,d,g){this.text=s,this.icon=d,this.skipFade=g}}class pc{constructor(s,d,g,x,w){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=x,this.tileID=w}}class Ax{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){const d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[s]}}function Mx(b,s,d,g,x){const{horizontalAlign:w,verticalAlign:k}=o.aR(b);return new o.P(-(w-.5)*s+g[0]*x,-(k-.5)*d+g[1]*x)}class bw{constructor(s,d,g,x,w){this.transform=s.clone(),this.terrain=d,this.collisionIndex=new Io(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Ax(x),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){const d=this.terrain;return d?(g,x)=>d.getElevation(s,g,x):null}getBucketParts(s,d,g,x){const w=g.getBucket(d),k=g.latestFeatureIndex;if(!w||!k||d.id!==w.layerIds[0])return;const A=g.collisionBoxArray,N=w.layers[0].layout,O=w.layers[0].paint,B=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),K=g.tileSize/o.a4,Z=g.tileID.toUnwrapped(),X=N.get("text-rotation-alignment")==="map",re=o.aM(g,1,this.transform.zoom),le=o.aN(this.collisionIndex.transform,g,O.get("text-translate"),O.get("text-translate-anchor")),ce=o.aN(this.collisionIndex.transform,g,O.get("icon-translate"),O.get("icon-translate-anchor")),de=On(X,this.transform,re);this.retainedQueryData[w.bucketInstanceId]=new pc(w.bucketInstanceId,k,w.sourceLayerIndex,w.index,g.tileID);const ye={bucket:w,layout:N,translationText:le,translationIcon:ce,unwrappedTileID:Z,pitchedLabelPlaneMatrix:de,scale:B,textPixelRatio:K,holdingForFade:g.holdingForSymbolFade(),collisionBoxArray:A,partiallyEvaluatedTextSize:o.ax(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(x)for(const we of w.sortKeyRanges){const{sortKey:me,symbolInstanceStart:Se,symbolInstanceEnd:ke}=we;s.push({sortKey:me,symbolInstanceStart:Se,symbolInstanceEnd:ke,parameters:ye})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(s,d,g,x,w,k,A,N,O,B,K,Z,X,re,le,ce,de,ye,we,me){const Se=o.aO[s.textAnchor],ke=[s.textOffset0,s.textOffset1],ve=Mx(Se,g,x,ke,w),Ae=this.collisionIndex.placeCollisionBox(d,Z,N,O,B,A,k,ce,K.predicate,we,ve,me);if((!ye||this.collisionIndex.placeCollisionBox(ye,Z,N,O,B,A,k,de,K.predicate,we,ve,me).placeable)&&Ae.placeable){let qe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID]&&this.prevPlacement.placements[X.crossTileID].text&&(qe=this.prevPlacement.variableOffsets[X.crossTileID].anchor),X.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[X.crossTileID]={textOffset:ke,width:g,height:x,anchor:Se,textBoxScale:w,prevAnchor:qe},this.markUsedJustification(re,Se,X,le),re.allowVerticalPlacement&&(this.markUsedOrientation(re,le,X),this.placedOrientations[X.crossTileID]=le),{shift:ve,placedGlyphBoxes:Ae}}}placeLayerBucketPart(s,d,g){const{bucket:x,layout:w,translationText:k,translationIcon:A,unwrappedTileID:N,pitchedLabelPlaneMatrix:O,textPixelRatio:B,holdingForFade:K,collisionBoxArray:Z,partiallyEvaluatedTextSize:X,collisionGroup:re}=s.parameters,le=w.get("text-optional"),ce=w.get("icon-optional"),de=o.aP(w,"text-overlap","text-allow-overlap"),ye=de==="always",we=o.aP(w,"icon-overlap","icon-allow-overlap"),me=we==="always",Se=w.get("text-rotation-alignment")==="map",ke=w.get("text-pitch-alignment")==="map",ve=w.get("icon-text-fit")!=="none",Ae=w.get("symbol-z-order")==="viewport-y",qe=ye&&(me||!x.hasIconData()||ce),Fe=me&&(ye||!x.hasTextData()||le);!x.collisionArrays&&Z&&x.deserializeCollisionBoxes(Z);const ze=this.retainedQueryData[x.bucketInstanceId].tileID,Ue=this._getTerrainElevationFunc(ze),ut=this.transform.getFastPathSimpleProjectionMatrix(ze),st=(Xe,Pt,Qt)=>{var Kt,Wr;if(d[Xe.crossTileID])return;if(K)return void(this.placements[Xe.crossTileID]=new im(!1,!1,!1));let Gr=!1,on=!1,Fr=!0,zn=null,en={box:null,placeable:!1,offscreen:null,occluded:!1},kn={placeable:!1},bn=null,Cn=null,cs=null,Ya=0,Ea=0,Vo=0;Pt.textFeatureIndex?Ya=Pt.textFeatureIndex:Xe.useRuntimeCollisionCircles&&(Ya=Xe.featureIndex),Pt.verticalTextFeatureIndex&&(Ea=Pt.verticalTextFeatureIndex);const $o=Pt.textBox;if($o){const vs=fn=>{let ln=o.ay.horizontal;if(x.allowVerticalPlacement&&!fn&&this.prevPlacement){const Bn=this.prevPlacement.placedOrientations[Xe.crossTileID];Bn&&(this.placedOrientations[Xe.crossTileID]=Bn,ln=Bn,this.markUsedOrientation(x,ln,Xe))}return ln},Xa=(fn,ln)=>{if(x.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&Pt.verticalTextBox){for(const Bn of x.writingModes)if(Bn===o.ay.vertical?(en=ln(),kn=en):en=fn(),en&&en.placeable)break}else en=fn()},Il=Xe.textAnchorOffsetStartIndex,Rl=Xe.textAnchorOffsetEndIndex;if(Rl===Il){const fn=(ln,Bn)=>{const zr=this.collisionIndex.placeCollisionBox(ln,de,B,ze,N,ke,Se,k,re.predicate,Ue,void 0,ut);return zr&&zr.placeable&&(this.markUsedOrientation(x,Bn,Xe),this.placedOrientations[Xe.crossTileID]=Bn),zr};Xa(()=>fn($o,o.ay.horizontal),()=>{const ln=Pt.verticalTextBox;return x.allowVerticalPlacement&&Xe.numVerticalGlyphVertices>0&&ln?fn(ln,o.ay.vertical):{box:null,offscreen:null}}),vs(en&&en.placeable)}else{let fn=o.aO[(Wr=(Kt=this.prevPlacement)===null||Kt===void 0?void 0:Kt.variableOffsets[Xe.crossTileID])===null||Wr===void 0?void 0:Wr.anchor];const ln=(zr,Uo,Mv)=>{const Nv=zr.x2-zr.x1,Iv=zr.y2-zr.y1,Dl=Xe.textBoxScale,Ww=ve&&we==="never"?Uo:null;let qo=null,Qh=de==="never"?1:2,Jm="never";fn&&Qh++;for(let Wo=0;Wo<Qh;Wo++){for(let Ja=Il;Ja<Rl;Ja++){const eg=x.textAnchorOffsets.get(Ja);if(fn&&eg.textAnchor!==fn)continue;const tg=this.attemptAnchorPlacement(eg,zr,Nv,Iv,Dl,Se,ke,B,ze,N,re,Jm,Xe,x,Mv,k,A,Ww,Ue);if(tg&&(qo=tg.placedGlyphBoxes,qo&&qo.placeable))return Gr=!0,zn=tg.shift,qo}fn?fn=null:Jm=de}return g&&!qo&&(qo={box:this.collisionIndex.placeCollisionBox($o,"always",B,ze,N,ke,Se,k,re.predicate,Ue,void 0,ut).box,offscreen:!1,placeable:!1,occluded:!1}),qo};Xa(()=>ln($o,Pt.iconBox,o.ay.horizontal),()=>{const zr=Pt.verticalTextBox;return x.allowVerticalPlacement&&(!en||!en.placeable)&&Xe.numVerticalGlyphVertices>0&&zr?ln(zr,Pt.verticalIconBox,o.ay.vertical):{box:null,occluded:!0,offscreen:null}}),en&&(Gr=en.placeable,Fr=en.offscreen);const Bn=vs(en&&en.placeable);if(!Gr&&this.prevPlacement){const zr=this.prevPlacement.variableOffsets[Xe.crossTileID];zr&&(this.variableOffsets[Xe.crossTileID]=zr,this.markUsedJustification(x,zr.anchor,Xe,Bn))}}}if(bn=en,Gr=bn&&bn.placeable,Fr=bn&&bn.offscreen,Xe.useRuntimeCollisionCircles&&Xe.centerJustifiedTextSymbolIndex>=0){const vs=x.text.placedSymbolArray.get(Xe.centerJustifiedTextSymbolIndex),Xa=o.az(x.textSizeData,X,vs),Il=w.get("text-padding");Cn=this.collisionIndex.placeCollisionCircles(de,vs,x.lineVertexArray,x.glyphOffsetArray,Xa,N,O,g,ke,re.predicate,Xe.collisionCircleDiameter,Il,k,Ue),Cn.circles.length&&Cn.collisionDetected&&!g&&o.w("Collisions detected, but collision boxes are not shown"),Gr=ye||Cn.circles.length>0&&!Cn.collisionDetected,Fr=Fr&&Cn.offscreen}if(Pt.iconFeatureIndex&&(Vo=Pt.iconFeatureIndex),Pt.iconBox){const vs=Xa=>this.collisionIndex.placeCollisionBox(Xa,we,B,ze,N,ke,Se,A,re.predicate,Ue,ve&&zn?zn:void 0,ut);kn&&kn.placeable&&Pt.verticalIconBox?(cs=vs(Pt.verticalIconBox),on=cs.placeable):(cs=vs(Pt.iconBox),on=cs.placeable),Fr=Fr&&cs.offscreen}const Nl=le||Xe.numHorizontalGlyphVertices===0&&Xe.numVerticalGlyphVertices===0,zs=ce||Xe.numIconVertices===0;Nl||zs?zs?Nl||(on=on&&Gr):Gr=on&&Gr:on=Gr=on&&Gr;const Qa=on&&cs.placeable;if(Gr&&bn.placeable&&this.collisionIndex.insertCollisionBox(bn.box,de,w.get("text-ignore-placement"),x.bucketInstanceId,kn&&kn.placeable&&Ea?Ea:Ya,re.ID),Qa&&this.collisionIndex.insertCollisionBox(cs.box,we,w.get("icon-ignore-placement"),x.bucketInstanceId,Vo,re.ID),Cn&&Gr&&this.collisionIndex.insertCollisionCircles(Cn.circles,de,w.get("text-ignore-placement"),x.bucketInstanceId,Ya,re.ID),g&&this.storeCollisionData(x.bucketInstanceId,Qt,Pt,bn,cs,Cn),Xe.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(x.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Xe.crossTileID]=new im((Gr||qe)&&!(bn!=null&&bn.occluded),(on||Fe)&&!(cs!=null&&cs.occluded),Fr||x.justReloaded),d[Xe.crossTileID]=!0};if(Ae){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Xe=x.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Pt=Xe.length-1;Pt>=0;--Pt){const Qt=Xe[Pt];st(x.symbolInstances.get(Qt),x.collisionArrays[Qt],Qt)}}else for(let Xe=s.symbolInstanceStart;Xe<s.symbolInstanceEnd;Xe++)st(x.symbolInstances.get(Xe),x.collisionArrays[Xe],Xe);x.justReloaded=!1}storeCollisionData(s,d,g,x,w,k){if(g.textBox||g.iconBox){let A,N;this.collisionBoxArrays.has(s)?A=this.collisionBoxArrays.get(s):(A=new Map,this.collisionBoxArrays.set(s,A)),A.has(d)?N=A.get(d):(N={text:null,icon:null},A.set(d,N)),g.textBox&&(N.text=x.box),g.iconBox&&(N.icon=w.box)}if(k){let A=this.collisionCircleArrays[s];A===void 0&&(A=this.collisionCircleArrays[s]=[]);for(let N=0;N<k.circles.length;N+=4)A.push(k.circles[N+0]-sn),A.push(k.circles[N+1]-sn),A.push(k.circles[N+2]),A.push(k.collisionDetected?1:0)}}markUsedJustification(s,d,g,x){let w;w=x===o.ay.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.aQ(d)];const k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const A of k)A>=0&&(s.text.placedSymbolArray.get(A).crossTileID=w>=0&&A!==w?0:g.crossTileID)}markUsedOrientation(s,d,g){const x=d===o.ay.horizontal||d===o.ay.horizontalOnly?d:0,w=d===o.ay.vertical?d:0,k=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const A of k)s.text.placedSymbolArray.get(A).placedOrientation=x;g.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const x=d?d.symbolFadeChange(s):1,w=d?d.opacities:{},k=d?d.variableOffsets:{},A=d?d.placedOrientations:{};for(const N in this.placements){const O=this.placements[N],B=w[N];B?(this.opacities[N]=new hc(B,x,O.text,O.icon),g=g||O.text!==B.text.placed||O.icon!==B.icon.placed):(this.opacities[N]=new hc(null,x,O.text,O.icon,O.skipFade),g=g||O.text||O.icon)}for(const N in w){const O=w[N];if(!this.opacities[N]){const B=new hc(O,x,!1,!1);B.isHidden()||(this.opacities[N]=B,g=g||O.text.placed||O.icon.placed)}}for(const N in k)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=k[N]);for(const N in A)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=A[N]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){const g={};for(const x of d){const w=x.getBucket(s);w&&x.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,x.tileID,g,x.collisionBoxArray)}}updateBucketOpacities(s,d,g,x){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();const w=s.layers[0],k=w.layout,A=new hc(null,0,!1,!1,!0),N=k.get("text-allow-overlap"),O=k.get("icon-allow-overlap"),B=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),K=k.get("text-rotation-alignment")==="map",Z=k.get("text-pitch-alignment")==="map",X=k.get("icon-text-fit")!=="none",re=new hc(null,0,N&&(O||!s.hasIconData()||k.get("icon-optional")),O&&(N||!s.hasTextData()||k.get("text-optional")),!0);!s.collisionArrays&&x&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(x);const le=(de,ye,we)=>{for(let me=0;me<ye/4;me++)de.opacityVertexArray.emplaceBack(we);de.hasVisibleVertices=de.hasVisibleVertices||we!==Ga},ce=this.collisionBoxArrays.get(s.bucketInstanceId);for(let de=0;de<s.symbolInstances.length;de++){const ye=s.symbolInstances.get(de),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:me,crossTileID:Se}=ye;let ke=this.opacities[Se];g[Se]?ke=A:ke||(ke=re,this.opacities[Se]=ke),g[Se]=!0;const ve=ye.numIconVertices>0,Ae=this.placedOrientations[ye.crossTileID],qe=Ae===o.ay.vertical,Fe=Ae===o.ay.horizontal||Ae===o.ay.horizontalOnly;if(we>0||me>0){const Ue=Ox(ke.text);le(s.text,we,qe?Ga:Ue),le(s.text,me,Fe?Ga:Ue);const ut=ke.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(Pt=>{Pt>=0&&(s.text.placedSymbolArray.get(Pt).hidden=ut||qe?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=ut||Fe?1:0);const st=this.variableOffsets[ye.crossTileID];st&&this.markUsedJustification(s,st.anchor,ye,Ae);const Xe=this.placedOrientations[ye.crossTileID];Xe&&(this.markUsedJustification(s,"left",ye,Xe),this.markUsedOrientation(s,Xe,ye))}if(ve){const Ue=Ox(ke.icon),ut=!(X&&ye.verticalPlacedIconSymbolIndex&&qe);ye.placedIconSymbolIndex>=0&&(le(s.icon,ye.numIconVertices,ut?Ue:Ga),s.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=ke.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(le(s.icon,ye.numVerticalIconVertices,ut?Ga:Ue),s.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=ke.icon.isHidden())}const ze=ce&&ce.has(de)?ce.get(de):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){const Ue=s.collisionArrays[de];if(Ue){let ut=new o.P(0,0);if(Ue.textBox||Ue.verticalTextBox){let st=!0;if(B){const Xe=this.variableOffsets[Se];Xe?(ut=Mx(Xe.anchor,Xe.width,Xe.height,Xe.textOffset,Xe.textBoxScale),K&&ut._rotate(Z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):st=!1}if(Ue.textBox||Ue.verticalTextBox){let Xe;Ue.textBox&&(Xe=qe),Ue.verticalTextBox&&(Xe=Fe),Nx(s.textCollisionBox.collisionVertexArray,ke.text.placed,!st||Xe,ze.text,ut.x,ut.y)}}if(Ue.iconBox||Ue.verticalIconBox){const st=!!(!Fe&&Ue.verticalIconBox);let Xe;Ue.iconBox&&(Xe=st),Ue.verticalIconBox&&(Xe=!st),Nx(s.iconCollisionBox.collisionVertexArray,ke.icon.placed,Xe,ze.icon,X?ut.x:0,X?ut.y:0)}}}}if(s.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);s.bucketInstanceId in this.collisionCircleArrays&&(s.collisionCircleArray=this.collisionCircleArrays[s.bucketInstanceId],delete this.collisionCircleArrays[s.bucketInstanceId])}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>s}setStale(){this.stale=!0}}function Nx(b,s,d,g,x,w){g&&g.length!==0||(g=[0,0,0,0]);const k=g[0]-sn,A=g[1]-sn,N=g[2]-sn,O=g[3]-sn;b.emplaceBack(s?1:0,d?1:0,x||0,w||0,k,A),b.emplaceBack(s?1:0,d?1:0,x||0,w||0,N,A),b.emplaceBack(s?1:0,d?1:0,x||0,w||0,N,O),b.emplaceBack(s?1:0,d?1:0,x||0,w||0,k,O)}const Ix=Math.pow(2,25),Rx=Math.pow(2,24),sm=Math.pow(2,17),am=Math.pow(2,16),Dx=Math.pow(2,9),om=Math.pow(2,8),lm=Math.pow(2,1);function Ox(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const s=b.placed?1:0,d=Math.floor(127*b.opacity);return d*Ix+s*Rx+d*sm+s*am+d*Dx+s*om+d*lm+s}const Ga=0;class mh{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,g,x,w){const k=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(k,x,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((A,N)=>A.sortKey-N.sortKey));this._currentPartIndex<k.length;)if(d.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,w())return!0;return!1}}class Lx{constructor(s,d,g,x,w,k,A,N){this.placement=new bw(s,d,k,A,N),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(s,d,g){const x=F(),w=()=>!this._forceFullPlacement&&F()-x>2;for(;this._currentPlacementIndex>=0;){const k=d[s[this._currentPlacementIndex]],A=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=A)&&(!k.maxzoom||k.maxzoom>A)){if(this._inProgressLayer||(this._inProgressLayer=new mh(k)),this._inProgressLayer.continuePlacement(g[k.source],this.placement,this._showCollisionBoxes,k,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}const Sa=512/o.a4/2;class Fx{constructor(s,d,g){this.tileID=s,this.bucketInstanceId=g,this._symbolsByKey={};const x=new Map;for(let w=0;w<d.length;w++){const k=d.get(w),A=k.key,N=x.get(A);N?N.push(k):x.set(A,[k])}for(const[w,k]of x){const A={positions:k.map(N=>({x:Math.floor(N.anchorX*Sa),y:Math.floor(N.anchorY*Sa)})),crossTileIDs:k.map(N=>N.crossTileID)};if(A.positions.length>128){const N=new o.aS(A.positions.length,16,Uint16Array);for(const{x:O,y:B}of A.positions)N.add(O,B);N.finish(),delete A.positions,A.index=N}this._symbolsByKey[w]=A}}getScaledCoordinates(s,d){const{x:g,y:x,z:w}=this.tileID.canonical,{x:k,y:A,z:N}=d.canonical,O=Sa/Math.pow(2,N-w),B=(A*o.a4+s.anchorY)*O,K=x*o.a4*Sa;return{x:Math.floor((k*o.a4+s.anchorX)*O-g*o.a4*Sa),y:Math.floor(B-K)}}findMatches(s,d,g){const x=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let w=0;w<s.length;w++){const k=s.get(w);if(k.crossTileID)continue;const A=this._symbolsByKey[k.key];if(!A)continue;const N=this.getScaledCoordinates(k,d);if(A.index){const O=A.index.range(N.x-x,N.y-x,N.x+x,N.y+x).sort();for(const B of O){const K=A.crossTileIDs[B];if(!g[K]){g[K]=!0,k.crossTileID=K;break}}}else if(A.positions)for(let O=0;O<A.positions.length;O++){const B=A.positions[O],K=A.crossTileIDs[O];if(Math.abs(B.x-N.x)<=x&&Math.abs(B.y-N.y)<=x&&!g[K]){g[K]=!0,k.crossTileID=K;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class ww{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ro{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){const d=Math.round((s-this.lng)/360);if(d!==0)for(const g in this.indexes){const x=this.indexes[g],w={};for(const k in x){const A=x[k];A.tileID=A.tileID.unwrapTo(A.tileID.wrap+d),w[A.tileID.key]=A}this.indexes[g]=w}this.lng=s}addBucket(s,d,g){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<d.symbolInstances.length;w++)d.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});const x=this.usedCrossTileIDs[s.overscaledZ];for(const w in this.indexes){const k=this.indexes[w];if(Number(w)>s.overscaledZ)for(const A in k){const N=k[A];N.tileID.isChildOf(s)&&N.findMatches(d.symbolInstances,s,x)}else{const A=k[s.scaledTo(Number(w)).key];A&&A.findMatches(d.symbolInstances,s,x)}}for(let w=0;w<d.symbolInstances.length;w++){const k=d.symbolInstances.get(w);k.crossTileID||(k.crossTileID=g.generate(),x[k.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new Fx(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(const g of d.getCrossTileIDsLists())for(const x of g)delete this.usedCrossTileIDs[s][x]}removeStaleBuckets(s){let d=!1;for(const g in this.indexes){const x=this.indexes[g];for(const w in x)s[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,x[w]),delete x[w],d=!0)}return d}}class vl{constructor(){this.layerIndexes={},this.crossTileIDs=new ww,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,g){let x=this.layerIndexes[s.id];x===void 0&&(x=this.layerIndexes[s.id]=new Ro);let w=!1;const k={};x.handleWrapJump(g);for(const A of d){const N=A.getBucket(s);N&&s.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(A.tileID,N,this.crossTileIDs)&&(w=!0),k[N.bucketInstanceId]=!0)}return x.removeStaleBuckets(k)&&(w=!0),w}pruneUnusedLayers(s){const d={};s.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}var hr="void main() {fragColor=vec4(1.0);}";const Ds={prelude:yr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:yr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:yr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yr(hr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:yr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:yr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yr(hr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:yr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:yr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:yr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yr(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:yr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:yr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:yr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yr(b,s){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=s.match(/in ([\w]+) ([\w]+)/g),x=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=w?w.concat(x):x,A={};return{fragmentSource:b=b.replace(d,(N,O,B,K,Z)=>(A[Z]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
in ${B} ${K} ${Z};
#else
uniform ${B} ${K} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${B} ${K} ${Z} = u_${Z};
#endif
`)),vertexSource:s=s.replace(d,(N,O,B,K,Z)=>{const X=K==="float"?"vec2":"vec4",re=Z.match(/color/)?"color":X;return A[Z]?O==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${B} ${X} a_${Z};
out ${B} ${K} ${Z};
#else
uniform ${B} ${K} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${B} ${K} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${B} ${K} ${Z} = u_${Z};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
in ${B} ${X} a_${Z};
#else
uniform ${B} ${K} u_${Z};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${K} ${Z} = a_${Z};
#else
    ${B} ${K} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${B} ${K} ${Z} = unpack_mix_${re}(a_${Z}, u_${Z}_t);
#else
    ${B} ${K} ${Z} = u_${Z};
#endif
`}),staticAttributes:g,staticUniforms:k}}class Do{constructor(s,d,g){this.vertexBuffer=s,this.indexBuffer=d,this.segments=g}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ln=o.aT([{name:"a_pos",type:"Int16",components:2}]);const Ii="#define PROJECTION_MERCATOR",Ri="mercator";class Yn{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ri}get shaderDefine(){return Ii}get shaderPreludeCode(){return Ds.projectionMercator}get vertexShaderPreludeCode(){return Ds.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aU.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(s){}getMeshFromTileID(s,d,g,x,w){if(this._cachedMesh)return this._cachedMesh;const k=new o.aV;k.emplaceBack(0,0),k.emplaceBack(o.a4,0),k.emplaceBack(0,o.a4),k.emplaceBack(o.a4,o.a4);const A=s.createVertexBuffer(k,Ln.members),N=o.aW.simpleSegment(0,0,4,2),O=new o.aX;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3);const B=s.createIndexBuffer(O);return this._cachedMesh=new Do(A,B,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(s){}}class qr{constructor(s=0,d=0,g=0,x=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=g,this.right=x}interpolate(s,d,g){return d.top!=null&&s.top!=null&&(this.top=o.G.number(s.top,d.top,g)),d.bottom!=null&&s.bottom!=null&&(this.bottom=o.G.number(s.bottom,d.bottom,g)),d.left!=null&&s.left!=null&&(this.left=o.G.number(s.left,d.left,g)),d.right!=null&&s.right!=null&&(this.right=o.G.number(s.right,d.right,g)),this}getCenter(s,d){const g=o.an((this.left+s-this.right)/2,0,s),x=o.an((this.top+d-this.bottom)/2,0,d);return new o.P(g,x)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new qr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function gh(b,s){if(!b.renderWorldCopies||b.lngRange)return;const d=s.lng-b.center.lng;s.lng+=d>180?-360:d<-180?360:0}function Hi(b){return Math.max(0,Math.floor(b))}class ss{constructor(s,d){var g;this.applyConstrain=(x,w)=>this._constrainOverride!==null?this._constrainOverride(x,w):this._callbacks.defaultConstrain(x,w),this._callbacks=s,this._tileSize=512,this._renderWorldCopies=(d==null?void 0:d.renderWorldCopies)===void 0||!!(d!=null&&d.renderWorldCopies),this._minZoom=(d==null?void 0:d.minZoom)||0,this._maxZoom=(d==null?void 0:d.maxZoom)||22,this._minPitch=(d==null?void 0:d.minPitch)==null?0:d==null?void 0:d.minPitch,this._maxPitch=(d==null?void 0:d.maxPitch)==null?60:d==null?void 0:d.maxPitch,this._constrainOverride=(g=d==null?void 0:d.constrainOverride)!==null&&g!==void 0?g:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Hi(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new qr,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(s,d,g){this._constrainOverride=s.constrainOverride,this._latRange=s.latRange,this._lngRange=s.lngRange,this._width=s.width,this._height=s.height,this._center=s.center,this._elevation=s.elevation,this._minElevationForCurrentTile=s.minElevationForCurrentTile,this._zoom=s.zoom,this._tileZoom=Hi(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=s.bearingInRadians,this._fovInRadians=s.fovInRadians,this._pitchInRadians=s.pitchInRadians,this._rollInRadians=s.rollInRadians,this._unmodified=s.unmodified,this._edgeInsets=new qr(s.padding.top,s.padding.bottom,s.padding.left,s.padding.right),this._minZoom=s.minZoom,this._maxZoom=s.maxZoom,this._minPitch=s.minPitch,this._maxPitch=s.maxPitch,this._renderWorldCopies=s.renderWorldCopies,this._cameraToCenterDistance=s.cameraToCenterDistance,this._nearZ=s.nearZ,this._farZ=s.farZ,this._autoCalculateNearFarZ=!g&&s.autoCalculateNearFarZ,d&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(s){this._minElevationForCurrentTile=s}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(s){this._minZoom!==s&&(this._minZoom=s,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(s){this._minPitch!==s&&(this._minPitch=s,this.setPitch(Math.max(this.pitch,s)))}get maxPitch(){return this._maxPitch}setMaxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.setPitch(Math.min(this.pitch,s)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get constrainOverride(){return this._constrainOverride}setConstrainOverride(s){s===void 0&&(s=null),this._constrainOverride!==s&&(this._constrainOverride=s,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(s){const d=o.W(s,-180,180)*Math.PI/180;var g,x,w,k,A,N,O,B,K;this._bearingInRadians!==d&&(this._unmodified=!1,this._bearingInRadians=d,this._calcMatrices(),this._rotationMatrix=T(),g=this._rotationMatrix,w=-this._bearingInRadians,k=(x=this._rotationMatrix)[0],A=x[1],N=x[2],O=x[3],B=Math.sin(w),K=Math.cos(w),g[0]=k*K+N*B,g[1]=A*K+O*B,g[2]=k*-B+N*K,g[3]=A*-B+O*K)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(s){const d=o.an(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==d&&(this._unmodified=!1,this._pitchInRadians=d,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(s){const d=s/180*Math.PI;this._rollInRadians!==d&&(this._unmodified=!1,this._rollInRadians=d,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aY(this._fovInRadians)}setFov(s){s=o.an(s,.1,150),this.fov!==s&&(this._unmodified=!1,this._fovInRadians=o.ap(s),this._calcMatrices())}get zoom(){return this._zoom}setZoom(s){const d=this.applyConstrain(this._center,s).zoom;this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this._tileZoom=Math.max(0,Math.floor(d)),this._scale=o.aq(d),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(s){s!==this._elevation&&(this._elevation=s,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(s,d){this._autoCalculateNearFarZ=!1,this._nearZ=s,this._farZ=d,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,g){this._unmodified=!1,this._edgeInsets.interpolate(s,d,g),this.constrainInternal(),this._calcMatrices()}resize(s,d,g=!0){this._width=s,this._height=d,g&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Nr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(s){s?(this._lngRange=[s.getWest(),s.getEast()],this._latRange=[s.getSouth(),s.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ao,o.ao])}getCameraQueryGeometry(s,d){if(d.length===1)return[d[0],s];{const{minX:g,minY:x,maxX:w,maxY:k}=o.ab.fromPoints(d).extend(s);return[new o.P(g,x),new o.P(w,x),new o.P(w,k),new o.P(g,k),new o.P(g,x)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const s=this._unmodified,{center:d,zoom:g}=this.applyConstrain(this.center,this.zoom);this.setCenter(d),this.setZoom(g),this._unmodified=s,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let s=o.ar(new Float64Array(16));o.Q(s,s,[this._width/2,-this._height/2,1]),o.O(s,s,[1,-1,0]),this._clipSpaceToPixelsMatrix=s,s=o.ar(new Float64Array(16)),o.Q(s,s,[1,-1,1]),o.O(s,s,[-1,-1,0]),o.Q(s,s,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=s,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(s,d,g,x){const w=g!==void 0?g:this.bearing,k=x=x!==void 0?x:this.pitch,A=o.aa.fromLngLat(s,d),N=-Math.cos(o.ap(k)),O=Math.sin(o.ap(k)),B=O*Math.sin(o.ap(w)),K=-O*Math.cos(o.ap(w));let Z=this.elevation;const X=d-Z;let re;N*X>=0||Math.abs(N)<.1?(re=1e4,Z=d+re*N):re=-X/N;let le,ce,de=o.aZ(1,A.y),ye=0;do{if(ye+=1,ye>10)break;ce=re/de,le=new o.aa(A.x+B*ce,A.y+K*ce),de=1/le.meterInMercatorCoordinateUnits()}while(Math.abs(re-ce*de)>1e-12);return{center:le.toLngLat(),elevation:Z,zoom:o.at(this.height/2/Math.tan(this.fovInRadians/2)/ce/this.tileSize)}}recalculateZoomAndCenter(s){if(this.elevation-s==0)return;const d=o.as(1,this.center.lat)*this.worldSize,g=this.cameraToCenterDistance/d,x=o.aa.fromLngLat(this.center,this.elevation),w=je(this.center,this.elevation,this.pitch,this.bearing,g);this._elevation=s;const k=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),o.aZ(w.z,x.y),this.bearing,this.pitch);this._elevation=k.elevation,this._center=k.center,this.setZoom(k.zoom)}getCameraPoint(){const s=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(s*Math.sin(this.rollInRadians),s*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const s=o.as(1,this.center.lat)*this.worldSize;return je(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/s).toLngLat()}getMercatorTileCoordinates(s){if(!s)return[0,0,1,1];const d=s.canonical.z>=0?1<<s.canonical.z:Math.pow(2,s.canonical.z);return[s.canonical.x/d,s.canonical.y/d,1/d/o.a4,1/d/o.a4]}}class Di{constructor(s,d){this.min=s,this.max=d,this.center=o.a_([],o.a$([],this.min,this.max),.5)}quadrant(s){const d=[s%2==0,s<2],g=o.b0(this.min),x=o.b0(this.max);for(let w=0;w<d.length;w++)g[w]=d[w]?this.min[w]:this.center[w],x[w]=d[w]?this.center[w]:this.max[w];return x[2]=this.max[2],new Di(g,x)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersectsFrustum(s){let d=!0;for(let g=0;g<s.planes.length;g++){const x=this.intersectsPlane(s.planes[g]);if(x===0)return 0;x===1&&(d=!1)}return d?2:s.aabb.min[0]>this.max[0]||s.aabb.min[1]>this.max[1]||s.aabb.min[2]>this.max[2]||s.aabb.max[0]<this.min[0]||s.aabb.max[1]<this.min[1]||s.aabb.max[2]<this.min[2]?0:1}intersectsPlane(s){let d=s[3],g=s[3];for(let x=0;x<3;x++)s[x]>0?(d+=s[x]*this.min[x],g+=s[x]*this.max[x]):(g+=s[x]*this.min[x],d+=s[x]*this.max[x]);return d>=0?2:g<0?0:1}}class zx{distanceToTile2d(s,d,g,x){const w=x.distanceX([s,d]),k=x.distanceY([s,d]);return Math.hypot(w,k)}getWrap(s,d,g){return g}getTileBoundingVolume(s,d,g,x){var w,k;let A=0,N=0;if(x!=null&&x.terrain){const B=new o.a1(s.z,d,s.z,s.x,s.y),K=x.terrain.getMinMaxElevation(B);A=(w=K.minElevation)!==null&&w!==void 0?w:Math.min(0,g),N=(k=K.maxElevation)!==null&&k!==void 0?k:Math.max(0,g)}const O=1<<s.z;return new Di([d+s.x/O,s.y/O,A],[d+(s.x+1)/O,(s.y+1)/O,N])}allowVariableZoom(s,d){const g=s.fov*(Math.abs(Math.cos(s.rollInRadians))*s.height+Math.abs(Math.sin(s.rollInRadians))*s.width)/s.height,x=o.an(78.5-g/2,0,60);return!!d.terrain||s.pitch>x}allowWorldCopies(){return!0}prepareNextFrame(){}}class Oo{constructor(s,d,g){this.points=s,this.planes=d,this.aabb=g}static fromInvProjectionMatrix(s,d=1,g=0,x,w){const k=w?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],A=Math.pow(2,g),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Z=>function(X,re,le,ce){const de=o.aG([],X,re),ye=1/de[3]/le*ce;return o.b5(de,de,[ye,ye,1/de[3],ye])}(Z,s,d,A));x&&function(Z,X,re,le){const ce=le?4:0,de=le?0:4;let ye=0;const we=[],me=[];for(let ve=0;ve<4;ve++){const Ae=o.b1([],Z[ve+de],Z[ve+ce]),qe=o.b6(Ae);o.a_(Ae,Ae,1/qe),we.push(qe),me.push(Ae)}for(let ve=0;ve<4;ve++){const Ae=o.b7(Z[ve+ce],me[ve],re);ye=Ae!==null&&Ae>=0?Math.max(ye,Ae):Math.max(ye,we[ve])}const Se=function(ve,Ae){const qe=o.b1([],ve[Ae[0]],ve[Ae[1]]),Fe=o.b1([],ve[Ae[2]],ve[Ae[1]]),ze=[0,0,0,0];return o.b2(ze,o.b3([],qe,Fe)),ze[3]=-o.b4(ze,ve[Ae[0]]),ze}(Z,X),ke=function(ve,Ae){const qe=o.b8(ve),Fe=o.b9([],ve,1/qe),ze=o.b1([],Ae,o.a_([],Fe,o.b4(Ae,Fe))),Ue=o.b8(ze);if(Ue>0){const ut=Math.sqrt(1-Fe[3]*Fe[3]),st=o.a_([],Fe,-Fe[3]),Xe=o.a$([],st,o.a_([],ze,ut/Ue));return o.ba(Ae,Xe)}return null}(re,Se);if(ke!==null){const ve=ke/o.b4(me[0],Se);ye=Math.min(ye,ve)}for(let ve=0;ve<4;ve++){const Ae=Math.min(ye,we[ve]);Z[ve+de]=[Z[ve+ce][0]+me[ve][0]*Ae,Z[ve+ce][1]+me[ve][1]*Ae,Z[ve+ce][2]+me[ve][2]*Ae,1]}}(N,k[0],x,w);const O=k.map(Z=>{const X=o.b1([],N[Z[0]],N[Z[1]]),re=o.b1([],N[Z[2]],N[Z[1]]),le=o.b2([],o.b3([],X,re)),ce=-o.b4(le,N[Z[1]]);return le.concat(ce)}),B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],K=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const Z of N)for(let X=0;X<3;X++)B[X]=Math.min(B[X],Z[X]),K[X]=Math.max(K[X],Z[X]);return new Oo(N,O,new Di(B,K))}}class Xr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,g){return this._helper.interpolatePadding(s,d,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,g=!0){this._helper.resize(s,d,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}setConstrainOverride(s){this._helper.setConstrainOverride(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s,d){}constructor(s){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(d,g)=>{g=o.an(+g,this.minZoom,this.maxZoom);const x={center:new o.V(d.lng,d.lat),zoom:g};let w=this._helper._lngRange;if(!this._helper._renderWorldCopies&&w===null){const me=179.9999999999;w=[-me,me]}const k=this.tileSize*o.aq(x.zoom);let A=0,N=k,O=0,B=k,K=0,Z=0;const{x:X,y:re}=this.size;if(this._helper._latRange){const me=this._helper._latRange;A=o.X(me[1])*k,N=o.X(me[0])*k,N-A<re&&(K=re/(N-A))}w&&(O=o.W(o.Y(w[0])*k,0,k),B=o.W(o.Y(w[1])*k,0,k),B<O&&(B+=k),B-O<X&&(Z=X/(B-O)));const{x:le,y:ce}=ge(k,d);let de,ye;const we=Math.max(Z||0,K||0);if(we){const me=new o.P(Z?(B+O)/2:le,K?(N+A)/2:ce);return x.center=be(k,me).wrap(),x.zoom+=o.at(we),x}if(this._helper._latRange){const me=re/2;ce-me<A&&(ye=A+me),ce+me>N&&(ye=N-me)}if(w){const me=(O+B)/2;let Se=le;this._helper._renderWorldCopies&&(Se=o.W(le,me-k/2,me+k/2));const ke=X/2;Se-ke<O&&(de=O+ke),Se+ke>B&&(de=B-ke)}if(de!==void 0||ye!==void 0){const me=new o.P(de??le,ye??ce);x.center=be(k,me).wrap()}return x},this.applyConstrain=(d,g)=>this._helper.applyConstrain(d,g),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(d,g)=>this.defaultConstrain(d,g)},s),this._coveringTilesDetailsProvider=new zx}clone(){const s=new Xr;return s.apply(this),s}apply(s,d,g){this._helper.apply(s,d,g)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(s){const d=[new o.bb(0,s)];if(this._helper._renderWorldCopies){const g=this.screenPointToMercatorCoordinate(new o.P(0,0)),x=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),k=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),A=Math.floor(Math.min(g.x,x.x,w.x,k.x)),N=Math.floor(Math.max(g.x,x.x,w.x,k.x)),O=1;for(let B=A-O;B<=N+O;B++)B!==0&&d.push(new o.bb(B,s))}return d}getCameraFrustum(){return Oo.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){const d=this.screenPointToLocation(this.centerPoint,s),g=s?s.getElevationForLngLatZoom(d,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(g)}setLocationAtPoint(s,d){const g=o.as(this.elevation,this.center.lat),x=this.screenPointToMercatorCoordinateAtZ(d,g),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,g),k=o.aa.fromLngLat(s),A=new o.aa(k.x-(x.x-w.x),k.y-(x.y-w.y));this.setCenter(A==null?void 0:A.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(s,d){return d?this.coordinatePoint(o.aa.fromLngLat(s),d.getElevationForLngLatZoom(s,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.aa.fromLngLat(s))}screenPointToLocation(s,d){var g;return(g=this.screenPointToMercatorCoordinate(s,d))===null||g===void 0?void 0:g.toLngLat()}screenPointToMercatorCoordinate(s,d){if(d){const g=d.pointCoordinate(s);if(g!=null)return g}return this.screenPointToMercatorCoordinateAtZ(s)}screenPointToMercatorCoordinateAtZ(s,d){const g=d||0,x=[s.x,s.y,0,1],w=[s.x,s.y,1,1];o.aG(x,x,this._pixelMatrixInverse),o.aG(w,w,this._pixelMatrixInverse);const k=x[3],A=w[3],N=x[1]/k,O=w[1]/A,B=x[2]/k,K=w[2]/A,Z=B===K?0:(g-B)/(K-B);return new o.aa(o.G.number(x[0]/k,w[0]/A,Z)/this.worldSize,o.G.number(N,O,Z)/this.worldSize,g)}coordinatePoint(s,d=0,g=this._pixelMatrix){const x=[s.x*this.worldSize,s.y*this.worldSize,d,1];return o.aG(x,x,g),new o.P(x[0]/x[3],x[1]/x[3])}getBounds(){const s=Math.max(0,this._helper._height/2-Ie(this));return new Nr().extend(this.screenPointToLocation(new o.P(0,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,s))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(s,d){return d?d.pointCoordinate(s)!=null:s.y>this.height/2-Ie(this)}calculatePosMatrix(s,d=!1,g){var x;const w=(x=s.key)!==null&&x!==void 0?x:o.bc(s.wrap,s.canonical.z,s.canonical.z,s.canonical.x,s.canonical.y),k=d?this._alignedPosMatrixCache:this._posMatrixCache;if(k.has(w)){const O=k.get(w);return g?O.f32:O.f64}const A=oe(s,this.worldSize);o.S(A,d?this._alignedProjMatrix:this._viewProjMatrix,A);const N={f64:A,f32:new Float32Array(A)};return k.set(w,N),g?N.f32:N.f64}calculateFogMatrix(s){const d=s.key,g=this._fogMatrixCacheF32;if(g.has(d))return g.get(d);const x=oe(s,this.worldSize);return o.S(x,this._fogMatrix,x),g.set(d,new Float32Array(x)),g.get(d)}calculateCenterFromCameraLngLatAlt(s,d,g,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,g,x)}_calculateNearFarZIfNeeded(s,d,g){if(!this._helper.autoCalculateNearFarZ)return;const x=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=s-x*this._helper._pixelPerMeter/Math.cos(d),k=x<0?w:s,A=Math.PI/2+this.pitchInRadians,N=o.ap(this.fov)*(Math.abs(Math.cos(o.ap(this.roll)))*this.height+Math.abs(Math.sin(o.ap(this.roll)))*this.width)/this.height*(.5+g.y/this.height),O=Math.sin(N)*k/Math.sin(o.an(Math.PI-A-N,.01,Math.PI-.01)),B=Ie(this),K=Math.atan(B/this._helper.cameraToCenterDistance),Z=o.ap(.75),X=K>Z?2*K*(.5+g.y/(2*B)):Z,re=Math.sin(X)*k/Math.sin(o.an(Math.PI-A-X,.01,Math.PI-.01)),le=Math.min(O,re);this._helper._farZ=1.01*(Math.cos(Math.PI/2-d)*le+k),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const s=this.centerOffset,d=ge(this.worldSize,this.center),g=d.x,x=d.y;this._helper._pixelPerMeter=o.as(1,this.center.lat)*this.worldSize;const w=o.ap(Math.min(this.pitch,ie)),k=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let A;this._calculateNearFarZIfNeeded(k,w,s),A=new Float64Array(16),o.bd(A,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aA(this._invProjMatrix,A),A[8]=2*-s.x/this._helper._width,A[9]=2*s.y/this._helper._height,this._projectionMatrix=o.be(A),o.Q(A,A,[1,-1,1]),o.O(A,A,[0,0,-this._helper.cameraToCenterDistance]),o.bf(A,A,-this.rollInRadians),o.bg(A,A,this.pitchInRadians),o.bf(A,A,-this.bearingInRadians),o.O(A,A,[-g,-x,0]),this._mercatorMatrix=o.Q([],A,[this.worldSize,this.worldSize,this.worldSize]),o.Q(A,A,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,A),o.O(A,A,[0,0,-this.elevation]),this._viewProjMatrix=A,this._invViewProjMatrix=o.aA([],A);const N=[0,0,-1,1];o.aG(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.bd(this._fogMatrix,this.fovInRadians,this.width/this.height,k,this._helper._farZ),this._fogMatrix[8]=2*-s.x/this.width,this._fogMatrix[9]=2*s.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bf(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bg(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bf(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-g,-x,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,A);const O=this._helper._width%2/2,B=this._helper._height%2/2,K=Math.cos(this.bearingInRadians),Z=Math.sin(-this.bearingInRadians),X=g-Math.round(g)+K*O+Z*B,re=x-Math.round(x)+K*B+Z*O,le=new Float64Array(A);if(o.O(le,le,[X>.5?X-1:X,re>.5?re-1:re,0]),this._alignedProjMatrix=le,A=o.aA(new Float64Array(16),this._pixelMatrix),!A)throw new Error("failed to invert matrix");this._pixelMatrixInverse=A,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const s=this.screenPointToMercatorCoordinate(new o.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return o.aG(d,d,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const s=o.as(1,this.center.lat)*this.worldSize;return je(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/s).toLngLat()}lngLatToCameraDepth(s,d){const g=o.aa.fromLngLat(s),x=[g.x*this.worldSize,g.y*this.worldSize,d,1];return o.aG(x,x,this._viewProjMatrix),x[2]/x[3]}getProjectionData(s){const{overscaledTileID:d,aligned:g,applyTerrainMatrix:x}=s,w=this._helper.getMercatorTileCoordinates(d),k=d?this.calculatePosMatrix(d,g,!0):null;let A;return A=d&&d.terrainRttPosMatrix32f&&x?d.terrainRttPosMatrix32f:k||o.bh(),{mainMatrix:A,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:A}}isLocationOccluded(s){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(s,d,g){return 1}transformLightDirection(s){return o.b0(s)}getRayDirectionFromPixel(s){throw new Error("Not implemented.")}projectTileCoordinates(s,d,g,x){const w=this.calculatePosMatrix(g);let k;x?(k=[s,d,x(s,d),1],o.aG(k,k,w)):(k=[s,d,0,1],Lu(k,k,w));const A=k[3];return{point:new o.P(k[0]/A,k[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}populateCache(s){for(const d of s)this.calculatePosMatrix(d)}getMatrixForModel(s,d){const g=o.aa.fromLngLat(s,d),x=g.meterInMercatorCoordinateUnits(),w=o.bi();return o.O(w,w,[g.x,g.y,g.z]),o.bf(w,w,Math.PI),o.bg(w,w,Math.PI/2),o.Q(w,w,[-x,x,x]),w}getProjectionDataForCustomLayer(s=!0){const d=new o.a1(0,0,0,0,0),g=this.getProjectionData({overscaledTileID:d,applyGlobeMatrix:s}),x=oe(d,this.worldSize);o.S(x,this._viewProjMatrix,x),g.tileMercatorCoords=[0,0,1,1];const w=[o.a4,o.a4,this.worldSize/this._helper.pixelsPerMeter],k=o.bj();return o.Q(k,x,w),g.fallbackMatrix=k,g.mainMatrix=k,g}getFastPathSimpleProjectionMatrix(s){return this.calculatePosMatrix(s)}}function fc(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Lo(b){if(b.useSlerp)if(b.k<1){const s=o.bk(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),d=o.bk(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),g=new Float64Array(4);o.bl(g,s,d,b.k);const x=o.bm(g);b.tr.setRoll(x.roll),b.tr.setPitch(x.pitch),b.tr.setBearing(x.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(o.G.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(o.G.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(o.G.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function Fu(b,s,d,g,x){const w=x.padding,k=ge(x.worldSize,d.getNorthWest()),A=ge(x.worldSize,d.getNorthEast()),N=ge(x.worldSize,d.getSouthEast()),O=ge(x.worldSize,d.getSouthWest()),B=o.ap(-g),K=k.rotate(B),Z=A.rotate(B),X=N.rotate(B),re=O.rotate(B),le=new o.P(Math.max(K.x,Z.x,re.x,X.x),Math.max(K.y,Z.y,re.y,X.y)),ce=new o.P(Math.min(K.x,Z.x,re.x,X.x),Math.min(K.y,Z.y,re.y,X.y)),de=le.sub(ce),ye=(x.width-(w.left+w.right+s.left+s.right))/de.x,we=(x.height-(w.top+w.bottom+s.top+s.bottom))/de.y;if(we<0||ye<0)return void fc();const me=Math.min(o.at(x.scale*Math.min(ye,we)),b.maxZoom),Se=o.P.convert(b.offset),ke=new o.P((s.left-s.right)/2,(s.top-s.bottom)/2).rotate(o.ap(g)),ve=Se.add(ke).mult(x.scale/o.aq(me));return{center:be(x.worldSize,k.add(N).div(2).sub(ve)),zoom:me,bearing:g}}class as{get useGlobeControls(){return!1}handlePanInertia(s,d){const g=s.mag(),x=Math.abs(Ie(d));return{easingOffset:s.mult(Math.min(.75*x/g,1)),easingCenter:d.center}}handleMapControlsRollPitchBearingZoom(s,d){s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta),s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta)}handleMapControlsPan(s,d,g){s.around.distSqr(d.centerPoint)<.01||d.setLocationAtPoint(g,s.around)}cameraForBoxAndBearing(s,d,g,x,w){return Fu(s,d,g,x,w)}handleJumpToCenterZoom(s,d){s.zoom!==(d.zoom!==void 0?+d.zoom:s.zoom)&&s.setZoom(+d.zoom),d.center!==void 0&&s.setCenter(o.V.convert(d.center))}handleEaseTo(s,d){const g=s.zoom,x=s.padding,w={roll:s.roll,pitch:s.pitch,bearing:s.bearing},k={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},A=d.zoom!==void 0,N=!s.isPaddingEqual(d.padding);let O=!1;const B=A?+d.zoom:s.zoom;let K=s.centerPoint.add(d.offsetAsPoint);const Z=s.screenPointToLocation(K),{center:X,zoom:re}=s.applyConstrain(o.V.convert(d.center||Z),B??g);gh(s,X);const le=ge(s.worldSize,Z),ce=ge(s.worldSize,X).sub(le),de=o.aq(re-g);return O=re!==g,{easeFunc:ye=>{if(O&&s.setZoom(o.G.number(g,re,ye)),o.bn(w,k)||Lo({startEulerAngles:w,endEulerAngles:k,tr:s,k:ye,useSlerp:w.roll!=k.roll}),N&&(s.interpolatePadding(x,d.padding,ye),K=s.centerPoint.add(d.offsetAsPoint)),d.around)s.setLocationAtPoint(d.around,d.aroundPoint);else{const we=o.aq(s.zoom-g),me=re>g?Math.min(2,de):Math.max(.5,de),Se=Math.pow(me,1-ye),ke=be(s.worldSize,le.add(ce.mult(ye*Se)).mult(we));s.setLocationAtPoint(s.renderWorldCopies?ke.wrap():ke,K)}},isZooming:O,elevationCenter:X}}handleFlyTo(s,d){const g=d.zoom!==void 0,x=s.zoom,w=s.applyConstrain(o.V.convert(d.center||d.locationAtOffset),g?+d.zoom:x),k=w.center,A=w.zoom;gh(s,k);const N=ge(s.worldSize,d.locationAtOffset),O=ge(s.worldSize,k).sub(N),B=O.mag(),K=o.aq(A-x);let Z;if(d.minZoom!==void 0){const X=Math.min(+d.minZoom,x,A),re=s.applyConstrain(k,X).zoom;Z=o.aq(re-x)}return{easeFunc:(X,re,le,ce)=>{s.setZoom(X===1?A:x+o.at(re));const de=X===1?k:be(s.worldSize,N.add(O.mult(le)).mult(re));s.setLocationAtPoint(s.renderWorldCopies?de.wrap():de,ce)},scaleOfZoom:K,targetCenter:k,scaleOfMinZoom:Z,pixelPathLength:B}}}class Jr{constructor(s,d,g){this.blendFunction=s,this.blendColor=d,this.mask=g}}Jr.Replace=[1,0],Jr.disabled=new Jr(Jr.Replace,o.bo.transparent,[!1,!1,!1,!1]),Jr.unblended=new Jr(Jr.Replace,o.bo.transparent,[!0,!0,!0,!0]),Jr.alphaBlended=new Jr([1,771],o.bo.transparent,[!0,!0,!0,!0]);const Ta=2305;class Sr{constructor(s,d,g){this.enable=s,this.mode=d,this.frontFace=g}}Sr.disabled=new Sr(!1,1029,Ta),Sr.backCCW=new Sr(!0,1029,Ta),Sr.frontCCW=new Sr(!0,1028,Ta);class sr{constructor(s,d,g){this.func=s,this.mask=d,this.range=g}}sr.ReadOnly=!1,sr.ReadWrite=!0,sr.disabled=new sr(519,sr.ReadOnly,[0,1]);const mc=7680;class xr{constructor(s,d,g,x,w,k){this.test=s,this.ref=d,this.mask=g,this.fail=x,this.depthFail=w,this.pass=k}}xr.disabled=new xr({func:519,mask:0},0,0,mc,mc,mc);const gc=new WeakMap;function ea(b){var s;if(gc.has(b))return gc.get(b);{const d=(s=b.getParameter(b.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return gc.set(b,d),d}}class zu{get awaitingQuery(){return!!this._readbackQueue}constructor(s){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=s;const d=s.context,g=d.gl;this._texFormat=g.RGBA,this._texType=g.UNSIGNED_BYTE;const x=new o.aV;x.emplaceBack(-1,-1),x.emplaceBack(2,-1),x.emplaceBack(-1,2);const w=new o.aX;w.emplaceBack(0,1,2),this._fullscreenTriangle=new Do(d.createVertexBuffer(x,Ln.members),d.createIndexBuffer(w),o.aW.simpleSegment(0,0,x.length,w.length)),this._resultBuffer=new Uint8Array(4),d.activeTexture.set(g.TEXTURE1);const k=g.createTexture();g.bindTexture(g.TEXTURE_2D,k),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST),g.texImage2D(g.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=d.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(k),ea(g)&&(this._pbo=g.createBuffer(),g.bindBuffer(g.PIXEL_PACK_BUFFER,this._pbo),g.bufferData(g.PIXEL_PACK_BUFFER,4,g.STREAM_READ),g.bindBuffer(g.PIXEL_PACK_BUFFER,null))}destroy(){const s=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),s.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(s,d){const g=this._updateCount;return this._readbackQueue?g>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():g>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(s,d),this._updateCount++,this._measuredError}_bindFramebuffer(){const s=this._cachedRenderContext.context,d=s.gl;s.activeTexture.set(d.TEXTURE1),d.bindTexture(d.TEXTURE_2D,this._fbo.colorAttachment.get()),s.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(s,d){const g=this._cachedRenderContext.context,x=g.gl;if(this._bindFramebuffer(),g.viewport.set([0,0,this._texWidth,this._texHeight]),g.clear({color:o.bo.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(g,x.TRIANGLES,sr.disabled,xr.disabled,Jr.unblended,Sr.disabled,((w,k)=>({u_input:w,u_output_expected:k}))(s,d),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&ea(x)){x.bindBuffer(x.PIXEL_PACK_BUFFER,this._pbo),x.readBuffer(x.COLOR_ATTACHMENT0),x.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),x.bindBuffer(x.PIXEL_PACK_BUFFER,null);const w=x.fenceSync(x.SYNC_GPU_COMMANDS_COMPLETE,0);x.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const s=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&ea(s)){const d=s.clientWaitSync(this._readbackQueue.sync,0,0);if(d===s.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(d===s.TIMEOUT_EXPIRED)return;s.bindBuffer(s.PIXEL_PACK_BUFFER,this._pbo),s.getBufferSubData(s.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),s.bindBuffer(s.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),s.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=zu._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(s){let d=0;return d+=s[0]/256,d+=s[1]/65536,d+=s[2]/16777216,s[3]<127&&(d=-d),d/128}}const _l=o.a4/128;function yh(b,s){const d=b.granularity!==void 0?Math.max(b.granularity,1):1,g=d+(b.generateBorders?2:0),x=d+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),w=g+1,k=x+1,A=b.generateBorders?-1:0,N=b.generateBorders||b.extendToNorthPole?-1:0,O=d+(b.generateBorders?1:0),B=d+(b.generateBorders||b.extendToSouthPole?1:0),K=w*k,Z=g*x*6,X=w*k>65536;if(X&&s==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const re=X||s==="32bit",le=new Int16Array(2*K);let ce=0;for(let we=N;we<=B;we++)for(let me=A;me<=O;me++){let Se=me/d*o.a4;me===-1&&(Se=-_l),me===d+1&&(Se=o.a4+_l);let ke=we/d*o.a4;we===-1&&(ke=b.extendToNorthPole?o.bq:-_l),we===d+1&&(ke=b.extendToSouthPole?o.br:o.a4+_l),le[ce++]=Se,le[ce++]=ke}const de=re?new Uint32Array(Z):new Uint16Array(Z);let ye=0;for(let we=0;we<x;we++)for(let me=0;me<g;me++){const Se=me+1+we*w,ke=me+(we+1)*w,ve=me+1+(we+1)*w;de[ye++]=me+we*w,de[ye++]=ke,de[ye++]=Se,de[ye++]=Se,de[ye++]=ke,de[ye++]=ve}return{vertices:le.buffer.slice(0),indices:de.buffer.slice(0),uses32bitIndices:re}}const Bu=new o.aU({fill:new o.bs(128,2),line:new o.bs(512,0),tile:new o.bs(128,32),stencil:new o.bs(128,1),circle:3});class Vu{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ds.projectionGlobe}get vertexShaderPreludeCode(){return Ds.projectionMercator.vertexSource}get subdivisionGranularity(){return Bu}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(s){this._errorMeasurement||(this._errorMeasurement=new zu(s));const d=o.X(this._errorQueryLatitudeDegrees),g=2*Math.atan(Math.exp(Math.PI-d*Math.PI*2))-.5*Math.PI,x=this._errorMeasurement.updateErrorLoop(d,g),w=F();x!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=x,this._errorMeasurementLastChangeTime=w);const k=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bt(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bu(k))}_getMeshKey(s){return`${s.granularity.toString(36)}_${s.generateBorders?"b":""}${s.extendToNorthPole?"n":""}${s.extendToSouthPole?"s":""}`}getMeshFromTileID(s,d,g,x,w){const k=(w==="stencil"?Bu.stencil:Bu.tile).getGranularityForZoomLevel(d.z);return this._getMesh(s,{granularity:k,generateBorders:g,extendToNorthPole:d.y===0&&x,extendToSouthPole:d.y===(1<<d.z)-1&&x})}_getMesh(s,d){const g=this._getMeshKey(d);if(g in this._tileMeshCache)return this._tileMeshCache[g];const x=function(w,k){const A=yh(k,"16bit"),N=o.aV.deserialize({arrayBuffer:A.vertices,length:A.vertices.byteLength/2/2}),O=o.aX.deserialize({arrayBuffer:A.indices,length:A.indices.byteLength/2/3});return new Do(w.createVertexBuffer(N,Ln.members),w.createIndexBuffer(O),o.aW.simpleSegment(0,0,N.length,O.length))}(s,d);return this._tileMeshCache[g]=x,x}recalculate(s){}hasTransition(){const s=F();let d=!1;return d=d||(s-this._errorMeasurementLastChangeTime)/1e3<.7,d=d||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,d}setErrorQueryLatitudeDegrees(s){this._errorQueryLatitudeDegrees=s}}const xh=new o.t({type:new o.D(o.u.projection.type)});class yc extends o.E{constructor(s){super(),this._transitionable=new o.x(xh,void 0),this.setProjection(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new Yn,this._verticalPerspectiveProjection=new Vu}get transitionState(){const s=this.properties.get("type");if(typeof s=="string"&&s==="mercator")return 0;if(typeof s=="string"&&s==="vertical-perspective")return 1;if(s instanceof o.bv){if(s.from==="vertical-perspective"&&s.to==="mercator")return 1-s.transition;if(s.from==="mercator"&&s.to==="vertical-perspective")return s.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(s){this._mercatorProjection.updateGPUdependent(s),this._verticalPerspectiveProjection.updateGPUdependent(s)}getMeshFromTileID(s,d,g,x,w){return this.currentProjection.getMeshFromTileID(s,d,g,x,w)}setProjection(s){this._transitionable.setValue("type",(s==null?void 0:s.type)||"mercator")}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}setErrorQueryLatitudeDegrees(s){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(s),this._mercatorProjection.setErrorQueryLatitudeDegrees(s)}}function Bx(b){const s=vh(b.worldSize,b.center.lat);return 2*Math.PI*s}function ka(b,s,d,g,x){const w=1/(1<<x),k=s/o.a4*w+g*w,A=o.bx((b/o.a4*w+d*w)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI,O=Math.cos(N),B=new Float64Array(3);return B[0]=Math.sin(A)*O,B[1]=Math.sin(N),B[2]=Math.cos(A)*O,B}function bi(b){return function(s,d){const g=Math.cos(d),x=new Float64Array(3);return x[0]=Math.sin(s)*g,x[1]=Math.sin(d),x[2]=Math.cos(s)*g,x}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function vh(b,s){return b/(2*Math.PI)/Math.cos(s*Math.PI/180)}function Vx(b){const s=Math.asin(b[1])/Math.PI*180,d=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(d>1e-6){const g=b[0]/d,x=Math.acos(b[2]/d),w=(g>0?x:-x)/Math.PI*180;return new o.V(o.W(w,-180,180),s)}return new o.V(0,s)}function wi(b){return Math.cos(b*Math.PI/180)}function Fn(b,s){const d=wi(b),g=wi(s);return o.at(g/d)}function ta(b,s){const d=b.rotate(s.bearingInRadians),g=s.zoom+Fn(s.center.lat,0),x=o.bt(1/wi(s.center.lat),1/wi(Math.min(Math.abs(s.center.lat),60)),o.bw(g,7,3,0,1)),w=360/Bx({worldSize:s.worldSize,center:{lat:s.center.lat}});return new o.V(s.center.lng-d.x*w*x,o.an(s.center.lat+d.y*w,-o.ao,o.ao))}function xc(b){const s=.5*b,d=Math.sin(s),g=Math.cos(s);return Math.log(d+g)-Math.log(g-d)}function cm(b,s,d,g){const x=b.lat+d*g;if(Math.abs(d)>1){const w=(Math.sign(b.lat+d)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,k=Math.abs(b.lat+d)*Math.PI/180,A=xc(w+g*(k-w)),N=xc(w),O=xc(k);return new o.V(b.lng+s*((A-N)/(O-N)),x)}return new o.V(b.lng+s*g,x)}class $x{constructor(s){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=s}swapBuffers(){if(!this._hadAnyChanges)return;const s=this._cachePrevious;this._cachePrevious=this._cache,this._cache=s,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(s,d,g,x){const w=`${s.z}_${s.x}_${s.y}_${x!=null&&x.terrain?"t":""}`,k=this._cache.get(w);if(k)return k;const A=this._cachePrevious.get(w);if(A)return this._cache.set(w,A),A;const N=this._boundingVolumeFactory(s,d,g,x);return this._cache.set(w,N),this._hadAnyChanges=!0,N}}class ra{constructor(s,d,g,x){this.min=g,this.max=x,this.points=s,this.planes=d}static fromAabb(s,d){const g=[];for(let x=0;x<8;x++)g.push([1&~x?s[0]:d[0],(x>>1&1)==1?d[1]:s[1],(x>>2&1)==1?d[2]:s[2]]);return new ra(g,[[-1,0,0,d[0]],[1,0,0,-s[0]],[0,-1,0,d[1]],[0,1,0,-s[1]],[0,0,-1,d[2]],[0,0,1,-s[2]]],s,d)}static fromCenterSizeAngles(s,d,g){const x=o.bA([],g[0],g[1],g[2]),w=o.bB([],[d[0],0,0],x),k=o.bB([],[0,d[1],0],x),A=o.bB([],[0,0,d[2]],x),N=[...s],O=[...s];for(let K=0;K<8;K++)for(let Z=0;Z<3;Z++){const X=s[Z]+w[Z]*(1&~K?-1:1)+k[Z]*((K>>1&1)==1?1:-1)+A[Z]*((K>>2&1)==1?1:-1);N[Z]=Math.min(N[Z],X),O[Z]=Math.max(O[Z],X)}const B=[];for(let K=0;K<8;K++){const Z=[...s];o.a$(Z,Z,o.a_([],w,1&~K?-1:1)),o.a$(Z,Z,o.a_([],k,(K>>1&1)==1?1:-1)),o.a$(Z,Z,o.a_([],A,(K>>2&1)==1?1:-1)),B.push(Z)}return new ra(B,[[...w,-o.b4(w,B[0])],[...k,-o.b4(k,B[0])],[...A,-o.b4(A,B[0])],[-w[0],-w[1],-w[2],-o.b4(w,B[7])],[-k[0],-k[1],-k[2],-o.b4(k,B[7])],[-A[0],-A[1],-A[2],-o.b4(A,B[7])]],N,O)}intersectsFrustum(s){let d=!0;const g=this.points.length,x=this.planes.length,w=s.planes.length,k=s.points.length;for(let A=0;A<w;A++){const N=s.planes[A];let O=0;for(let B=0;B<g;B++){const K=this.points[B];N[0]*K[0]+N[1]*K[1]+N[2]*K[2]+N[3]>=0&&O++}if(O===0)return 0;O<g&&(d=!1)}if(d)return 2;for(let A=0;A<x;A++){const N=this.planes[A];let O=0;for(let B=0;B<k;B++){const K=s.points[B];N[0]*K[0]+N[1]*K[1]+N[2]*K[2]+N[3]>=0&&O++}if(O===0)return 0}return 1}intersectsPlane(s){const d=this.points.length;let g=0;for(let x=0;x<d;x++){const w=this.points[x];s[0]*w[0]+s[1]*w[1]+s[2]*w[2]+s[3]>=0&&g++}return g===d?2:g===0?0:1}}function _h(b,s,d){const g=b-s;return g<0?-g:Math.max(0,g-d)}function um(b,s,d,g,x){const w=b-d;let k;return k=w<0?Math.min(-w,1+w-x):w>1?Math.min(Math.max(w-x,0),1-w):0,Math.max(k,_h(s,g,x))}class Sw{constructor(){this._boundingVolumeCache=new $x(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(s,d,g,x){const w=1<<g.z,k=1/w,A=g.x/w,N=g.y/w;let O=2;return O=Math.min(O,um(s,d,A,N,k)),O=Math.min(O,um(s,d,A+.5,-N-k,k)),O=Math.min(O,um(s,d,A+.5,2-N-k,k)),O}getWrap(s,d,g){const x=1<<d.z,w=1/x,k=d.x/x,A=_h(s.x,k,w),N=_h(s.x,k-1,w),O=_h(s.x,k+1,w),B=Math.min(A,N,O);return B===O?1:B===N?-1:0}allowVariableZoom(s,d){return kt(s,d)>4}allowWorldCopies(){return!1}getTileBoundingVolume(s,d,g,x){return this._boundingVolumeCache.getTileBoundingVolume(s,d,g,x)}_computeTileBoundingVolume(s,d,g,x){var w,k;let A=0,N=0;if(x!=null&&x.terrain){const O=new o.a1(s.z,d,s.z,s.x,s.y),B=x.terrain.getMinMaxElevation(O);A=(w=B.minElevation)!==null&&w!==void 0?w:Math.min(0,g),N=(k=B.maxElevation)!==null&&k!==void 0?k:Math.max(0,g)}if(A/=o.bD,N/=o.bD,A+=1,N+=1,s.z<=0)return ra.fromAabb([-N,-N,-N],[N,N,N]);if(s.z===1)return ra.fromAabb([s.x===0?-N:0,s.y===0?0:-N,-N],[s.x===0?0:N,s.y===0?N:0,N]);{const O=[ka(0,0,s.x,s.y,s.z),ka(o.a4,0,s.x,s.y,s.z),ka(o.a4,o.a4,s.x,s.y,s.z),ka(0,o.a4,s.x,s.y,s.z)],B=[];for(const ze of O)B.push(o.a_([],ze,N));if(N!==A)for(const ze of O)B.push(o.a_([],ze,A));s.y===0&&B.push([0,1,0]),s.y===(1<<s.z)-1&&B.push([0,-1,0]);const K=[1,1,1],Z=[-1,-1,-1];for(const ze of B)for(let Ue=0;Ue<3;Ue++)K[Ue]=Math.min(K[Ue],ze[Ue]),Z[Ue]=Math.max(Z[Ue],ze[Ue]);const X=ka(o.a4/2,o.a4/2,s.x,s.y,s.z),re=o.b3([],[0,1,0],X);o.b2(re,re);const le=o.b3([],X,re);o.b2(le,le);const ce=o.b3([],O[2],O[1]);o.b2(ce,ce);const de=o.b3([],O[0],O[3]);o.b2(de,de),B.push(o.a_([],X,N)),s.y>=(1<<s.z)/2&&B.push(o.a_([],ka(o.a4/2,0,s.x,s.y,s.z),N)),s.y<(1<<s.z)/2&&B.push(o.a_([],ka(o.a4/2,o.a4,s.x,s.y,s.z),N));const ye=Ux(X,B),we=Ux(le,B),me=[-X[0],-X[1],-X[2],ye.max],Se=[X[0],X[1],X[2],-ye.min],ke=[-le[0],-le[1],-le[2],we.max],ve=[le[0],le[1],le[2],-we.min],Ae=[...ce,0],qe=[...de,0],Fe=[];return s.y===0?Fe.push(o.bC(qe,Ae,me),o.bC(qe,Ae,Se)):Fe.push(o.bC(ke,Ae,me),o.bC(ke,Ae,Se),o.bC(ke,qe,me),o.bC(ke,qe,Se)),s.y===(1<<s.z)-1?Fe.push(o.bC(qe,Ae,me),o.bC(qe,Ae,Se)):Fe.push(o.bC(ve,Ae,me),o.bC(ve,Ae,Se),o.bC(ve,qe,me),o.bC(ve,qe,Se)),new ra(Fe,[me,Se,ke,ve,Ae,qe],K,Z)}}}function Ux(b,s){let d=1/0,g=-1/0;for(const x of s){const w=o.b4(b,x);d=Math.min(d,w),g=Math.max(g,w)}return{min:d,max:g}}class bh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,g){return this._helper.interpolatePadding(s,d,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d){this._helper.resize(s,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}setConstrainOverride(s){this._helper.setConstrainOverride(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(s){}constructor(s){this._cachedClippingPlane=o.bE(),this._projectionMatrix=o.bi(),this._globeViewProjMatrix32f=o.bh(),this._globeViewProjMatrixNoCorrection=o.bi(),this._globeViewProjMatrixNoCorrectionInverted=o.bi(),this._globeProjMatrixInverted=o.bi(),this._cameraPosition=o.by(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(d,g)=>{const x=o.an(d.lat,-o.ao,o.ao),w=o.an(+g,this.minZoom+Fn(0,x),this.maxZoom);return{center:new o.V(d.lng,x),zoom:w}},this.applyConstrain=(d,g)=>this._helper.applyConstrain(d,g),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(d,g)=>this.defaultConstrain(d,g)},s),this._coveringTilesDetailsProvider=new Sw}clone(){const s=new bh;return s.apply(this),s}apply(s,d){this._globeLatitudeErrorCorrectionRadians=d||0,this._helper.apply(s)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const s=o.by();return s[0]=this._cameraPosition[0],s[1]=this._cameraPosition[1],s[2]=this._cameraPosition[2],s}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(s){const{overscaledTileID:d,applyGlobeMatrix:g}=s,x=this._helper.getMercatorTileCoordinates(d);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:x,clippingPlane:this._cachedClippingPlane,projectionTransition:g?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(s){const d=this.pitchInRadians,g=this.cameraToCenterDistance/s,x=Math.sin(d)*g,w=Math.cos(d)*g+1,k=1/Math.sqrt(x*x+w*w)*1;let A=-x,N=w;const O=Math.sqrt(A*A+N*N);A/=O,N/=O;const B=[0,A,N];o.bF(B,B,[0,0,0],-this.bearingInRadians),o.bG(B,B,[0,0,0],-1*this.center.lat*Math.PI/180),o.bH(B,B,[0,0,0],this.center.lng*Math.PI/180);const K=1/o.b6(B);return o.a_(B,B,K),[...B,-k*K]}isLocationOccluded(s){return!this.isSurfacePointVisible(bi(s))}transformLightDirection(s){const d=this._helper._center.lng*Math.PI/180,g=this._helper._center.lat*Math.PI/180,x=Math.cos(g),w=[Math.sin(d)*x,Math.sin(g),Math.cos(d)*x],k=[w[2],0,-w[0]],A=[0,0,0];o.b3(A,k,w),o.b2(k,k),o.b2(A,A);const N=[0,0,0];return o.b2(N,[k[0]*s[0]+A[0]*s[1]+w[0]*s[2],k[1]*s[0]+A[1]*s[1]+w[1]*s[2],k[2]*s[0]+A[2]*s[1]+w[2]*s[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(s,d,g){const x=function(A,N,O){const B=1/(1<<O.z);return new o.aa(A/o.a4*B+O.x*B,N/o.a4*B+O.y*B)}(s,d,g.canonical),w=(k=x.y,[o.bx(x.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-k*Math.PI*2))-.5*Math.PI]);var k;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(s,d,g,x){const w=g.canonical,k=ka(s,d,w.x,w.y,w.z),A=1+(x?x(s,d):0)/o.bD,N=[k[0]*A,k[1]*A,k[2]*A,1];o.aG(N,N,this._globeViewProjMatrixNoCorrection);const O=this._cachedClippingPlane,B=O[0]*k[0]+O[1]*k[1]+O[2]*k[2]+O[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:B}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const s=vh(this.worldSize,this.center.lat),d=o.bj(),g=o.bj();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*s),o.bd(d,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const x=this.centerOffset;d[8]=2*-x.x/this._helper._width,d[9]=2*x.y/this._helper._height,this._projectionMatrix=o.be(d),this._globeProjMatrixInverted=o.bj(),o.aA(this._globeProjMatrixInverted,d),o.O(d,d,[0,0,-this.cameraToCenterDistance]),o.bf(d,d,this.rollInRadians),o.bg(d,d,-this.pitchInRadians),o.bf(d,d,this.bearingInRadians),o.O(d,d,[0,0,-s]);const w=o.by();w[0]=s,w[1]=s,w[2]=s,o.bg(g,d,this.center.lat*Math.PI/180),o.bI(g,g,-this.center.lng*Math.PI/180),o.Q(g,g,w),this._globeViewProjMatrixNoCorrection=g,o.bg(d,d,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bI(d,d,-this.center.lng*Math.PI/180),o.Q(d,d,w),this._globeViewProjMatrix32f=new Float32Array(d),this._globeViewProjMatrixNoCorrectionInverted=o.bj(),o.aA(this._globeViewProjMatrixNoCorrectionInverted,g);const k=o.by();this._cameraPosition=o.by(),this._cameraPosition[2]=this.cameraToCenterDistance/s,o.bF(this._cameraPosition,this._cameraPosition,k,-this.rollInRadians),o.bG(this._cameraPosition,this._cameraPosition,k,this.pitchInRadians),o.bF(this._cameraPosition,this._cameraPosition,k,-this.bearingInRadians),o.a$(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bG(this._cameraPosition,this._cameraPosition,k,-this.center.lat*Math.PI/180),o.bH(this._cameraPosition,this._cameraPosition,k,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(s);const A=o.be(this._globeViewProjMatrixNoCorrectionInverted);o.Q(A,A,[1,1,-1]),this._cachedFrustum=Oo.fromInvProjectionMatrix(A,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(s){o.w("calculateFogMatrix is not supported on globe projection.");const d=o.bj();return o.ar(d),d}getVisibleUnwrappedCoordinates(s){return[new o.bb(0,s)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(s){s&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){if(!this._globeViewProjMatrixNoCorrection)return 1;const g=bi(s);o.a_(g,g,1+d/o.bD);const x=o.bE();return o.aG(x,[g[0],g[1],g[2],1],this._globeViewProjMatrixNoCorrection),x[2]/x[3]}populateCache(s){}getBounds(){const s=.5*this.width,d=.5*this.height,g=[new o.P(0,0),new o.P(s,0),new o.P(this.width,0),new o.P(this.width,d),new o.P(this.width,this.height),new o.P(s,this.height),new o.P(0,this.height),new o.P(0,d)],x=[];for(const K of g)x.push(this.unprojectScreenPoint(K));let w=0,k=0,A=0,N=0;const O=this.center;for(const K of x){const Z=o.bJ(O.lng,K.lng),X=o.bJ(O.lat,K.lat);Z<k&&(k=Z),Z>w&&(w=Z),X<N&&(N=X),X>A&&(A=X)}const B=[O.lng+k,O.lat+N,O.lng+w,O.lat+A];return this.isSurfacePointOnScreen([0,1,0])&&(B[3]=90,B[0]=-180,B[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(B[1]=-90,B[0]=-180,B[2]=180),new Nr(B)}calculateCenterFromCameraLngLatAlt(s,d,g,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,g,x)}setLocationAtPoint(s,d){const g=bi(this.unprojectScreenPoint(d)),x=bi(s),w=o.by();o.bK(w);const k=o.by();o.bH(k,g,w,-this.center.lng*Math.PI/180),o.bG(k,k,w,this.center.lat*Math.PI/180);const A=x[0]*x[0]+x[2]*x[2],N=k[0]*k[0];if(A<N)return;const O=Math.sqrt(A-N),B=-O,K=o.bL(x[0],x[2],k[0],O),Z=o.bL(x[0],x[2],k[0],B),X=o.by();o.bH(X,x,w,-K);const re=o.bL(X[1],X[2],k[1],k[2]),le=o.by();o.bH(le,x,w,-Z);const ce=o.bL(le[1],le[2],k[1],k[2]),de=.5*Math.PI,ye=re>=-de&&re<=de,we=ce>=-de&&ce<=de;let me,Se;if(ye&&we){const qe=this.center.lng*Math.PI/180,Fe=this.center.lat*Math.PI/180;o.bM(K,qe)+o.bM(re,Fe)<o.bM(Z,qe)+o.bM(ce,Fe)?(me=K,Se=re):(me=Z,Se=ce)}else if(ye)me=K,Se=re;else{if(!we)return;me=Z,Se=ce}const ke=me/Math.PI*180,ve=Se/Math.PI*180,Ae=this.center.lat;this.setCenter(new o.V(ke,o.an(ve,-90,90))),this.setZoom(this.zoom+Fn(Ae,this.center.lat))}locationToScreenPoint(s,d){const g=bi(s);if(d){const x=d.getElevationForLngLatZoom(s,this._helper._tileZoom);o.a_(g,g,1+x/o.bD)}return this._projectSurfacePointToScreen(g)}_projectSurfacePointToScreen(s){const d=o.bE();return o.aG(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],new o.P((.5*d[0]+.5)*this.width,(.5*-d[1]+.5)*this.height)}screenPointToMercatorCoordinate(s,d){if(d){const g=d.pointCoordinate(s);if(g)return g}return o.aa.fromLngLat(this.unprojectScreenPoint(s))}screenPointToLocation(s,d){var g;return(g=this.screenPointToMercatorCoordinate(s,d))===null||g===void 0?void 0:g.toLngLat()}isPointOnMapSurface(s,d){const g=this._cameraPosition,x=this.getRayDirectionFromPixel(s);return!!this.rayPlanetIntersection(g,x)}getRayDirectionFromPixel(s){const d=o.bE();d[0]=s.x/this.width*2-1,d[1]=-1*(s.y/this.height*2-1),d[2]=1,d[3]=1,o.aG(d,d,this._globeViewProjMatrixNoCorrectionInverted),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3];const g=o.by();g[0]=d[0]-this._cameraPosition[0],g[1]=d[1]-this._cameraPosition[1],g[2]=d[2]-this._cameraPosition[2];const x=o.by();return o.b2(x,g),x}isSurfacePointVisible(s){const d=this._cachedClippingPlane;return d[0]*s[0]+d[1]*s[1]+d[2]*s[2]+d[3]>=0}isSurfacePointOnScreen(s){if(!this.isSurfacePointVisible(s))return!1;const d=o.bE();return o.aG(d,[...s,1],this._globeViewProjMatrixNoCorrection),d[0]/=d[3],d[1]/=d[3],d[2]/=d[3],d[0]>-1&&d[0]<1&&d[1]>-1&&d[1]<1&&d[2]>-1&&d[2]<1}rayPlanetIntersection(s,d){const g=o.b4(s,d),x=o.by(),w=o.by();o.a_(w,d,g),o.b1(x,s,w);const k=1-o.b4(x,x);if(k<0)return null;const A=o.b4(s,s)-1,N=-g+(g<0?1:-1)*Math.sqrt(k),O=A/N,B=N;return{tMin:Math.min(O,B),tMax:Math.max(O,B)}}unprojectScreenPoint(s){const d=this._cameraPosition,g=this.getRayDirectionFromPixel(s),x=this.rayPlanetIntersection(d,g);if(x){const B=o.by();o.a$(B,d,[g[0]*x.tMin,g[1]*x.tMin,g[2]*x.tMin]);const K=o.by();return o.b2(K,B),Vx(K)}const w=this._cachedClippingPlane,k=w[0]*g[0]+w[1]*g[1]+w[2]*g[2],A=-o.ba(w,d)/k,N=o.by();if(A>0)o.a$(N,d,[g[0]*A,g[1]*A,g[2]*A]);else{const B=o.by();o.a$(B,d,[2*g[0],2*g[1],2*g[2]]);const K=o.ba(this._cachedClippingPlane,B);o.b1(N,B,[this._cachedClippingPlane[0]*K,this._cachedClippingPlane[1]*K,this._cachedClippingPlane[2]*K])}const O=function(B){const K=o.by();return K[0]=B[0]*-B[3],K[1]=B[1]*-B[3],K[2]=B[2]*-B[3],{center:K,radius:Math.sqrt(1-B[3]*B[3])}}(w);return Vx(function(B,K,Z){const X=o.by();o.b1(X,Z,B);const re=o.by();return o.bz(re,B,X,K/o.b8(X)),re}(O.center,O.radius,N))}getMatrixForModel(s,d){const g=o.V.convert(s),x=1/o.bD,w=o.bi();return o.bI(w,w,g.lng/180*Math.PI),o.bg(w,w,-g.lat/180*Math.PI),o.O(w,w,[0,0,1+d/o.bD]),o.bg(w,w,.5*Math.PI),o.Q(w,w,[x,x,x]),w}getProjectionDataForCustomLayer(s=!0){const d=this.getProjectionData({overscaledTileID:new o.a1(0,0,0,0,0),applyGlobeMatrix:s});return d.tileMercatorCoords=[0,0,1,1],d}getFastPathSimpleProjectionMatrix(s){}}class wh{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(s){this._helper.setMinZoom(s)}setMaxZoom(s){this._helper.setMaxZoom(s)}setMinPitch(s){this._helper.setMinPitch(s)}setMaxPitch(s){this._helper.setMaxPitch(s)}setRenderWorldCopies(s){this._helper.setRenderWorldCopies(s)}setBearing(s){this._helper.setBearing(s)}setPitch(s){this._helper.setPitch(s)}setRoll(s){this._helper.setRoll(s)}setFov(s){this._helper.setFov(s)}setZoom(s){this._helper.setZoom(s)}setCenter(s){this._helper.setCenter(s)}setElevation(s){this._helper.setElevation(s)}setMinElevationForCurrentTile(s){this._helper.setMinElevationForCurrentTile(s)}setPadding(s){this._helper.setPadding(s)}interpolatePadding(s,d,g){return this._helper.interpolatePadding(s,d,g)}isPaddingEqual(s){return this._helper.isPaddingEqual(s)}resize(s,d,g=!0){this._helper.resize(s,d,g)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(s){this._helper.setMaxBounds(s)}setConstrainOverride(s){this._helper.setConstrainOverride(s)}overrideNearFarZ(s,d){this._helper.overrideNearFarZ(s,d)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(s){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),s)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(s,d){this._globeness=s,this._globeLatitudeErrorCorrectionRadians=d,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(s){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(d,g)=>this.currentTransform.defaultConstrain(d,g),this.applyConstrain=(d,g)=>this._helper.applyConstrain(d,g),this._helper=new ss({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(d,g)=>this.defaultConstrain(d,g)},s),this._globeness=1,this._mercatorTransform=new Xr,this._verticalPerspectiveTransform=new bh}clone(){const s=new wh;return s._globeness=this._globeness,s._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,s.apply(this),s}apply(s){this._helper.apply(s),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(s){const d=this._mercatorTransform.getProjectionData(s),g=this._verticalPerspectiveTransform.getProjectionData(s);return{mainMatrix:this.isGlobeRendering?g.mainMatrix:d.mainMatrix,clippingPlane:g.clippingPlane,tileMercatorCoords:g.tileMercatorCoords,projectionTransition:s.applyGlobeMatrix?this._globeness:0,fallbackMatrix:d.fallbackMatrix}}isLocationOccluded(s){return this.currentTransform.isLocationOccluded(s)}transformLightDirection(s){return this.currentTransform.transformLightDirection(s)}getPixelScale(){return o.bt(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bt(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(s,d,g){const x=this._mercatorTransform.getPitchedTextCorrection(s,d,g),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(s,d,g);return o.bt(x,w,this._globeness)}projectTileCoordinates(s,d,g,x){return this.currentTransform.projectTileCoordinates(s,d,g,x)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(s){return this.currentTransform.calculateFogMatrix(s)}getVisibleUnwrappedCoordinates(s){return this.currentTransform.getVisibleUnwrappedCoordinates(s)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(s){this._mercatorTransform.recalculateZoomAndCenter(s),this._verticalPerspectiveTransform.recalculateZoomAndCenter(s)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(s,d){return this.currentTransform.lngLatToCameraDepth(s,d)}populateCache(s){this._mercatorTransform.populateCache(s),this._verticalPerspectiveTransform.populateCache(s)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(s,d,g,x){return this._helper.calculateCenterFromCameraLngLatAlt(s,d,g,x)}setLocationAtPoint(s,d){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(s,d),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(s,d),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(s,d){return this.currentTransform.locationToScreenPoint(s,d)}screenPointToMercatorCoordinate(s,d){return this.currentTransform.screenPointToMercatorCoordinate(s,d)}screenPointToLocation(s,d){return this.currentTransform.screenPointToLocation(s,d)}isPointOnMapSurface(s,d){return this.currentTransform.isPointOnMapSurface(s,d)}getRayDirectionFromPixel(s){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(s)}getMatrixForModel(s,d){return this.currentTransform.getMatrixForModel(s,d)}getProjectionDataForCustomLayer(s=!0){const d=this._mercatorTransform.getProjectionDataForCustomLayer(s);if(!this.isGlobeRendering)return d;const g=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(s);return g.fallbackMatrix=d.mainMatrix,g}getFastPathSimpleProjectionMatrix(s){return this.currentTransform.getFastPathSimpleProjectionMatrix(s)}}class os{get useGlobeControls(){return!0}handlePanInertia(s,d){const g=ta(s,d);return Math.abs(g.lng-d.center.lng)>180&&(g.lng=d.center.lng+179.5*Math.sign(g.lng-d.center.lng)),{easingCenter:g,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(s,d){const g=s.around,x=d.screenPointToLocation(g);s.bearingDelta&&d.setBearing(d.bearing+s.bearingDelta),s.pitchDelta&&d.setPitch(d.pitch+s.pitchDelta),s.rollDelta&&d.setRoll(d.roll+s.rollDelta);const w=d.zoom;s.zoomDelta&&d.setZoom(d.zoom+s.zoomDelta);const k=d.zoom-w;if(k===0)return;const A=o.bJ(d.center.lng,x.lng),N=A/(Math.abs(A/180)+1),O=o.bJ(d.center.lat,x.lat),B=d.getRayDirectionFromPixel(g),K=d.cameraPosition,Z=-1*o.b4(K,B),X=o.by();o.a$(X,K,[B[0]*Z,B[1]*Z,B[2]*Z]);const re=o.b6(X)-1,le=Math.exp(.5*-Math.max(re-.3,0)),ce=vh(d.worldSize,d.center.lat)/Math.min(d.width,d.height),de=o.bw(ce,.9,.5,1,.25),ye=(1-o.aq(-k))*Math.min(le,de),we=d.center.lat,me=d.zoom,Se=new o.V(d.center.lng+N*ye,o.an(d.center.lat+O*ye,-o.ao,o.ao));d.setLocationAtPoint(x,g);const ke=d.center,ve=o.bw(Math.abs(A),45,85,0,1),Ae=o.bw(ce,.75,.35,0,1),qe=Math.pow(Math.max(ve,Ae),.25),Fe=o.bJ(ke.lng,Se.lng),ze=o.bJ(ke.lat,Se.lat);d.setCenter(new o.V(ke.lng+Fe*qe,ke.lat+ze*qe).wrap()),d.setZoom(me+Fn(we,d.center.lat))}handleMapControlsPan(s,d,g){if(!s.panDelta)return;const x=d.center.lat,w=d.zoom;d.setCenter(ta(s.panDelta,d).wrap()),d.setZoom(w+Fn(x,d.center.lat))}cameraForBoxAndBearing(s,d,g,x,w){const k=Fu(s,d,g,x,w),A=d.left/w.width*2-1,N=(w.width-d.right)/w.width*2-1,O=d.top/w.height*-2+1,B=(w.height-d.bottom)/w.height*-2+1,K=o.bJ(g.getWest(),g.getEast())<0,Z=K?g.getEast():g.getWest(),X=K?g.getWest():g.getEast(),re=Math.max(g.getNorth(),g.getSouth()),le=Math.min(g.getNorth(),g.getSouth()),ce=Z+.5*o.bJ(Z,X),de=re+.5*o.bJ(re,le),ye=w.clone();ye.setCenter(k.center),ye.setBearing(k.bearing),ye.setPitch(0),ye.setRoll(0),ye.setZoom(k.zoom);const we=ye.modelViewProjectionMatrix,me=[bi(g.getNorthWest()),bi(g.getNorthEast()),bi(g.getSouthWest()),bi(g.getSouthEast()),bi(new o.V(X,de)),bi(new o.V(Z,de)),bi(new o.V(ce,re)),bi(new o.V(ce,le))],Se=bi(k.center);let ke=Number.POSITIVE_INFINITY;for(const ve of me)A<0&&(ke=os.getLesserNonNegativeNonNull(ke,os.solveVectorScale(ve,Se,we,"x",A))),N>0&&(ke=os.getLesserNonNegativeNonNull(ke,os.solveVectorScale(ve,Se,we,"x",N))),O>0&&(ke=os.getLesserNonNegativeNonNull(ke,os.solveVectorScale(ve,Se,we,"y",O))),B<0&&(ke=os.getLesserNonNegativeNonNull(ke,os.solveVectorScale(ve,Se,we,"y",B)));if(Number.isFinite(ke)&&ke!==0)return k.zoom=ye.zoom+o.at(ke),k;fc()}handleJumpToCenterZoom(s,d){const g=s.center.lat,x=s.applyConstrain(d.center?o.V.convert(d.center):s.center,s.zoom).center;s.setCenter(x.wrap());const w=d.zoom!==void 0?+d.zoom:s.zoom+Fn(g,x.lat);s.zoom!==w&&s.setZoom(w)}handleEaseTo(s,d){const g=s.zoom,x=s.center,w=s.padding,k={roll:s.roll,pitch:s.pitch,bearing:s.bearing},A={roll:d.roll===void 0?s.roll:d.roll,pitch:d.pitch===void 0?s.pitch:d.pitch,bearing:d.bearing===void 0?s.bearing:d.bearing},N=d.zoom!==void 0,O=!s.isPaddingEqual(d.padding);let B=!1;const K=d.center?o.V.convert(d.center):x,Z=s.applyConstrain(K,g).center;gh(s,Z);const X=s.clone();X.setCenter(Z),X.setZoom(N?+d.zoom:g+Fn(x.lat,K.lat)),X.setBearing(d.bearing);const re=new o.P(o.an(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),o.an(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));X.setLocationAtPoint(Z,re);const le=(d.offset&&d.offsetAsPoint.mag())>0?X.center:Z,ce=N?+d.zoom:g+Fn(x.lat,le.lat),de=g+Fn(x.lat,0),ye=ce+Fn(le.lat,0),we=o.bJ(x.lng,le.lng),me=o.bJ(x.lat,le.lat),Se=o.aq(ye-de);return B=ce!==g,{easeFunc:ke=>{if(o.bn(k,A)||Lo({startEulerAngles:k,endEulerAngles:A,tr:s,k:ke,useSlerp:k.roll!=A.roll}),O&&s.interpolatePadding(w,d.padding,ke),d.around)o.w("Easing around a point is not supported under globe projection."),s.setLocationAtPoint(d.around,d.aroundPoint);else{const ve=ye>de?Math.min(2,Se):Math.max(.5,Se),Ae=Math.pow(ve,1-ke),qe=cm(x,we,me,ke*Ae);s.setCenter(qe.wrap())}if(B){const ve=o.G.number(de,ye,ke)+Fn(0,s.center.lat);s.setZoom(ve)}},isZooming:B,elevationCenter:le}}handleFlyTo(s,d){const g=d.zoom!==void 0,x=s.center,w=s.zoom,k=s.padding,A=!s.isPaddingEqual(d.padding),N=s.applyConstrain(o.V.convert(d.center||d.locationAtOffset),w).center,O=g?+d.zoom:s.zoom+Fn(s.center.lat,N.lat),B=s.clone();B.setCenter(N),B.setZoom(O),B.setBearing(d.bearing);const K=new o.P(o.an(s.centerPoint.x+d.offsetAsPoint.x,0,s.width),o.an(s.centerPoint.y+d.offsetAsPoint.y,0,s.height));B.setLocationAtPoint(N,K);const Z=B.center;gh(s,Z);const X=function(me,Se,ke){const ve=bi(Se),Ae=bi(ke),qe=o.b4(ve,Ae),Fe=Math.acos(qe),ze=Bx(me);return Fe/(2*Math.PI)*ze}(s,x,Z),re=w+Fn(x.lat,0),le=O+Fn(Z.lat,0),ce=o.aq(le-re);let de;if(typeof d.minZoom=="number"){const me=+d.minZoom+Fn(Z.lat,0),Se=Math.min(me,re,le)+Fn(0,Z.lat),ke=s.applyConstrain(Z,Se).zoom+Fn(Z.lat,0);de=o.aq(ke-re)}const ye=o.bJ(x.lng,Z.lng),we=o.bJ(x.lat,Z.lat);return{easeFunc:(me,Se,ke,ve)=>{const Ae=cm(x,ye,we,ke);A&&s.interpolatePadding(k,d.padding,me);const qe=me===1?Z:Ae;s.setCenter(qe.wrap());const Fe=re+o.at(Se);s.setZoom(me===1?O:Fe+Fn(0,qe.lat))},scaleOfZoom:ce,targetCenter:Z,scaleOfMinZoom:de,pixelPathLength:X}}static solveVectorScale(s,d,g,x,w){const k=x==="x"?[g[0],g[4],g[8],g[12]]:[g[1],g[5],g[9],g[13]],A=[g[3],g[7],g[11],g[15]],N=s[0]*k[0]+s[1]*k[1]+s[2]*k[2],O=s[0]*A[0]+s[1]*A[1]+s[2]*A[2],B=d[0]*k[0]+d[1]*k[1]+d[2]*k[2],K=d[0]*A[0]+d[1]*A[1]+d[2]*A[2];return B+w*O===N+w*K||A[3]*(N-B)+k[3]*(K-O)+N*K==B*O?null:(B+k[3]-w*K-w*A[3])/(B-N-w*K+w*O)}static getLesserNonNegativeNonNull(s,d){return d!==null&&d>=0&&d<s?d:s}}class Sh{constructor(s){this._globe=s,this._mercatorCameraHelper=new as,this._verticalPerspectiveCameraHelper=new os}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(s,d){return this.currentHelper.handlePanInertia(s,d)}handleMapControlsRollPitchBearingZoom(s,d){return this.currentHelper.handleMapControlsRollPitchBearingZoom(s,d)}handleMapControlsPan(s,d,g){this.currentHelper.handleMapControlsPan(s,d,g)}cameraForBoxAndBearing(s,d,g,x,w){return this.currentHelper.cameraForBoxAndBearing(s,d,g,x,w)}handleJumpToCenterZoom(s,d){this.currentHelper.handleJumpToCenterZoom(s,d)}handleEaseTo(s,d){return this.currentHelper.handleEaseTo(s,d)}handleFlyTo(s,d){return this.currentHelper.handleFlyTo(s,d)}}const bl=(b,s)=>o.B(b,s&&s.filter(d=>d.identifier!=="source.canvas")),dm=o.bN();class $u extends o.E{constructor(s,d={}){var g,x;super(),this._rtlPluginLoaded=()=>{for(const k in this.tileManagers){const A=this.tileManagers[k].getSource().type;A!=="vector"&&A!=="geojson"||this.tileManagers[k].reload()}},this.map=s,this.dispatcher=new Rn(Zn(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(k,A)=>this.getGlyphs(k,A)),this.dispatcher.registerMessageHandler("GI",(k,A)=>this.getImages(k,A)),this.dispatcher.registerMessageHandler("GDA",(k,A)=>this.getDashes(k,A)),this.imageManager=new Oe,this.imageManager.setEventedParent(this);const w=((g=s._container)===null||g===void 0?void 0:g.lang)||typeof document<"u"&&((x=document.documentElement)===null||x===void 0?void 0:x.lang)||void 0;this.glyphManager=new Ve(s._requestManager,d.localIdeographFontFamily,w),this.lineAtlas=new Lt(256,512),this.crossTileSymbolIndex=new vl,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bO()),Kn().on(ii,this._rtlPluginLoaded),this.on("data",k=>{if(k.dataType!=="source"||k.sourceDataType!=="metadata")return;const A=this.tileManagers[k.sourceId];if(!A)return;const N=A.getSource();if(N&&N.vectorLayerIds)for(const O in this._layers){const B=this._layers[O];B.source===N.id&&this._validateLayer(B)}})}_setInitialValues(){var s;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bP,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((s=this.crossTileSymbolIndex)===null||s===void 0?void 0:s.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(s,d){var g,x,w;this._checkLoaded();const k=d===null?(w=(x=(g=this.stylesheet.state)===null||g===void 0?void 0:g[s])===null||x===void 0?void 0:x.default)!==null&&w!==void 0?w:null:d;if(o.bQ(k,this._globalState[s]))return this;this._globalState[s]=k,this._applyGlobalStateChanges([s])}getGlobalState(){return this._globalState}setGlobalState(s){this._checkLoaded();const d=[];for(const g in s)!o.bQ(this._globalState[g],s[g].default)&&(d.push(g),this._globalState[g]=s[g].default);this._applyGlobalStateChanges(d)}_applyGlobalStateChanges(s){if(s.length===0)return;const d=new Set,g={};for(const x of s){g[x]=this._globalState[x];for(const w in this._layers){const k=this._layers[w],A=k.getLayoutAffectingGlobalStateRefs(),N=k.getPaintAffectingGlobalStateRefs();if(A.has(x)&&d.add(k.source),N.has(x))for(const{name:O,value:B}of N.get(x))this._updatePaintProperty(k,O,B)}}this.dispatcher.broadcast("UGS",g);for(const x in this.tileManagers)d.has(x)&&(this._reloadSource(x),this._changed=!0)}loadURL(s,d={},g){this.fire(new o.l("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const x=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;o.j(x,this._loadStyleRequest).then(k=>{this._loadStyleRequest=null,this._load(k.data,d,g)}).catch(k=>{this._loadStyleRequest=null,k&&!w.signal.aborted&&this.fire(new o.k(k))})}loadJSON(s,d={},g){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,I.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,g)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(dm,{validate:!1})}_load(s,d,g){var x,w;let k=d.transformStyle?d.transformStyle(g,s):s;if(!d.validate||!bl(this,o.C(k))){k=Object.assign({},k),this._loaded=!0,this.stylesheet=k;for(const A in k.sources)this.addSource(A,k.sources[A],{validate:!1});k.sprite?this._loadSprite(k.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(k.glyphs),this._createLayers(),this.light=new ft(this.stylesheet.light),this._setProjectionInternal(((x=this.stylesheet.projection)===null||x===void 0?void 0:x.type)||"mercator"),this.sky=new wt(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var s,d,g;const x=o.bR(this.stylesheet.layers);this.setGlobalState((s=this.stylesheet.state)!==null&&s!==void 0?s:null),this.dispatcher.broadcast("SL",x),this._order=x.map(w=>w.id),this._layers={},this._serializedLayers=null;for(const w of x){const k=o.bS(w,this._globalState);if(k.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=k,o.bT(k)&&this.tileManagers[k.source]){const A=(g=(d=w.paint)===null||d===void 0?void 0:d["raster-fade-duration"])!==null&&g!==void 0?g:k.paint.get("raster-fade-duration");this.tileManagers[k.source].setRasterFadeDuration(A)}}}_loadSprite(s,d=!1,g=void 0){let x;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,k,A,N){return o._(this,void 0,void 0,function*(){const O=Re(w),B=A>1?"@2x":"",K={},Z={};for(const{id:X,url:re}of O){const le=k.transformRequest(Me(re,B,".json"),"SpriteJSON");K[X]=o.j(le,N);const ce=k.transformRequest(Me(re,B,".png"),"SpriteImage");Z[X]=pe.getImage(ce,N)}return yield Promise.all([...Object.values(K),...Object.values(Z)]),function(X,re){return o._(this,void 0,void 0,function*(){const le={};for(const ce in X){le[ce]={};const de=I.getImageCanvasContext((yield re[ce]).data),ye=(yield X[ce]).data;for(const we in ye){const{width:me,height:Se,x:ke,y:ve,sdf:Ae,pixelRatio:qe,stretchX:Fe,stretchY:ze,content:Ue,textFitWidth:ut,textFitHeight:st}=ye[we];le[ce][we]={data:null,pixelRatio:qe,sdf:Ae,stretchX:Fe,stretchY:ze,content:Ue,textFitWidth:ut,textFitHeight:st,spriteData:{width:me,height:Se,x:ke,y:ve,context:de}}}}return le})}(K,Z)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(const k in w){this._spritesImagesIds[k]=[];const A=this._spritesImagesIds[k]?this._spritesImagesIds[k].filter(N=>!(N in w)):[];for(const N of A)this.imageManager.removeImage(N),this._changedImages[N]=!0;for(const N in w[k]){const O=k==="default"?N:`${k}:${N}`;this._spritesImagesIds[k].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,w[k][N],!1):this.imageManager.addImage(O,w[k][N]),d&&(this._changedImages[O]=!0)}}}).catch(w=>{this._spriteRequest=null,x=w,this.fire(new o.k(x))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),g&&g(x)})}_unloadSprite(){for(const s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(s){const d=this.tileManagers[s.source];if(!d)return;const g=s.sourceLayer;if(!g)return;const x=d.getSource();(x.type==="geojson"||x.vectorLayerIds&&x.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.k(new Error(`Source layer "${g}" does not exist on source "${x.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const s in this.tileManagers)if(!this.tileManagers[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){const g=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?o.bU(g):g);const x=[];for(const w of s)if(g[w]){const k=d?o.bU(g[w]):g[w];x.push(k)}return x}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};const d=Object.keys(this._layers);for(const g of d){const x=this._layers[g];x.type!=="custom"&&(s[g]=x.serialize())}return s}hasTransitions(){var s,d,g;if(!((s=this.light)===null||s===void 0)&&s.hasTransition()||!((d=this.sky)===null||d===void 0)&&d.hasTransition()||!((g=this.projection)===null||g===void 0)&&g.hasTransition())return!0;for(const x in this.tileManagers)if(this.tileManagers[x].hasTransition())return!0;for(const x in this._layers)if(this._layers[x].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;const d=this._changed;if(d){const x=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(x.length||w.length)&&this._updateWorkerLayers(x,w);for(const k in this._updatedSources){const A=this._updatedSources[k];if(A==="reload")this._reloadSource(k);else{if(A!=="clear")throw new Error(`Invalid action ${A}`);this._clearSource(k)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}const g={};for(const x in this.tileManagers){const w=this.tileManagers[x];g[x]=w.used,w.used=!1}for(const x of this._order){const w=this._layers[x];w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)&&w.source&&(this.tileManagers[w.source].used=!0)}for(const x in g){const w=this.tileManagers[x];!!g[x]!=!!w.used&&w.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:x}))}this.light.recalculate(s),this.sky.recalculate(s),this.projection.recalculate(s),this.z=s.zoom,d&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const s=Object.keys(this._changedImages);if(s.length){for(const d in this.tileManagers)this.tileManagers[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const s in this.tileManagers)this.tileManagers[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var g;this._checkLoaded();const x=this.serialize();if(s=d.transformStyle?d.transformStyle(x,s):s,((g=d.validate)===null||g===void 0||g)&&bl(this,o.C(s)))return!1;(s=o.bU(s)).layers=o.bR(s.layers);const w=o.bV(x,s),k=this._getOperationsToPerform(w);if(k.unimplemented.length>0)throw new Error(`Unimplemented: ${k.unimplemented.join(", ")}.`);if(k.operations.length===0)return!1;for(const A of k.operations)A();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){const d=[],g=[];for(const x of s)switch(x.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,x.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,x.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,x.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,x.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,x.args));break;case"addSource":d.push(()=>this.addSource.apply(this,x.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,x.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,x.args));break;case"setLight":d.push(()=>this.setLight.apply(this,x.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,x.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,x.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,x.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,x.args));break;case"setSky":d.push(()=>this.setSky.apply(this,x.args));break;case"setProjection":this.setProjection.apply(this,x.args);break;case"setGlobalState":d.push(()=>this.setGlobalState.apply(this,x.args));break;case"setTransition":d.push(()=>{});break;default:g.push(x.command)}return{operations:d,unimplemented:g}}addImage(s,d){if(this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new o.k(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,g={}){if(this._checkLoaded(),this.tileManagers[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.C.source,`sources.${s}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const x=this.tileManagers[s]=new Yt(s,d,this.dispatcher);x.style=this,x.setEventedParent(this,()=>({isSourceLoaded:x.loaded(),source:x.serialize(),sourceId:s})),x.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.tileManagers[s]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===s)return this.fire(new o.k(new Error(`Source "${s}" cannot be removed while layer "${g}" is using it.`)));const d=this.tileManagers[s];delete this.tileManagers[s],delete this._updatedSources[s],d.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.tileManagers[s]===void 0)throw new Error(`There is no source with this ID=${s}`);const g=this.tileManagers[s].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(s){return this.tileManagers[s]&&this.tileManagers[s].getSource()}addLayer(s,d,g={}){this._checkLoaded();const x=s.id;if(this.getLayer(x))return void this.fire(new o.k(new Error(`Layer "${x}" already exists on this map.`)));let w;if(s.type==="custom"){if(bl(this,o.bW(s)))return;w=o.bS(s,this._globalState)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(x,s.source),s=o.bU(s),s=o.e(s,{source:x})),this._validate(o.C.layer,`layers.${x}`,s,{arrayIndex:-1},g))return;w=o.bS(s,this._globalState),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}})}const k=d?this._order.indexOf(d):this._order.length;if(d&&k===-1)this.fire(new o.k(new Error(`Cannot add layer "${x}" before non-existing layer "${d}".`)));else{if(this._order.splice(k,0,x),this._layerOrderChanged=!0,this._layers[x]=w,this._removedLayers[x]&&w.source&&w.type!=="custom"){const A=this._removedLayers[x];delete this._removedLayers[x],A.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.tileManagers[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new o.k(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;const g=this._order.indexOf(s);this._order.splice(g,1);const x=d?this._order.indexOf(d):this._order.length;d&&x===-1?this.fire(new o.k(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(x,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();const d=this._layers[s];if(!d)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);const g=this._order.indexOf(s);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,g){this._checkLoaded();const x=this.getLayer(s);x?x.minzoom===d&&x.maxzoom===g||(d!=null&&(x.minzoom=d),g!=null&&(x.maxzoom=g),this._updateLayer(x)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,g={}){this._checkLoaded();const x=this.getLayer(s);if(x){if(!o.bQ(x.filter,d))return d==null?(x.setFilter(void 0),void this._updateLayer(x)):void(this._validate(o.C.filter,`layers.${x.id}.filter`,d,null,g)||(x.setFilter(o.bU(d)),this._updateLayer(x)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return o.bU(this.getLayer(s).filter)}setLayoutProperty(s,d,g,x={}){this._checkLoaded();const w=this.getLayer(s);w?o.bQ(w.getLayoutProperty(d),g)||(w.setLayoutProperty(d,g,x),this._updateLayer(w)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){const g=this.getLayer(s);if(g)return g.getLayoutProperty(d);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,g,x={}){this._checkLoaded();const w=this.getLayer(s);w?o.bQ(w.getPaintProperty(d),g)||this._updatePaintProperty(w,d,g,x):this.fire(new o.k(new Error(`Cannot style non-existing layer "${s}".`)))}_updatePaintProperty(s,d,g,x={}){s.setPaintProperty(d,g,x)&&this._updateLayer(s),o.bT(s)&&d==="raster-fade-duration"&&this.tileManagers[s.source].setRasterFadeDuration(g),this._changed=!0,this._updatedPaintProps[s.id]=!0,this._serializedLayers=null}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();const g=s.source,x=s.sourceLayer,w=this.tileManagers[g];if(w===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));const k=w.getSource().type;k==="geojson"&&x?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||x?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(x,s.id,d)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();const g=s.source,x=this.tileManagers[g];if(x===void 0)return void this.fire(new o.k(new Error(`The source '${g}' does not exist in the map's style.`)));const w=x.getSource().type,k=w==="vector"?s.sourceLayer:void 0;w!=="vector"||k?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):x.removeFeatureState(k,s.id,d):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();const d=s.source,g=s.sourceLayer,x=this.tileManagers[d];if(x!==void 0)return x.getSource().type!=="vector"||g?(s.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),x.getFeatureState(g,s.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const s=o.bX(this.tileManagers,w=>w.serialize()),d=this._serializeByIds(this._order,!0),g=this.map.getTerrain()||void 0,x=this.stylesheet;return o.bY({version:x.version,name:x.name,metadata:x.metadata,light:x.light,sky:x.sky,center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch,sprite:x.sprite,glyphs:x.glyphs,transition:x.transition,projection:x.projection,sources:s,layers:d,terrain:g},w=>w!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.tileManagers[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.tileManagers[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){const d=k=>this._layers[k].type==="fill-extrusion",g={},x=[];for(let k=this._order.length-1;k>=0;k--){const A=this._order[k];if(d(A)){g[A]=k;for(const N of s){const O=N[A];if(O)for(const B of O)x.push(B)}}}x.sort((k,A)=>A.intersectionZ-k.intersectionZ);const w=[];for(let k=this._order.length-1;k>=0;k--){const A=this._order[k];if(d(A))for(let N=x.length-1;N>=0;N--){const O=x[N].feature;if(g[O.layer.id]<k)break;w.push(O),x.pop()}else for(const N of s){const O=N[A];if(O)for(const B of O)w.push(B.feature)}}return w}queryRenderedFeatures(s,d,g){d&&d.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",d.filter,null,d);const x={};if(d&&d.layers){if(!(Array.isArray(d.layers)||d.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const O of d.layers){const B=this._layers[O];if(!B)return this.fire(new o.k(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];x[B.source]=!0}}const w=[];d.availableImages=this._availableImages;const k=this._serializedAllLayers(),A=d.layers instanceof Set?d.layers:Array.isArray(d.layers)?new Set(d.layers):null,N=Object.assign(Object.assign({},d),{layers:A,globalState:this._globalState});for(const O in this.tileManagers)d.layers&&!x[O]||w.push(Ni(this.tileManagers[O],this._layers,k,s,N,g,this.map.terrain?(B,K,Z)=>this.map.terrain.getElevation(B,K,Z):void 0));return this.placement&&w.push(function(O,B,K,Z,X,re,le){const ce={},de=re.queryRenderedSymbols(Z),ye=[];for(const we of Object.keys(de).map(Number))ye.push(le[we]);ye.sort(Cr);for(const we of ye){const me=we.featureIndex.lookupSymbolFeatures(de[we.bucketInstanceId],B,we.bucketIndex,we.sourceLayerIndex,{filterSpec:X.filter,globalState:X.globalState},X.layers,X.availableImages,O);for(const Se in me){const ke=ce[Se]=ce[Se]||[],ve=me[Se];ve.sort((Ae,qe)=>{const Fe=we.featureSortOrder;if(Fe){const ze=Fe.indexOf(Ae.featureIndex);return Fe.indexOf(qe.featureIndex)-ze}return qe.featureIndex-Ae.featureIndex});for(const Ae of ve)ke.push(Ae)}}return function(we,me,Se){for(const ke in we)for(const ve of we[ke])ni(ve,Se[me[ke].source]);return we}(ce,O,K)}(this._layers,k,this.tileManagers,s,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,d){d!=null&&d.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.tileManagers[s];return g?function(x,w){const k=x.getRenderableIds().map(O=>x.getTileByID(O)),A=[],N={};for(let O=0;O<k.length;O++){const B=k[O],K=B.tileID.canonical.key;N[K]||(N[K]=!0,B.querySourceFeatures(A,w))}return A}(g,d?Object.assign(Object.assign({},d),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();const g=this.light.getLight();let x=!1;for(const k in s)if(!o.bQ(s[k],g[k])){x=!0;break}if(!x)return;const w={now:F(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(w)}getProjection(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.projection}setProjection(s){if(this._checkLoaded(),this.projection){if(this.projection.name===s.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=s,this._setProjectionInternal(s.type)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){this._checkLoaded();const g=this.getSky();let x=!1;if(!s&&!g)return;if(s&&!g)x=!0;else if(!s&&g)x=!0;else for(const k in s)if(!o.bQ(s[k],g[k])){x=!0;break}if(!x)return;const w={now:F(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(w)}_setProjectionInternal(s){const d=function(g,x){const w={constrainOverride:x};if(Array.isArray(g)){const k=new yc({type:g});return{projection:k,transform:new wh(w),cameraHelper:new Sh(k)}}switch(g){case"mercator":return{projection:new Yn,transform:new Xr(w),cameraHelper:new as};case"globe":{const k=new yc({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:k,transform:new wh(w),cameraHelper:new Sh(k)}}case"vertical-perspective":return{projection:new Vu,transform:new bh(w),cameraHelper:new os};default:return o.w(`Unknown projection name: ${g}. Falling back to mercator projection.`),{projection:new Yn,transform:new Xr(w),cameraHelper:new as}}}(s,this.map.transformConstrain);this.projection=d.projection,this.map.migrateProjection(d.transform,d.cameraHelper);for(const g in this.tileManagers)this.tileManagers[g].reload()}_validate(s,d,g,x,w={}){return(!w||w.validate!==!1)&&bl(this,s.call(o.C,o.e({key:d,style:this.serialize(),value:g,styleSpec:o.u},x)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Kn().off(ii,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.tileManagers){const g=this.tileManagers[d];g.setEventedParent(null),g.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.tileManagers[s].clearTiles()}_reloadSource(s){this.tileManagers[s].resume(),this.tileManagers[s].reload()}_updateSources(s){for(const d in this.tileManagers)this.tileManagers[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(const s in this.tileManagers)this._reloadSource(s)}_updatePlacement(s,d,g,x,w=!1){let k=!1,A=!1;const N={};for(const O of this._order){const B=this._layers[O];if(B.type!=="symbol")continue;if(!N[B.source]){const Z=this.tileManagers[B.source];N[B.source]=Z.getRenderableIds(!0).map(X=>Z.getTileByID(X)).sort((X,re)=>re.tileID.overscaledZ-X.tileID.overscaledZ||(X.tileID.isLessThan(re.tileID)?-1:1))}const K=this.crossTileSymbolIndex.addLayer(B,N[B.source],s.center.lng);k=k||K}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(F(),s.zoom))&&(this.pauseablePlacement=new Lx(s,this.map.terrain,this._order,w,d,g,x,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(F()),A=!0),k&&this.pauseablePlacement.placement.setStale()),A||k)for(const O of this._order){const B=this._layers[O];B.type==="symbol"&&this.placement.updateLayerOpacities(B,N[B.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(F())}_releaseSymbolFadeTiles(){for(const s in this.tileManagers)this.tileManagers[s].releaseSymbolFadeTiles()}getImages(s,d){return o._(this,void 0,void 0,function*(){const g=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const x=this.tileManagers[d.source];return x&&x.setDependencies(d.tileID.key,d.type,d.icons),g})}getGlyphs(s,d){return o._(this,void 0,void 0,function*(){const g=yield this.glyphManager.getGlyphs(d.stacks),x=this.tileManagers[d.source];return x&&x.setDependencies(d.tileID.key,d.type,[""]),g})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(o.C.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}getDashes(s,d){return o._(this,void 0,void 0,function*(){const g={};for(const[x,w]of Object.entries(d.dashes))g[x]=this.lineAtlas.getDash(w.dasharray,w.round);return g})}addSprite(s,d,g={},x){this._checkLoaded();const w=[{id:s,url:d}],k=[...Re(this.stylesheet.sprite),...w];this._validate(o.C.sprite,"sprite",k,null,g)||(this.stylesheet.sprite=k,this._loadSprite(w,!0,x))}removeSprite(s){this._checkLoaded();const d=Re(this.stylesheet.sprite);if(d.find(g=>g.id===s)){if(this._spritesImagesIds[s])for(const g of this._spritesImagesIds[s])this.imageManager.removeImage(g),this._changedImages[g]=!0;d.splice(d.findIndex(g=>g.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return Re(this.stylesheet.sprite)}setSprite(s,d={},g){this._checkLoaded(),s&&this._validate(o.C.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,g):(this._unloadSprite(),g&&g(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const s in this.tileManagers){const d=this.tileManagers[s];if(d.setEventedParent(null),d._tiles){for(const g in d._tiles)d._tiles[g].unloadVectorData();d._tiles={}}d._cache.reset(),d.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const s in this._layers){const d=this._layers[s];d.setEventedParent(null),d.onRemove&&d.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Ca=o.aT([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tw{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,g,x,w,k,A,N,O){this.context=s;let B=this.boundPaintVertexBuffers.length!==x.length;for(let K=0;!B&&K<x.length;K++)this.boundPaintVertexBuffers[K]!==x[K]&&(B=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==g||B||this.boundIndexBuffer!==w||this.boundVertexOffset!==k||this.boundDynamicVertexBuffer!==A||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==O?this.freshBind(d,g,x,w,k,A,N,O):(s.bindVertexArray.set(this.vao),A&&A.bind(),w&&w.dynamicDraw&&w.bind(),N&&N.bind(),O&&O.bind())}freshBind(s,d,g,x,w,k,A,N){const O=s.numAttributes,B=this.context,K=B.gl;this.vao&&this.destroy(),this.vao=B.createVertexArray(),B.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=A,this.boundDynamicVertexBuffer3=N,d.enableAttributes(K,s);for(const Z of g)Z.enableAttributes(K,s);k&&k.enableAttributes(K,s),A&&A.enableAttributes(K,s),N&&N.enableAttributes(K,s),d.bind(),d.setVertexAttribPointers(K,s,w);for(const Z of g)Z.bind(),Z.setVertexAttribPointers(K,s,w);k&&(k.bind(),k.setVertexAttribPointers(K,s,w)),x&&x.bind(),A&&(A.bind(),A.setVertexAttribPointers(K,s,w)),N&&(N.bind(),N.setVertexAttribPointers(K,s,w)),B.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const hm=(b,s,d,g,x)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:s,u_fog_color:d?d.properties.get("fog-color"):o.bo.white,u_fog_ground_blend:d?d.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:x?0:d?d.calculateFogBlendOpacity(g):0,u_horizon_color:d?d.properties.get("horizon-color"):o.bo.white,u_horizon_fog_blend:d?d.properties.get("horizon-fog-blend"):1,u_is_globe_mode:x?1:0}),Uu={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Fo(b){const s=[];for(let d=0;d<b.length;d++){if(b[d]===null)continue;const g=b[d].split(" ");s.push(g.pop())}return s}class kw{constructor(s,d,g,x,w,k,A,N,O=[]){const B=s.gl;this.program=B.createProgram();const K=Fo(d.staticAttributes),Z=g?g.getBinderAttributes():[],X=K.concat(Z),re=Ds.prelude.staticUniforms?Fo(Ds.prelude.staticUniforms):[],le=A.staticUniforms?Fo(A.staticUniforms):[],ce=d.staticUniforms?Fo(d.staticUniforms):[],de=g?g.getBinderUniforms():[],ye=re.concat(le).concat(ce).concat(de),we=[];for(const Fe of ye)we.indexOf(Fe)<0&&we.push(Fe);const me=g?g.defines():[];ea(B)&&me.unshift("#version 300 es"),w&&me.push("#define OVERDRAW_INSPECTOR;"),k&&me.push("#define TERRAIN3D;"),N&&me.push(N),O&&me.push(...O);let Se=me.concat(Ds.prelude.fragmentSource,A.fragmentSource,d.fragmentSource).join(`
`),ke=me.concat(Ds.prelude.vertexSource,A.vertexSource,d.vertexSource).join(`
`);ea(B)||(Se=function(Fe){return Fe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(Se),ke=function(Fe){return Fe.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ke));const ve=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(ve,Se),B.compileShader(ve),!B.getShaderParameter(ve,B.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${B.getShaderInfoLog(ve)}`);B.attachShader(this.program,ve);const Ae=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);if(B.shaderSource(Ae,ke),B.compileShader(Ae),!B.getShaderParameter(Ae,B.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${B.getShaderInfoLog(Ae)}`);B.attachShader(this.program,Ae),this.attributes={};const qe={};this.numAttributes=X.length;for(let Fe=0;Fe<this.numAttributes;Fe++)X[Fe]&&(B.bindAttribLocation(this.program,Fe,X[Fe]),this.attributes[X[Fe]]=Fe);if(B.linkProgram(this.program),!B.getProgramParameter(this.program,B.LINK_STATUS))throw new Error(`Program failed to link: ${B.getProgramInfoLog(this.program)}`);B.deleteShader(Ae),B.deleteShader(ve);for(let Fe=0;Fe<we.length;Fe++){const ze=we[Fe];if(ze&&!qe[ze]){const Ue=B.getUniformLocation(this.program,ze);Ue&&(qe[ze]=Ue)}}this.fixedUniforms=x(s,qe),this.terrainUniforms=((Fe,ze)=>({u_depth:new o.bZ(Fe,ze.u_depth),u_terrain:new o.bZ(Fe,ze.u_terrain),u_terrain_dim:new o.bp(Fe,ze.u_terrain_dim),u_terrain_matrix:new o.b$(Fe,ze.u_terrain_matrix),u_terrain_unpack:new o.c0(Fe,ze.u_terrain_unpack),u_terrain_exaggeration:new o.bp(Fe,ze.u_terrain_exaggeration)}))(s,qe),this.projectionUniforms=((Fe,ze)=>({u_projection_matrix:new o.b$(Fe,ze.u_projection_matrix),u_projection_tile_mercator_coords:new o.c0(Fe,ze.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c0(Fe,ze.u_projection_clipping_plane),u_projection_transition:new o.bp(Fe,ze.u_projection_transition),u_projection_fallback_matrix:new o.b$(Fe,ze.u_projection_fallback_matrix)}))(s,qe),this.binderUniforms=g?g.getUniforms(s,qe):[]}draw(s,d,g,x,w,k,A,N,O,B,K,Z,X,re,le,ce,de,ye,we){const me=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(g),s.setStencilMode(x),s.setColorMode(w),s.setCullFace(k),N){s.activeTexture.set(me.TEXTURE2),me.bindTexture(me.TEXTURE_2D,N.depthTexture),s.activeTexture.set(me.TEXTURE3),me.bindTexture(me.TEXTURE_2D,N.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(N[ke])}if(O)for(const ke in O)this.projectionUniforms[Uu[ke]].set(O[ke]);if(A)for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(A[ke]);ce&&ce.setUniforms(s,this.binderUniforms,re,{zoom:le});let Se=0;switch(d){case me.LINES:Se=2;break;case me.TRIANGLES:Se=3;break;case me.LINE_STRIP:Se=1}for(const ke of X.get()){const ve=ke.vaos||(ke.vaos={});(ve[B]||(ve[B]=new Tw)).bind(s,this,K,ce?ce.getPaintVertexBuffers():[],Z,ke.vertexOffset,de,ye,we),me.drawElements(d,ke.primitiveLength*Se,me.UNSIGNED_SHORT,ke.primitiveOffset*Se*2)}}}function qu(b,s,d){const g=1/o.aM(d,1,s.transform.tileZoom),x=Math.pow(2,d.tileID.overscaledZ),w=d.tileSize*Math.pow(2,s.transform.tileZoom)/x,k=w*(d.tileID.canonical.x+d.tileID.wrap*x),A=w*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[k>>16,A>>16],u_pixel_coord_lower:[65535&k,65535&A]}}const qx=(b,s,d,g)=>{const x=b.style.light,w=x.properties.get("position"),k=[w.x,w.y,w.z],A=o.c3();x.properties.get("anchor")==="viewport"&&o.c4(A,b.transform.bearingInRadians),o.c5(k,k,A);const N=b.transform.transformLightDirection(k),O=x.properties.get("color");return{u_lightpos:k,u_lightpos_globe:N,u_lightintensity:x.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+s,u_opacity:d,u_fill_translate:g}},vc=(b,s,d,g,x,w,k)=>o.e(qx(b,s,d,g),qu(w,b,k),{u_height_factor:-Math.pow(2,x.overscaledZ)/k.tileSize/8}),Wx=(b,s,d,g)=>o.e(qu(s,b,d),{u_fill_translate:g}),Gx=(b,s)=>({u_world:b,u_fill_translate:s}),Cw=(b,s,d,g,x)=>o.e(Wx(b,s,d,x),{u_world:g}),Hx=(b,s,d,g,x)=>{const w=b.transform;let k,A,N=0;if(d.paint.get("circle-pitch-alignment")==="map"){const O=o.aM(s,1,w.zoom);k=!0,A=[O,O],N=O/(o.a4*Math.pow(2,s.tileID.overscaledZ))*2*Math.PI*x}else k=!1,A=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+k,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:A,u_globe_extrude_scale:N,u_translate:g}},pm=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Zx=b=>({u_viewport_size:[b.width,b.height]}),fm=(b,s=1)=>({u_color:b,u_overlay:0,u_overlay_scale:s}),mm=(b,s,d,g)=>{const x=o.aM(b,1,s)/(o.a4*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*g;return{u_extrude_scale:o.aM(b,1,s),u_intensity:d,u_globe_extrude_scale:x}},gm=(b,s,d,g)=>{const x=o.N();o.c6(x,0,b.width,b.height,0,0,1);const w=b.context.gl;return{u_matrix:x,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:d,u_color_ramp:g,u_opacity:s.paint.get("heatmap-opacity")}},wl=(b,s,d)=>{const g=d.paint.get("hillshade-accent-color");let x;switch(d.paint.get("hillshade-method")){case"basic":x=4;break;case"combined":x=1;break;case"igor":x=2;break;case"multidirectional":x=3;break;default:x=0}const w=d.getIlluminationProperties();for(let k=0;k<w.directionRadians.length;k++)d.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[k]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:Yx(0,s.tileID),u_exaggeration:d.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:g,u_method:x,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},Kx=(b,s)=>{const d=s.stride,g=o.N();return o.c6(g,0,o.a4,-o.a4,0,0,1),o.O(g,g,[0,-o.a4,0]),{u_matrix:g,u_image:1,u_dimension:[d,d],u_zoom:b.overscaledZ,u_unpack:s.getUnpackVector()}};function Yx(b,s){const d=Math.pow(2,s.canonical.z),g=s.canonical.y;return[new o.aa(0,g/d).toLngLat().lat,new o.aa(0,(g+1)/d).toLngLat().lat]}const Wu=(b,s,d=0)=>({u_image:0,u_unpack:s.getUnpackVector(),u_dimension:[s.stride,s.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:d,u_opacity:b.paint.get("color-relief-opacity")}),Th=(b,s,d,g)=>{const x=b.transform;return{u_translation:ym(b,s,d),u_ratio:g/o.aM(s,1,x.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Gu=(b,s,d,g,x)=>o.e(Th(b,s,d,g),{u_image:0,u_image_height:x}),Pw=(b,s,d,g,x)=>{const w=b.transform,k=kh(s,w);return{u_translation:ym(b,s,d),u_texsize:s.imageAtlasTexture.size,u_ratio:g/o.aM(s,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[k,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},Ew=(b,s,d,g,x)=>{const w=kh(s,b.transform);return o.e(Th(b,s,d,g),{u_tileratio:w,u_crossfade_from:x.fromScale,u_crossfade_to:x.toScale,u_image:0,u_mix:x.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})},Qx=(b,s,d,g,x,w)=>{const k=kh(s,b.transform);return o.e(Th(b,s,d,g),{u_image:0,u_image_height:w,u_tileratio:k,u_crossfade_from:x.fromScale,u_crossfade_to:x.toScale,u_image_dash:1,u_mix:x.t,u_lineatlas_width:b.lineAtlas.width,u_lineatlas_height:b.lineAtlas.height})};function kh(b,s){return 1/o.aM(b,1,s.tileZoom)}function ym(b,s,d){return o.aN(b.transform,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const xm=(b,s,d,g,x)=>{return{u_tl_parent:b,u_scale_parent:s,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*g.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:g.paint.get("raster-brightness-min"),u_brightness_high:g.paint.get("raster-brightness-max"),u_saturation_factor:(k=g.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(w=g.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:Xx(g.paint.get("raster-hue-rotate")),u_coords_top:[x[0].x,x[0].y,x[1].x,x[1].y],u_coords_bottom:[x[3].x,x[3].y,x[2].x,x[2].y]};var w,k};function Xx(b){b*=Math.PI/180;const s=Math.sin(b),d=Math.cos(b);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}const Hu=(b,s,d,g,x,w,k,A,N,O,B,K,Z)=>{const X=k.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:X.cameraToCenterDistance,u_pitch:X.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:X.width/X.height,u_fade_change:k.options.fadeDuration?k.symbolFadeChange:1,u_label_plane_matrix:A,u_coord_matrix:N,u_is_text:+B,u_pitch_with_map:+g,u_is_along_line:x,u_is_variable_anchor:w,u_texsize:K,u_texture:0,u_translation:O,u_pitched_scale:Z}},Pa=(b,s,d,g,x,w,k,A,N,O,B,K,Z,X)=>{const re=k.transform;return o.e(Hu(b,s,d,g,x,w,k,A,N,O,B,K,X),{u_gamma_scale:g?Math.cos(re.pitch*Math.PI/180)*re.cameraToCenterDistance:1,u_device_pixel_ratio:k.pixelRatio,u_is_halo:1})},vm=(b,s,d,g,x,w,k,A,N,O,B,K,Z)=>o.e(Pa(b,s,d,g,x,w,k,A,N,O,!0,B,0,Z),{u_texsize_icon:K,u_texture_icon:1}),_m=(b,s)=>({u_opacity:b,u_color:s}),bm=(b,s,d,g,x)=>o.e(function(w,k,A,N){const O=A.imageManager.getPattern(w.from.toString()),B=A.imageManager.getPattern(w.to.toString()),{width:K,height:Z}=A.imageManager.getPixelSize(),X=Math.pow(2,N.tileID.overscaledZ),re=N.tileSize*Math.pow(2,A.transform.tileZoom)/X,le=re*(N.tileID.canonical.x+N.tileID.wrap*X),ce=re*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[K,Z],u_mix:k.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:k.fromScale,u_scale_b:k.toScale,u_tile_units_to_pixels:1/o.aM(N,1,A.transform.tileZoom),u_pixel_coord_upper:[le>>16,ce>>16],u_pixel_coord_lower:[65535&le,65535&ce]}}(d,x,s,g),{u_opacity:b}),wm=(b,s)=>{},Sm={fillExtrusion:(b,s)=>({u_lightpos:new o.c1(b,s.u_lightpos),u_lightpos_globe:new o.c1(b,s.u_lightpos_globe),u_lightintensity:new o.bp(b,s.u_lightintensity),u_lightcolor:new o.c1(b,s.u_lightcolor),u_vertical_gradient:new o.bp(b,s.u_vertical_gradient),u_opacity:new o.bp(b,s.u_opacity),u_fill_translate:new o.c2(b,s.u_fill_translate)}),fillExtrusionPattern:(b,s)=>({u_lightpos:new o.c1(b,s.u_lightpos),u_lightpos_globe:new o.c1(b,s.u_lightpos_globe),u_lightintensity:new o.bp(b,s.u_lightintensity),u_lightcolor:new o.c1(b,s.u_lightcolor),u_vertical_gradient:new o.bp(b,s.u_vertical_gradient),u_height_factor:new o.bp(b,s.u_height_factor),u_opacity:new o.bp(b,s.u_opacity),u_fill_translate:new o.c2(b,s.u_fill_translate),u_image:new o.bZ(b,s.u_image),u_texsize:new o.c2(b,s.u_texsize),u_pixel_coord_upper:new o.c2(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.c2(b,s.u_pixel_coord_lower),u_scale:new o.c1(b,s.u_scale),u_fade:new o.bp(b,s.u_fade)}),fill:(b,s)=>({u_fill_translate:new o.c2(b,s.u_fill_translate)}),fillPattern:(b,s)=>({u_image:new o.bZ(b,s.u_image),u_texsize:new o.c2(b,s.u_texsize),u_pixel_coord_upper:new o.c2(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.c2(b,s.u_pixel_coord_lower),u_scale:new o.c1(b,s.u_scale),u_fade:new o.bp(b,s.u_fade),u_fill_translate:new o.c2(b,s.u_fill_translate)}),fillOutline:(b,s)=>({u_world:new o.c2(b,s.u_world),u_fill_translate:new o.c2(b,s.u_fill_translate)}),fillOutlinePattern:(b,s)=>({u_world:new o.c2(b,s.u_world),u_image:new o.bZ(b,s.u_image),u_texsize:new o.c2(b,s.u_texsize),u_pixel_coord_upper:new o.c2(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.c2(b,s.u_pixel_coord_lower),u_scale:new o.c1(b,s.u_scale),u_fade:new o.bp(b,s.u_fade),u_fill_translate:new o.c2(b,s.u_fill_translate)}),circle:(b,s)=>({u_camera_to_center_distance:new o.bp(b,s.u_camera_to_center_distance),u_scale_with_map:new o.bZ(b,s.u_scale_with_map),u_pitch_with_map:new o.bZ(b,s.u_pitch_with_map),u_extrude_scale:new o.c2(b,s.u_extrude_scale),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_globe_extrude_scale:new o.bp(b,s.u_globe_extrude_scale),u_translate:new o.c2(b,s.u_translate)}),collisionBox:(b,s)=>({u_pixel_extrude_scale:new o.c2(b,s.u_pixel_extrude_scale)}),collisionCircle:(b,s)=>({u_viewport_size:new o.c2(b,s.u_viewport_size)}),debug:(b,s)=>({u_color:new o.b_(b,s.u_color),u_overlay:new o.bZ(b,s.u_overlay),u_overlay_scale:new o.bp(b,s.u_overlay_scale)}),depth:wm,clippingMask:wm,heatmap:(b,s)=>({u_extrude_scale:new o.bp(b,s.u_extrude_scale),u_intensity:new o.bp(b,s.u_intensity),u_globe_extrude_scale:new o.bp(b,s.u_globe_extrude_scale)}),heatmapTexture:(b,s)=>({u_matrix:new o.b$(b,s.u_matrix),u_world:new o.c2(b,s.u_world),u_image:new o.bZ(b,s.u_image),u_color_ramp:new o.bZ(b,s.u_color_ramp),u_opacity:new o.bp(b,s.u_opacity)}),hillshade:(b,s)=>({u_image:new o.bZ(b,s.u_image),u_latrange:new o.c2(b,s.u_latrange),u_exaggeration:new o.bp(b,s.u_exaggeration),u_altitudes:new o.c8(b,s.u_altitudes),u_azimuths:new o.c8(b,s.u_azimuths),u_accent:new o.b_(b,s.u_accent),u_method:new o.bZ(b,s.u_method),u_shadows:new o.c7(b,s.u_shadows),u_highlights:new o.c7(b,s.u_highlights)}),hillshadePrepare:(b,s)=>({u_matrix:new o.b$(b,s.u_matrix),u_image:new o.bZ(b,s.u_image),u_dimension:new o.c2(b,s.u_dimension),u_zoom:new o.bp(b,s.u_zoom),u_unpack:new o.c0(b,s.u_unpack)}),colorRelief:(b,s)=>({u_image:new o.bZ(b,s.u_image),u_unpack:new o.c0(b,s.u_unpack),u_dimension:new o.c2(b,s.u_dimension),u_elevation_stops:new o.bZ(b,s.u_elevation_stops),u_color_stops:new o.bZ(b,s.u_color_stops),u_color_ramp_size:new o.bZ(b,s.u_color_ramp_size),u_opacity:new o.bp(b,s.u_opacity)}),line:(b,s)=>({u_translation:new o.c2(b,s.u_translation),u_ratio:new o.bp(b,s.u_ratio),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.c2(b,s.u_units_to_pixels)}),lineGradient:(b,s)=>({u_translation:new o.c2(b,s.u_translation),u_ratio:new o.bp(b,s.u_ratio),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.c2(b,s.u_units_to_pixels),u_image:new o.bZ(b,s.u_image),u_image_height:new o.bp(b,s.u_image_height)}),linePattern:(b,s)=>({u_translation:new o.c2(b,s.u_translation),u_texsize:new o.c2(b,s.u_texsize),u_ratio:new o.bp(b,s.u_ratio),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_image:new o.bZ(b,s.u_image),u_units_to_pixels:new o.c2(b,s.u_units_to_pixels),u_scale:new o.c1(b,s.u_scale),u_fade:new o.bp(b,s.u_fade)}),lineSDF:(b,s)=>({u_translation:new o.c2(b,s.u_translation),u_ratio:new o.bp(b,s.u_ratio),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.c2(b,s.u_units_to_pixels),u_image:new o.bZ(b,s.u_image),u_mix:new o.bp(b,s.u_mix),u_tileratio:new o.bp(b,s.u_tileratio),u_crossfade_from:new o.bp(b,s.u_crossfade_from),u_crossfade_to:new o.bp(b,s.u_crossfade_to),u_lineatlas_width:new o.bp(b,s.u_lineatlas_width),u_lineatlas_height:new o.bp(b,s.u_lineatlas_height)}),lineGradientSDF:(b,s)=>({u_translation:new o.c2(b,s.u_translation),u_ratio:new o.bp(b,s.u_ratio),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_units_to_pixels:new o.c2(b,s.u_units_to_pixels),u_image:new o.bZ(b,s.u_image),u_image_height:new o.bp(b,s.u_image_height),u_tileratio:new o.bp(b,s.u_tileratio),u_crossfade_from:new o.bp(b,s.u_crossfade_from),u_crossfade_to:new o.bp(b,s.u_crossfade_to),u_image_dash:new o.bZ(b,s.u_image_dash),u_mix:new o.bp(b,s.u_mix),u_lineatlas_width:new o.bp(b,s.u_lineatlas_width),u_lineatlas_height:new o.bp(b,s.u_lineatlas_height)}),raster:(b,s)=>({u_tl_parent:new o.c2(b,s.u_tl_parent),u_scale_parent:new o.bp(b,s.u_scale_parent),u_buffer_scale:new o.bp(b,s.u_buffer_scale),u_fade_t:new o.bp(b,s.u_fade_t),u_opacity:new o.bp(b,s.u_opacity),u_image0:new o.bZ(b,s.u_image0),u_image1:new o.bZ(b,s.u_image1),u_brightness_low:new o.bp(b,s.u_brightness_low),u_brightness_high:new o.bp(b,s.u_brightness_high),u_saturation_factor:new o.bp(b,s.u_saturation_factor),u_contrast_factor:new o.bp(b,s.u_contrast_factor),u_spin_weights:new o.c1(b,s.u_spin_weights),u_coords_top:new o.c0(b,s.u_coords_top),u_coords_bottom:new o.c0(b,s.u_coords_bottom)}),symbolIcon:(b,s)=>({u_is_size_zoom_constant:new o.bZ(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bZ(b,s.u_is_size_feature_constant),u_size_t:new o.bp(b,s.u_size_t),u_size:new o.bp(b,s.u_size),u_camera_to_center_distance:new o.bp(b,s.u_camera_to_center_distance),u_pitch:new o.bp(b,s.u_pitch),u_rotate_symbol:new o.bZ(b,s.u_rotate_symbol),u_aspect_ratio:new o.bp(b,s.u_aspect_ratio),u_fade_change:new o.bp(b,s.u_fade_change),u_label_plane_matrix:new o.b$(b,s.u_label_plane_matrix),u_coord_matrix:new o.b$(b,s.u_coord_matrix),u_is_text:new o.bZ(b,s.u_is_text),u_pitch_with_map:new o.bZ(b,s.u_pitch_with_map),u_is_along_line:new o.bZ(b,s.u_is_along_line),u_is_variable_anchor:new o.bZ(b,s.u_is_variable_anchor),u_texsize:new o.c2(b,s.u_texsize),u_texture:new o.bZ(b,s.u_texture),u_translation:new o.c2(b,s.u_translation),u_pitched_scale:new o.bp(b,s.u_pitched_scale)}),symbolSDF:(b,s)=>({u_is_size_zoom_constant:new o.bZ(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bZ(b,s.u_is_size_feature_constant),u_size_t:new o.bp(b,s.u_size_t),u_size:new o.bp(b,s.u_size),u_camera_to_center_distance:new o.bp(b,s.u_camera_to_center_distance),u_pitch:new o.bp(b,s.u_pitch),u_rotate_symbol:new o.bZ(b,s.u_rotate_symbol),u_aspect_ratio:new o.bp(b,s.u_aspect_ratio),u_fade_change:new o.bp(b,s.u_fade_change),u_label_plane_matrix:new o.b$(b,s.u_label_plane_matrix),u_coord_matrix:new o.b$(b,s.u_coord_matrix),u_is_text:new o.bZ(b,s.u_is_text),u_pitch_with_map:new o.bZ(b,s.u_pitch_with_map),u_is_along_line:new o.bZ(b,s.u_is_along_line),u_is_variable_anchor:new o.bZ(b,s.u_is_variable_anchor),u_texsize:new o.c2(b,s.u_texsize),u_texture:new o.bZ(b,s.u_texture),u_gamma_scale:new o.bp(b,s.u_gamma_scale),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_is_halo:new o.bZ(b,s.u_is_halo),u_translation:new o.c2(b,s.u_translation),u_pitched_scale:new o.bp(b,s.u_pitched_scale)}),symbolTextAndIcon:(b,s)=>({u_is_size_zoom_constant:new o.bZ(b,s.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bZ(b,s.u_is_size_feature_constant),u_size_t:new o.bp(b,s.u_size_t),u_size:new o.bp(b,s.u_size),u_camera_to_center_distance:new o.bp(b,s.u_camera_to_center_distance),u_pitch:new o.bp(b,s.u_pitch),u_rotate_symbol:new o.bZ(b,s.u_rotate_symbol),u_aspect_ratio:new o.bp(b,s.u_aspect_ratio),u_fade_change:new o.bp(b,s.u_fade_change),u_label_plane_matrix:new o.b$(b,s.u_label_plane_matrix),u_coord_matrix:new o.b$(b,s.u_coord_matrix),u_is_text:new o.bZ(b,s.u_is_text),u_pitch_with_map:new o.bZ(b,s.u_pitch_with_map),u_is_along_line:new o.bZ(b,s.u_is_along_line),u_is_variable_anchor:new o.bZ(b,s.u_is_variable_anchor),u_texsize:new o.c2(b,s.u_texsize),u_texsize_icon:new o.c2(b,s.u_texsize_icon),u_texture:new o.bZ(b,s.u_texture),u_texture_icon:new o.bZ(b,s.u_texture_icon),u_gamma_scale:new o.bp(b,s.u_gamma_scale),u_device_pixel_ratio:new o.bp(b,s.u_device_pixel_ratio),u_is_halo:new o.bZ(b,s.u_is_halo),u_translation:new o.c2(b,s.u_translation),u_pitched_scale:new o.bp(b,s.u_pitched_scale)}),background:(b,s)=>({u_opacity:new o.bp(b,s.u_opacity),u_color:new o.b_(b,s.u_color)}),backgroundPattern:(b,s)=>({u_opacity:new o.bp(b,s.u_opacity),u_image:new o.bZ(b,s.u_image),u_pattern_tl_a:new o.c2(b,s.u_pattern_tl_a),u_pattern_br_a:new o.c2(b,s.u_pattern_br_a),u_pattern_tl_b:new o.c2(b,s.u_pattern_tl_b),u_pattern_br_b:new o.c2(b,s.u_pattern_br_b),u_texsize:new o.c2(b,s.u_texsize),u_mix:new o.bp(b,s.u_mix),u_pattern_size_a:new o.c2(b,s.u_pattern_size_a),u_pattern_size_b:new o.c2(b,s.u_pattern_size_b),u_scale_a:new o.bp(b,s.u_scale_a),u_scale_b:new o.bp(b,s.u_scale_b),u_pixel_coord_upper:new o.c2(b,s.u_pixel_coord_upper),u_pixel_coord_lower:new o.c2(b,s.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bp(b,s.u_tile_units_to_pixels)}),terrain:(b,s)=>({u_texture:new o.bZ(b,s.u_texture),u_ele_delta:new o.bp(b,s.u_ele_delta),u_fog_matrix:new o.b$(b,s.u_fog_matrix),u_fog_color:new o.b_(b,s.u_fog_color),u_fog_ground_blend:new o.bp(b,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bp(b,s.u_fog_ground_blend_opacity),u_horizon_color:new o.b_(b,s.u_horizon_color),u_horizon_fog_blend:new o.bp(b,s.u_horizon_fog_blend),u_is_globe_mode:new o.bp(b,s.u_is_globe_mode)}),terrainDepth:(b,s)=>({u_ele_delta:new o.bp(b,s.u_ele_delta)}),terrainCoords:(b,s)=>({u_texture:new o.bZ(b,s.u_texture),u_terrain_coords_id:new o.bp(b,s.u_terrain_coords_id),u_ele_delta:new o.bp(b,s.u_ele_delta)}),projectionErrorMeasurement:(b,s)=>({u_input:new o.bp(b,s.u_input),u_output_expected:new o.bp(b,s.u_output_expected)}),atmosphere:(b,s)=>({u_sun_pos:new o.c1(b,s.u_sun_pos),u_atmosphere_blend:new o.bp(b,s.u_atmosphere_blend),u_globe_position:new o.c1(b,s.u_globe_position),u_globe_radius:new o.bp(b,s.u_globe_radius),u_inv_proj_matrix:new o.b$(b,s.u_inv_proj_matrix)}),sky:(b,s)=>({u_sky_color:new o.b_(b,s.u_sky_color),u_horizon_color:new o.b_(b,s.u_horizon_color),u_horizon:new o.c2(b,s.u_horizon),u_horizon_normal:new o.c2(b,s.u_horizon_normal),u_sky_horizon_blend:new o.bp(b,s.u_sky_horizon_blend),u_sky_blend:new o.bp(b,s.u_sky_blend)})};class Sl{constructor(s,d,g){this.context=s;const x=s.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Tm={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class jw{constructor(s,d,g,x){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=x,this.context=s;const w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let g=0;g<this.attributes.length;g++){const x=d.attributes[this.attributes[g].name];x!==void 0&&s.enableVertexAttribArray(x)}}setVertexAttribPointers(s,d,g){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],k=d.attributes[w.name];k!==void 0&&s.vertexAttribPointer(k,w.components,s[Tm[w.type]],!1,this.itemSize,w.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Er{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Aw extends Er{getDefault(){return o.bo.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Mw extends Er{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Jx extends Er{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class Nw extends Er{getDefault(){return[!0,!0,!0,!0]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class ev extends Er{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class Ch extends Er{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class Ph extends Er{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){const d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class Eh extends Er{getDefault(){const s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class km extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class Tl extends Er{getDefault(){return[0,1]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class Zu extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class _c extends Er{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Os extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class tv extends Er{getDefault(){const s=this.gl;return[s.ONE,s.ZERO]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class rv extends Er{getDefault(){return o.bo.transparent}set(s){const d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class Cm extends Er{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class kl extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class jh extends Er{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class Ah extends Er{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class Ku extends Er{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class Mh extends Er{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class nv extends Er{getDefault(){const s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){const d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class bc extends Er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class wc extends Er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class iv extends Er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class Pm extends Er{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class pr extends Er{getDefault(){return null}set(s){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class Nh extends Er{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;const g=this.gl;ea(g)?g.bindVertexArray(s):(d=g.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class Iw extends Er{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class sv extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class Yu extends Er{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class Em extends Er{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class Rw extends Em{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class av extends Em{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class Dw extends Em{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}const Ih="Framebuffer is not complete";class Rh{constructor(s,d,g,x,w){this.context=s,this.width=d,this.height=g;const k=s.gl,A=this.framebuffer=k.createFramebuffer();if(this.colorAttachment=new Rw(s,A),x)this.depthAttachment=w?new Dw(s,A):new av(s,A);else if(w)throw new Error("Stencil cannot be set without depth");if(k.checkFramebufferStatus(k.FRAMEBUFFER)!==k.FRAMEBUFFER_COMPLETE)throw new Error(Ih)}destroy(){const s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&s.deleteRenderbuffer(g)}s.deleteFramebuffer(this.framebuffer)}}class Dh{constructor(s){var d,g;if(this.gl=s,this.clearColor=new Aw(this),this.clearDepth=new Mw(this),this.clearStencil=new Jx(this),this.colorMask=new Nw(this),this.depthMask=new ev(this),this.stencilMask=new Ch(this),this.stencilFunc=new Ph(this),this.stencilOp=new Eh(this),this.stencilTest=new km(this),this.depthRange=new Tl(this),this.depthTest=new Zu(this),this.depthFunc=new _c(this),this.blend=new Os(this),this.blendFunc=new tv(this),this.blendColor=new rv(this),this.blendEquation=new Cm(this),this.cullFace=new kl(this),this.cullFaceSide=new jh(this),this.frontFace=new Ah(this),this.program=new Ku(this),this.activeTexture=new Mh(this),this.viewport=new nv(this),this.bindFramebuffer=new bc(this),this.bindRenderbuffer=new wc(this),this.bindTexture=new iv(this),this.bindVertexBuffer=new Pm(this),this.bindElementBuffer=new pr(this),this.bindVertexArray=new Nh(this),this.pixelStoreUnpack=new Iw(this),this.pixelStoreUnpackPremultiplyAlpha=new sv(this),this.pixelStoreUnpackFlipY=new Yu(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),ea(s)){this.HALF_FLOAT=s.HALF_FLOAT;const x=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:x==null?void 0:x.RGBA16F_EXT,this.RGB16F=(g=s.RGB16F)!==null&&g!==void 0?g:x==null?void 0:x.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");const x=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=x==null?void 0:x.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new Sl(this,s,d)}createVertexBuffer(s,d,g){return new jw(this,s,d,g)}createRenderbuffer(s,d,g){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,s,d,g),this.bindRenderbuffer.set(null),w}createFramebuffer(s,d,g,x){return new Rh(this,s,d,g,x)}clear({color:s,depth:d,stencil:g}){const x=this.gl;let w=0;s&&(w|=x.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g!==void 0&&(w|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(g),this.stencilMask.set(255)),x.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){o.bQ(s.blendFunction,Jr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return ea(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return ea(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}let Cl;function Oh(b,s,d,g,x){const w=b.context,k=b.transform,A=w.gl,N=b.useProgram("collisionBox"),O=[];let B=0,K=0;for(let de=0;de<g.length;de++){const ye=g[de],we=s.getTile(ye).getBucket(d);if(!we)continue;const me=x?we.textCollisionBox:we.iconCollisionBox,Se=we.collisionCircleArray;Se.length>0&&(O.push({circleArray:Se,circleOffset:K,coord:ye}),B+=Se.length/4,K=B),me&&N.draw(w,A.LINES,sr.disabled,xr.disabled,b.colorModeForRenderPass(),Sr.disabled,pm(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(ye),k.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),d.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,null,b.transform.zoom,null,null,me.collisionVertexBuffer)}if(!x||!O.length)return;const Z=b.useProgram("collisionCircle"),X=new o.c9;X.resize(4*B),X._trim();let re=0;for(const de of O)for(let ye=0;ye<de.circleArray.length/4;ye++){const we=4*ye,me=de.circleArray[we+0],Se=de.circleArray[we+1],ke=de.circleArray[we+2],ve=de.circleArray[we+3];X.emplace(re++,me,Se,ke,ve,0),X.emplace(re++,me,Se,ke,ve,1),X.emplace(re++,me,Se,ke,ve,2),X.emplace(re++,me,Se,ke,ve,3)}(!Cl||Cl.length<2*B)&&(Cl=function(de){const ye=2*de,we=new o.cb;we.resize(ye),we._trim();for(let me=0;me<ye;me++){const Se=6*me;we.uint16[Se+0]=4*me+0,we.uint16[Se+1]=4*me+1,we.uint16[Se+2]=4*me+2,we.uint16[Se+3]=4*me+2,we.uint16[Se+4]=4*me+3,we.uint16[Se+5]=4*me+0}return we}(B));const le=w.createIndexBuffer(Cl,!0),ce=w.createVertexBuffer(X,o.ca.members,!0);for(const de of O){const ye=Zx(b.transform);Z.draw(w,A.TRIANGLES,sr.disabled,xr.disabled,b.colorModeForRenderPass(),Sr.disabled,ye,b.style.map.terrain&&b.style.map.terrain.getTerrainData(de.coord),null,d.id,ce,le,o.aW.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,b.transform.zoom,null,null,null)}ce.destroy(),le.destroy()}const ov=o.ar(new Float32Array(16));function Lh(b,s,d,g,x,w){const{horizontalAlign:k,verticalAlign:A}=o.aR(b);return new o.P((-(k-.5)*s/x+g[0])*w,(-(A-.5)*d/x+g[1])*w)}function Fh(b,s,d,g,x,w){const k=s.tileAnchorPoint.add(new o.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let A=g.mult(w);d||(A=A.rotate(-x));const N=k.add(A);return Et(N.x,N.y,s.pitchedLabelPlaneMatrix,s.getElevation).point}if(d){const A=Js(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(b),N=Math.atan(A.y/A.x)+(A.x<0?Math.PI:0);return b.add(g.rotate(N))}return b.add(g)}function zh(b,s,d,g,x,w,k,A,N,O,B,K){const Z=b.text.placedSymbolArray,X=b.text.dynamicLayoutVertexArray,re=b.icon.dynamicLayoutVertexArray,le={};X.clear();for(let ce=0;ce<Z.length;ce++){const de=Z.get(ce),ye=de.hidden||!de.crossTileID||b.allowVerticalPlacement&&!de.placedOrientation?null:g[de.crossTileID];if(ye){const we=new o.P(de.anchorX,de.anchorY),me={getElevation:K,width:x.width,height:x.height,pitchedLabelPlaneMatrix:w,pitchWithMap:d,transform:x,tileAnchorPoint:we,translation:O,unwrappedTileID:B},Se=d?uc(we.x,we.y,me):Js(we.x,we.y,me),ke=Vt(x.cameraToCenterDistance,Se.signedDistanceFromCamera);let ve=o.az(b.textSizeData,A,de)*ke/o.aL;d&&(ve*=b.tilePixelRatio/k);const{width:Ae,height:qe,anchor:Fe,textOffset:ze,textBoxScale:Ue}=ye,ut=Lh(Fe,Ae,qe,ze,Ue,ve),st=x.getPitchedTextCorrection(we.x+O[0],we.y+O[1],B),Xe=Fh(Se.point,me,s,ut,-x.bearingInRadians,st),Pt=b.allowVerticalPlacement&&de.placedOrientation===o.ay.vertical?Math.PI/2:0;for(let Qt=0;Qt<de.numGlyphs;Qt++)o.aF(X,Xe,Pt);N&&de.associatedIconIndex>=0&&(le[de.associatedIconIndex]={shiftedAnchor:Xe,angle:Pt})}else wa(de.numGlyphs,X)}if(N){re.clear();const ce=b.icon.placedSymbolArray;for(let de=0;de<ce.length;de++){const ye=ce.get(de);if(ye.hidden)wa(ye.numGlyphs,re);else{const we=le[de];if(we)for(let me=0;me<ye.numGlyphs;me++)o.aF(re,we.shiftedAnchor,we.angle);else wa(ye.numGlyphs,re)}}b.icon.dynamicLayoutVertexBuffer.updateData(re)}b.text.dynamicLayoutVertexBuffer.updateData(X)}function Sc(b,s,d){return d.iconsInText&&s?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function Bh(b,s,d,g,x,w,k,A,N,O,B,K,Z){const X=b.context,re=X.gl,le=b.transform,ce=A==="map",de=N==="map",ye=A!=="viewport"&&d.layout.get("symbol-placement")!=="point",we=ce&&!de&&!ye,me=!d.layout.get("symbol-sort-key").isConstant();let Se=!1;const ke=b.getDepthModeForSublayer(0,sr.ReadOnly),ve=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ae=[],qe=le.getCircleRadiusCorrection();for(const Fe of g){const ze=s.getTile(Fe),Ue=ze.getBucket(d);if(!Ue)continue;const ut=x?Ue.text:Ue.icon;if(!ut||!ut.segments.get().length||!ut.hasVisibleVertices)continue;const st=ut.programConfigurations.get(d.id),Xe=x||Ue.sdfIcons,Pt=x?Ue.textSizeData:Ue.iconSizeData,Qt=de||le.pitch!==0,Kt=b.useProgram(Sc(Xe,x,Ue),st),Wr=o.ax(Pt,le.zoom),Gr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Fe);let on,Fr,zn,en,kn=[0,0],bn=null;if(x)Fr=ze.glyphAtlasTexture,zn=re.LINEAR,on=ze.glyphAtlasTexture.size,Ue.iconsInText&&(kn=ze.imageAtlasTexture.size,bn=ze.imageAtlasTexture,en=Qt||b.options.rotating||b.options.zooming||Pt.kind==="composite"||Pt.kind==="camera"?re.LINEAR:re.NEAREST);else{const fn=d.layout.get("icon-size").constantOr(0)!==1||Ue.iconsNeedLinear;Fr=ze.imageAtlasTexture,zn=Xe||b.options.rotating||b.options.zooming||fn||Qt?re.LINEAR:re.NEAREST,on=ze.imageAtlasTexture.size}const Cn=o.aM(ze,1,b.transform.zoom),cs=On(ce,b.transform,Cn),Ya=o.N();o.aA(Ya,cs);const Ea=$r(de,ce,b.transform,Cn),Vo=o.aN(le,ze,w,k),$o=le.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),Nl=ve&&Ue.hasTextData(),zs=d.layout.get("icon-text-fit")!=="none"&&Nl&&Ue.hasIconData();if(ye){const fn=b.style.map.terrain?(Bn,zr)=>b.style.map.terrain.getElevation(Fe,Bn,zr):null,ln=d.layout.get("text-rotation-alignment")==="map";yl(Ue,b,x,cs,Ya,de,O,ln,Fe.toUnwrapped(),le.width,le.height,Vo,fn)}const Qa=x&&ve||zs,vs=ye||Qa?ov:de?cs:b.transform.clipSpaceToPixelsMatrix,Xa=Xe&&d.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Il;Il=Xe?Ue.iconsInText?vm(Pt.kind,Wr,we,de,ye,Qa,b,vs,Ea,Vo,on,kn,qe):Pa(Pt.kind,Wr,we,de,ye,Qa,b,vs,Ea,Vo,x,on,0,qe):Hu(Pt.kind,Wr,we,de,ye,Qa,b,vs,Ea,Vo,x,on,qe);const Rl={program:Kt,buffers:ut,uniformValues:Il,projectionData:$o,atlasTexture:Fr,atlasTextureIcon:bn,atlasInterpolation:zn,atlasInterpolationIcon:en,isSDF:Xe,hasHalo:Xa};if(me&&Ue.canOverlap){Se=!0;const fn=ut.segments.get();for(const ln of fn)Ae.push({segments:new o.aW([ln]),sortKey:ln.sortKey,state:Rl,terrainData:Gr})}else Ae.push({segments:ut.segments,sortKey:0,state:Rl,terrainData:Gr})}Se&&Ae.sort((Fe,ze)=>Fe.sortKey-ze.sortKey);for(const Fe of Ae){const ze=Fe.state;if(X.activeTexture.set(re.TEXTURE0),ze.atlasTexture.bind(ze.atlasInterpolation,re.CLAMP_TO_EDGE),ze.atlasTextureIcon&&(X.activeTexture.set(re.TEXTURE1),ze.atlasTextureIcon&&ze.atlasTextureIcon.bind(ze.atlasInterpolationIcon,re.CLAMP_TO_EDGE)),ze.isSDF){const Ue=ze.uniformValues;ze.hasHalo&&(Ue.u_is_halo=1,lv(ze.buffers,Fe.segments,d,b,ze.program,ke,B,K,Ue,ze.projectionData,Fe.terrainData)),Ue.u_is_halo=0}lv(ze.buffers,Fe.segments,d,b,ze.program,ke,B,K,ze.uniformValues,ze.projectionData,Fe.terrainData)}}function lv(b,s,d,g,x,w,k,A,N,O,B){const K=g.context;x.draw(K,K.gl.TRIANGLES,w,k,A,Sr.backCCW,N,B,O,d.id,b.layoutVertexBuffer,b.indexBuffer,s,d.paint,g.transform.zoom,b.programConfigurations.get(d.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Qu(b,s,d,g,x){const w=b.context,k=w.gl,A=xr.disabled,N=new Jr([k.ONE,k.ONE],o.bo.transparent,[!0,!0,!0,!0]),O=s.getBucket(d);if(!O)return;const B=g.key;let K=d.heatmapFbos.get(B);K||(K=jm(w,s.tileSize,s.tileSize),d.heatmapFbos.set(B,K)),w.bindFramebuffer.set(K.framebuffer),w.viewport.set([0,0,s.tileSize,s.tileSize]),w.clear({color:o.bo.transparent});const Z=O.programConfigurations.get(d.id),X=b.useProgram("heatmap",Z,!x),re=b.transform.getProjectionData({overscaledTileID:s.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),le=b.style.map.terrain.getTerrainData(g);X.draw(w,k.TRIANGLES,sr.disabled,A,N,Sr.disabled,mm(s,b.transform.zoom,d.paint.get("heatmap-intensity"),1),le,re,d.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,d.paint,b.transform.zoom,Z)}function Ow(b,s,d,g,x){const w=b.context,k=w.gl,A=b.transform;w.setColorMode(b.colorModeForRenderPass());const N=Xu(w,s),O=d.key,B=s.heatmapFbos.get(O);if(!B)return;w.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,B.colorAttachment.get()),w.activeTexture.set(k.TEXTURE1),N.bind(k.LINEAR,k.CLAMP_TO_EDGE);const K=A.getProjectionData({overscaledTileID:d,applyTerrainMatrix:x,applyGlobeMatrix:!g});b.useProgram("heatmapTexture").draw(w,k.TRIANGLES,sr.disabled,xr.disabled,b.colorModeForRenderPass(),Sr.disabled,gm(b,s,0,1),null,K,s.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,s.paint,A.zoom),B.destroy(),s.heatmapFbos.delete(O)}function jm(b,s,d){var g,x;const w=b.gl,k=w.createTexture();w.bindTexture(w.TEXTURE_2D,k),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const A=(g=b.HALF_FLOAT)!==null&&g!==void 0?g:w.UNSIGNED_BYTE,N=(x=b.RGBA16F)!==null&&x!==void 0?x:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,N,s,d,0,w.RGBA,A,null);const O=b.createFramebuffer(s,d,!1,!1);return O.colorAttachment.set(k),O}function Xu(b,s){return s.colorRampTexture||(s.colorRampTexture=new o.T(b,s.colorRamp,b.gl.RGBA)),s.colorRampTexture}function Vh(b,s,d,g,x,w,k,A){let N=256;if(x.stepInterpolant){const O=s.getSource().maxzoom,B=k.canonical.z===O?Math.ceil(1<<b.transform.maxZoom-k.canonical.z):1;N=o.an(o.cd(w.maxLineLength/o.a4*1024*B),256,d.maxTextureSize)}return A.gradient=o.ce({expression:x.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:A.gradient||void 0,clips:w.lineClipsArray}),A.texture?A.texture.update(A.gradient):A.texture=new o.T(d,A.gradient,g.RGBA),A.version=x.gradientVersion,A.texture}function cv(b,s,d,g,x){b.activeTexture.set(s.TEXTURE0),d.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),g.updatePaintBuffers(x)}function uv(b,s,d,g,x,w){(x||b.lineAtlas.dirty)&&(s.activeTexture.set(d.TEXTURE0),b.lineAtlas.bind(s)),g.updatePaintBuffers(w)}function $h(b,s,d,g,x,w,k){const A=w.gradients[x.id];let N=A.texture;x.gradientVersion!==A.version&&(N=Vh(b,s,d,g,x,w,k,A)),d.activeTexture.set(g.TEXTURE0),N.bind(x.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}function Am(b,s,d,g,x,w,k,A,N){const O=w.gradients[x.id];let B=O.texture;x.gradientVersion!==O.version&&(B=Vh(b,s,d,g,x,w,k,O)),d.activeTexture.set(g.TEXTURE0),B.bind(x.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE),d.activeTexture.set(g.TEXTURE1),b.lineAtlas.bind(d),A.updatePaintBuffers(N)}function dv(b,s,d,g,x){if(!d||!g||!g.imageAtlas)return;const w=g.imageAtlas.patternPositions;let k=w[d.to.toString()],A=w[d.from.toString()];if(!k&&A&&(k=A),!A&&k&&(A=k),!k||!A){const N=x.getPaintProperty(s);k=w[N],A=w[N]}k&&A&&b.setConstantPatternPositions(k,A)}function Mm(b,s,d,g,x,w,k,A){const N=b.context.gl,O="fill-pattern",B=d.paint.get(O),K=B&&B.constantOr(1),Z=d.getCrossfadeParameters();let X,re,le,ce,de;const ye=b.transform,we=d.paint.get("fill-translate"),me=d.paint.get("fill-translate-anchor");k?(re=K&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=N.LINES):(re=K?"fillPattern":"fill",X=N.TRIANGLES);const Se=B.constantOr(null);for(const ke of g){const ve=s.getTile(ke);if(K&&!ve.patternsLoaded())continue;const Ae=ve.getBucket(d);if(!Ae)continue;const qe=Ae.programConfigurations.get(d.id),Fe=b.useProgram(re,qe),ze=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke);K&&(b.context.activeTexture.set(N.TEXTURE0),ve.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),qe.updatePaintBuffers(Z)),dv(qe,O,Se,ve,d);const Ue=ye.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!A,applyTerrainMatrix:!0}),ut=o.aN(ye,ve,we,me);if(k){ce=Ae.indexBuffer2,de=Ae.segments2;const Xe=[N.drawingBufferWidth,N.drawingBufferHeight];le=re==="fillOutlinePattern"&&K?Cw(b,Z,ve,Xe,ut):Gx(Xe,ut)}else ce=Ae.indexBuffer,de=Ae.segments,le=K?Wx(b,Z,ve,ut):{u_fill_translate:ut};const st=b.stencilModeForClipping(ke);Fe.draw(b.context,X,x,st,w,Sr.backCCW,le,ze,Ue,d.id,Ae.layoutVertexBuffer,ce,de,d.paint,b.transform.zoom,qe)}}function an(b,s,d,g,x,w,k,A){const N=b.context,O=N.gl,B="fill-extrusion-pattern",K=d.paint.get(B),Z=K.constantOr(1),X=d.getCrossfadeParameters(),re=d.paint.get("fill-extrusion-opacity"),le=K.constantOr(null),ce=b.transform;for(const de of g){const ye=s.getTile(de),we=ye.getBucket(d);if(!we)continue;const me=b.style.map.terrain&&b.style.map.terrain.getTerrainData(de),Se=we.programConfigurations.get(d.id),ke=b.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Se);Z&&(b.context.activeTexture.set(O.TEXTURE0),ye.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Se.updatePaintBuffers(X));const ve=ce.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!A,applyTerrainMatrix:!0});dv(Se,B,le,ye,d);const Ae=o.aN(ce,ye,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),qe=d.paint.get("fill-extrusion-vertical-gradient"),Fe=Z?vc(b,qe,re,Ae,de,X,ye):qx(b,qe,re,Ae);ke.draw(N,N.gl.TRIANGLES,x,w,k,Sr.backCCW,Fe,me,ve,d.id,we.layoutVertexBuffer,we.indexBuffer,we.segments,d.paint,b.transform.zoom,Se,b.style.map.terrain&&we.centroidVertexBuffer)}}function Ha(b,s,d,g,x,w,k,A,N){var O;const B=b.style.projection,K=b.context,Z=b.transform,X=K.gl,re=[`#define NUM_ILLUMINATION_SOURCES ${d.paint.get("hillshade-highlight-color").values.length}`],le=b.useProgram("hillshade",null,!1,re),ce=!b.options.moving;for(const de of g){const ye=s.getTile(de),we=ye.fbo;if(!we)continue;const me=B.getMeshFromTileID(K,de.canonical,A,!0,"raster"),Se=(O=b.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(de);K.activeTexture.set(X.TEXTURE0),X.bindTexture(X.TEXTURE_2D,we.colorAttachment.get());const ke=Z.getProjectionData({overscaledTileID:de,aligned:ce,applyGlobeMatrix:!N,applyTerrainMatrix:!0});le.draw(K,X.TRIANGLES,w,x[de.overscaledZ],k,Sr.backCCW,wl(b,ye,d),Se,ke,d.id,me.vertexBuffer,me.indexBuffer,me.segments)}}function ls(b,s,d,g,x,w,k,A,N){var O;const B=b.style.projection,K=b.context,Z=b.transform,X=K.gl,re=b.useProgram("colorRelief"),le=!b.options.moving;let ce=!0,de=0;for(const ye of g){const we=s.getTile(ye),me=we.dem;if(ce){const Fe=X.getParameter(X.MAX_TEXTURE_SIZE),{elevationTexture:ze,colorTexture:Ue}=d.getColorRampTextures(K,Fe,me.getUnpackVector());K.activeTexture.set(X.TEXTURE1),ze.bind(X.NEAREST,X.CLAMP_TO_EDGE),K.activeTexture.set(X.TEXTURE4),Ue.bind(X.LINEAR,X.CLAMP_TO_EDGE),ce=!1,de=ze.size[0]}if(!me||!me.data)continue;const Se=me.stride,ke=me.getPixels();if(K.activeTexture.set(X.TEXTURE0),K.pixelStoreUnpackPremultiplyAlpha.set(!1),we.demTexture=we.demTexture||b.getTileTexture(Se),we.demTexture){const Fe=we.demTexture;Fe.update(ke,{premultiply:!1}),Fe.bind(X.LINEAR,X.CLAMP_TO_EDGE)}else we.demTexture=new o.T(K,ke,X.RGBA,{premultiply:!1}),we.demTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE);const ve=B.getMeshFromTileID(K,ye.canonical,A,!0,"raster"),Ae=(O=b.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(ye),qe=Z.getProjectionData({overscaledTileID:ye,aligned:le,applyGlobeMatrix:!N,applyTerrainMatrix:!0});re.draw(K,X.TRIANGLES,w,x[ye.overscaledZ],k,Sr.backCCW,Wu(d,we.dem,de),Ae,qe,d.id,ve.vertexBuffer,ve.indexBuffer,ve.segments)}}const Ju=[new o.P(0,0),new o.P(o.a4,0),new o.P(o.a4,o.a4),new o.P(0,o.a4)];function Pl(b,s,d,g,x,w,k,A,N=!1,O=!1){const B=g[g.length-1].overscaledZ,K=b.context,Z=K.gl,X=b.useProgram("raster"),re=b.transform,le=b.style.projection,ce=b.colorModeForRenderPass(),de=!b.options.moving,ye=d.paint.get("raster-opacity"),we=d.paint.get("raster-resampling"),me=d.paint.get("raster-fade-duration"),Se=!!b.style.map.terrain;for(const ke of g){const ve=b.getDepthModeForSublayer(ke.overscaledZ-B,ye===1?sr.ReadWrite:sr.ReadOnly,Z.LESS),Ae=s.getTile(ke),qe=we==="nearest"?Z.NEAREST:Z.LINEAR;K.activeTexture.set(Z.TEXTURE0),Ae.texture.bind(qe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),K.activeTexture.set(Z.TEXTURE1);const{parentTile:Fe,parentScaleBy:ze,parentTopLeft:Ue,fadeValues:ut}=hv(Ae,s,me,Se);Ae.fadeOpacity=ut.tileOpacity,Fe?(Fe.fadeOpacity=ut.parentTileOpacity,Fe.texture.bind(qe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST)):Ae.texture.bind(qe,Z.CLAMP_TO_EDGE,Z.LINEAR_MIPMAP_NEAREST),Ae.texture.useMipmap&&K.extTextureFilterAnisotropic&&b.transform.pitch>20&&Z.texParameterf(Z.TEXTURE_2D,K.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,K.extTextureFilterAnisotropicMax);const st=b.style.map.terrain&&b.style.map.terrain.getTerrainData(ke),Xe=re.getProjectionData({overscaledTileID:ke,aligned:de,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),Pt=xm(Ue,ze,ut.fadeMix,d,A),Qt=le.getMeshFromTileID(K,ke.canonical,w,k,"raster");X.draw(K,Z.TRIANGLES,ve,x?x[ke.overscaledZ]:xr.disabled,ce,N?Sr.frontCCW:Sr.backCCW,Pt,st,Xe,d.id,Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)}}function hv(b,s,d,g){const x={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(d===0||g)return x;if(b.fadingParentID){const w=s.getLoadedTile(b.fadingParentID);if(!w)return x;const k=Math.pow(2,w.tileID.overscaledZ-b.tileID.overscaledZ),A=[b.tileID.canonical.x*k%1,b.tileID.canonical.y*k%1],N=function(O,B,K){const Z=F(),X=(Z-B.timeAdded)/K,re=O.fadingDirection===Te.Incoming,le=o.an((Z-O.timeAdded)/K,0,1),ce=o.an(1-X,0,1),de=re?le:ce;return{tileOpacity:de,parentTileOpacity:re?ce:le,fadeMix:{opacity:1,mix:1-de}}}(b,w,d);return{parentTile:w,parentScaleBy:k,parentTopLeft:A,fadeValues:N}}if(b.selfFading){const w=function(k,A){const N=(F()-k.timeAdded)/A,O=o.an(N,0,1);return{tileOpacity:O,fadeMix:{opacity:O,mix:0}}}(b,d);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:w}}return x}const Tc=new o.bo(1,0,0,1),Nm=new o.bo(0,1,0,1),ed=new o.bo(0,0,1,1),Im=new o.bo(1,0,1,1),pv=new o.bo(0,1,1,1);function Rm(b,s,d,g){td(b,0,s+d/2,b.transform.width,d,g)}function Dm(b,s,d,g){td(b,s-d/2,0,d,b.transform.height,g)}function td(b,s,d,g,x,w){const k=b.context,A=k.gl;A.enable(A.SCISSOR_TEST),A.scissor(s*b.pixelRatio,d*b.pixelRatio,g*b.pixelRatio,x*b.pixelRatio),k.clear({color:w}),A.disable(A.SCISSOR_TEST)}function fv(b,s,d){const g=b.context,x=g.gl,w=b.useProgram("debug"),k=sr.disabled,A=xr.disabled,N=b.colorModeForRenderPass(),O="$debug",B=b.style.map.terrain&&b.style.map.terrain.getTerrainData(d);g.activeTexture.set(x.TEXTURE0);const K=s.getTileByID(d.key).latestRawTileData,Z=Math.floor((K&&K.byteLength||0)/1024),X=s.getTile(d).tileSize,re=512/Math.min(X,512)*(d.overscaledZ/b.transform.zoom)*.5;let le=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(le+=` => ${d.overscaledZ}`),function(de,ye){de.initDebugOverlayCanvas();const we=de.debugOverlayCanvas,me=de.context.gl,Se=de.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,we.width,we.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(ye,5,5),Se.strokeText(ye,5,5),de.debugOverlayTexture.update(we),de.debugOverlayTexture.bind(me.LINEAR,me.CLAMP_TO_EDGE)}(b,`${le} ${Z}kB`);const ce=b.transform.getProjectionData({overscaledTileID:d,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(g,x.TRIANGLES,k,A,Jr.alphaBlended,Sr.disabled,fm(o.bo.transparent,re),null,ce,O,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),w.draw(g,x.LINE_STRIP,k,A,N,Sr.disabled,fm(o.bo.red),B,ce,O,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function zo(b,s,d,g){const{isRenderingGlobe:x}=g,w=b.context,k=w.gl,A=b.transform,N=b.colorModeForRenderPass(),O=b.getDepthModeFor3D(),B=b.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(const K of d){const Z=s.getTerrainMesh(K.tileID),X=b.renderToTexture.getTexture(K),re=s.getTerrainData(K.tileID);w.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,X.texture);const le=s.getMeshFrameDelta(A.zoom),ce=A.calculateFogMatrix(K.tileID.toUnwrapped()),de=hm(le,ce,b.style.sky,A.pitch,x),ye=A.getProjectionData({overscaledTileID:K.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});B.draw(w,k.TRIANGLES,O,xr.disabled,N,Sr.backCCW,de,re,ye,"terrain",Z.vertexBuffer,Z.indexBuffer,Z.segments)}}function Om(b,s){if(!s.mesh){const d=new o.aV;d.emplaceBack(-1,-1),d.emplaceBack(1,-1),d.emplaceBack(1,1),d.emplaceBack(-1,1);const g=new o.aX;g.emplaceBack(0,1,2),g.emplaceBack(0,2,3),s.mesh=new Do(b.createVertexBuffer(d,Ln.members),b.createIndexBuffer(g),o.aW.simpleSegment(0,0,d.length,g.length))}return s.mesh}class mv{constructor(s,d){this.context=new Dh(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Yt.maxOverzooming+Yt.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vl}resize(s,d,g){if(this.width=Math.floor(s*g),this.height=Math.floor(d*g),this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style._order)this.style._layers[x].resize()}setup(){const s=this.context,d=new o.aV;d.emplaceBack(0,0),d.emplaceBack(o.a4,0),d.emplaceBack(0,o.a4),d.emplaceBack(o.a4,o.a4),this.tileExtentBuffer=s.createVertexBuffer(d,Ln.members),this.tileExtentSegments=o.aW.simpleSegment(0,0,4,2);const g=new o.aV;g.emplaceBack(0,0),g.emplaceBack(o.a4,0),g.emplaceBack(0,o.a4),g.emplaceBack(o.a4,o.a4),this.debugBuffer=s.createVertexBuffer(g,Ln.members),this.debugSegments=o.aW.simpleSegment(0,0,4,5);const x=new o.cg;x.emplaceBack(0,0,0,0),x.emplaceBack(o.a4,0,o.a4,0),x.emplaceBack(0,o.a4,0,o.a4),x.emplaceBack(o.a4,o.a4,o.a4,o.a4),this.rasterBoundsBuffer=s.createVertexBuffer(x,Ca.members),this.rasterBoundsSegments=o.aW.simpleSegment(0,0,4,2);const w=new o.aV;w.emplaceBack(0,0),w.emplaceBack(o.a4,0),w.emplaceBack(0,o.a4),w.emplaceBack(o.a4,o.a4),this.rasterBoundsBufferPosOnly=s.createVertexBuffer(w,Ln.members),this.rasterBoundsSegmentsPosOnly=o.aW.simpleSegment(0,0,4,5);const k=new o.aV;k.emplaceBack(0,0),k.emplaceBack(1,0),k.emplaceBack(0,1),k.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(k,Ln.members),this.viewportSegments=o.aW.simpleSegment(0,0,4,2);const A=new o.ch;A.emplaceBack(0),A.emplaceBack(1),A.emplaceBack(3),A.emplaceBack(2),A.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(A);const N=new o.aX;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(N);const O=this.context.gl;this.stencilClearMode=new xr({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.tileExtentMesh=new Do(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.N();o.c6(g,0,this.width,this.height,0,0,1),o.Q(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]);const x={mainMatrix:g,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:g};this.useProgram("clippingMask",null,!0).draw(s,d.TRIANGLES,sr.disabled,this.stencilClearMode,Jr.disabled,Sr.disabled,null,null,x,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d,g){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source,this.nextStencilID+d.length>256&&this.clearStencil();const x=this.context;x.setColorMode(Jr.disabled),x.setDepthMode(sr.disabled);const w={};for(const k of d)w[k.key]=this.nextStencilID++;this._renderTileMasks(w,d,g,!0),this._renderTileMasks(w,d,g,!1),this._tileClippingMaskIDs=w}_renderTileMasks(s,d,g,x){const w=this.context,k=w.gl,A=this.style.projection,N=this.transform,O=this.useProgram("clippingMask");for(const B of d){const K=s[B.key],Z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(B),X=A.getMeshFromTileID(this.context,B.canonical,x,!0,"stencil"),re=N.getProjectionData({overscaledTileID:B,applyGlobeMatrix:!g,applyTerrainMatrix:!0});O.draw(w,k.TRIANGLES,sr.disabled,new xr({func:k.ALWAYS,mask:0},K,255,k.KEEP,k.KEEP,k.REPLACE),Jr.disabled,g?Sr.disabled:Sr.backCCW,null,Z,re,"$clipping",X.vertexBuffer,X.indexBuffer,X.segments)}}_renderTilesDepthBuffer(){const s=this.context,d=s.gl,g=this.style.projection,x=this.transform,w=this.useProgram("depth"),k=this.getDepthModeFor3D(),A=Ft(x,{tileSize:x.tileSize});for(const N of A){const O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),B=g.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),K=x.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(s,d.TRIANGLES,k,xr.disabled,Jr.disabled,Sr.backCCW,null,O,K,"$clipping",B.vertexBuffer,B.indexBuffer,B.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const s=this.nextStencilID++,d=this.context.gl;return new xr({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){const d=this.context.gl;return new xr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(s){const d=this.context.gl,g=s.sort((k,A)=>A.overscaledZ-k.overscaledZ),x=g[g.length-1].overscaledZ,w=g[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const k={};for(let A=0;A<w;A++)k[A+x]=new xr({func:d.GEQUAL,mask:255},A+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=w,[k,g]}return[{[x]:xr.disabled},g]}stencilConfigForOverlapTwoPass(s){const d=this.context.gl,g=s.sort((k,A)=>A.overscaledZ-k.overscaledZ),x=g[g.length-1].overscaledZ,w=g[0].overscaledZ-x+1;if(this.clearStencil(),w>1){const k={},A={};for(let N=0;N<w;N++)k[N+x]=new xr({func:d.GREATER,mask:255},w+1+N,255,d.KEEP,d.KEEP,d.REPLACE),A[N+x]=new xr({func:d.GREATER,mask:255},1+N,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID=2*w+1,[k,A,g]}return this.nextStencilID=3,[{[x]:new xr({func:d.GREATER,mask:255},2,255,d.KEEP,d.KEEP,d.REPLACE)},{[x]:new xr({func:d.GREATER,mask:255},1,255,d.KEEP,d.KEEP,d.REPLACE)},g]}colorModeForRenderPass(){const s=this.context.gl;return this._showOverdrawInspector?new Jr([s.CONSTANT_COLOR,s.ONE],new o.bo(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Jr.unblended:Jr.alphaBlended}getDepthModeForSublayer(s,d,g){if(!this.opaquePassEnabledForLayer())return sr.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new sr(g||this.context.gl.LEQUAL,d,[x,x])}getDepthModeFor3D(){return new sr(this.context.gl.LEQUAL,sr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){var g,x;this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(F()),this.imageManager.beginFrame();const w=this.style._order,k=this.style.tileManagers,A={},N={},O={},B={isRenderingToTexture:!1,isRenderingGlobe:((g=s.projection)===null||g===void 0?void 0:g.transitionState)>0};for(const Z in k){const X=k[Z];X.used&&X.prepare(this.context),A[Z]=X.getVisibleCoordinates(!1),N[Z]=A[Z].slice().reverse(),O[Z]=X.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let Z=0;Z<w.length;Z++)if(this.style._layers[w[Z]].is3D()){this.opaquePassCutoff=Z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const Z of w){const X=this.style._layers[Z];if(!X.hasOffscreenPass()||X.isHidden(this.transform.zoom))continue;const re=N[X.source];(X.type==="custom"||re.length)&&this.renderLayer(this,k[X.source],X,re,B)}if((x=this.style.projection)===null||x===void 0||x.updateGPUdependent({context:this.context,useProgram:Z=>this.useProgram(Z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?o.bo.black:o.bo.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(Z,X){const re=Z.context,le=re.gl,ce=((ke,ve,Ae)=>{const qe=Math.cos(ve.rollInRadians),Fe=Math.sin(ve.rollInRadians),ze=Ie(ve),Ue=ve.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ke.properties.get("sky-color"),u_horizon_color:ke.properties.get("horizon-color"),u_horizon:[(ve.width/2-ze*Fe)*Ae,(ve.height/2+ze*qe)*Ae],u_horizon_normal:[-Fe,qe],u_sky_horizon_blend:ke.properties.get("sky-horizon-blend")*ve.height/2*Ae,u_sky_blend:Ue}})(X,Z.style.map.transform,Z.pixelRatio),de=new sr(le.LEQUAL,sr.ReadWrite,[0,1]),ye=xr.disabled,we=Z.colorModeForRenderPass(),me=Z.useProgram("sky"),Se=Om(re,X);me.draw(re,le.TRIANGLES,de,ye,we,Sr.disabled,ce,null,void 0,"sky",Se.vertexBuffer,Se.indexBuffer,Se.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const Z=this.style._layers[w[this.currentLayer]],X=k[Z.source],re=A[Z.source];this._renderTileClippingMasks(Z,re,!1),this.renderLayer(this,X,Z,re,B)}this.renderPass="translucent";let K=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const Z=this.style._layers[w[this.currentLayer]],X=k[Z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(Z,B))continue;this.opaquePassEnabledForLayer()||K||(K=!0,B.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const re=(Z.type==="symbol"?O:N)[Z.source];this._renderTileClippingMasks(Z,A[Z.source],!!this.renderToTexture),this.renderLayer(this,X,Z,re,B)}if(B.isRenderingGlobe&&function(Z,X,re){const le=Z.context,ce=le.gl,de=Z.useProgram("atmosphere"),ye=new sr(ce.LEQUAL,sr.ReadOnly,[0,1]),we=Z.transform,me=function(Ue,ut){const st=Ue.properties.get("position"),Xe=[-st.x,-st.y,-st.z],Pt=o.ar(new Float64Array(16));return Ue.properties.get("anchor")==="map"&&(o.bf(Pt,Pt,ut.rollInRadians),o.bg(Pt,Pt,-ut.pitchInRadians),o.bf(Pt,Pt,ut.bearingInRadians),o.bg(Pt,Pt,ut.center.lat*Math.PI/180),o.bI(Pt,Pt,-ut.center.lng*Math.PI/180)),o.cf(Xe,Xe,Pt),Xe}(re,Z.transform),Se=we.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=X.properties.get("atmosphere-blend")*Se.projectionTransition;if(ke===0)return;const ve=vh(we.worldSize,we.center.lat),Ae=we.inverseProjectionMatrix,qe=new Float64Array(4);qe[3]=1,o.aG(qe,qe,we.modelViewProjectionMatrix),qe[0]/=qe[3],qe[1]/=qe[3],qe[2]/=qe[3],qe[3]=1,o.aG(qe,qe,Ae),qe[0]/=qe[3],qe[1]/=qe[3],qe[2]/=qe[3],qe[3]=1;const Fe=((Ue,ut,st,Xe,Pt)=>({u_sun_pos:Ue,u_atmosphere_blend:ut,u_globe_position:st,u_globe_radius:Xe,u_inv_proj_matrix:Pt}))(me,ke,[qe[0],qe[1],qe[2]],ve,Ae),ze=Om(le,X);de.draw(le,ce.TRIANGLES,ye,xr.disabled,Jr.alphaBlended,Sr.disabled,Fe,null,null,"atmosphere",ze.vertexBuffer,ze.indexBuffer,ze.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const Z=function(X,re){let le=null;const ce=Object.values(X._layers).flatMap(me=>me.source&&!me.isHidden(re)?[X.tileManagers[me.source]]:[]),de=ce.filter(me=>me.getSource().type==="vector"),ye=ce.filter(me=>me.getSource().type!=="vector"),we=me=>{(!le||le.getSource().maxzoom<me.getSource().maxzoom)&&(le=me)};return de.forEach(me=>we(me)),le||ye.forEach(me=>we(me)),le}(this.style,this.transform.zoom);Z&&function(X,re,le){for(let ce=0;ce<le.length;ce++)fv(X,re,le[ce])}(this,Z,Z.getVisibleCoordinates())}this.options.showPadding&&function(Z){const X=Z.transform.padding;Rm(Z,Z.transform.height-(X.top||0),3,Tc),Rm(Z,X.bottom||0,3,Nm),Dm(Z,X.left||0,3,ed),Dm(Z,Z.transform.width-(X.right||0),3,Im);const re=Z.transform.centerPoint;(function(le,ce,de,ye){td(le,ce-1,de-10,2,20,ye),td(le,ce-10,de-1,20,2,ye)})(Z,re.x,Z.transform.height-re.y,pv)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,g=this.transform.modelViewProjectionMatrix;let x=this.terrainFacilitator.dirty;x||(x=s?!o.ci(d,g):!o.cj(d,g)),x||(x=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),x&&(o.ck(d,g),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,k){const A=w.context,N=A.gl,O=w.transform,B=Jr.unblended,K=new sr(N.LEQUAL,sr.ReadWrite,[0,1]),Z=k.tileManager.getRenderableTiles(),X=w.useProgram("terrainDepth");A.bindFramebuffer.set(k.getFramebuffer("depth").framebuffer),A.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),A.clear({color:o.bo.transparent,depth:1});for(const re of Z){const le=k.getTerrainMesh(re.tileID),ce=k.getTerrainData(re.tileID),de=O.getProjectionData({overscaledTileID:re.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ye={u_ele_delta:k.getMeshFrameDelta(O.zoom)};X.draw(A,N.TRIANGLES,K,xr.disabled,B,Sr.backCCW,ye,ce,de,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}A.bindFramebuffer.set(null),A.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,k){const A=w.context,N=A.gl,O=w.transform,B=Jr.unblended,K=new sr(N.LEQUAL,sr.ReadWrite,[0,1]),Z=k.getCoordsTexture(),X=k.tileManager.getRenderableTiles(),re=w.useProgram("terrainCoords");A.bindFramebuffer.set(k.getFramebuffer("coords").framebuffer),A.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),A.clear({color:o.bo.transparent,depth:1}),k.coordsIndex=[];for(const le of X){const ce=k.getTerrainMesh(le.tileID),de=k.getTerrainData(le.tileID);A.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,Z.texture);const ye={u_terrain_coords_id:(255-k.coordsIndex.length)/255,u_texture:0,u_ele_delta:k.getMeshFrameDelta(O.zoom)},we=O.getProjectionData({overscaledTileID:le.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(A,N.TRIANGLES,K,xr.disabled,B,Sr.backCCW,ye,de,we,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments),k.coordsIndex.push(le.tileID.key)}A.bindFramebuffer.set(null),A.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(s,d,g,x,w){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(x||[]).length)&&(this.id=g.id,o.cl(g)?function(k,A,N,O,B,K){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=K,X=xr.disabled,re=k.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(le,ce,de,ye,we,me,Se,ke,ve){const Ae=ce.transform,qe=ce.style.map.terrain,Fe=we==="map",ze=me==="map";for(const Ue of le){const ut=ye.getTile(Ue),st=ut.getBucket(de);if(!st||!st.text||!st.text.segments.get().length)continue;const Xe=o.ax(st.textSizeData,Ae.zoom),Pt=o.aM(ut,1,ce.transform.zoom),Qt=On(Fe,ce.transform,Pt),Kt=de.layout.get("icon-text-fit")!=="none"&&st.hasIconData();if(Xe){const Wr=Math.pow(2,Ae.zoom-ut.tileID.overscaledZ),Gr=qe?(on,Fr)=>qe.getElevation(Ue,on,Fr):null;zh(st,Fe,ze,ve,Ae,Qt,Wr,Xe,Kt,o.aN(Ae,ut,Se,ke),Ue.toUnwrapped(),Gr)}}}(O,k,N,A,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),B),N.paint.get("icon-opacity").constantOr(1)!==0&&Bh(k,A,N,O,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),X,re,Z),N.paint.get("text-opacity").constantOr(1)!==0&&Bh(k,A,N,O,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),X,re,Z),A.map.showCollisionBoxes&&(Oh(k,A,N,O,!0),Oh(k,A,N,O,!1))}(s,d,g,x,this.style.placement.variableOffsets,w):o.cm(g)?function(k,A,N,O,B){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:K}=B,Z=N.paint.get("circle-opacity"),X=N.paint.get("circle-stroke-width"),re=N.paint.get("circle-stroke-opacity"),le=!N.layout.get("circle-sort-key").isConstant();if(Z.constantOr(1)===0&&(X.constantOr(1)===0||re.constantOr(1)===0))return;const ce=k.context,de=ce.gl,ye=k.transform,we=k.getDepthModeForSublayer(0,sr.ReadOnly),me=xr.disabled,Se=k.colorModeForRenderPass(),ke=[],ve=ye.getCircleRadiusCorrection();for(let Ae=0;Ae<O.length;Ae++){const qe=O[Ae],Fe=A.getTile(qe),ze=Fe.getBucket(N);if(!ze)continue;const Ue=N.paint.get("circle-translate"),ut=N.paint.get("circle-translate-anchor"),st=o.aN(ye,Fe,Ue,ut),Xe=ze.programConfigurations.get(N.id),Pt=k.useProgram("circle",Xe),Qt=ze.layoutVertexBuffer,Kt=ze.indexBuffer,Wr=k.style.map.terrain&&k.style.map.terrain.getTerrainData(qe),Gr={programConfiguration:Xe,program:Pt,layoutVertexBuffer:Qt,indexBuffer:Kt,uniformValues:Hx(k,Fe,N,st,ve),terrainData:Wr,projectionData:ye.getProjectionData({overscaledTileID:qe,applyGlobeMatrix:!K,applyTerrainMatrix:!0})};if(le){const on=ze.segments.get();for(const Fr of on)ke.push({segments:new o.aW([Fr]),sortKey:Fr.sortKey,state:Gr})}else ke.push({segments:ze.segments,sortKey:0,state:Gr})}le&&ke.sort((Ae,qe)=>Ae.sortKey-qe.sortKey);for(const Ae of ke){const{programConfiguration:qe,program:Fe,layoutVertexBuffer:ze,indexBuffer:Ue,uniformValues:ut,terrainData:st,projectionData:Xe}=Ae.state;Fe.draw(ce,de.TRIANGLES,we,me,Se,Sr.backCCW,ut,st,Xe,N.id,ze,Ue,Ae.segments,N.paint,k.transform.zoom,qe)}}(s,d,g,x,w):o.cn(g)?function(k,A,N,O,B){if(N.paint.get("heatmap-opacity")===0)return;const K=k.context,{isRenderingToTexture:Z,isRenderingGlobe:X}=B;if(k.style.map.terrain){for(const re of O){const le=A.getTile(re);A.hasRenderableParent(re)||(k.renderPass==="offscreen"?Qu(k,le,N,re,X):k.renderPass==="translucent"&&Ow(k,N,re,Z,X))}K.viewport.set([0,0,k.width,k.height])}else k.renderPass==="offscreen"?function(re,le,ce,de){const ye=re.context,we=ye.gl,me=re.transform,Se=xr.disabled,ke=new Jr([we.ONE,we.ONE],o.bo.transparent,[!0,!0,!0,!0]);(function(ve,Ae,qe){const Fe=ve.gl;ve.activeTexture.set(Fe.TEXTURE1),ve.viewport.set([0,0,Ae.width/4,Ae.height/4]);let ze=qe.heatmapFbos.get(o.cc);ze?(Fe.bindTexture(Fe.TEXTURE_2D,ze.colorAttachment.get()),ve.bindFramebuffer.set(ze.framebuffer)):(ze=jm(ve,Ae.width/4,Ae.height/4),qe.heatmapFbos.set(o.cc,ze))})(ye,re,ce),ye.clear({color:o.bo.transparent});for(let ve=0;ve<de.length;ve++){const Ae=de[ve];if(le.hasRenderableParent(Ae))continue;const qe=le.getTile(Ae),Fe=qe.getBucket(ce);if(!Fe)continue;const ze=Fe.programConfigurations.get(ce.id),Ue=re.useProgram("heatmap",ze),ut=me.getProjectionData({overscaledTileID:Ae,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),st=me.getCircleRadiusCorrection();Ue.draw(ye,we.TRIANGLES,sr.disabled,Se,ke,Sr.backCCW,mm(qe,me.zoom,ce.paint.get("heatmap-intensity"),st),null,ut,ce.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,ce.paint,me.zoom,ze)}ye.viewport.set([0,0,re.width,re.height])}(k,A,N,O):k.renderPass==="translucent"&&function(re,le){const ce=re.context,de=ce.gl;ce.setColorMode(re.colorModeForRenderPass());const ye=le.heatmapFbos.get(o.cc);ye&&(ce.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,ye.colorAttachment.get()),ce.activeTexture.set(de.TEXTURE1),Xu(ce,le).bind(de.LINEAR,de.CLAMP_TO_EDGE),re.useProgram("heatmapTexture").draw(ce,de.TRIANGLES,sr.disabled,xr.disabled,re.colorModeForRenderPass(),Sr.disabled,gm(re,le,0,1),null,null,le.id,re.viewportBuffer,re.quadTriangleIndexBuffer,re.viewportSegments,le.paint,re.transform.zoom))}(k,N)}(s,d,g,x,w):o.co(g)?function(k,A,N,O,B){if(k.renderPass!=="translucent")return;const{isRenderingToTexture:K}=B,Z=N.paint.get("line-opacity"),X=N.paint.get("line-width");if(Z.constantOr(1)===0||X.constantOr(1)===0)return;const re=k.getDepthModeForSublayer(0,sr.ReadOnly),le=k.colorModeForRenderPass(),ce=N.paint.get("line-dasharray"),de=ce.constantOr(1),ye=N.paint.get("line-pattern"),we=ye.constantOr(1),me=N.paint.get("line-gradient"),Se=N.getCrossfadeParameters();let ke;ke=we?"linePattern":de&&me?"lineGradientSDF":de?"lineSDF":me?"lineGradient":"line";const ve=k.context,Ae=ve.gl,qe=k.transform;let Fe=!0;for(const ze of O){const Ue=A.getTile(ze);if(we&&!Ue.patternsLoaded())continue;const ut=Ue.getBucket(N);if(!ut)continue;const st=ut.programConfigurations.get(N.id),Xe=k.context.program.get(),Pt=k.useProgram(ke,st),Qt=Fe||Pt.program!==Xe,Kt=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ze),Wr=ye.constantOr(null),Gr=ce&&ce.constantOr(null);if(Wr&&Ue.imageAtlas){const kn=Ue.imageAtlas,bn=kn.patternPositions[Wr.to.toString()],Cn=kn.patternPositions[Wr.from.toString()];bn&&Cn&&st.setConstantPatternPositions(bn,Cn)}else if(Gr){const kn=N.layout.get("line-cap")==="round",bn=k.lineAtlas.getDash(Gr.to,kn),Cn=k.lineAtlas.getDash(Gr.from,kn);st.setConstantDashPositions(bn,Cn)}const on=qe.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!K,applyTerrainMatrix:!0}),Fr=qe.getPixelScale();let zn;we?(zn=Pw(k,Ue,N,Fr,Se),cv(ve,Ae,Ue,st,Se)):de&&me?(zn=Qx(k,Ue,N,Fr,Se,ut.lineClipsArray.length),Am(k,A,ve,Ae,N,ut,ze,st,Se)):de?(zn=Ew(k,Ue,N,Fr,Se),uv(k,ve,Ae,st,Qt,Se)):me?(zn=Gu(k,Ue,N,Fr,ut.lineClipsArray.length),$h(k,A,ve,Ae,N,ut,ze)):zn=Th(k,Ue,N,Fr);const en=k.stencilModeForClipping(ze);Pt.draw(ve,Ae.TRIANGLES,re,en,le,Sr.disabled,zn,Kt,on,N.id,ut.layoutVertexBuffer,ut.indexBuffer,ut.segments,N.paint,k.transform.zoom,st,ut.layoutVertexBuffer2),Fe=!1}}(s,d,g,x,w):o.cp(g)?function(k,A,N,O,B){const K=N.paint.get("fill-color"),Z=N.paint.get("fill-opacity");if(Z.constantOr(1)===0)return;const{isRenderingToTexture:X}=B,re=k.colorModeForRenderPass(),le=N.paint.get("fill-pattern"),ce=k.opaquePassEnabledForLayer()&&!le.constantOr(1)&&K.constantOr(o.bo.transparent).a===1&&Z.constantOr(0)===1?"opaque":"translucent";if(k.renderPass===ce){const de=k.getDepthModeForSublayer(1,k.renderPass==="opaque"?sr.ReadWrite:sr.ReadOnly);Mm(k,A,N,O,de,re,!1,X)}if(k.renderPass==="translucent"&&N.paint.get("fill-antialias")){const de=k.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,sr.ReadOnly);Mm(k,A,N,O,de,re,!0,X)}}(s,d,g,x,w):o.cq(g)?function(k,A,N,O,B){const K=N.paint.get("fill-extrusion-opacity");if(K===0)return;const{isRenderingToTexture:Z}=B;if(k.renderPass==="translucent"){const X=new sr(k.context.gl.LEQUAL,sr.ReadWrite,k.depthRangeFor3D);if(K!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))an(k,A,N,O,X,xr.disabled,Jr.disabled,Z),an(k,A,N,O,X,k.stencilModeFor3D(),k.colorModeForRenderPass(),Z);else{const re=k.colorModeForRenderPass();an(k,A,N,O,X,xr.disabled,re,Z)}}}(s,d,g,x,w):o.cr(g)?function(k,A,N,O,B){if(k.renderPass!=="offscreen"&&k.renderPass!=="translucent")return;const{isRenderingToTexture:K}=B,Z=k.context,X=k.style.projection.useSubdivision,re=k.getDepthModeForSublayer(0,sr.ReadOnly),le=k.colorModeForRenderPass();if(k.renderPass==="offscreen")(function(ce,de,ye,we,me,Se,ke){const ve=ce.context,Ae=ve.gl;for(const qe of ye){const Fe=de.getTile(qe),ze=Fe.dem;if(!ze||!ze.data||!Fe.needsHillshadePrepare)continue;const Ue=ze.dim,ut=ze.stride,st=ze.getPixels();if(ve.activeTexture.set(Ae.TEXTURE1),ve.pixelStoreUnpackPremultiplyAlpha.set(!1),Fe.demTexture=Fe.demTexture||ce.getTileTexture(ut),Fe.demTexture){const Pt=Fe.demTexture;Pt.update(st,{premultiply:!1}),Pt.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE)}else Fe.demTexture=new o.T(ve,st,Ae.RGBA,{premultiply:!1}),Fe.demTexture.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE);ve.activeTexture.set(Ae.TEXTURE0);let Xe=Fe.fbo;if(!Xe){const Pt=new o.T(ve,{width:Ue,height:Ue,data:null},Ae.RGBA);Pt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Xe=Fe.fbo=ve.createFramebuffer(Ue,Ue,!0,!1),Xe.colorAttachment.set(Pt.texture)}ve.bindFramebuffer.set(Xe.framebuffer),ve.viewport.set([0,0,Ue,Ue]),ce.useProgram("hillshadePrepare").draw(ve,Ae.TRIANGLES,me,Se,ke,Sr.disabled,Kx(Fe.tileID,ze),null,null,we.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments),Fe.needsHillshadePrepare=!1}})(k,A,O,N,re,xr.disabled,le),Z.viewport.set([0,0,k.width,k.height]);else if(k.renderPass==="translucent")if(X){const[ce,de,ye]=k.stencilConfigForOverlapTwoPass(O);Ha(k,A,N,ye,ce,re,le,!1,K),Ha(k,A,N,ye,de,re,le,!0,K)}else{const[ce,de]=k.getStencilConfigForOverlapAndUpdateStencilID(O);Ha(k,A,N,de,ce,re,le,!1,K)}}(s,d,g,x,w):o.cs(g)?function(k,A,N,O,B){if(k.renderPass!=="translucent"||!O.length)return;const{isRenderingToTexture:K}=B,Z=k.style.projection.useSubdivision,X=k.getDepthModeForSublayer(0,sr.ReadOnly),re=k.colorModeForRenderPass();if(Z){const[le,ce,de]=k.stencilConfigForOverlapTwoPass(O);ls(k,A,N,de,le,X,re,!1,K),ls(k,A,N,de,ce,X,re,!0,K)}else{const[le,ce]=k.getStencilConfigForOverlapAndUpdateStencilID(O);ls(k,A,N,ce,le,X,re,!1,K)}}(s,d,g,x,w):o.bT(g)?function(k,A,N,O,B){if(k.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!O.length)return;const{isRenderingToTexture:K}=B,Z=A.getSource(),X=k.style.projection.useSubdivision;if(Z instanceof dt)Pl(k,A,N,O,null,!1,!1,Z.tileCoords,Z.flippedWindingOrder,K);else if(X){const[re,le,ce]=k.stencilConfigForOverlapTwoPass(O);Pl(k,A,N,ce,re,!1,!0,Ju,!1,K),Pl(k,A,N,ce,le,!0,!0,Ju,!1,K)}else{const[re,le]=k.getStencilConfigForOverlapAndUpdateStencilID(O);Pl(k,A,N,le,re,!1,!0,Ju,!1,K)}}(s,d,g,x,w):o.ct(g)?function(k,A,N,O,B){const K=N.paint.get("background-color"),Z=N.paint.get("background-opacity");if(Z===0)return;const{isRenderingToTexture:X}=B,re=k.context,le=re.gl,ce=k.style.projection,de=k.transform,ye=de.tileSize,we=N.paint.get("background-pattern");if(k.isPatternMissing(we))return;const me=!we&&K.a===1&&Z===1&&k.opaquePassEnabledForLayer()?"opaque":"translucent";if(k.renderPass!==me)return;const Se=xr.disabled,ke=k.getDepthModeForSublayer(0,me==="opaque"?sr.ReadWrite:sr.ReadOnly),ve=k.colorModeForRenderPass(),Ae=k.useProgram(we?"backgroundPattern":"background"),qe=O||Ft(de,{tileSize:ye,terrain:k.style.map.terrain});we&&(re.activeTexture.set(le.TEXTURE0),k.imageManager.bind(k.context));const Fe=N.getCrossfadeParameters();for(const ze of qe){const Ue=de.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),ut=we?bm(Z,k,we,{tileID:ze,tileSize:ye},Fe):_m(Z,K),st=k.style.map.terrain&&k.style.map.terrain.getTerrainData(ze),Xe=ce.getMeshFromTileID(re,ze.canonical,!1,!0,"raster");Ae.draw(re,le.TRIANGLES,ke,Se,ve,Sr.backCCW,ut,st,Ue,N.id,Xe.vertexBuffer,Xe.indexBuffer,Xe.segments)}}(s,0,g,x,w):o.cu(g)&&function(k,A,N,O){const{isRenderingGlobe:B}=O,K=k.context,Z=N.implementation,X=k.style.projection,re=k.transform,le=re.getProjectionDataForCustomLayer(B),ce={farZ:re.farZ,nearZ:re.nearZ,fov:re.fov*Math.PI/180,modelViewProjectionMatrix:re.modelViewProjectionMatrix,projectionMatrix:re.projectionMatrix,shaderData:{variantName:X.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${X.shaderPreludeCode.vertexSource}`,define:X.shaderDefine},defaultProjectionData:le},de=Z.renderingMode?Z.renderingMode:"2d";if(k.renderPass==="offscreen"){const ye=Z.prerender;ye&&(k.setCustomLayerDefaults(),K.setColorMode(k.colorModeForRenderPass()),ye.call(Z,K.gl,ce),K.setDirty(),k.setBaseState())}else if(k.renderPass==="translucent"){k.setCustomLayerDefaults(),K.setColorMode(k.colorModeForRenderPass()),K.setStencilMode(xr.disabled);const ye=de==="3d"?k.getDepthModeFor3D():k.getDepthModeForSublayer(0,sr.ReadOnly);K.setDepthMode(ye),Z.render(K.gl,ce),K.setDirty(),k.setBaseState(),K.bindFramebuffer.set(null)}}(s,0,g,w))}saveTileTexture(s){const d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){const d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;const d=this.imageManager.getPattern(s.from.toString()),g=this.imageManager.getPattern(s.to.toString());return!d||!g}useProgram(s,d,g=!1,x=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,k=this.style.projection,A=g?Ds.projectionMercator:k.shaderPreludeCode,N=g?Ii:k.shaderDefine,O=s+(d?d.cacheKey:"")+`/${g?Ri:k.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(x?`/${x.join("/")}`:"");return this.cache[O]||(this.cache[O]=new kw(this.context,Ds[s],d,Sm[s],this._showOverdrawInspector,w,A,N,x)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var s,d;if(this._tileTextures){for(const g in this._tileTextures){const x=this._tileTextures[g];if(x)for(const w of x)w.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((s=this.tileExtentMesh.vertexBuffer)===null||s===void 0||s.destroy()),this.tileExtentMesh&&((d=this.tileExtentMesh.indexBuffer)===null||d===void 0||d.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const g in this.cache){const x=this.cache[g];x&&x.program&&this.context.gl.deleteProgram(x.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}function Lm(b,s){let d,g=!1,x=null,w=null;const k=()=>{x=null,g&&(b.apply(w,d),x=setTimeout(k,s),g=!1)};return(...A)=>(g=!0,w=this,d=A,x||k(),x)}class Fm{constructor(s){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let g;return d.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(g=x)}),(g&&g[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(!this._isValidHash(d))return!1;const g=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:g,pitch:+(d[4]||0)}),!0},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const g=d.join("/");let x=g;x.split("&").length>0&&(x=x.split("&")[0]),this._hashName&&(x=`${this._hashName}=${g}`);let w=window.location.hash.replace(x,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let k=window.location.href.replace(/(#.+)?$/,w);k=k.replace("&&","&"),window.history.replaceState(window.history.state,null,k)},this._updateHash=Lm(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,x=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),k=Math.round(d.lng*w)/w,A=Math.round(d.lat*w)/w,N=this._map.getBearing(),O=this._map.getPitch();let B="";if(B+=s?`/${k}/${A}/${g}`:`${g}/${A}/${k}`,(N||O)&&(B+="/"+Math.round(10*N)/10),O&&(B+=`/${Math.round(O)}`),this._hashName){const K=this._hashName;let Z=!1;const X=window.location.hash.slice(1).split("&").map(re=>{const le=re.split("=")[0];return le===K?(Z=!0,`${le}=${B}`):re}).filter(re=>re);return Z||X.push(`${K}=${B}`),`#${X.join("&")}`}return`#${B}`}_isValidHash(s){if(s.length<3||s.some(isNaN))return!1;try{new o.V(+s[2],+s[1])}catch{return!1}const d=+s[0],g=+(s[3]||0),x=+(s[4]||0);return d>=this._map.getMinZoom()&&d<=this._map.getMaxZoom()&&g>=-180&&g<=180&&x>=this._map.getMinPitch()&&x<=this._map.getMaxPitch()}}const kc={linearity:.3,easing:o.cv(0,0,.3,1)},gv=o.e({deceleration:2500,maxSpeed:1400},kc),yv=o.e({deceleration:20,maxSpeed:1400},kc),xv=o.e({deceleration:1e3,maxSpeed:360},kc),Uh=o.e({deceleration:1e3,maxSpeed:90},kc),vv=o.e({deceleration:1e3,maxSpeed:360},kc);class Ls{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:F(),settings:s})}_drainInertiaBuffer(){const s=this._inertiaBuffer,d=F();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)d.zoom+=w.zoomDelta||0,d.bearing+=w.bearingDelta||0,d.pitch+=w.pitchDelta||0,d.roll+=w.rollDelta||0,w.panDelta&&d.pan._add(w.panDelta),w.around&&(d.around=w.around),w.pinchAround&&(d.pinchAround=w.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(d.pan.mag()){const w=Cc(d.pan.mag(),g,o.e({},gv,s||{})),k=d.pan.mult(w.amount/d.pan.mag()),A=this._map.cameraHelper.handlePanInertia(k,this._map.transform);x.center=A.easingCenter,x.offset=A.easingOffset,Zi(x,w)}if(d.zoom){const w=Cc(d.zoom,g,yv);x.zoom=this._map.transform.zoom+w.amount,Zi(x,w)}if(d.bearing){const w=Cc(d.bearing,g,xv);x.bearing=this._map.transform.bearing+o.an(w.amount,-179,179),Zi(x,w)}if(d.pitch){const w=Cc(d.pitch,g,Uh);x.pitch=this._map.transform.pitch+w.amount,Zi(x,w)}if(d.roll){const w=Cc(d.roll,g,vv);x.roll=this._map.transform.roll+o.an(w.amount,-179,179),Zi(x,w)}if(x.zoom||x.bearing){const w=d.pinchAround===void 0?d.around:d.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),o.e(x,{noMoveStart:!0})}}function Zi(b,s){(!b.duration||b.duration<s.duration)&&(b.duration=s.duration,b.easing=s.easing)}function Cc(b,s,d){const{maxSpeed:g,linearity:x,deceleration:w}=d,k=o.an(b*x/(s/1e3),-g,g),A=Math.abs(k)/(w*x);return{easing:d.easing,duration:1e3*A,amount:k*(A/2)}}class pn extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g,x={}){g=g instanceof MouseEvent?g:new MouseEvent(s,g);const w=D.mousePos(d.getCanvas(),g),k=d.unproject(w);super(s,o.e({point:w,lngLat:k,originalEvent:g},x)),this._defaultPrevented=!1,this.target=d}}class rd extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){const x=s==="touchend"?g.changedTouches:g.touches,w=D.touchPos(d.getCanvasContainer(),x),k=w.map(N=>d.unproject(N)),A=w.reduce((N,O,B,K)=>N.add(O.div(K.length)),new o.P(0,0));super(s,{points:w,point:A,lngLats:k,lngLat:d.unproject(A),originalEvent:g}),this._defaultPrevented=!1}}class El extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,g){super(s,{originalEvent:g}),this._defaultPrevented=!1}}class Lw{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new El(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new pn(s.type,this._map,s))}mouseup(s){this._map.fire(new pn(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new pn(s.type,this._map,s))}dblclick(s){return this._firePreventable(new pn(s.type,this._map,s))}mouseover(s){this._map.fire(new pn(s.type,this._map,s))}mouseout(s){this._map.fire(new pn(s.type,this._map,s))}touchstart(s){return this._firePreventable(new rd(s.type,this._map,s))}touchmove(s){this._map.fire(new rd(s.type,this._map,s))}touchend(s){this._map.fire(new rd(s.type,this._map,s))}touchcancel(s){this._map.fire(new rd(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fw{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new pn(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new pn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new pn(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nd{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.screenPointToLocation(o.P.convert(s),this._map.terrain)}}class _v{constructor(s,d){this._map=s,this._tr=new nd(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(D.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const x=this._startPos;this._lastPos=g,this._box||(this._box=D.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));const w=Math.min(x.x,g.x),k=Math.max(x.x,g.x),A=Math.min(x.y,g.y),N=Math.max(x.y,g.y);D.setTransform(this._box,`translate(${w}px,${A}px)`),this._box.style.width=k-w+"px",this._box.style.height=N-A+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;const g=this._startPos,x=d;if(this.reset(),D.suppressClick(),g.x!==x.x||g.y!==x.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(g,x,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(D.remove(this._box),this._box=null),D.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new o.l(s,{originalEvent:d}))}}function qh(b,s){if(b.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${s.length}`);const d={};for(let g=0;g<b.length;g++)d[b[g].identifier]=s[g];return d}class id{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),g.length===this.numTouches&&(this.centroid=function(x){const w=new o.P(0,0);for(const k of x)w._add(k);return w.div(x.length)}(d),this.touches=qh(g,d)))}touchmove(s,d,g){if(this.aborted||!this.centroid)return;const x=qh(g,d);for(const w in this.touches){const k=x[w];(!k||k.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,d,g){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class na{constructor(s){this.singleTap=new id(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,g){this.singleTap.touchstart(s,d,g)}touchmove(s,d,g){this.singleTap.touchmove(s,d,g)}touchend(s,d,g){const x=this.singleTap.touchend(s,d,g);if(x){const w=s.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(x)<30;if(w&&k||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class bt{constructor(s){this._tr=new nd(s),this._zoomIn=new na({numTouches:1,numTaps:2}),this._zoomOut=new na({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,g){this._zoomIn.touchstart(s,d,g),this._zoomOut.touchstart(s,d,g)}touchmove(s,d,g){this._zoomIn.touchmove(s,d,g),this._zoomOut.touchmove(s,d,g)}touchend(s,d,g){const x=this._zoomIn.touchend(s,d,g),w=this._zoomOut.touchend(s,d,g),k=this._tr;return x?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:k.zoom+1,around:k.unproject(x)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:A=>A.easeTo({duration:300,zoom:k.zoom-1,around:k.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pc{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){const d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.rollDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=Array.isArray(d)?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;const g=this._lastPoint;if(!g)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);const x=Array.isArray(d)?d[0]:d;return!this._moved&&x.dist(g)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=x,this._move(g,x))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&D.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const zm=0,bv=2,sd={[zm]:1,[bv]:2};class Za{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){const d=D.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,g){const x=sd[g];return d.buttons===void 0||(d.buttons&x)!==x}(s,this._eventButton)}isValidEndEvent(s){return D.mouseButton(s)===this._eventButton}}class Bm{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}class zw{constructor(s=new Za({checkCorrectEvent:()=>!0}),d=new Bm){this.mouseMoveStateManager=s,this.oneFingerTouchMoveStateManager=d}_executeRelevantHandler(s,d,g){return s instanceof MouseEvent?d(s):typeof TouchEvent<"u"&&s instanceof TouchEvent?g(s):void 0}startMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.startMove(d),d=>this.oneFingerTouchMoveStateManager.startMove(d))}endMove(s){this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.endMove(d),d=>this.oneFingerTouchMoveStateManager.endMove(d))}isValidStartEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidStartEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidStartEvent(d))}isValidMoveEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidMoveEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(d))}isValidEndEvent(s){return this._executeRelevantHandler(s,d=>this.mouseMoveStateManager.isValidEndEvent(d),d=>this.oneFingerTouchMoveStateManager.isValidEndEvent(d))}}const Ec=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=s=>{s.preventDefault()}};class wv{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,g){return this._calculateTransform(s,d,g)}touchmove(s,d,g){if(this._active){if(!this._shouldBePrevented(g.length))return s.preventDefault(),this._calculateTransform(s,d,g);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,g){this._calculateTransform(s,d,g),this._active&&this._shouldBePrevented(g.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,g){g.length>0&&(this._active=!0);const x=qh(g,d),w=new o.P(0,0),k=new o.P(0,0);let A=0;for(const O in x){const B=x[O],K=this._touches[O];K&&(w._add(B),k._add(B.sub(K)),A++,x[O]=B)}if(this._touches=x,this._shouldBePrevented(A)||!k.mag())return;const N=k.div(A);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(A),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ad{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,g){if(!this._firstTwoTouches)return;s.preventDefault();const[x,w]=this._firstTwoTouches,k=Wh(g,d,x),A=Wh(g,d,w);if(!k||!A)return;const N=this._aroundCenter?null:k.add(A).div(2);return this._move([k,A],N,s)}touchend(s,d,g){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,k=Wh(g,d,x),A=Wh(g,d,w);k&&A||(this._active&&D.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Wh(b,s,d){for(let g=0;g<b.length;g++)if(b[g].identifier===d)return s[g]}function Vm(b,s){return Math.log(b/s)/Math.LN2}class Sv extends ad{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){const g=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(Vm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vm(this._distance,g),pinchAround:d}}}function Tv(b,s){return 180*b.angleWith(s)/Math.PI}class $m extends ad{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,g){const x=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Tv(this._vector,x),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());const d=25/(Math.PI*this._minDiameter)*360,g=Tv(s,this._startVector);return Math.abs(g)<d}}function Um(b){return Math.abs(b.y)>Math.abs(b.x)}class qm extends ad{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,g){super.touchstart(s,d,g),this._currentTouchCount=g.length}_start(s){this._lastPoints=s,Um(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,g){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const x=s[0].sub(this._lastPoints[0]),w=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(x,w,g.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(x.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,g){if(this._valid!==void 0)return this._valid;const x=s.mag()>=2,w=d.mag()>=2;if(!x&&!w)return;if(!x||!w)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const k=s.y>0==d.y>0;return Um(s)&&Um(d)&&k}}const Bw={panStep:100,bearingStep:15,pitchStep:10};class kv{constructor(s){this._tr=new nd(s);const d=Bw;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,g=0,x=0,w=0,k=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?g=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?g=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?x=1:(s.preventDefault(),k=-1);break;case 40:s.shiftKey?x=-1:(s.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(g=0,x=0),{cameraAnimation:A=>{const N=this._tr;A.easeTo({duration:300,easeId:"keyboardHandler",easing:Bo,zoom:d?Math.round(N.zoom)+d*(s.shiftKey?2:1):N.zoom,bearing:N.bearing+g*this._bearingStep,pitch:N.pitch+x*this._pitchStep,offset:[-w*this._panStep,-k*this._panStep],center:N.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bo(b){return b*(2-b)}const Or=4.000244140625,Vw=1/450;class od{constructor(s,d){this._onTimeout=g=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(g)},this._map=s,this._tr=new nd(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Vw}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY;const g=F(),x=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%Or==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(x*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=D.mousePos(this._map.getCanvas(),s),g=this._tr;this._aroundPoint=this._aroundCenter?g.transform.locationToScreenPoint(o.V.convert(g.center)):d,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const s=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const A=s.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=A),typeof this._targetZoom=="number"&&(this._targetZoom+=A)}if(this._delta!==0){const A=this._type==="wheel"&&Math.abs(this._delta)>Or?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&N!==0&&(N=1/N);const O=typeof this._targetZoom!="number"?s.scale:o.aq(this._targetZoom);this._targetZoom=s.applyConstrain(s.getCameraLngLat(),o.at(O*N)).zoom,this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom!="number"?s.zoom:this._targetZoom,g=this._startZoom,x=this._easing;let w,k=!1;if(this._type==="wheel"&&g&&x){const A=F()-this._lastWheelEventTime,N=Math.min((A+5)/200,1),O=x(N);w=o.G.number(g,d,O),N<1?this._frameId||(this._frameId=!0):k=!0}else w=d,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!k,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=o.cx;if(this._prevEase){const g=this._prevEase,x=(F()-g.start)/g.duration,w=g.easing(x+.01)-g.easing(x),k=.27/Math.sqrt(w*w+1e-4)*.01,A=Math.sqrt(.0729-k*k);d=o.cv(k,A,.25,1)}return this._prevEase={start:F(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ld{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wm{constructor(s){this._tr=new nd(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Cv{constructor(){this._tap=new na({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,g){if(!this._swipePoint)if(this._tapTime){const x=d[0],w=s.timeStamp-this._tapTime<500,k=this._tapPoint.dist(x)<30;w&&k?g.length>0&&(this._swipePoint=x,this._swipeTouch=g[0].identifier):this.reset()}else this._tap.touchstart(s,d,g)}touchmove(s,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const x=d[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,d,g)}touchend(s,d,g){if(this._tapTime)this._swipePoint&&g.length===0&&this.reset();else{const x=this._tap.touchend(s,d,g);x&&(this._tapTime=s.timeStamp,this._tapPoint=x)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Gm{constructor(s,d,g){this._el=s,this._mousePan=d,this._touchPan=g}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hm{constructor(s,d,g,x){this._pitchWithRotate=s.pitchWithRotate,this._rollEnabled=s.rollEnabled,this._mouseRotate=d,this._mousePitch=g,this._mouseRoll=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Pv{constructor(s,d,g,x){this._el=s,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ia{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=D.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const g=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),x=document.createElement("div");x.className="maplibregl-desktop-message",x.textContent=d,this._container.appendChild(x);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=g,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(D.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const jl=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class jt extends o.l{}function zt(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class cd{constructor(s,d){this.handleWindowEvent=x=>{this.handleEvent(x,`${x.type}Window`)},this.handleEvent=(x,w)=>{if(x.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const k=x.type==="renderFrame"?void 0:x,A={needsRenderFrame:!1},N={},O={};for(const{handlerName:Z,handler:X,allowed:re}of this._handlers){if(!X.isEnabled())continue;let le;if(this._blockedByActive(O,re,Z))X.reset();else if(X[w||x.type]){if(o.cy(x,w||x.type)){const ce=D.mousePos(this._map.getCanvas(),x);le=X[w||x.type](x,ce)}else if(o.cz(x,w||x.type)){const ce=this._getMapTouches(x.touches),de=D.touchPos(this._map.getCanvas(),ce);le=X[w||x.type](x,de,ce)}else o.cA(w||x.type)||(le=X[w||x.type](x));this.mergeHandlerResult(A,N,le,Z,k),le&&le.needsRenderFrame&&this._triggerRenderFrame()}(le||X.isActive())&&(O[Z]=X)}const B={};for(const Z in this._previousActiveHandlers)O[Z]||(B[Z]=k);this._previousActiveHandlers=O,(Object.keys(B).length||zt(A))&&(this._changes.push([A,N,B]),this._triggerRenderFrame()),(Object.keys(O).length||zt(A))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=A;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ls(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[x,w,k]of this._listeners)D.addEventListener(x,w,x===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[s,d,g]of this._listeners)D.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(s){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new Lw(d,s));const x=d.boxZoom=new _v(d,s);this._add("boxZoom",x),s.interactive&&s.boxZoom&&x.enable();const w=d.cooperativeGestures=new ia(d,s.cooperativeGestures);this._add("cooperativeGestures",w),s.cooperativeGestures&&w.enable();const k=new bt(d),A=new Wm(d);d.doubleClickZoom=new ld(A,k),this._add("tapZoom",k),this._add("clickZoom",A),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();const N=new Cv;this._add("tapDragZoom",N);const O=d.touchPitch=new qm(d);this._add("touchPitch",O),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);const B=()=>d.project(d.getCenter()),K=function({enable:me,clickTolerance:Se,aroundCenter:ke=!0,minPixelCenterThreshold:ve=100,rotateDegreesPerPixelMoved:Ae=.8},qe){const Fe=new Za({checkCorrectEvent:ze=>D.mouseButton(ze)===0&&ze.ctrlKey||D.mouseButton(ze)===2&&!ze.ctrlKey});return new Pc({clickTolerance:Se,move:(ze,Ue)=>{const ut=qe();if(ke&&Math.abs(ut.y-ze.y)>ve)return{bearingDelta:o.cw(new o.P(ze.x,Ue.y),Ue,ut)};let st=(Ue.x-ze.x)*Ae;return ke&&Ue.y<ut.y&&(st=-st),{bearingDelta:st}},moveStateManager:Fe,enable:me,assignEvents:Ec})}(s,B),Z=function({enable:me,clickTolerance:Se,pitchDegreesPerPixelMoved:ke=-.5}){const ve=new Za({checkCorrectEvent:Ae=>D.mouseButton(Ae)===0&&Ae.ctrlKey||D.mouseButton(Ae)===2});return new Pc({clickTolerance:Se,move:(Ae,qe)=>({pitchDelta:(qe.y-Ae.y)*ke}),moveStateManager:ve,enable:me,assignEvents:Ec})}(s),X=function({enable:me,clickTolerance:Se,rollDegreesPerPixelMoved:ke=.3},ve){const Ae=new Za({checkCorrectEvent:qe=>D.mouseButton(qe)===2&&qe.ctrlKey});return new Pc({clickTolerance:Se,move:(qe,Fe)=>{const ze=ve();let Ue=(Fe.x-qe.x)*ke;return Fe.y<ze.y&&(Ue=-Ue),{rollDelta:Ue}},moveStateManager:Ae,enable:me,assignEvents:Ec})}(s,B);d.dragRotate=new Hm(s,K,Z,X),this._add("mouseRotate",K,["mousePitch"]),this._add("mousePitch",Z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",X,["mousePitch"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();const re=function({enable:me,clickTolerance:Se}){const ke=new Za({checkCorrectEvent:ve=>D.mouseButton(ve)===0&&!ve.ctrlKey});return new Pc({clickTolerance:Se,move:(ve,Ae)=>({around:Ae,panDelta:Ae.sub(ve)}),activateOnStart:!0,moveStateManager:ke,enable:me,assignEvents:Ec})}(s),le=new wv(s,d);d.dragPan=new Gm(g,re,le),this._add("mousePan",re),this._add("touchPan",le,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);const ce=new $m,de=new Sv;d.touchZoomRotate=new Pv(g,de,ce,N),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate),this._add("blockableMapEvent",new Fw(d));const ye=d.scrollZoom=new od(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ye,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);const we=d.keyboard=new kv(d);this._add("keyboard",we),s.interactive&&s.keyboard&&d.keyboard.enable()}_add(s,d,g){this._handlers.push({handlerName:s,handler:d,allowed:g}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(const{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!jl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,g){for(const x in s)if(x!==g&&(!d||d.indexOf(x)<0))return!0;return!1}_getMapTouches(s){const d=[];for(const g of s)this._el.contains(g.target)&&d.push(g);return d}mergeHandlerResult(s,d,g,x,w){if(!g)return;o.e(s,g);const k={handlerName:x,originalEvent:g.originalEvent||w};g.zoomDelta!==void 0&&(d.zoom=k),g.panDelta!==void 0&&(d.drag=k),g.rollDelta!==void 0&&(d.roll=k),g.pitchDelta!==void 0&&(d.pitch=k),g.bearingDelta!==void 0&&(d.rotate=k)}_applyChanges(){const s={},d={},g={};for(const[x,w,k]of this._changes)x.panDelta&&(s.panDelta=(s.panDelta||new o.P(0,0))._add(x.panDelta)),x.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+x.pitchDelta),x.rollDelta&&(s.rollDelta=(s.rollDelta||0)+x.rollDelta),x.around!==void 0&&(s.around=x.around),x.pinchAround!==void 0&&(s.pinchAround=x.pinchAround),x.noInertia&&(s.noInertia=x.noInertia),o.e(d,w),o.e(g,k);this._updateMapTransform(s,d,g),this._changes=[]}_updateMapTransform(s,d,g){const x=this._map,w=x._getTransformForUpdate(),k=x.terrain;if(!(zt(s)||k&&this._terrainMovement))return this._fireEvents(d,g,!0);x._stop(!0);let{panDelta:A,zoomDelta:N,bearingDelta:O,pitchDelta:B,rollDelta:K,around:Z,pinchAround:X}=s;X!==void 0&&(Z=X),Z=Z||x.transform.centerPoint,k&&!w.isPointOnMapSurface(Z)&&(Z=w.centerPoint);const re={panDelta:A,zoomDelta:N,rollDelta:K,pitchDelta:B,bearingDelta:O,around:Z};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(Z)&&(Z=w.centerPoint);const le=Z.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(A?Z.sub(A):Z);this._handleMapControls({terrain:k,tr:w,deltasForHelper:re,preZoomAroundLoc:le,combinedEventsInProgress:d,panDelta:A}),x._applyUpdatedTransform(w),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,g,!0)}_handleMapControls({terrain:s,tr:d,deltasForHelper:g,preZoomAroundLoc:x,combinedEventsInProgress:w,panDelta:k}){const A=this._map.cameraHelper;if(A.handleMapControlsRollPitchBearingZoom(g,d),s)return A.useGlobeControls?(this._terrainMovement||!w.drag&&!w.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void A.handleMapControlsPan(g,d,x)):this._terrainMovement||!w.drag&&!w.zoom?void(w.drag&&this._terrainMovement&&k?d.setCenter(d.screenPointToLocation(d.centerPoint.sub(k))):A.handleMapControlsPan(g,d,x)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void A.handleMapControlsPan(g,d,x));A.handleMapControlsPan(g,d,x)}_fireEvents(s,d,g){const x=jl(this._eventsInProgress),w=jl(s),k={};for(const K in s){const{originalEvent:Z}=s[K];this._eventsInProgress[K]||(k[`${K}start`]=Z),this._eventsInProgress[K]=s[K]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const K in k)this._fireEvent(K,k[K]);w&&this._fireEvent("move",w.originalEvent);for(const K in s){const{originalEvent:Z}=s[K];this._fireEvent(K,Z)}const A={};let N;for(const K in this._eventsInProgress){const{handlerName:Z,originalEvent:X}=this._eventsInProgress[K];this._handlersById[Z].isActive()||(delete this._eventsInProgress[K],N=d[Z]||X,A[`${K}end`]=N)}for(const K in A)this._fireEvent(K,A[K]);const O=jl(this._eventsInProgress),B=(x||w)&&!O;if(B&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const K=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&K.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(K)}if(g&&B){this._updatingCamera=!0;const K=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=X=>X!==0&&-this._bearingSnap<X&&X<this._bearingSnap;!K||!K.essential&&I.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(K.bearing||this._map.getBearing())&&(K.bearing=0),K.freezeElevation=!0,this._map.easeTo(K,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new o.l(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new jt("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ev extends o.E{constructor(s,d,g){super(),this._renderFrameCallback=()=>{const x=Math.min((F()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(x)),x<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=g.bearingSnap,this.cameraHelper=d,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(s,d){s.apply(this.transform),this.transform=s,this.cameraHelper=d}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}getCenterElevation(){return this.transform.elevation}setCenterElevation(s,d){return this.jumpTo({elevation:s},d),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(s){this._centerClampedToGround=s}panBy(s,d,g){return s=o.P.convert(s).mult(-1),this.panTo(this.transform.center,o.e({offset:s},d),g)}panTo(s,d,g){return this.easeTo(o.e({center:s},d),g)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,g){return this.easeTo(o.e({zoom:s},d),g)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(s,d){return s!=this.transform.fov&&(this.transform.setFov(s),this.fire(new o.l("movestart",d)).fire(new o.l("move",d)).fire(new o.l("moveend",d))),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,g){return this.easeTo(o.e({bearing:s},d),g)}resetNorth(s,d){return this.rotateTo(0,o.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}getRoll(){return this.transform.roll}setRoll(s,d){return this.jumpTo({roll:s},d),this}cameraForBounds(s,d){s=Nr.convert(s).adjustAntiMeridian();const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),g,d)}_cameraForBoxAndBearing(s,d,g,x){const w={top:0,bottom:0,right:0,left:0};if(typeof(x=o.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},x)).padding=="number"){const O=x.padding;x.padding={top:O,bottom:O,right:O,left:O}}const k=o.e(w,x.padding);x.padding=k;const A=this.transform,N=new Nr(s,d);return this.cameraHelper.cameraForBoxAndBearing(x,k,N,g,A)}fitBounds(s,d,g){return this._fitInternal(this.cameraForBounds(s,d),d,g)}fitScreenCoordinates(s,d,g,x,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(s)),this.transform.screenPointToLocation(o.P.convert(d)),g,x),x,w)}_fitInternal(s,d,g){return s?(delete(d=o.e(s,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(s,d){this.stop();const g=this._getTransformForUpdate();let x=!1,w=!1,k=!1;const A=g.zoom;this.cameraHelper.handleJumpToCenterZoom(g,s);const N=g.zoom!==A;return"elevation"in s&&g.elevation!==+s.elevation&&g.setElevation(+s.elevation),"bearing"in s&&g.bearing!==+s.bearing&&(x=!0,g.setBearing(+s.bearing)),"pitch"in s&&g.pitch!==+s.pitch&&(w=!0,g.setPitch(+s.pitch)),"roll"in s&&g.roll!==+s.roll&&(k=!0,g.setRoll(+s.roll)),s.padding==null||g.isPaddingEqual(s.padding)||g.setPadding(s.padding),this._applyUpdatedTransform(g),this.fire(new o.l("movestart",d)).fire(new o.l("move",d)),N&&this.fire(new o.l("zoomstart",d)).fire(new o.l("zoom",d)).fire(new o.l("zoomend",d)),x&&this.fire(new o.l("rotatestart",d)).fire(new o.l("rotate",d)).fire(new o.l("rotateend",d)),w&&this.fire(new o.l("pitchstart",d)).fire(new o.l("pitch",d)).fire(new o.l("pitchend",d)),k&&this.fire(new o.l("rollstart",d)).fire(new o.l("roll",d)).fire(new o.l("rollend",d)),this.fire(new o.l("moveend",d))}calculateCameraOptionsFromTo(s,d,g,x=0){const w=o.aa.fromLngLat(s,d),k=o.aa.fromLngLat(g,x),A=k.x-w.x,N=k.y-w.y,O=k.z-w.z,B=Math.hypot(A,N,O);if(B===0)throw new Error("Can't calculate camera options with same From and To");const K=Math.hypot(A,N),Z=o.at(this.transform.cameraToCenterDistance/B/this.transform.tileSize),X=180*Math.atan2(A,-N)/Math.PI;let re=180*Math.acos(K/B)/Math.PI;return re=O<0?90-re:90+re,{center:k.toLngLat(),elevation:x,zoom:Z,pitch:re,bearing:X}}calculateCameraOptionsFromCameraLngLatAltRotation(s,d,g,x,w){const k=this.transform.calculateCenterFromCameraLngLatAlt(s,d,g,x);return{center:k.center,elevation:k.elevation,zoom:k.zoom,bearing:g,pitch:x,roll:w}}easeTo(s,d){this._stop(!1,s.easeId),((s=o.e({offset:[0,0],duration:500,easing:o.cx},s)).animate===!1||!s.essential&&I.prefersReducedMotion)&&(s.duration=0);const g=this._getTransformForUpdate(),x=this.getBearing(),w=g.pitch,k=g.roll,A="bearing"in s?this._normalizeBearing(s.bearing,x):x,N="pitch"in s?+s.pitch:w,O="roll"in s?this._normalizeBearing(s.roll,k):k,B="padding"in s?s.padding:g.padding,K=o.P.convert(s.offset);let Z,X;s.around&&(Z=o.V.convert(s.around),X=g.locationToScreenPoint(Z));const re={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},le=this.cameraHelper.handleEaseTo(g,{bearing:A,pitch:N,roll:O,padding:B,around:Z,aroundPoint:X,offsetAsPoint:K,offset:s.offset,zoom:s.zoom,center:s.center});return this._rotating=this._rotating||x!==A,this._pitching=this._pitching||N!==w,this._rolling=this._rolling||O!==k,this._padding=!g.isPaddingEqual(B),this._zooming=this._zooming||le.isZooming,this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,re),this.terrain&&this._prepareElevation(le.elevationCenter),this._ease(ce=>{le.easeFunc(ce),this.terrain&&!s.freezeElevation&&this._updateElevation(ce),this._applyUpdatedTransform(g),this._fireMoveEvents(d)},ce=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,ce)},s),this}_prepareEase(s,d,g={}){this._moving=!0,d||g.moving||this.fire(new o.l("movestart",s)),this._zooming&&!g.zooming&&this.fire(new o.l("zoomstart",s)),this._rotating&&!g.rotating&&this.fire(new o.l("rotatestart",s)),this._pitching&&!g.pitching&&this.fire(new o.l("pitchstart",s)),this._rolling&&!g.rolling&&this.fire(new o.l("rollstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){const g=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(g-(d-(g*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,s))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){if(!this.terrain&&s.elevation>=0&&s.pitch<=90)return{};const d=s.getCameraLngLat(),g=s.getCameraAltitude(),x=this.terrain?this.terrain.getElevationForLngLatZoom(d,s.zoom):0;if(g<x){const w=this.calculateCameraOptionsFromTo(d,x,s.center,s.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(s){const d=[];if(d.push(x=>this._elevateCameraIfInsideTerrain(x)),this.transformCameraUpdate&&d.push(x=>this.transformCameraUpdate(x)),!d.length)return;const g=s.clone();for(const x of d){const w=g.clone(),{center:k,zoom:A,roll:N,pitch:O,bearing:B,elevation:K}=x(w);k&&w.setCenter(k),K!==void 0&&w.setElevation(K),A!==void 0&&w.setZoom(A),N!==void 0&&w.setRoll(N),O!==void 0&&w.setPitch(O),B!==void 0&&w.setBearing(B),g.apply(w)}this.transform.apply(g)}_fireMoveEvents(s){this.fire(new o.l("move",s)),this._zooming&&this.fire(new o.l("zoom",s)),this._rotating&&this.fire(new o.l("rotate",s)),this._pitching&&this.fire(new o.l("pitch",s)),this._rolling&&this.fire(new o.l("roll",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const g=this._zooming,x=this._rotating,w=this._pitching,k=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,g&&this.fire(new o.l("zoomend",s)),x&&this.fire(new o.l("rotateend",s)),w&&this.fire(new o.l("pitchend",s)),k&&this.fire(new o.l("rollend",s)),this.fire(new o.l("moveend",s))}flyTo(s,d){if(!s.essential&&I.prefersReducedMotion){const Ue=o.U(s,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Ue,d)}this.stop(),s=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cx},s);const g=this._getTransformForUpdate(),x=g.bearing,w=g.pitch,k=g.roll,A=g.padding,N="bearing"in s?this._normalizeBearing(s.bearing,x):x,O="pitch"in s?+s.pitch:w,B="roll"in s?this._normalizeBearing(s.roll,k):k,K="padding"in s?s.padding:g.padding,Z=o.P.convert(s.offset);let X=g.centerPoint.add(Z);const re=g.screenPointToLocation(X),le=this.cameraHelper.handleFlyTo(g,{bearing:N,pitch:O,roll:B,padding:K,locationAtOffset:re,offsetAsPoint:Z,center:s.center,minZoom:s.minZoom,zoom:s.zoom});let ce=s.curve;const de=Math.max(g.width,g.height),ye=de/le.scaleOfZoom,we=le.pixelPathLength;typeof le.scaleOfMinZoom=="number"&&(ce=Math.sqrt(de/le.scaleOfMinZoom/we*2));const me=ce*ce;function Se(Ue){const ut=(ye*ye-de*de+(Ue?-1:1)*me*me*we*we)/(2*(Ue?ye:de)*me*we);return Math.log(Math.sqrt(ut*ut+1)-ut)}function ke(Ue){return(Math.exp(Ue)-Math.exp(-Ue))/2}function ve(Ue){return(Math.exp(Ue)+Math.exp(-Ue))/2}const Ae=Se(!1);let qe=function(Ue){return ve(Ae)/ve(Ae+ce*Ue)},Fe=function(Ue){return de*((ve(Ae)*(ke(ut=Ae+ce*Ue)/ve(ut))-ke(Ae))/me)/we;var ut},ze=(Se(!0)-Ae)/ce;if(Math.abs(we)<2e-6||!isFinite(ze)){if(Math.abs(de-ye)<1e-6)return this.easeTo(s,d);const Ue=ye<de?-1:1;ze=Math.abs(Math.log(ye/de))/ce,Fe=()=>0,qe=ut=>Math.exp(Ue*ce*ut)}return s.duration="duration"in s?+s.duration:1e3*ze/("screenSpeed"in s?+s.screenSpeed/ce:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=x!==N,this._pitching=O!==w,this._rolling=B!==k,this._padding=!g.isPaddingEqual(K),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(le.targetCenter),this._ease(Ue=>{const ut=Ue*ze,st=1/qe(ut),Xe=Fe(ut);this._rotating&&g.setBearing(o.G.number(x,N,Ue)),this._pitching&&g.setPitch(o.G.number(w,O,Ue)),this._rolling&&g.setRoll(o.G.number(k,B,Ue)),this._padding&&(g.interpolatePadding(A,K,Ue),X=g.centerPoint.add(Z)),le.easeFunc(Ue,st,Xe,X),this.terrain&&!s.freezeElevation&&this._updateElevation(Ue),this._applyUpdatedTransform(g),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var g;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const x=this._onEaseEnd;delete this._onEaseEnd,x.call(this,d)}return s||(g=this.handlers)===null||g===void 0||g.stop(!1),this}_ease(s,d,g){g.animate===!1||g.duration===0?(s(1),d()):(this._easeStart=F(),this._easeOptions=g,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=o.W(s,-180,180);const g=Math.abs(s-d);return Math.abs(s-360-d)<g&&(s-=360),Math.abs(s+360-d)<g&&(s+=360),s}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(o.V.convert(s),this.transform.tileZoom):null}}const ud={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Oi{constructor(s=ud){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=D.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=D.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=D.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){const g=this._map._getUIString(`AttributionControl.${d}`);s.title=g,s.setAttribute("aria-label",g)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(x=>typeof x!="string"?"":x)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const d=this._map.style.tileManagers;for(const x in d){const w=d[x];if(w.used||w.usedForTerrain){const k=w.getSource();k.attribution&&s.indexOf(k.attribution)<0&&s.push(k.attribution)}}s=s.filter(x=>String(x).trim()),s.sort((x,w)=>x.length-w.length),s=s.filter((x,w)=>{for(let k=w+1;k<s.length;k++)if(s[k].indexOf(x)>=0)return!1;return!0});const g=s.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,s.length?(this._innerContainer.innerHTML=D.sanitize(g),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Fs{constructor(s={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const g=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&g.classList.add("maplibregl-compact"):g.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=D.create("div","maplibregl-ctrl");const d=D.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){D.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class jv{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){const d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const x of g)if(x.id===s)return void(x.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var $w=o.aT([{name:"a_pos3d",type:"Int16",components:3}]);class Uw extends o.E{constructor(s){super(),this._lastTilesetChange=F(),this.tileManager=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=s._source.tileSize*2**this.deltaZoom,s.usedForTerrain=!0,s.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(s,d){this.tileManager.update(s,d),this._renderableTilesKeys=[];const g={};for(const x of Ft(s,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d,calculateTileZoom:this.tileManager._source.calculateTileZoom}))g[x.key]=!0,this._renderableTilesKeys.push(x.key),this._tiles[x.key]||(x.terrainRttPosMatrix32f=new Float64Array(16),o.c6(x.terrainRttPosMatrix32f,0,o.a4,o.a4,0,0,1),this._tiles[x.key]=new Q(x,this.tileSize),this._lastTilesetChange=F());for(const x in this._tiles)g[x]||delete this._tiles[x]}freeRtt(s){for(const d in this._tiles){const g=this._tiles[d];(!s||g.tileID.equals(s)||g.tileID.isChildOf(s)||s.isChildOf(g.tileID))&&(g.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s,d){return d?this._getTerrainCoordsForTileRanges(s,d):this._getTerrainCoordsForRegularTile(s)}_getTerrainCoordsForRegularTile(s){const d={};for(const g of this._renderableTilesKeys){const x=this._tiles[g].tileID,w=s.clone(),k=o.bj();if(x.canonical.equals(s.canonical))o.c6(k,0,o.a4,o.a4,0,0,1);else if(x.canonical.isChildOf(s.canonical)){const A=x.canonical.z-s.canonical.z,N=x.canonical.x-(x.canonical.x>>A<<A),O=x.canonical.y-(x.canonical.y>>A<<A),B=o.a4>>A;o.c6(k,0,B,B,0,0,1),o.O(k,k,[-N*B,-O*B,0])}else{if(!s.canonical.isChildOf(x.canonical))continue;{const A=s.canonical.z-x.canonical.z,N=s.canonical.x-(s.canonical.x>>A<<A),O=s.canonical.y-(s.canonical.y>>A<<A),B=o.a4>>A;o.c6(k,0,o.a4,o.a4,0,0,1),o.O(k,k,[N*B,O*B,0]),o.Q(k,k,[1/2**A,1/2**A,0])}}w.terrainRttPosMatrix32f=new Float32Array(k),d[g]=w}return d}_getTerrainCoordsForTileRanges(s,d){const g={};for(const x of this._renderableTilesKeys){const w=this._tiles[x].tileID;if(!this._isWithinTileRanges(w,d))continue;const k=s.clone(),A=o.bj();if(w.canonical.z===s.canonical.z){const N=s.canonical.x-w.canonical.x,O=s.canonical.y-w.canonical.y;o.c6(A,0,o.a4,o.a4,0,0,1),o.O(A,A,[N*o.a4,O*o.a4,0])}else if(w.canonical.z>s.canonical.z){const N=w.canonical.z-s.canonical.z,O=w.canonical.x-(w.canonical.x>>N<<N),B=w.canonical.y-(w.canonical.y>>N<<N),K=s.canonical.x-(w.canonical.x>>N),Z=s.canonical.y-(w.canonical.y>>N),X=o.a4>>N;o.c6(A,0,X,X,0,0,1),o.O(A,A,[-O*X+K*o.a4,-B*X+Z*o.a4,0])}else{const N=s.canonical.z-w.canonical.z,O=s.canonical.x-(s.canonical.x>>N<<N),B=s.canonical.y-(s.canonical.y>>N<<N),K=(s.canonical.x>>N)-w.canonical.x,Z=(s.canonical.y>>N)-w.canonical.y,X=o.a4<<N;o.c6(A,0,X,X,0,0,1),o.O(A,A,[O*o.a4+K*X,B*o.a4+Z*X,0])}k.terrainRttPosMatrix32f=new Float32Array(A),g[x]=k}return g}getSourceTile(s,d){const g=this.tileManager._source;let x=s.overscaledZ-this.deltaZoom;if(x>g.maxzoom&&(x=g.maxzoom),x<g.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(x).key);let w=this.tileManager.getTileByID(this._sourceTileCache[s.key]);if((!w||!w.dem)&&d)for(;x>=g.minzoom&&(!w||!w.dem);)w=this.tileManager.getTileByID(s.scaledTo(x--).key);return w}anyTilesAfterTime(s=Date.now()){return this._lastTilesetChange>=s}_isWithinTileRanges(s,d){return d[s.canonical.z]&&s.canonical.x>=d[s.canonical.z].minTileX&&s.canonical.x<=d[s.canonical.z].maxTileX&&s.canonical.y>=d[s.canonical.z].minTileY&&s.canonical.y<=d[s.canonical.z].maxTileY}}class qw{constructor(s,d,g){this._meshCache={},this.painter=s,this.tileManager=new Uw(d),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,g,x=o.a4){var w;if(!(d>=0&&d<x&&g>=0&&g<x))return 0;const k=this.getTerrainData(s),A=(w=k.tile)===null||w===void 0?void 0:w.dem;if(!A)return 0;const N=o.cB([],[d/x*o.a4,g/x*o.a4],k.u_terrain_matrix),O=[N[0]*A.dim,N[1]*A.dim],B=Math.floor(O[0]),K=Math.floor(O[1]),Z=O[0]-B,X=O[1]-K;return A.get(B,K)*(1-Z)*(1-X)+A.get(B+1,K)*Z*(1-X)+A.get(B,K+1)*(1-Z)*X+A.get(B+1,K+1)*Z*X}getElevationForLngLatZoom(s,d){if(!o.cC(d,s.wrap()))return 0;const{tileID:g,mercatorX:x,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(g,x%o.a4,w%o.a4,o.a4)}getElevation(s,d,g,x=o.a4){return this.getDEMElevation(s,d,g,x)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){const x=this.painter.context,w=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(x,w,x.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(x,new o.R({width:1,height:1}),x.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ar([])}const d=this.tileManager.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const x=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new o.T(x,d.dem.getPixels(),x.gl.RGBA,{premultiply:!1}),d.demTexture.bind(x.gl.NEAREST,x.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+s.key;if(g&&!this._demMatrixCache[g]){const x=this.tileManager.getSource().maxzoom;let w=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=x?w=s.canonical.z-x:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=s.canonical.x-(s.canonical.x>>w<<w),A=s.canonical.y-(s.canonical.y>>w<<w),N=o.cD(new Float64Array(16),[1/(o.a4<<w),1/(o.a4<<w),0]);o.O(N,N,[k*o.a4,A*o.a4,0]),this._demMatrixCache[s.key]={matrix:N,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){const d=this.painter,g=d.width/devicePixelRatio,x=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===x||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(d.context,{width:g,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(d.context,{width:g,height:x,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,x,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,x))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,k=0;w<this._coordsTextureSize;w++)for(let A=0;A<this._coordsTextureSize;A++,k+=4)d[k+0]=255&A,d[k+1]=255&w,d[k+2]=A>>8<<4|w>>8,d[k+3]=0;const g=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),x=new o.T(s,g,s.gl.RGBA,{premultiply:!1});return x.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=x,x}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),g=this.painter.context,x=g.gl,w=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),k=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),A=Math.round(this.painter.height/devicePixelRatio);g.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),x.readPixels(w,A-k-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null);const N=d[0]+(d[2]>>4<<8),O=d[1]+((15&d[2])<<8),B=this.coordsIndex[255-d[3]],K=B&&this.tileManager.getTileByID(B);if(!K)return null;const Z=this._coordsTextureSize,X=(1<<K.tileID.canonical.z)*Z;return new o.aa((K.tileID.canonical.x*Z+N)/X+K.tileID.wrap,(K.tileID.canonical.y*Z+O)/X,this.getElevation(K.tileID,N,O,Z))}depthAtPoint(s){const d=new Uint8Array(4),g=this.painter.context,x=g.gl;return g.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),x.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,x.RGBA,x.UNSIGNED_BYTE,d),g.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(s){var d;const g=((d=this.painter.style.projection)===null||d===void 0?void 0:d.transitionState)>0,x=g&&s.canonical.y===0,w=g&&s.canonical.y===(1<<s.canonical.z)-1,k=`m_${x?"n":""}_${w?"s":""}`;if(this._meshCache[k])return this._meshCache[k];const A=this.painter.context,N=new o.cE,O=new o.aX,B=this.meshSize,K=o.a4/B,Z=B*B;for(let ve=0;ve<=B;ve++)for(let Ae=0;Ae<=B;Ae++)N.emplaceBack(Ae*K,ve*K,0);for(let ve=0;ve<Z;ve+=B+1)for(let Ae=0;Ae<B;Ae++)O.emplaceBack(Ae+ve,B+Ae+ve+1,B+Ae+ve+2),O.emplaceBack(Ae+ve,B+Ae+ve+2,Ae+ve+1);const X=N.length,re=X+(B+1),le=(B+1)*B,ce=x?o.bq:0,de=x?0:1,ye=w?o.br:o.a4,we=w?0:1;for(let ve=0;ve<=B;ve++)N.emplaceBack(ve*K,ce,de);for(let ve=0;ve<=B;ve++)N.emplaceBack(ve*K,ye,we);for(let ve=0;ve<B;ve++)O.emplaceBack(le+ve,re+ve,re+ve+1),O.emplaceBack(le+ve,re+ve+1,le+ve+1),O.emplaceBack(0+ve,X+ve+1,X+ve),O.emplaceBack(0+ve,0+ve+1,X+ve+1);const me=N.length,Se=me+2*(B+1);for(const ve of[0,1])for(let Ae=0;Ae<=B;Ae++)for(const qe of[0,1])N.emplaceBack(ve*o.a4,Ae*K,qe);for(let ve=0;ve<2*B;ve+=2)O.emplaceBack(me+ve,me+ve+1,me+ve+3),O.emplaceBack(me+ve,me+ve+3,me+ve+2),O.emplaceBack(Se+ve,Se+ve+3,Se+ve+1),O.emplaceBack(Se+ve,Se+ve+2,Se+ve+3);const ke=new Do(A.createVertexBuffer(N,$w.members),A.createIndexBuffer(O),o.aW.simpleSegment(0,0,N.length,O.length));return this._meshCache[k]=ke,ke}getMeshFrameDelta(s){return 2*Math.PI*o.bD/Math.pow(2,Math.max(s,0))/5}getMinTileElevationForLngLatZoom(s,d){var g;const{tileID:x}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(g=this.getMinMaxElevation(x).minElevation)!==null&&g!==void 0?g:0}getMinMaxElevation(s){const d=this.getTerrainData(s).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=d.dem.min*this.exaggeration,g.maxElevation=d.dem.max*this.exaggeration),g}_getOverscaledTileIDFromLngLatZoom(s,d){const g=o.aa.fromLngLat(s.wrap()),x=(1<<d)*o.a4,w=g.x*x,k=g.y*x,A=Math.floor(w/o.a4),N=Math.floor(k/o.a4);return{tileID:new o.a1(d,0,d,A,N),mercatorX:w,mercatorY:k}}}class dd{constructor(s,d,g){this._context=s,this._size=d,this._tileSize=g,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),g=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return g.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(g.texture),{id:s,fbo:d,texture:g,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(const s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}const Lr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class _n{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new dd(s.context,30,d.tileManager.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=s._order.filter(g=>!s._layers[g].isHidden(d)),this._coordsAscending={};for(const g in s.tileManagers){this._coordsAscending[g]={};const x=s.tileManagers[g].getVisibleCoordinates(),w=s.tileManagers[g].getSource(),k=w instanceof dt?w.terrainTileRanges:null;for(const A of x){const N=this.terrain.tileManager.getTerrainCoords(A,k);for(const O in N)this._coordsAscending[g][O]||(this._coordsAscending[g][O]=[]),this._coordsAscending[g][O].push(N[O])}}this._coordsAscendingStr={};for(const g of s._order){const x=s._layers[g],w=x.source;if(Lr[x.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const k in this._coordsAscending[w])this._coordsAscendingStr[w][k]=this._coordsAscending[w][k].map(A=>A.key).sort().join()}}for(const g of this._renderableTiles)for(const x in this._coordsAscendingStr){const w=this._coordsAscendingStr[x][g.tileID.key];w&&w!==g.rttCoords[x]&&(g.rtt=[])}}renderLayer(s,d){if(s.isHidden(this.painter.transform.zoom))return!1;const g=Object.assign(Object.assign({},d),{isRenderingToTexture:!0}),x=s.type,w=this.painter,k=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Lr[x]&&(this._prevType&&Lr[this._prevType]||this._stacks.push([]),this._prevType=x,this._stacks[this._stacks.length-1].push(s.id),!k))return!0;if(Lr[this._prevType]||Lr[x]&&k){this._prevType=x;const A=this._stacks.length-1,N=this._stacks[A]||[];for(const O of this._renderableTiles){if(this.pool.isFull()&&(zo(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[A]){const K=this.pool.getObjectForId(O.rtt[A].id);if(K.stamp===O.rtt[A].stamp){this.pool.useObject(K);continue}}const B=this.pool.getOrCreateFreeObject();this.pool.useObject(B),this.pool.stampObject(B),O.rtt[A]={id:B.id,stamp:B.stamp},w.context.bindFramebuffer.set(B.fbo.framebuffer),w.context.clear({color:o.bo.transparent,stencil:0}),w.currentStencilSource=void 0;for(let K=0;K<N.length;K++){const Z=w.style._layers[N[K]],X=Z.source?this._coordsAscending[Z.source][O.tileID.key]:[O.tileID];w.context.viewport.set([0,0,B.fbo.width,B.fbo.height]),w._renderTileClippingMasks(Z,X,!0),w.renderLayer(w,w.style.tileManagers[Z.source],Z,X,g),Z.source&&(O.rttCoords[Z.source]=this._coordsAscendingStr[Z.source][O.tileID.key])}}return zo(this.painter,this.terrain,this._rttTiles,g),this._rttTiles=[],this.pool.freeAllObjects(),Lr[x]}return!1}}const Av={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},hd=_,pd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ud,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Zm={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Km{constructor(s,d,g=!1){this.mousedown=w=>{this.startMove(w,D.mousePos(this.element,w)),D.addEventListener(window,"mousemove",this.mousemove),D.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,D.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHandler.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=D.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),D.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=D.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=d;const x=new zw;this._rotatePitchHandler=new Pc({clickTolerance:3,move:(w,k)=>{const A=d.getBoundingClientRect(),N=new o.P((A.bottom-A.top)/2,(A.right-A.left)/2);return{bearingDelta:o.cw(new o.P(w.x,k.y),k,N),pitchDelta:g?-.5*(k.y-w.y):void 0}},moveStateManager:x,enable:!0,assignEvents:()=>{}}),this.map=s,D.addEventListener(d,"mousedown",this.mousedown),D.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),D.addEventListener(d,"touchcancel",this.reset)}startMove(s,d){this._rotatePitchHandler.dragStart(s,d),D.disableDrag()}move(s,d){const g=this.map,{bearingDelta:x,pitchDelta:w}=this._rotatePitchHandler.dragMove(s,d)||{};x&&g.setBearing(g.getBearing()+x),w&&g.setPitch(g.getPitch()+w)}off(){const s=this.element;D.removeEventListener(s,"mousedown",this.mousedown),D.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend),D.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){D.enableDrag(),D.removeEventListener(window,"mousemove",this.mousemove),D.removeEventListener(window,"mouseup",this.mouseup),D.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),D.removeEventListener(window,"touchend",this.touchend)}}let Ka;function jc(b,s,d,g=!1){if(g||!d.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const x=new o.V(b.lng,b.lat);if(b=new o.V(b.lng,b.lat),s){const w=new o.V(b.lng-360,b.lat),k=new o.V(b.lng+360,b.lat),A=d.locationToScreenPoint(b).distSqr(s);d.locationToScreenPoint(w).distSqr(s)<A?b=w:d.locationToScreenPoint(k).distSqr(s)<A&&(b=k)}for(;Math.abs(b.lng-d.center.lng)>180;){const w=d.locationToScreenPoint(b);if(w.x>=0&&w.y>=0&&w.x<=d.width&&w.y<=d.height)break;b.lng>d.center.lng?b.lng-=360:b.lng+=360}return b.lng!==x.lng&&d.isPointOnMapSurface(d.locationToScreenPoint(b))?b:x}const fd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gh(b,s,d){const g=b.classList;for(const x in fd)g.remove(`maplibregl-${d}-anchor-${x}`);g.add(`maplibregl-${d}-anchor-${s}`)}class md extends o.E{constructor(s){if(super(),this._onKeyPress=d=>{const g=d.code,x=d.charCode||d.keyCode;g!=="Space"&&g!=="Enter"&&x!==32&&x!==13||this.togglePopup()},this._onMapClick=d=>{const g=d.originalEvent.target,x=this._element;this._popup&&(g===x||x.contains(g))&&this.togglePopup()},this._update=d=>{if(!this._map)return;const g=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!g)&&this._map.once("render",this._update),this._lngLat=jc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(x=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),D.setTransform(this._element,`${fd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${x}`),I.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const g=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=g}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=o.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=D.create("div");const d=D.createNS("http://www.w3.org/2000/svg","svg"),g=41,x=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${g}px`),d.setAttributeNS(null,"width",`${x}px`),d.setAttributeNS(null,"viewBox",`0 0 ${x} ${g}`);const w=D.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const k=D.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");const A=D.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of N){const ye=D.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",de.rx),ye.setAttributeNS(null,"ry",de.ry),A.appendChild(ye)}const O=D.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);const B=D.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(B);const K=D.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const Z=D.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(Z);const X=D.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"transform","translate(6.0, 7.0)"),X.setAttributeNS(null,"fill","#FFFFFF");const re=D.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=D.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const ce=D.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#FFFFFF"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962"),re.appendChild(le),re.appendChild(ce),k.appendChild(A),k.appendChild(O),k.appendChild(K),k.appendChild(X),k.appendChild(re),d.appendChild(k),d.setAttributeNS(null,"height",g*this._scale+"px"),d.setAttributeNS(null,"width",x*this._scale+"px"),this._element.appendChild(d),this._offset=o.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),Gh(this._element,this._anchor,"marker"),s&&s.className)for(const d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),s.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),D.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=o.V.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){const x=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){const s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,g;const x=(d=this._map)===null||d===void 0?void 0:d.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!x||w){const X=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==X&&(this._element.style.opacity=X))}if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const k=this._map,A=k.terrain.depthAtPoint(this._pos),N=k.terrain.getElevationForLngLatZoom(this._lngLat,k.transform.tileZoom);if(k.transform.lngLatToCameraDepth(this._lngLat,N)-A<.006)return void(this._element.style.opacity=this._opacity);const O=-this._offset.y/k.transform.pixelsPerMeter,B=Math.sin(k.getPitch()*Math.PI/180)*O,K=k.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),Z=k.transform.lngLatToCameraDepth(this._lngLat,N+B)-K>.006;!((g=this._popup)===null||g===void 0)&&g.isOpen()&&Z&&this._popup.remove(),this._element.style.opacity=Z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=o.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return(this._opacity===void 0||s===void 0&&d===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Ym={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ac=0,Al=!1;const Qm={maxWidth:100,unit:"metric"};function Hh(b,s,d){const g=d&&d.maxWidth||100,x=b._container.clientHeight/2,w=b._container.clientWidth/2,k=b.unproject([w-g/2,x]),A=b.unproject([w+g/2,x]),N=Math.round(b.project(A).x-b.project(k).x),O=Math.min(g,N,b._container.clientWidth),B=k.distanceTo(A);if(d&&d.unit==="imperial"){const K=3.2808*B;K>5280?Ml(s,O,K/5280,b._getUIString("ScaleControl.Miles")):Ml(s,O,K,b._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Ml(s,O,B/1852,b._getUIString("ScaleControl.NauticalMiles")):B>=1e3?Ml(s,O,B/1e3,b._getUIString("ScaleControl.Kilometers")):Ml(s,O,B,b._getUIString("ScaleControl.Meters"))}function Ml(b,s,d,g){const x=function(w){const k=Math.pow(10,`${Math.floor(w)}`.length-1);let A=w/k;return A=A>=10?10:A>=5?5:A>=3?3:A>=2?2:A>=1?1:function(N){const O=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*O)/O}(A),k*A}(d);b.style.width=s*(x/d)+"px",b.innerHTML=`${x}&nbsp;${g}`}const Zh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Xm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Kh(b){if(b){if(typeof b=="number"){const s=Math.round(Math.abs(b)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,b),"top-left":new o.P(s,s),"top-right":new o.P(-s,s),bottom:new o.P(0,-b),"bottom-left":new o.P(s,-s),"bottom-right":new o.P(-s,-s),left:new o.P(b,0),right:new o.P(-b,0)}}if(b instanceof o.P||Array.isArray(b)){const s=o.P.convert(b);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:o.P.convert(b.center||[0,0]),top:o.P.convert(b.top||[0,0]),"top-left":o.P.convert(b["top-left"]||[0,0]),"top-right":o.P.convert(b["top-right"]||[0,0]),bottom:o.P.convert(b.bottom||[0,0]),"bottom-left":o.P.convert(b["bottom-left"]||[0,0]),"bottom-right":o.P.convert(b["bottom-right"]||[0,0]),left:o.P.convert(b.left||[0,0]),right:o.P.convert(b.right||[0,0])}}return Kh(new o.P(0,0))}const Yh=_;h.AJAXError=o.cI,h.Event=o.l,h.Evented=o.E,h.LngLat=o.V,h.MercatorCoordinate=o.aa,h.Point=o.P,h.addProtocol=o.cJ,h.config=o.a,h.removeProtocol=o.cK,h.AttributionControl=Oi,h.BoxZoomHandler=_v,h.CanvasSource=or,h.CooperativeGesturesHandler=ia,h.DoubleClickZoomHandler=ld,h.DragPanHandler=Gm,h.DragRotateHandler=Hm,h.EdgeInsets=qr,h.FullscreenControl=class extends o.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){D.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=D.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);D.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=vt,h.GeolocateControl=class extends o.E{constructor(b){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",s)),this._finish()}},this._updateCamera=s=>{const d=new o.V(s.coords.longitude,s.coords.latitude),g=s.coords.accuracy,x=this._map.getBearing(),w=o.e({bearing:x},this.options.fitBoundsOptions),k=Nr.fromLngLat(d,g);this._map.fitBounds(k,w,{geolocateSource:!0})},this._updateMarker=s=>{if(s){const d=new o.V(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=s=>{if(this._map){if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&Al)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=D.create("button","maplibregl-ctrl-geolocate",this._container),D.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=D.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new md({element:this._dotElement}),this._circleElement=D.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new md({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{const g=(d==null?void 0:d[0])instanceof ResizeObserverEntry;d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||g||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},Ym,b)}onAdd(b){return this._map=b,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(s=!1){if(Ka!==void 0&&!s)return Ka;if(window.navigator.permissions===void 0)return Ka=!!window.navigator.geolocation,Ka;try{Ka=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Ka=!!window.navigator.geolocation}return Ka})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),D.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,Ac=0,Al=!1}_isOutOfMapMaxBounds(b){const s=this._map.getMaxBounds(),d=b.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const b=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&b))return;const s=this._map.project(b),d=this._map.unproject([s.x+100,s.y]),g=b.distanceTo(d)/100,x=2*this._accuracy/g;this._circleElement.style.width=`${x.toFixed(2)}px`,this._circleElement.style.height=`${x.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ac--,Al=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ac++,Ac>1?(b={maximumAge:6e5,timeout:0},Al=!0):(b=this.options.positionOptions,Al=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const s=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(s!=="mercator"&&s?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=D.create("button","maplibregl-ctrl-globe",this._container),D.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){D.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=Fm,h.ImageSource=dt,h.KeyboardHandler=kv,h.LngLatBounds=Nr,h.LogoControl=Fs,h.Map=class extends Ev{constructor(b){var s,d;o.cF.mark(o.cG.create);const g=Object.assign(Object.assign(Object.assign({},pd),b),{canvasContextAttributes:Object.assign(Object.assign({},pd.canvasContextAttributes),b.canvasContextAttributes)});if(g.minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const x=new Xr,w=new as;if(g.minZoom!==void 0&&x.setMinZoom(g.minZoom),g.maxZoom!==void 0&&x.setMaxZoom(g.maxZoom),g.minPitch!==void 0&&x.setMinPitch(g.minPitch),g.maxPitch!==void 0&&x.setMaxPitch(g.maxPitch),g.renderWorldCopies!==void 0&&x.setRenderWorldCopies(g.renderWorldCopies),g.transformConstrain!==null&&x.setConstrainOverride(g.transformConstrain),super(x,w,{bearingSnap:g.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new jv,this._controls=[],this._mapId=o.ag(),this._lostContextStyle={style:null,images:null},this._contextLost=A=>{A.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[O]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${O}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:A}))},this._contextRestored=A=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:A}))},this._onMapScroll=A=>{if(A.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=g.interactive,this._maxTileCacheSize=g.maxTileCacheSize,this._maxTileCacheZoomLevels=g.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},g.canvasContextAttributes),this._trackResize=g.trackResize===!0,this._bearingSnap=g.bearingSnap,this._centerClampedToGround=g.centerClampedToGround,this._refreshExpiredTiles=g.refreshExpiredTiles===!0,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions===!0,this._collectResourceTiming=g.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Av),g.locale),this._clickTolerance=g.clickTolerance,this._overridePixelRatio=g.pixelRatio,this._maxCanvasSize=g.maxCanvasSize,this._zoomLevelsToOverscale=g.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=g.transformCameraUpdate,this.transformConstrain=g.transformConstrain,this.cancelPendingTileRequestsWhileZooming=g.cancelPendingTileRequestsWhileZooming===!0,g.reduceMotion!==void 0&&(I.prefersReducedMotion=g.reduceMotion),this._imageQueueHandle=pe.addThrottleControl(()=>this.isMoving()),this._requestManager=new xe(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let A=!1;const N=Lm(O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())},50);this._resizeObserver=new ResizeObserver(O=>{A?N(O):A=!0}),this._resizeObserver.observe(this._container)}this.handlers=new cd(this,g),this._hash=g.hash&&new Fm(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,elevation:g.elevation,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch,roll:g.roll}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,o.e({},g.fitBoundsOptions,{duration:0}))));const k=typeof g.style=="string"||((d=(s=g.style)===null||s===void 0?void 0:s.projection)===null||d===void 0?void 0:d.type)!=="globe";this.resize(null,k),this._localIdeographFontFamily=g.localIdeographFontFamily,this._validateStyle=g.validateStyle,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new Oi(typeof g.attributionControl=="boolean"?void 0:g.attributionControl)),g.maplibreLogo&&this.addControl(new Fs,g.logoPosition),this.on("style.load",()=>{if(k||this._resizeTransform(),this.transform.unmodified){const A=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(A)}}),this.on("data",A=>{this._update(A.dataType==="style"),this.fire(new o.l(`${A.dataType}data`,A))}),this.on("dataloading",A=>{this.fire(new o.l(`${A.dataType}dataloading`,A))}),this.on("dataabort",A=>{this.fire(new o.l("sourcedataabort",A))})}_getMapId(){return this._mapId}setGlobalStateProperty(b,s){return this.style.setGlobalStateProperty(b,s),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(b,s){if(s===void 0&&(s=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=b.onAdd(this);this._controls.push(b);const g=this._controlPositions[s];return s.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const s=this._controls.indexOf(b);return s>-1&&this._controls.splice(s,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}coveringTiles(b){return Ft(this.transform,b)}calculateCameraOptionsFromTo(b,s,d,g){return g==null&&this.terrain&&(g=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,s,d,g)}resize(b,s=!0){const[d,g]=this._containerDimensions(),x=this._getClampedPixelRatio(d,g);if(this._resizeCanvas(d,g,x),this.painter.resize(d,g,x),this.painter.overLimit()){const k=this.painter.context.gl;this._maxCanvasSize=[k.drawingBufferWidth,k.drawingBufferHeight];const A=this._getClampedPixelRatio(d,g);this._resizeCanvas(d,g,A),this.painter.resize(d,g,A)}this._resizeTransform(s);const w=!this._moving;return w&&(this.stop(),this.fire(new o.l("movestart",b)).fire(new o.l("move",b))),this.fire(new o.l("resize",b)),w&&this.fire(new o.l("moveend",b)),this}_resizeTransform(b=!0){var s;const[d,g]=this._containerDimensions();this.transform.resize(d,g,b),(s=this._requestedCameraState)===null||s===void 0||s.resize(d,g,b)}_getClampedPixelRatio(b,s){const{0:d,1:g}=this._maxCanvasSize,x=this.getPixelRatio(),w=b*x,k=s*x;return Math.min(w>d?d/w:1,k>g?g/k:1)*x}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(Nr.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}setTransformConstrain(b){return this.transform.setConstrainOverride(b),this._update()}project(b){return this.transform.locationToScreenPoint(o.V.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(o.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,s,d){if(b==="mouseenter"||b==="mouseover"){let g=!1;return{layers:s,listener:d,delegates:{mousemove:w=>{const k=s.filter(N=>this.getLayer(N)),A=k.length!==0?this.queryRenderedFeatures(w.point,{layers:k}):[];A.length?g||(g=!0,d.call(this,new pn(b,this,w.originalEvent,{features:A}))):g=!1},mouseout:()=>{g=!1}}}}if(b==="mouseleave"||b==="mouseout"){let g=!1;return{layers:s,listener:d,delegates:{mousemove:k=>{const A=s.filter(N=>this.getLayer(N));(A.length!==0?this.queryRenderedFeatures(k.point,{layers:A}):[]).length?g=!0:g&&(g=!1,d.call(this,new pn(b,this,k.originalEvent)))},mouseout:k=>{g&&(g=!1,d.call(this,new pn(b,this,k.originalEvent)))}}}}{const g=x=>{const w=s.filter(A=>this.getLayer(A)),k=w.length!==0?this.queryRenderedFeatures(x.point,{layers:w}):[];k.length&&(x.features=k,d.call(this,x),delete x.features)};return{layers:s,listener:d,delegates:{[b]:g}}}}_saveDelegatedListener(b,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(s)}_removeDelegatedListener(b,s,d){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const g=this._delegatedListeners[b];for(let x=0;x<g.length;x++){const w=g[x];if(w.listener===d&&w.layers.length===s.length&&w.layers.every(k=>s.includes(k))){for(const k in w.delegates)this.off(k,w.delegates[k]);return void g.splice(x,1)}}}on(b,s,d){if(d===void 0)return super.on(b,s);const g=typeof s=="string"?[s]:s,x=this._createDelegatedListener(b,g,d);this._saveDelegatedListener(b,x);for(const w in x.delegates)this.on(w,x.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(b,g,d)}}}once(b,s,d){if(d===void 0)return super.once(b,s);const g=typeof s=="string"?[s]:s,x=this._createDelegatedListener(b,g,d);for(const w in x.delegates){const k=x.delegates[w];x.delegates[w]=(...A)=>{this._removeDelegatedListener(b,g,d),k(...A)}}this._saveDelegatedListener(b,x);for(const w in x.delegates)this.once(w,x.delegates[w]);return this}off(b,s,d){return d===void 0?super.off(b,s):(this._removeDelegatedListener(b,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(b,s){if(!this.style)return[];let d;const g=b instanceof o.P||Array.isArray(b),x=g?b:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(g?{}:b)||{},x instanceof o.P||typeof x[0]=="number")d=[o.P.convert(x)];else{const w=o.P.convert(x[0]),k=o.P.convert(x[1]);d=[w,new o.P(k.x,w.y),k,new o.P(w.x,k.y),w]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(b,s){return this.style.querySourceFeatures(b,s)}setStyle(b,s){return(s=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(b,s))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const s=this._locale[b];if(s==null)throw new Error(`Missing UI string '${b}'`);return s}_updateStyle(b,s){var d,g;if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,s));const x=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new $u(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,s,x):this.style.loadJSON(b,s,x),this):((g=(d=this.style)===null||d===void 0?void 0:d.projection)===null||g===void 0||g.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new $u(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,s){if(typeof b=="string"){const d=this._requestManager.transformRequest(b,"Style");o.j(d,new AbortController).then(g=>{this._updateDiff(g.data,s)}).catch(g=>{g&&this.fire(new o.k(g))})}else typeof b=="object"&&this._updateDiff(b,s)}_updateDiff(b,s){try{this.style.setState(b,s)&&this._update(!0)}catch(d){o.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(b,s)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(b,s){return this._lazyInitEmptyStyle(),this.style.addSource(b,s),this._update(!0)}isSourceLoaded(b){const s=this.style&&this.style.tileManagers[b];if(s!==void 0)return s.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const s=this.style.tileManagers[b.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&s.reload();for(const d in this.style._layers){const g=this.style._layers[d];g.type==="hillshade"&&g.source===b.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),g.type==="color-relief"&&g.source===b.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new qw(this.painter,s,b),this.painter.renderToTexture=new _n(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=d=>{var g;d.dataType==="style"?this.terrain.tileManager.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((g=d.source)===null||g===void 0?void 0:g.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:b})),this}getTerrain(){var b,s;return(s=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&s!==void 0?s:null}areTilesLoaded(){const b=this.style&&this.style.tileManagers;for(const s in b){const d=b[s]._tiles;for(const g in d){const x=d[g];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,s,d){if(d){const g=this.getSource(d);if(!g)throw new Error(`There is no source with ID "${d}", cannot set LOD parameters`);g.calculateTileZoom=De(Math.max(1,b),Math.max(1,s))}else for(const g in this.style.tileManagers)this.style.tileManagers[g].getSource().calculateTileZoom=De(Math.max(1,b),Math.max(1,s));return this._update(!0),this}refreshTiles(b,s){const d=this.style.tileManagers[b];if(!d)throw new Error(`There is no tile manager with ID "${b}", cannot refresh tile`);s===void 0?d.reload(!0):d.refreshTiles(s.map(g=>new o.ad(g.z,g.x,g.y)))}addImage(b,s,d={}){const{pixelRatio:g=1,sdf:x=!1,stretchX:w,stretchY:k,content:A,textFitWidth:N,textFitHeight:O}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||o.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:B,height:K,data:Z}=s,X=s;return this.style.addImage(b,{data:new o.R({width:B,height:K},new Uint8Array(Z)),pixelRatio:g,stretchX:w,stretchY:k,content:A,textFitWidth:N,textFitHeight:O,sdf:x,version:0,userImage:X}),X.onAdd&&X.onAdd(this,b),this}}{const{width:B,height:K,data:Z}=I.getImageData(s);this.style.addImage(b,{data:new o.R({width:B,height:K},Z),pixelRatio:g,stretchX:w,stretchY:k,content:A,textFitWidth:N,textFitHeight:O,sdf:x,version:0})}}updateImage(b,s){const d=this.style.getImage(b);if(!d)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=s instanceof HTMLImageElement||o.b(s)?I.getImageData(s):s,{width:x,height:w,data:k}=g;if(x===void 0||w===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(x!==d.data.width||w!==d.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const A=!(s instanceof HTMLImageElement||o.b(s));return d.data.replace(k,A),this.style.updateImage(b,d),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return pe.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,s){return this._lazyInitEmptyStyle(),this.style.addLayer(b,s),this._update(!0)}moveLayer(b,s){return this.style.moveLayer(b,s),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,s,d){return this.style.setLayerZoomRange(b,s,d),this._update(!0)}setFilter(b,s,d={}){return this.style.setFilter(b,s,d),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,s,d,g={}){return this.style.setPaintProperty(b,s,d,g),this._update(!0)}getPaintProperty(b,s){return this.style.getPaintProperty(b,s)}setLayoutProperty(b,s,d,g={}){return this.style.setLayoutProperty(b,s,d,g),this._update(!0)}getLayoutProperty(b,s){return this.style.getLayoutProperty(b,s)}setGlyphs(b,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,s,d,g=>{g||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,s,d=>{d||this._update(!0)}),this}setLight(b,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,s={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,s),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,s){return this.style.setFeatureState(b,s),this._update()}removeFeatureState(b,s){return this.style.removeFeatureState(b,s),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,s=0;return this._container&&(b=this._container.clientWidth||400,s=this._container.clientHeight||300),[b,s]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const s=this._canvasContainer=D.create("div","maplibregl-canvas-container",b);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=D.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),g=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],g);const x=this._controlContainer=D.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(k=>{w[k]=D.create("div",`maplibregl-ctrl-${k} `,x)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,s,d){this._canvas.width=Math.floor(d*b),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${s}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let s=null;this._canvas.addEventListener("webglcontextcreationerror",g=>{s={requestedAttributes:b},g&&(s.statusMessage=g.statusMessage,s.type=g.type)},{once:!0});let d=null;if(d=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!d){const g="Failed to initialize WebGL";throw s?(s.message=g,new Error(JSON.stringify(s))):new Error(g)}this.painter=new mv(d,this.transform),q.testSupport(d)}migrateProjection(b,s){super.migrateProjection(b,s),this.painter.transform=b,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var s,d,g,x,w;const k=this._idleTriggered?this._fadeDuration:0,A=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const K=this.transform.zoom,Z=F();this.style.zoomHistory.update(K,Z);const X=new o.H(K,{now:Z,fadeDuration:k,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),re=X.crossFadingFactor();re===1&&re===this._crossFadingFactor||(N=!0,this._crossFadingFactor=re),this.style.update(X)}const O=((d=this.style.projection)===null||d===void 0?void 0:d.transitionState)>0!==A;(g=this.style.projection)===null||g===void 0||g.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((x=this.style.projection)===null||x===void 0?void 0:x.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||O)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,k,this._crossSourceCollisions,O),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:k,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cF.mark(o.cG.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const B=this._sourcesDirty||this._styleDirty||this._placementDirty;return B||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||B||(this._fullyLoaded=!0,o.cF.mark(o.cG.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),pe.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),D.remove(this._canvasContainer),D.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cF.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,I.frame(this._frameRequest,b=>{o.cF.frame(b),this._frameRequest=null;try{this._render(b)}catch(s){if(!o.cH(s)&&!function(d){return d.message===Ih}(s))throw s}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return hd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},h.MapMouseEvent=pn,h.MapTouchEvent=rd,h.MapWheelEvent=El,h.Marker=md,h.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const s=this._map.getZoom(),d=s===this._map.getMaxZoom(),g=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(s,d)=>{const g=this._map._getUIString(`NavigationControl.${d}`);s.title=g,s.setAttribute("aria-label",g)},this.options=o.e({},Zm,b),this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),D.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),D.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=D.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Km(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){D.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,s){const d=D.create("button",b,this._container);return d.type="button",d.addEventListener("click",s),d}},h.Popup=class extends o.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&D.remove(this._content),this._container&&(D.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=D.create("div","maplibregl-popup",this._map.getContainer()),this._tip=D.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const k of this.options.className.split(" "))this._container.classList.add(k);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=jc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!s)return;const d=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationToScreenPoint(this._lngLat));let g=this.options.anchor;const x=Kh(this.options.offset);if(!g){const k=this._container.offsetWidth,A=this._container.offsetHeight;let N;N=d.y+x.bottom.y<A?["top"]:d.y>this._map.transform.height-A?["bottom"]:[],d.x<k/2?N.push("left"):d.x>this._map.transform.width-k/2&&N.push("right"),g=N.length===0?"bottom":N.join("-")}let w=d.add(x[g]);this.options.subpixelPositioning||(w=w.round()),D.setTransform(this._container,`${fd[g]} translate(${w.x}px,${w.y}px)`),Gh(this._container,g,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Zh),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.V.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const s=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=b;g=d.firstChild,g;)s.appendChild(g);return this.setDOMContent(s)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=D.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=D.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(Xm);b&&b.focus()}},h.RasterDEMTileSource=Be,h.RasterTileSource=Ee,h.ScaleControl=class{constructor(b){this._onMove=()=>{Hh(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Hh(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Qm),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){D.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=od,h.Style=$u,h.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=D.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=D.create("button","maplibregl-ctrl-terrain",this._container),D.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){D.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=qm,h.TwoFingersTouchRotateHandler=$m,h.TwoFingersTouchZoomHandler=Sv,h.TwoFingersTouchZoomRotateHandler=Pv,h.VectorTileSource=Dn,h.VideoSource=Tt,h.addSourceType=(b,s)=>o._(void 0,void 0,void 0,function*(){if(Tn(b))throw new Error(`A source type called "${b}" already exists.`);((d,g)=>{vr[d]=g})(b,s)}),h.clearPrewarmedResources=function(){const b=er;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(Wt),er=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=yh,h.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Kn().getRTLTextPluginStatus()},h.getVersion=function(){return Yh},h.getWorkerCount=function(){return wr.workerCount},h.getWorkerUrl=function(){return o.a.WORKER_URL},h.importScriptInWorkers=function(b){return ri().broadcast("IS",b)},h.isTimeFrozen=function(){return z.isFrozen()},h.now=F,h.prewarm=function(){Zn().acquire(Wt)},h.restoreNow=function(){z.restoreNow()},h.setMaxParallelImageRequests=function(b){o.a.MAX_PARALLEL_IMAGE_REQUESTS=b},h.setNow=function(b){z.setNow(b)},h.setRTLTextPlugin=function(b,s){return Kn().setRTLTextPlugin(b,s)},h.setWorkerCount=function(b){wr.workerCount=b},h.setWorkerUrl=function(b){o.a.WORKER_URL=b}});var u=r;return u})})(FB);var Cce=FB.exports;const Mp=kk(Cce),Id={southAfrica:{name:"South Africa",center:[24.9916,-28.4793],zoom:5,status:"LIVE",order:1,description:"Operational store, dispensary & partner factories - Fully compliant medical cannabis operations",locations:[{name:"Cape Town",coordinates:[18.4241,-33.9249],type:"operations-sales",cultivationArea:"15,000 m",productionCapacity:"2,500 kg/year",certifications:["GMP","EU-GMP","ISO 9001"],licensedPartner:"South African Health Products Regulatory Authority",regulatoryBody:"SAHPRA",medicalLicense:!0},{name:"Johannesburg",coordinates:[28.0473,-26.2041],type:"operations-only",cultivationArea:"8,000 m",productionCapacity:"1,200 kg/year",certifications:["GMP","ISO 9001"],licensedPartner:"South African Health Products Regulatory Authority",regulatoryBody:"SAHPRA",medicalLicense:!0}]},thailand:{name:"Thailand",center:[100.5018,13.7563],zoom:5,status:"LIVE",order:2,description:"Partner manufacturing facilities - Licensed cannabis production operations",locations:[{name:"Bangkok",coordinates:[100.5018,13.7563],type:"operations-only",cultivationArea:"10,000 m",productionCapacity:"1,500 kg/year",certifications:["Thai FDA","GMP","ISO 9001"],licensedPartner:"Thai Food and Drug Administration",regulatoryBody:"Thai FDA",medicalLicense:!0},{name:"Chiang Mai",coordinates:[98.9853,18.7883],type:"operations-only",cultivationArea:"6,000 m",productionCapacity:"800 kg/year",certifications:["Thai FDA","GMP"],licensedPartner:"Thai Food and Drug Administration",regulatoryBody:"Thai FDA",medicalLicense:!0}]},uk:{name:"United Kingdom",center:[-3.436,55.3781],zoom:5,status:"NEXT",order:3,description:"Coming Soon - Licensed partner facility pending MHRA regulatory approval",locations:[{name:"London",coordinates:[-.1276,51.5074],type:"operations-sales",cultivationArea:"10,000 m",productionCapacity:"1,800 kg/year",certifications:["GMP","MHRA Approved"],licensedPartner:"UK Medicines and Healthcare products Regulatory Agency",regulatoryBody:"MHRA",medicalLicense:!0},{name:"Manchester",coordinates:[-2.2426,53.4808],type:"export-only",cultivationArea:"N/A",productionCapacity:"N/A",certifications:["Export License","UK Distribution"],licensedPartner:"UK Medicines and Healthcare products Regulatory Agency",regulatoryBody:"MHRA",medicalLicense:!0}]},portugal:{name:"Portugal",center:[-8.2245,39.3999],zoom:6,status:"UPCOMING",order:4,description:"Coming Soon (after UK) - Main production, processing & shipping hub with EU GMP certification",locations:[{name:"Lisbon",coordinates:[-9.1393,38.7223],type:"operations-sales",cultivationArea:"12,000 m",productionCapacity:"2,000 kg/year",certifications:["EU-GMP","ISO 22000","Organic Certified"],licensedPartner:"INFARMED - Portuguese Medicines Authority",regulatoryBody:"INFARMED",medicalLicense:!0},{name:"Porto",coordinates:[-8.6291,41.1579],type:"export-only",cultivationArea:"N/A",productionCapacity:"N/A",certifications:["Export License","EU Distribution"],licensedPartner:"INFARMED - Portuguese Medicines Authority",regulatoryBody:"INFARMED",medicalLicense:!0}]}},Pce=({selectedCountry:e,onCountrySelect:t})=>{const r=U.useRef(null),n=U.useRef(null),a=U.useRef([]),[u,h]=U.useState(!1),[o,_]=U.useState("all"),[T,P]=U.useState(!1),[E,M]=U.useState([]),[I,z]=U.useState(!1),[F,D]=U.useState(!1),[q,$]=U.useState(0),W=U.useRef(null);U.useEffect(()=>{if(!r.current)return;const pe={version:8,sources:{osm:{type:"raster",tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"&copy; OpenStreetMap Contributors",maxzoom:19}},layers:[{id:"background",type:"background",paint:{"background-color":"hsl(72, 12%, 85%)"}},{id:"osm",type:"raster",source:"osm",minzoom:0,maxzoom:22,paint:{"raster-opacity":.85,"raster-saturation":-.2,"raster-contrast":.15,"raster-brightness-min":.2,"raster-brightness-max":.85}},{id:"brand-overlay",type:"background",paint:{"background-color":"#a2b756","background-opacity":.06}}]};n.current=new Mp.Map({container:r.current,style:pe,center:[24.9916,-28.4793],zoom:5,attributionControl:!1});const xe=new Mp.NavigationControl({visualizePitch:!1,showCompass:!1});n.current.addControl(xe,"top-right");const Re=document.querySelector(".maplibregl-ctrl-top-right");return Re&&(Re.style.zIndex="25"),n.current.on("load",()=>{h(!0)}),()=>{var Me;a.current.forEach(pt=>pt.remove()),a.current=[],(Me=n.current)==null||Me.remove(),W.current&&clearInterval(W.current)}},[]),U.useEffect(()=>{if(!F||!u){W.current&&(clearInterval(W.current),W.current=null);return}const pe=[];if(Object.values(Id).forEach(Me=>{Me.locations.forEach(pt=>{pe.push({location:pt,country:Me})})}),pe.length===0)return;const xe=()=>{$(Me=>{const pt=(Me+1)%pe.length,{location:Oe,country:Ye}=pe[pt];return n.current&&n.current.flyTo({center:Oe.coordinates,zoom:7,duration:2e3,curve:1.2,essential:!0}),pt})},{location:Re}=pe[q];return n.current&&n.current.flyTo({center:Re.coordinates,zoom:7,duration:2e3,curve:1.2,essential:!0}),W.current=setInterval(xe,4e3),()=>{W.current&&(clearInterval(W.current),W.current=null)}},[F,u,q]);const te=()=>{D(!F),F&&$(0)},se=["GMP","EU-GMP","ISO 9001","ISO 22000","Organic Certified"],he=pe=>{M(xe=>xe.includes(pe)?xe.filter(Re=>Re!==pe):[...xe,pe])};return U.useEffect(()=>{if(!n.current||!u)return;const pe=e?Id[e]:null;pe?n.current.flyTo({center:pe.center,zoom:pe.zoom,duration:1500,essential:!0,curve:1.42}):n.current.flyTo({center:[20,20],zoom:2,duration:1500}),a.current.forEach(Re=>Re.remove()),a.current=[],(e?[Id[e]]:Object.values(Id)).forEach(Re=>{Re.locations.forEach((Me,pt)=>{if(o!=="all"&&Me.type!==o||E.length>0&&!E.some(wt=>{var Lt;return(Lt=Me.certifications)==null?void 0:Lt.some(Wt=>Wt.includes(wt)||wt.includes(Wt))}))return;const Oe=document.createElement("div");Oe.className="marker",Oe.style.width="32px",Oe.style.height="32px",Oe.style.borderRadius="50%",Oe.style.cursor="pointer",Oe.style.transition="all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1)",Oe.style.boxShadow="0 4px 20px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1), 0 0 0 3px white";const Ye={"operations-sales":"hsl(var(--map-sage))","export-only":"hsl(var(--map-sage-light))","operations-only":"hsl(var(--map-sage-dark))"},Ge={"operations-sales":"#a2b756","export-only":"#b8c97a","operations-only":"#8a9e48"};Oe.style.backgroundColor=Ge[Me.type],setTimeout(()=>{Oe.style.opacity="1",Oe.style.transform="scale(1)"},pt*100),Oe.style.opacity="0",Oe.style.transform="scale(0)";const rt=new Mp.Popup({offset:15,className:"map-quick-tooltip",closeButton:!1,maxWidth:"240px",closeOnClick:!1}).setHTML(`
            <div style="padding: 10px 14px; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: rgba(255, 255, 255, 0.97); backdrop-filter: blur(12px); border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.15), 0 0 0 1px rgba(162, 183, 86, 0.2); border: 1px solid rgba(162, 183, 86, 0.25);">
              <div style="font-weight: 700; font-size: 13px; margin-bottom: 4px; color: ${Ye[Me.type]}; letter-spacing: -0.2px;">${Me.name}</div>
              <div style="font-size: 11px; color: #8a9e48; margin-bottom: 6px;">${Re.name}</div>
              ${Me.cultivationArea?`
                <div style="display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 4px;">
                  <span style="color: #b8c97a;">Area:</span>
                  <span style="color: #3A3E30; font-weight: 600;">${Me.cultivationArea}</span>
                </div>
              `:""}
              ${Me.productionCapacity?`
                <div style="display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 4px;">
                  <span style="color: #b8c97a;">Capacity:</span>
                  <span style="color: #3A3E30; font-weight: 600;">${Me.productionCapacity}</span>
                </div>
              `:""}
              ${Me.certifications&&Me.certifications.length>0?`
                <div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid rgba(162, 183, 86, 0.2);">
                  <div style="font-size: 9px; color: #b8c97a; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;">Certifications</div>
                  <div style="display: flex; flex-wrap: wrap; gap: 4px;">
                    ${Me.certifications.slice(0,3).map(yt=>`<span style="display: inline-block; background: ${Ye[Me.type]}; color: white; padding: 3px 8px; border-radius: 5px; font-size: 9px; font-weight: 600;">${yt}</span>`).join("")}
                  </div>
                </div>
              `:""}
            </div>
          `);Oe.addEventListener("mouseenter",()=>{var yt;Oe.style.transform="scale(1.4) translateY(-4px)",Oe.style.boxShadow=`0 0 40px ${Ye[Me.type]}, 0 12px 32px rgba(0,0,0,0.3), 0 0 0 4px white`,Oe.style.zIndex="1000",rt.addTo(n.current),F||(yt=n.current)==null||yt.flyTo({center:Me.coordinates,zoom:Math.max(n.current.getZoom(),6),duration:800,curve:1.2,essential:!0})}),Oe.addEventListener("mouseleave",()=>{Oe.style.transform="scale(1)",Oe.style.boxShadow="0 4px 20px rgba(0,0,0,0.15), 0 1px 3px rgba(0,0,0,0.1), 0 0 0 3px white",Oe.style.zIndex="auto",rt.remove()}),Oe.addEventListener("click",yt=>{var wt;if(yt.stopPropagation(),new Mp.Popup({offset:35,className:"map-popup-detailed",closeButton:!0,maxWidth:"420px",closeOnClick:!0}).setLngLat(Me.coordinates).setHTML(`
              <div style="padding: 24px; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: hsl(0, 0%, 100%); border-radius: 16px;">
                <div style="display: flex; items-center: gap: 12px; margin-bottom: 16px;">
                  <div style="width: 48px; height: 48px; border-radius: 12px; background: linear-gradient(135deg, ${Ye[Me.type]}, ${Ye[Me.type]}dd); display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                      <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                      <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                  </div>
                  <div>
                    <h3 style="font-size: 20px; font-weight: 700; color: #3A3E30; margin: 0; line-height: 1.2;">${Me.name}</h3>
                    <p style="font-size: 13px; color: #97A275; margin: 4px 0 0 0;">${Re.name}</p>
                  </div>
                </div>

                <div style="background: #F5F6F2; padding: 12px; border-radius: 10px; margin-bottom: 16px;">
                  <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: #97A275; font-weight: 600; margin-bottom: 6px;">Facility Type</div>
                  <div style="font-size: 13px; font-weight: 600; color: ${Ye[Me.type]};">${nt[Me.type]}</div>
                </div>

                ${Me.cultivationArea||Me.productionCapacity?`
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px;">
                    ${Me.cultivationArea?`
                      <div>
                        <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: #97A275; font-weight: 600; margin-bottom: 4px;">Cultivation Area</div>
                        <div style="font-size: 16px; font-weight: 700; color: #3A3E30;">${Me.cultivationArea}</div>
                      </div>
                    `:""}
                    ${Me.productionCapacity?`
                      <div>
                        <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: #97A275; font-weight: 600; margin-bottom: 4px;">Production Capacity</div>
                        <div style="font-size: 16px; font-weight: 700; color: #3A3E30;">${Me.productionCapacity}</div>
                      </div>
                    `:""}
                  </div>
                `:""}

                ${Me.certifications&&Me.certifications.length>0?`
                  <div style="margin-bottom: 16px;">
                    <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: #97A275; font-weight: 600; margin-bottom: 8px;">Certifications</div>
                    <div style="display: flex; flex-wrap: wrap; gap: 6px;">
                      ${Me.certifications.map(Lt=>`<span style="display: inline-flex; background: linear-gradient(135deg, #F5F6F2, #E8EAE0); color: #7A8266; padding: 6px 12px; border-radius: 8px; font-size: 11px; font-weight: 700; border: 1.5px solid #D4D8C8; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">${Lt}</span>`).join("")}
                    </div>
                  </div>
                `:""}

                ${Me.licensedPartner?`
                  <div style="padding-top: 16px; border-top: 1px solid #E8EAE0;">
                    <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.8px; color: #97A275; font-weight: 600; margin-bottom: 4px;">Licensed Partner</div>
                    <div style="font-size: 12px; color: #3A3E30; font-weight: 500; line-height: 1.5;">${Me.licensedPartner}</div>
                  </div>
                `:""}
              </div>
            `).addTo(n.current),(wt=n.current)==null||wt.flyTo({center:Me.coordinates,zoom:8,duration:1500,curve:1.42,essential:!0}),t){const Lt=Object.keys(Id).find(Wt=>Id[Wt].name===Re.name);Lt&&t(Lt)}});const nt={"operations-sales":"Operations & Sales","export-only":"Export Sales Only","operations-only":"Operations Only"},Ve=Me.certifications&&Me.certifications.length>0?Me.certifications.map(yt=>`<span style="display: inline-block; background: #F5F6F2; color: #7A8266; padding: 4px 10px; border-radius: 6px; font-size: 10px; font-weight: 600; border: 1px solid #D4D8C8; margin-right: 4px; margin-bottom: 4px;">${yt}</span>`).join(""):'<span style="font-size: 12px; color: #97A275; font-style: italic;">None specified</span>',_e=window.innerWidth<640,Le=new Mp.Popup({offset:_e?25:35,className:"map-popup",closeButton:!1,maxWidth:_e?"280px":"380px",closeOnClick:!1}).setHTML(`
            <div style="padding: ${_e?"14px 16px":"20px 22px"}; font-family: 'Inter', system-ui, -apple-system, sans-serif; background: hsl(0, 0%, 100%); border-radius: ${_e?"12px":"16px"}; box-shadow: 0 20px 60px rgba(0,0,0,0.15), 0 0 1px rgba(0,0,0,0.1);">
              <!-- Licensed Partner Badge -->
              <div style="display: inline-flex; align-items: center; gap: ${_e?"4px":"6px"}; font-size: ${_e?"8px":"9px"}; color: #7A8266; background: #F5F6F2; padding: ${_e?"3px 8px":"4px 10px"}; border-radius: 6px; text-transform: uppercase; letter-spacing: 0.8px; font-weight: 700; margin-bottom: ${_e?"8px":"10px"}; border: 1px solid #D4D8C8;">
                <svg width="${_e?"8":"10"}" height="${_e?"8":"10"}" viewBox="0 0 10 10" fill="none" style="flex-shrink: 0;">
                  <path d="M5 0L6.12257 3.45492H9.75528L6.81636 5.59017L7.93893 9.04508L5 6.90983L2.06107 9.04508L3.18364 5.59017L0.244718 3.45492H3.87743L5 0Z" fill="#7A8266"/>
                </svg>
                Licensed Partner
              </div>
              
              <div style="font-weight: 700; font-size: ${_e?"15px":"18px"}; margin-bottom: ${_e?"4px":"6px"}; color: #7A8266; letter-spacing: -0.4px; line-height: 1.2;">${Re.name}</div>
              <div style="font-size: ${_e?"13px":"15px"}; color: #97A275; margin-bottom: ${_e?"10px":"14px"}; font-weight: 500;">${Me.name}</div>
              <div style="display: inline-flex; align-items: center; gap: ${_e?"4px":"6px"}; font-size: ${_e?"9px":"11px"}; color: #7A8266; background: #F5F6F2; padding: ${_e?"4px 10px":"6px 12px"}; border-radius: ${_e?"6px":"8px"}; text-transform: uppercase; letter-spacing: 0.6px; font-weight: 700; margin-bottom: ${_e?"10px":"14px"}; border: 1px solid #D4D8C8;">
                <div style="width: ${_e?"5px":"6px"}; height: ${_e?"5px":"6px"}; border-radius: 50%; background: #7A8266;"></div>
                ${nt[Me.type]}
              </div>
              
              ${Me.licensedPartner?`
              <div style="margin-bottom: ${_e?"8px":"10px"}; padding-bottom: ${_e?"8px":"10px"}; border-bottom: 1.5px solid #E8EAE0;">
                <div style="font-size: ${_e?"9px":"10px"}; color: #97A275; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: ${_e?"3px":"4px"};">Regulatory Authority</div>
                <div style="font-size: ${_e?"11px":"12px"}; color: #3A3E30; font-weight: 600; line-height: 1.4;">${Me.licensedPartner}</div>
                ${Me.regulatoryBody?`<div style="font-size: ${_e?"9px":"10px"}; color: #7A8266; font-weight: 700; margin-top: 2px;">${Me.regulatoryBody}</div>`:""}
              </div>
              `:""}
              
              ${Me.cultivationArea?`
              <div style="margin-bottom: ${_e?"8px":"10px"}; padding-bottom: ${_e?"8px":"10px"}; border-bottom: 1.5px solid #E8EAE0;">
                <div style="font-size: ${_e?"9px":"10px"}; color: #97A275; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: ${_e?"3px":"4px"};">Cultivation Area</div>
                <div style="font-size: ${_e?"13px":"14px"}; color: #3A3E30; font-weight: 700;">${Me.cultivationArea}</div>
              </div>
              `:""}
              
              ${Me.productionCapacity?`
              <div style="margin-bottom: ${_e?"8px":"10px"}; padding-bottom: ${_e?"8px":"10px"}; border-bottom: 1.5px solid #E8EAE0;">
                <div style="font-size: ${_e?"9px":"10px"}; color: #97A275; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: ${_e?"3px":"4px"};">Production Capacity</div>
                <div style="font-size: ${_e?"13px":"14px"}; color: #3A3E30; font-weight: 700;">${Me.productionCapacity}</div>
              </div>
              `:""}
              
              <div style="margin-bottom: ${_e?"8px":"10px"}; padding-bottom: ${_e?"8px":"10px"}; border-bottom: 1.5px solid #E8EAE0;">
                <div style="font-size: ${_e?"9px":"10px"}; color: #97A275; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px; margin-bottom: ${_e?"4px":"6px"};">Certifications</div>
                <div style="display: flex; flex-wrap: wrap; gap: ${_e?"3px":"4px"};">
                  ${Ve}
                </div>
              </div>
              
              ${Me.medicalLicense?`
              <div style="margin-bottom: ${_e?"8px":"10px"}; padding: ${_e?"6px 10px":"8px 12px"}; background: #F5F6F2; border-radius: ${_e?"6px":"8px"}; border: 1px solid #D4D8C8;">
                <div style="font-size: ${_e?"9px":"10px"}; color: #7A8266; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px;"> Medical License Active</div>
              </div>
              `:""}
              
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: ${_e?"8px":"0"};">
                <span style="font-size: ${_e?"10px":"11px"}; color: #97A275; font-weight: 600; text-transform: uppercase; letter-spacing: 0.8px;">Status</span>
                <span style="font-size: ${_e?"12px":"13px"}; color: #7A8266; font-weight: 700; letter-spacing: 0.2px;">${Re.status}</span>
              </div>
              
              ${_e?"":`
              <!-- Compliance Disclaimer -->
              <div style="margin-top: 12px; padding-top: 12px; border-top: 1.5px solid #E8EAE0; font-size: 9px; color: #97A275; line-height: 1.5; font-style: italic;">
                All operations conducted by licensed partners. Digital Key holders do not handle or sell cannabis products directly. Blockchain-verified seed-to-sale traceability ensures regulatory compliance.
              </div>
              `}
            </div>
          `),ft=new Mp.Marker(Oe).setLngLat(Me.coordinates).setPopup(Le).addTo(n.current);ft.getElement().dataset.tooltip="true",a.current.push(ft)})})},[e,u,o,E,F]),f.jsxs("div",{className:"relative w-full h-full",children:[f.jsx("div",{className:"absolute top-28 right-4 sm:right-6 z-20 max-w-xs hidden sm:block",children:f.jsxs("div",{className:"relative bg-gradient-to-br from-background/95 via-background/90 to-background/85 dark:from-background/95 dark:via-background/90 dark:to-background/85 backdrop-blur-xl rounded-2xl shadow-[0_10px_40px_0_rgba(0,0,0,0.25),0_4px_16px_0_rgba(0,0,0,0.15)] border-2 border-primary/30 dark:border-primary/40 p-4 overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-[0_12px_48px_0_rgba(0,0,0,0.35),0_4px_20px_0_rgba(0,0,0,0.2)] hover:border-primary/50",onClick:()=>P(!T),children:[f.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-secondary to-primary rounded-t-2xl"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-transparent pointer-events-none rounded-2xl"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary/20 flex items-center justify-center flex-shrink-0",children:f.jsx(s9,{className:"w-4 h-4 text-primary"})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("div",{className:"text-sm font-bold text-foreground",children:"Licensed Partner Network"}),f.jsx(_o,{className:`w-4 h-4 text-muted-foreground transition-transform duration-300 ${T?"rotate-180":""}`})]}),f.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"All facilities operate under licensed partners with full regulatory compliance."})]})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-500 ease-in-out ${T?"max-h-96 opacity-100 mt-4":"max-h-0 opacity-0"}`,children:f.jsxs("div",{className:"pt-4 border-t border-border space-y-3",children:[f.jsxs("div",{children:[f.jsx("div",{className:"text-[10px] font-bold text-foreground mb-1.5 uppercase tracking-wide",children:"Key Features"}),f.jsxs("ul",{className:"space-y-1.5 text-xs text-muted-foreground",children:[f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-primary mt-0.5",children:""}),f.jsx("span",{children:"Blockchain-verified seed-to-sale traceability"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-primary mt-0.5",children:""}),f.jsx("span",{children:"Licensed partners in multiple regulated markets"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-primary mt-0.5",children:""}),f.jsx("span",{children:"GMP & EU-GMP certified facilities"})]}),f.jsxs("li",{className:"flex items-start gap-2",children:[f.jsx("span",{className:"text-primary mt-0.5",children:""}),f.jsx("span",{children:"Full regulatory compliance in all jurisdictions"})]})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[10px] font-bold text-foreground mb-1.5 uppercase tracking-wide",children:"Active Regions"}),f.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[f.jsx("span",{className:"px-2 py-1 bg-primary/15 text-primary text-[10px] rounded-md font-semibold border border-primary/30",children:"South Africa"}),f.jsx("span",{className:"px-2 py-1 bg-primary/15 text-primary text-[10px] rounded-md font-semibold border border-primary/30",children:"Portugal"}),f.jsx("span",{className:"px-2 py-1 bg-muted text-muted-foreground text-[10px] rounded-md font-semibold border border-border",children:"UK (Coming)"})]})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-[10px] font-bold text-foreground mb-1.5 uppercase tracking-wide",children:"Strains & Genetics"}),f.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Access to diverse cannabis strains and genetics through our licensed partner network for consistent, high-quality production."})]}),f.jsx("div",{className:"pt-2 text-[10px] text-muted-foreground italic leading-relaxed",children:"Digital Key NFT holders participate in revenue-sharing without direct product handling."})]})})]})]})}),f.jsx("div",{className:"absolute bottom-4 left-4 sm:bottom-6 sm:left-6 z-30",children:f.jsx(Zr,{size:"lg",onClick:te,className:"gap-2 font-semibold shadow-2xl hover:shadow-[0_0_30px_rgba(77,191,161,0.4)] transition-all duration-300",children:F?f.jsxs(f.Fragment,{children:[f.jsx(e9,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden sm:inline",children:"Stop Tour"})]}):f.jsxs(f.Fragment,{children:[f.jsx(t9,{className:"w-5 h-5"}),f.jsx("span",{className:"hidden sm:inline",children:"Auto Tour"})]})})}),f.jsx("div",{className:"absolute top-4 left-4 sm:top-6 sm:left-6 z-30 bg-background backdrop-blur-md rounded-2xl shadow-2xl border border-border/60 p-3",children:f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx("div",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider mb-1 px-2",children:"Filter Locations"}),f.jsx(Zr,{size:"sm",variant:o==="all"?"default":"ghost",onClick:()=>_("all"),className:"justify-start text-sm font-semibold h-9",children:"All Locations"}),f.jsxs(Zr,{size:"sm",variant:o==="operations-sales"?"default":"ghost",onClick:()=>_("operations-sales"),className:"justify-start text-sm h-9",children:[f.jsx("div",{className:"w-3 h-3 rounded-full mr-2.5 border-2 shadow-sm",style:{backgroundColor:o==="operations-sales"?"hsl(var(--primary-foreground))":"hsl(142, 76%, 36%)",borderColor:o==="operations-sales"?"hsl(var(--primary-foreground))":"hsl(142, 76%, 36%)"}}),f.jsx("span",{className:"hidden sm:inline",children:"Operations & Sales"}),f.jsx("span",{className:"sm:hidden",children:"Ops & Sales"})]}),f.jsxs(Zr,{size:"sm",variant:o==="export-only"?"default":"ghost",onClick:()=>_("export-only"),className:"justify-start text-sm h-9",children:[f.jsx("div",{className:"w-3 h-3 rounded-full mr-2.5 border-2 shadow-sm",style:{backgroundColor:o==="export-only"?"hsl(var(--primary-foreground))":"hsl(160, 84%, 39%)",borderColor:o==="export-only"?"hsl(var(--primary-foreground))":"hsl(160, 84%, 39%)"}}),f.jsx("span",{className:"hidden sm:inline",children:"Export Only"}),f.jsx("span",{className:"sm:hidden",children:"Export"})]}),f.jsxs(Zr,{size:"sm",variant:o==="operations-only"?"default":"ghost",onClick:()=>_("operations-only"),className:"justify-start text-sm h-9",children:[f.jsx("div",{className:"w-3 h-3 rounded-full mr-2.5 border-2 shadow-sm",style:{backgroundColor:o==="operations-only"?"hsl(var(--primary-foreground))":"hsl(173, 58%, 39%)",borderColor:o==="operations-only"?"hsl(var(--primary-foreground))":"hsl(173, 58%, 39%)"}}),f.jsx("span",{className:"hidden sm:inline",children:"Operations Only"}),f.jsx("span",{className:"sm:hidden",children:"Operations"})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-border/40",children:[f.jsxs(Zr,{size:"sm",variant:"ghost",onClick:()=>z(!I),className:"justify-between text-sm h-9 w-full",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(QW,{className:"w-3.5 h-3.5"}),"Certifications"]}),f.jsx(_o,{className:`w-3.5 h-3.5 transition-transform ${I?"rotate-180":""}`})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ${I?"max-h-64 opacity-100 mt-2":"max-h-0 opacity-0"}`,children:f.jsxs("div",{className:"flex flex-col gap-1.5 px-2",children:[se.map(pe=>f.jsx(ga,{variant:E.includes(pe)?"default":"outline",className:"cursor-pointer justify-center text-xs py-1.5 transition-all hover:scale-105",onClick:()=>he(pe),children:pe},pe)),E.length>0&&f.jsx(Zr,{size:"sm",variant:"ghost",onClick:()=>M([]),className:"text-xs h-7 mt-1",children:"Clear All"})]})})]})]})}),f.jsx("div",{ref:r,className:"absolute inset-0 rounded-3xl overflow-hidden ring-1 ring-border/40"}),!u&&f.jsx("div",{className:"absolute inset-0 bg-background/95 backdrop-blur-sm rounded-3xl flex items-center justify-center",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx("div",{className:"w-16 h-16 border-[3px] border-primary/20 border-t-primary rounded-full animate-spin"}),f.jsx("p",{className:"text-muted-foreground text-base font-medium tracking-wide",children:"Loading map..."})]})})]})},Ece=()=>{const[e,t]=U.useState(null),r=Object.entries(Id).sort(([,a],[,u])=>a.order-u.order).map(([a,u])=>({id:a,...u})),n=a=>{switch(a){case"LIVE":return"bg-gradient-to-r from-emerald-500/20 to-emerald-600/20 text-emerald-700 dark:text-emerald-400 border-emerald-300/50 shadow-emerald-200/50";case"NEXT":return"bg-gradient-to-r from-primary/20 to-primary/10 text-primary border-primary/30 shadow-primary/20";case"UPCOMING":return"bg-gradient-to-r from-slate-500/20 to-slate-600/20 text-slate-600 dark:text-slate-400 border-slate-300/50 shadow-slate-200/50"}};return f.jsx("div",{className:"px-2 mt-8",children:f.jsxs("section",{className:"relative py-16 sm:py-20 md:py-24 overflow-hidden rounded-2xl sm:rounded-3xl",style:{backgroundColor:"hsl(var(--section-color))"},children:[f.jsx("div",{className:"absolute top-20 left-0 opacity-5 pointer-events-none",children:f.jsxs("svg",{width:"150",height:"300",viewBox:"0 0 150 300",fill:"none",children:[f.jsx("path",{d:"M75 25 Q115 65 75 105 Q35 65 75 25",stroke:"currentColor",strokeWidth:"1",fill:"none",className:"text-white"}),f.jsx("path",{d:"M75 65 Q135 125 75 185 Q15 125 75 65",stroke:"currentColor",strokeWidth:"1",fill:"none",className:"text-white"}),f.jsx("path",{d:"M75 25 L75 275",stroke:"currentColor",strokeWidth:"1",className:"text-white"})]})}),f.jsx("div",{className:"absolute bottom-20 right-0 opacity-5 pointer-events-none rotate-180",children:f.jsxs("svg",{width:"150",height:"300",viewBox:"0 0 150 300",fill:"none",children:[f.jsx("path",{d:"M75 25 Q115 65 75 105 Q35 65 75 25",stroke:"currentColor",strokeWidth:"1",fill:"none",className:"text-white"}),f.jsx("path",{d:"M75 65 Q135 125 75 185 Q15 125 75 65",stroke:"currentColor",strokeWidth:"1",fill:"none",className:"text-white"}),f.jsx("path",{d:"M75 25 L75 275",stroke:"currentColor",strokeWidth:"1",className:"text-white"})]})}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/10 pointer-events-none"}),f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:f.jsxs("div",{className:"w-full max-w-7xl mx-auto",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"text-center mb-14 sm:mb-18 relative z-10",children:[f.jsx("h2",{className:"text-4xl sm:text-5xl md:text-6xl font-semibold font-jakarta text-white mb-5 tracking-tight drop-shadow-lg",style:{letterSpacing:"-0.02em"},children:"Global Presence"}),f.jsx("p",{className:"text-lg sm:text-xl text-white/80 font-jakarta max-w-2xl mx-auto leading-relaxed drop-shadow-md",children:"Strategic expansion across three countries, building a comprehensive medical cannabis network"})]})}),f.jsx(Qe,{delay:.1,children:f.jsx("div",{className:"relative h-[450px] sm:h-[500px] md:h-[600px] mb-14 sm:mb-18 rounded-2xl overflow-hidden shadow-2xl border border-white/10",children:f.jsx(Pce,{selectedCountry:e,onCountrySelect:t})})}),f.jsx(Qe,{delay:.2,children:f.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 relative z-10",children:r.map((a,u)=>f.jsxs("button",{onClick:()=>t(e===a.id?null:a.id),className:`
                      group relative p-6 rounded-2xl border transition-all duration-500 overflow-hidden text-left
                      ${e===a.id?"border-primary/60 shadow-2xl scale-[1.02] bg-gradient-to-br from-card via-card to-primary/5":"border-border/30 bg-gradient-to-br from-card to-card/95 hover:border-primary/50 hover:shadow-xl hover:scale-[1.01] hover:-translate-y-1"}
                    `,style:{animationDelay:`${u*50}ms`},children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-br transition-opacity duration-500 ${e===a.id?"from-primary/10 via-transparent to-secondary/10 opacity-100":"from-primary/5 via-transparent to-secondary/5 opacity-0 group-hover:opacity-100"}`}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"flex items-start justify-between mb-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`
                            w-14 h-14 rounded-xl flex items-center justify-center transition-all duration-500 shadow-lg
                            ${e===a.id?"bg-gradient-to-br from-primary to-primary/80 scale-110":"bg-gradient-to-br from-muted to-muted/80 group-hover:from-primary/20 group-hover:to-primary/10 group-hover:scale-105"}
                          `,children:f.jsx(E3,{className:`w-7 h-7 transition-all duration-500 ${e===a.id?"text-white":"text-muted-foreground group-hover:text-primary"}`,strokeWidth:2.5})}),f.jsxs("div",{className:"text-left",children:[f.jsx("h3",{className:"text-lg font-semibold font-jakarta text-foreground mb-0.5 group-hover:text-primary transition-colors duration-300",children:a.name}),f.jsxs("p",{className:"text-xs text-muted-foreground font-jakarta font-medium uppercase tracking-wider",children:["Stage ",a.order]})]})]}),f.jsx(ga,{variant:"outline",className:`font-jakarta font-bold tracking-wider text-[10px] px-3 py-1 rounded-full border-2 shadow-lg transition-all duration-300 ${n(a.status)}`,children:a.status})]}),f.jsx("p",{className:"text-sm text-muted-foreground font-jakarta leading-relaxed mb-5 min-h-[60px]",children:a.description}),f.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-muted/50 text-foreground transition-all duration-300 group-hover:bg-muted group-hover:shadow-md",children:[f.jsx(S3,{className:"w-4 h-4 text-primary"}),f.jsxs("span",{className:"font-jakarta font-semibold",children:[a.locations.length," Locations"]})]}),a.status==="LIVE"&&f.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-xl bg-gradient-to-r from-emerald-500/15 to-emerald-600/15 text-emerald-700 dark:text-emerald-400 border border-emerald-300/50 shadow-sm transition-all duration-300 group-hover:shadow-md group-hover:scale-105",children:[f.jsx(I3,{className:"w-4 h-4"}),f.jsx("span",{className:"font-jakarta font-bold",children:"Active"})]})]})]}),f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})})]},a.id))})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"mt-14 p-6 rounded-2xl bg-gradient-to-br from-muted/40 to-muted/20 border border-border/40 backdrop-blur-sm shadow-lg relative z-10 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-secondary/5 opacity-50"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("h4",{className:"text-sm font-semibold font-jakarta text-foreground mb-5 tracking-wide uppercase flex items-center gap-2",children:[f.jsx("div",{className:"w-1 h-4 bg-gradient-to-b from-primary to-secondary rounded-full"}),"Operation Types"]}),f.jsxs("div",{className:"grid sm:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"group flex items-center gap-3 p-4 rounded-xl bg-gradient-to-br from-card to-card/80 border border-border/30 shadow-sm hover:shadow-md hover:scale-[1.02] transition-all duration-300",children:[f.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:"hsl(82, 55%, 62%)"}}),f.jsx("span",{className:"text-sm text-foreground font-jakarta font-medium",children:"Operations & Sales"})]}),f.jsxs("div",{className:"group flex items-center gap-3 p-4 rounded-xl bg-gradient-to-br from-card to-card/80 border border-border/30 shadow-sm hover:shadow-md hover:scale-[1.02] transition-all duration-300",children:[f.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:"hsl(88, 48%, 58%)"}}),f.jsx("span",{className:"text-sm text-foreground font-jakarta font-medium",children:"Export Sales Only"})]}),f.jsxs("div",{className:"group flex items-center gap-3 p-4 rounded-xl bg-gradient-to-br from-card to-card/80 border border-border/30 shadow-sm hover:shadow-md hover:scale-[1.02] transition-all duration-300",children:[f.jsx("div",{className:"w-5 h-5 rounded-full shadow-md group-hover:scale-110 transition-transform duration-300",style:{backgroundColor:"hsl(85, 42%, 70%)"}}),f.jsx("span",{className:"text-sm text-foreground font-jakarta font-medium",children:"Operations Only"})]})]})]})]})})]})})]})})},jce=()=>{const[e,t]=U.useState(!1),r=U.useRef(null),{scrollYProgress:n}=Nu({target:r,offset:["start start","end start"]}),a=gs(n,[0,1],["0%","50%"]),u=gs(n,[0,1],[1,.3]);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:t}),f.jsxs("main",{className:"pt-24",children:[f.jsxs("section",{ref:r,className:"relative h-[500px] overflow-hidden",children:[f.jsx(ir.img,{src:tx,alt:"Manufacturing facility",className:"absolute inset-0 w-full h-full object-cover",style:{y:a,opacity:u}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/40 via-background/60 to-background"}),f.jsx("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 h-full flex flex-col justify-center",children:f.jsxs(Qe,{children:[f.jsx("h1",{className:"text-5xl md:text-6xl font-semibold text-foreground mb-4",children:"Manufacture & Distribution"}),f.jsx("p",{className:"text-xl text-muted-foreground/80 max-w-2xl",children:"Every stage from cultivation through extraction to final production is meticulously managed with unwavering attention to detail. Our EU GMP-certified products meet the highest international standards, earning trust across borders."})]})})]}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center max-w-6xl mx-auto",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground leading-tight mb-6",children:"Production & Processing Excellence"}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:"With our production partner Dr Green's state-of-the-art global facilities spanning more than 18,000 square metres dedicated to pharmaceutical-grade cannabis production alongside fully EU GMP approved facilities, this allows us to consistently break barriers delivering excellence."})]}),f.jsxs(Qe,{delay:.2,children:[f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-4",children:"Our operational store and dispensary in South Africa, combined with partner manufacturing facilities in South Africa and Thailand, form the foundation of our current operations. Portugal serves as our main production, processing, and shipping hubwith UK operations launching soon, followed by Portugal going fully live."}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:"Each batch undergoes comprehensive testing, precise trimming, controlled drying and curing, and careful packaging to ensure consistent quality that meets stringent third-party standards."})]})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"text-4xl font-semibold text-foreground mb-12",children:"Manufacturing Excellence"})}),f.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(YW,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"EU GMP Certified"}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed",children:"Dr Green's EU GMP certified products meet the highest international standards"})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(fx,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Global Reach"}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed",children:"Currently live in South Africa and Thailand. UK coming soon, followed by Portugal."})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(TC,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Quality Assured"}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed",children:"Rigorous testing and quality control at every production stage"})]})}),f.jsx(Qe,{delay:.4,children:f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(A3,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3",children:"Diverse Products"}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed",children:"Comprehensive range of formats from flower to extracts"})]})})]})]})})}),f.jsx("section",{className:"py-16 md:py-24 mb-8",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h2",{className:"text-4xl font-semibold text-white mb-8",children:"Why partner with us?"}),f.jsx("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3",children:"Get in touch "})]})})})}),f.jsx(Ece,{}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground mb-6",children:"Advanced Extraction"}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:"Our cannabis extraction facilities manufacture pharmaceutical-grade CO2 extracts and distillates in diverse formats. Using state-of-the-art supercritical CO2 extraction technology, we produce consistent, high-purity cannabinoid products that meet GMP standards."}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-8",children:"From full-spectrum extracts to isolated cannabinoids, our extraction capabilities span the complete range of medicinal cannabis products."})]}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-12",children:[f.jsxs("div",{className:"card-linear p-6 hover-lift",children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Cannabinoid Profiles"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm",children:"Multiple strains and ratios available"})]}),f.jsxs("div",{className:"card-linear p-6 hover-lift",children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Product Formats"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm",children:"Oils, capsules, and medicinal preparations"})]}),f.jsxs("div",{className:"card-linear p-6 hover-lift",children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Quality Standards"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm",children:"GMP certified extraction processes"})]})]})}),f.jsx(Qe,{children:f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:"Our partner factories in South Africa and Thailand serve local and international markets. Portugal will become our main processing and shipping hub for European distribution. UK operations launching soon."})})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"max-w-6xl mx-auto",children:f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground mb-6",children:"Distribution & Wholesale"}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:"We support healthcare providers, pharmacies, and clinics with reliable supply chains. Currently operational in South Africa and Thailand. UK distribution launching soon, followed by Portugal as our European hub."})]})})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:e})]})})},BB=""+new URL("condition-anxiety-CxMvhO2z.jpg",import.meta.url).href,VB=""+new URL("condition-chronic-pain-D9RIxXbe.jpg",import.meta.url).href,$B=""+new URL("condition-arthritis-B8A5LcG4.jpg",import.meta.url).href,UB=""+new URL("condition-back-pain-C3uDPQ-H.jpg",import.meta.url).href,qB=""+new URL("condition-crps-D8HauqeD.jpg",import.meta.url).href,WB=""+new URL("condition-epilepsy-B0NJrocn.jpg",import.meta.url).href,GB=""+new URL("condition-insomnia-DC1JpdSs.jpg",import.meta.url).href,HB=""+new URL("condition-migraines-DRkjHxez.jpg",import.meta.url).href,ZB=""+new URL("condition-ms-B13Psp7X.jpg",import.meta.url).href,KB=""+new URL("condition-neuropathic-pain-BUdW2w5n.jpg",import.meta.url).href,YB=""+new URL("condition-parkinsons-AjKQdhmC.jpg",import.meta.url).href,QB=""+new URL("condition-ptsd-B0AEfd6Q.jpg",import.meta.url).href,Ace=()=>{const{t:e}=Mi("conditions"),[t,r]=U.useState("all"),[n,a]=U.useState(""),[u,h]=U.useState(!1),o=["all","painManagement","mentalHealth","neurological","sleepDisorders"],P=[{id:"anxiety",nameKey:"anxiety",image:BB,categoryKey:"mentalHealth"},{id:"chronic-pain",nameKey:"chronicPain",image:VB,categoryKey:"painManagement"},{id:"arthritis",nameKey:"arthritis",image:$B,categoryKey:"painManagement"},{id:"back-pain",nameKey:"backPain",image:UB,categoryKey:"painManagement"},{id:"complex-regional-pain-syndrome",nameKey:"crps",image:qB,categoryKey:"painManagement"},{id:"epilepsy",nameKey:"epilepsy",image:WB,categoryKey:"neurological"},{id:"insomnia",nameKey:"insomnia",image:GB,categoryKey:"sleepDisorders"},{id:"migraines",nameKey:"migraines",image:HB,categoryKey:"painManagement"},{id:"multiple-sclerosis",nameKey:"multipleSclerosis",image:ZB,categoryKey:"neurological"},{id:"neuropathic-pain",nameKey:"neuropathicPain",image:KB,categoryKey:"painManagement"},{id:"parkinsons-disease",nameKey:"parkinsons",image:YB,categoryKey:"neurological"},{id:"ptsd",nameKey:"ptsd",image:QB,categoryKey:"mentalHealth"}].map(E=>({...E,name:e(`conditionNames.${E.nameKey}`),category:e(`categories.${E.categoryKey}`)})).filter(E=>{const M=t==="all"||E.categoryKey===t,I=E.name.toLowerCase().includes(n.toLowerCase());return M&&I});return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{onMenuStateChange:h}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:e("hero.title")}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light mb-8",children:e("hero.subtitle")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 max-w-3xl font-light",children:e("hero.note")})]})})})}),f.jsx("section",{className:"py-12 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[f.jsxs("div",{className:"relative",children:[f.jsx(M3,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),f.jsx("input",{type:"text",placeholder:e("search.placeholder"),value:n,onChange:E=>a(E.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl bg-background border border-border/40 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200 text-foreground"})]}),f.jsx("div",{className:"flex flex-wrap gap-3",children:o.map(E=>f.jsx("button",{onClick:()=>r(E),className:`px-5 py-2.5 rounded-full font-medium transition-all duration-200 ${t===E?"bg-primary text-white shadow-lg":"bg-background border border-border/40 text-foreground hover:border-primary/50 hover:bg-primary/5"}`,children:e(`categories.${E}`)},E))})]})})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(ir.div,{layout:!0,className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 max-w-7xl mx-auto",children:f.jsx(oh,{mode:"popLayout",children:P.map(E=>f.jsx(ir.div,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,layout:{duration:.3}},children:f.jsxs(Gt,{to:`/conditions/${E.id}`,className:"group block bg-card rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 hover:-translate-y-2 border border-border/30",children:[f.jsx("div",{className:"h-48 overflow-hidden bg-gradient-to-br from-muted/30 to-muted/10",children:f.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-contain p-6 group-hover:scale-105 transition-transform duration-500"})}),f.jsxs("div",{className:"p-5",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2 group-hover:text-primary transition-colors",children:E.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:E.category})]})]})},E.id))})}),P.length===0&&f.jsx(Qe,{children:f.jsx("div",{className:"text-center py-16",children:f.jsx("p",{className:"text-xl text-muted-foreground",children:e("noResults")})})})]})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-white mb-6 tracking-tight",children:e("cta.title")}),f.jsx("p",{className:"text-lg md:text-xl text-white/80 mb-10 max-w-2xl mx-auto",children:e("cta.subtitle")}),f.jsx(Gt,{to:"/contact",children:f.jsxs("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3 text-lg",children:[e("cta.button")," "]})})]})})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:u})]})})},No=({conditionKey:e})=>{var E,M;const{t}=Mi("conditionPages"),[r,n]=U.useState(null),a=I=>{const z=document.getElementById(I);z&&z.scrollIntoView({behavior:"smooth",block:"start"})},u=[{id:"causes",title:t("common.causes")},{id:"symptoms",title:t("common.symptoms")},{id:"treatment",title:t("common.treatment")},{id:"cannabis",title:t("common.medicalCannabis")},{id:"faq",title:t("common.faq")}],h=t(`${e}.causes`,{returnObjects:!0}),o=t(`${e}.symptoms`,{returnObjects:!0}),_=t(`${e}.treatment`,{returnObjects:!0}),T=t(`${e}.medicalCannabis`,{returnObjects:!0}),P=t(`${e}.faq`,{returnObjects:!0});return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{}),f.jsxs("section",{className:"relative pt-32 pb-16 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-transparent"}),f.jsx("div",{className:"container mx-auto px-4 relative z-10",children:f.jsxs(Qe,{children:[f.jsx("h1",{className:"text-5xl md:text-6xl font-geist font-bold mb-6 text-foreground",children:t(`${e}.title`)}),f.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl font-geist",children:t(`${e}.subtitle`)})]})})]}),f.jsx("div",{className:"container mx-auto px-4 py-4",children:f.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground font-geist",children:[f.jsx(Gt,{to:"/",className:"hover:text-primary transition-colors",children:t("breadcrumbs.home")}),f.jsx(Pf,{className:"w-4 h-4"}),f.jsx(Gt,{to:"/conditions",className:"hover:text-primary transition-colors",children:t("breadcrumbs.conditions")}),f.jsx(Pf,{className:"w-4 h-4"}),f.jsx("span",{className:"text-foreground",children:t(`${e}.breadcrumb`)})]})}),f.jsx("section",{className:"py-16",children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsxs("div",{className:"grid lg:grid-cols-[300px,1fr] gap-12",children:[f.jsx("div",{className:"hidden lg:block",children:f.jsxs("div",{className:"sticky top-32 space-y-2",children:[f.jsx("h3",{className:"text-sm font-geist font-semibold text-foreground mb-4",children:t("toc.onThisPage")}),u.map(I=>f.jsx("button",{onClick:()=>a(I.id),className:"block w-full text-left px-4 py-2 text-sm text-muted-foreground hover:text-primary hover:bg-primary/5 rounded-lg transition-all font-geist",children:I.title},I.id))]})}),f.jsxs("div",{className:"space-y-16",children:[f.jsx(Qe,{children:f.jsxs("div",{id:"causes",className:"scroll-mt-32",children:[f.jsx("h2",{className:"text-3xl font-geist font-bold mb-6 text-foreground",children:h.title}),f.jsxs("div",{className:"prose prose-lg max-w-none",children:[h.content1&&f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed mb-4",children:h.content1}),h.content2&&f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed mb-4",children:h.content2}),h.content3&&f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed",children:h.content3}),h.intro&&f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed mb-6",children:h.intro}),h.items&&f.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:h.items.map((I,z)=>f.jsxs("div",{className:"p-6 rounded-xl bg-card border border-border",children:[f.jsx("h3",{className:"text-xl font-geist font-semibold mb-2 text-foreground",children:I.title}),f.jsx("p",{className:"text-muted-foreground font-geist",children:I.desc})]},z))})]})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"symptoms",className:"scroll-mt-32",children:[f.jsx("h2",{className:"text-3xl font-geist font-bold mb-6 text-foreground",children:o.title}),f.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(o).filter(([I])=>I!=="title"&&I!=="intro").map(([I,z])=>{var F;return f.jsxs("div",{className:"p-6 rounded-xl bg-card border border-border",children:[f.jsx("h3",{className:"text-xl font-geist font-semibold mb-4 text-foreground",children:z.title}),f.jsx("ul",{className:"space-y-3",children:(F=z.items)==null?void 0:F.map((D,q)=>f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2"}),f.jsx("span",{className:"text-muted-foreground font-geist",children:D})]},q))})]},I)})})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"treatment",className:"scroll-mt-32",children:[f.jsx("h2",{className:"text-3xl font-geist font-bold mb-6 text-foreground",children:_.title}),f.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:(E=_.items)==null?void 0:E.map((I,z)=>f.jsxs("div",{className:"p-6 rounded-xl bg-card border border-border",children:[f.jsx("h3",{className:"text-xl font-geist font-semibold mb-2 text-foreground",children:I.title}),f.jsx("p",{className:"text-muted-foreground font-geist",children:I.desc})]},z))})]})}),f.jsx(Qe,{children:f.jsx("div",{id:"cannabis",className:"scroll-mt-32",children:f.jsxs("div",{className:"p-8 rounded-2xl bg-primary/5 border border-primary/20",children:[f.jsx("h2",{className:"text-3xl font-geist font-bold mb-6 text-foreground",children:T.title}),f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed mb-4",children:T.content1}),f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed mb-6",children:T.content2}),f.jsx(Gt,{to:"/contact",children:f.jsx("button",{className:"btn-primary px-8 py-3",children:t("consultation")})})]})})}),f.jsx(Qe,{children:f.jsxs("div",{id:"faq",className:"scroll-mt-32",children:[f.jsx("h2",{className:"text-3xl font-geist font-bold mb-8 text-foreground",children:P.title}),f.jsx("div",{className:"space-y-4",children:(M=P.items)==null?void 0:M.map((I,z)=>f.jsxs("div",{className:"rounded-xl border border-border overflow-hidden",children:[f.jsxs("button",{onClick:()=>n(r===`q${z}`?null:`q${z}`),className:"w-full flex items-center justify-between p-6 text-left hover:bg-muted/30 transition-colors",children:[f.jsx("h3",{className:"text-lg font-geist font-semibold text-foreground pr-4",children:I.question}),f.jsx(ir.div,{animate:{rotate:r===`q${z}`?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:r===`q${z}`?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 pb-6",children:f.jsx("p",{className:"text-muted-foreground font-geist leading-relaxed",children:I.answer})})})]},z))})]})})]})]})})}),f.jsx("section",{className:"py-20",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-white mb-6",children:t("cta.title")}),f.jsx("p",{className:"text-lg text-white/80 mb-10 max-w-2xl mx-auto",children:t("cta.subtitle")}),f.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[f.jsx(Gt,{to:"/contact",children:f.jsx("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3 text-lg",children:t("cta.contact")})}),f.jsx(Gt,{to:"/conditions",children:f.jsx("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3 text-lg",children:t("cta.viewConditions")})})]})]})})})}),f.jsx(Ai,{}),f.jsx(ns,{})]})})},Mce=()=>f.jsx(No,{conditionKey:"chronicPain"}),Nce=()=>{const{t:e}=Mi("conditionPages"),[t,r]=U.useState(null),n=[{id:"causes",title:e("anxiety.toc.causes")},{id:"symptoms",title:e("anxiety.toc.symptoms")},{id:"types",title:e("anxiety.toc.types")},{id:"treatment",title:e("anxiety.toc.treatment")},{id:"medical-cannabis",title:e("anxiety.toc.medicalCannabis")},{id:"faq",title:e("anxiety.toc.faq")}],a=E=>{const M=document.getElementById(E);M&&M.scrollIntoView({behavior:"smooth",block:"start"})},u=e("anxiety.causes.items",{returnObjects:!0}),h=e("anxiety.symptoms.physical.items",{returnObjects:!0}),o=e("anxiety.symptoms.psychological.items",{returnObjects:!0}),_=e("anxiety.types.items",{returnObjects:!0}),T=e("anxiety.treatment.items",{returnObjects:!0}),P=e("anxiety.faq.items",{returnObjects:!0});return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx(ji,{}),f.jsxs("main",{className:"pt-24",children:[f.jsxs("section",{className:"relative py-32 overflow-hidden",style:{backgroundColor:"hsl(var(--section-color))"},children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl",children:[f.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 tracking-tight leading-[1.1]",children:e("anxiety.title")}),f.jsx("p",{className:"text-lg md:text-xl text-white/90 max-w-3xl font-light",children:e("anxiety.subtitle")})]})})})]}),f.jsx("section",{className:"py-6 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[f.jsx(Gt,{to:"/",className:"hover:text-primary transition-colors",children:e("breadcrumbs.home")}),f.jsx(Pf,{className:"w-4 h-4"}),f.jsx(Gt,{to:"/conditions",className:"hover:text-primary transition-colors",children:e("breadcrumbs.conditions")}),f.jsx(Pf,{className:"w-4 h-4"}),f.jsx("span",{className:"text-foreground",children:e("anxiety.title").split(" ")[0]})]})})}),f.jsx("section",{className:"py-20 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid lg:grid-cols-4 gap-12 max-w-7xl mx-auto",children:[f.jsx("aside",{className:"lg:col-span-1",children:f.jsx("div",{className:"sticky top-32",children:f.jsx(Qe,{variant:"fadeLeft",children:f.jsxs("div",{className:"bg-muted/30 rounded-xl p-6 border border-border/30",children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:e("toc.title")}),f.jsx("nav",{className:"space-y-2",children:n.map(E=>f.jsx("button",{onClick:()=>a(E.id),className:"block w-full text-left text-sm text-muted-foreground hover:text-primary transition-colors py-2 px-3 rounded-lg hover:bg-background",children:E.title},E.id))})]})})})}),f.jsxs("div",{className:"lg:col-span-3 space-y-16",children:[f.jsx(Qe,{children:f.jsxs("div",{id:"causes",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-6 tracking-tight",children:e("anxiety.causes.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("anxiety.causes.intro")}),f.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:u.map((E,M)=>f.jsxs("div",{className:"bg-muted/30 rounded-xl p-6 border border-border/30",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:E.title}),f.jsx("p",{className:"text-muted-foreground/80",children:E.desc})]},M))})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"symptoms",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-6 tracking-tight",children:e("anxiety.symptoms.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("anxiety.symptoms.intro")}),f.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:e("anxiety.symptoms.physical.title")}),f.jsx("ul",{className:"space-y-3",children:h.map((E,M)=>f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),f.jsx("span",{className:"text-muted-foreground/80",children:E})]},M))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:e("anxiety.symptoms.psychological.title")}),f.jsx("ul",{className:"space-y-3",children:o.map((E,M)=>f.jsxs("li",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-primary mt-2 flex-shrink-0"}),f.jsx("span",{className:"text-muted-foreground/80",children:E})]},M))})]})]})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"types",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-6 tracking-tight",children:e("anxiety.types.title")}),f.jsx("div",{className:"space-y-4",children:_.map((E,M)=>f.jsxs("div",{className:"bg-background rounded-xl p-6 border border-border/30",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:E.type}),f.jsx("p",{className:"text-muted-foreground/80",children:E.desc})]},M))})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"treatment",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-6 tracking-tight",children:e("anxiety.treatment.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("anxiety.treatment.intro")}),f.jsx("div",{className:"grid sm:grid-cols-2 gap-6",children:T.map((E,M)=>f.jsxs("div",{className:"bg-muted/30 rounded-xl p-6 border border-border/30",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:E.title}),f.jsx("p",{className:"text-muted-foreground/80",children:E.desc})]},M))})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"medical-cannabis",className:"bg-muted/20 rounded-2xl p-8 border border-border/30",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-6 tracking-tight",children:e("anxiety.medicalCannabis.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("anxiety.medicalCannabis.content1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("anxiety.medicalCannabis.content2")}),f.jsx(Gt,{to:"/contact",children:f.jsx("button",{className:"btn-primary px-8 py-3",children:e("consultation")})})]})}),f.jsx(Qe,{children:f.jsxs("div",{id:"faq",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-8 tracking-tight",children:e("anxiety.faq.title")}),f.jsx("div",{className:"space-y-4",children:P.map((E,M)=>f.jsxs("div",{className:"bg-background rounded-xl border border-border/30 overflow-hidden",children:[f.jsxs("button",{onClick:()=>r(t===`q${M}`?null:`q${M}`),className:"w-full flex items-center justify-between p-6 text-left hover:bg-muted/30 transition-colors",children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground pr-4",children:E.question}),f.jsx(ir.div,{animate:{rotate:t===`q${M}`?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:t===`q${M}`?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-6 pb-6",children:f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed",children:E.answer})})})]},M))})]})})]})]})})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-white mb-6 tracking-tight",children:e("cta.title")}),f.jsx("p",{className:"text-lg md:text-xl text-white/80 mb-10 max-w-2xl mx-auto",children:e("cta.subtitle")}),f.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[f.jsx(Gt,{to:"/contact",children:f.jsx("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3 text-lg",children:e("cta.contact")})}),f.jsx(Gt,{to:"/conditions",children:f.jsx("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-8 py-3 text-lg",children:e("cta.viewConditions")})})]})]})})})})]}),f.jsx(Ai,{}),f.jsx(ns,{})]})})},Ice=()=>f.jsx(No,{conditionKey:"crps"}),Rce=()=>f.jsx(No,{conditionKey:"arthritis"}),Dce=()=>f.jsx(No,{conditionKey:"backPain"}),Oce=()=>f.jsx(No,{conditionKey:"neuropathicPain"}),Lce=()=>f.jsx(No,{conditionKey:"migraines"}),Fce=()=>f.jsx(No,{conditionKey:"insomnia"}),zce=()=>f.jsx(No,{conditionKey:"ptsd"}),Bce=()=>f.jsx(No,{conditionKey:"epilepsy"}),Vce=()=>f.jsx(No,{conditionKey:"multipleSclerosis"}),$ce=()=>f.jsx(No,{conditionKey:"parkinsons"}),Uce=()=>{const{conditionId:e}=O5(),r={"chronic-pain":f.jsx(Mce,{}),anxiety:f.jsx(Nce,{}),"complex-regional-pain-syndrome":f.jsx(Ice,{}),arthritis:f.jsx(Rce,{}),"back-pain":f.jsx(Dce,{}),"neuropathic-pain":f.jsx(Oce,{}),migraines:f.jsx(Lce,{}),insomnia:f.jsx(Fce,{}),ptsd:f.jsx(zce,{}),epilepsy:f.jsx(Bce,{}),"multiple-sclerosis":f.jsx(Vce,{}),parkinsons:f.jsx($ce,{})}[e||""];return r||f.jsx(SZ,{to:"/conditions",replace:!0})},Tk=""+new URL("medical-products-hq-DvqJUIy3.jpg",import.meta.url).href,qce=""+new URL("clinic-consultation-BESl-dHG.jpg",import.meta.url).href,Wce=""+new URL("clinic-south-africa-D7zJA_G8.jpg",import.meta.url).href,Gce=""+new URL("clinic-uk-Ck52ukI4.jpg",import.meta.url).href,Hce=""+new URL("clinic-thailand-DakSRM4f.jpg",import.meta.url).href,Zce=""+new URL("clinic-portugal-Bog2oWp_.jpg",import.meta.url).href,Kce=""+new URL("clinic-doctor-patient-DMGwrxQB.jpg",import.meta.url).href,Q0=e=>{switch(e){case"live":return f.jsx(ga,{className:"bg-green-500/90 text-white border-0 hover:bg-green-500",children:"Live"});case"coming-soon":return f.jsx(ga,{className:"bg-amber-500/90 text-white border-0 hover:bg-amber-500",children:"Coming Soon"});case"factory-ops":return f.jsx(ga,{className:"bg-blue-500/90 text-white border-0 hover:bg-blue-500",children:"Factory Operations"})}},Yce=()=>{const{t:e}=Mi("clinics"),[t,r]=U.useState(!1),n=U.useRef(null),{scrollYProgress:a}=Nu({target:n,offset:["start start","end start"]}),u=gs(a,[0,1],["0%","50%"]),h=gs(a,[0,1],[1,.3]);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:r}),f.jsxs("main",{className:"pt-24",children:[f.jsxs("section",{ref:n,className:"relative h-[500px] overflow-hidden",children:[f.jsx(ir.img,{src:Tk,alt:"Medical cannabis clinic",className:"absolute inset-0 w-full h-full object-cover",style:{y:u,opacity:h}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/40 via-background/60 to-background"}),f.jsx("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 h-full flex flex-col justify-center",children:f.jsxs(Qe,{children:[f.jsx("h1",{className:"text-5xl md:text-6xl font-semibold text-foreground mb-4",children:e("hero.title")}),f.jsx("p",{className:"text-xl text-muted-foreground/80 max-w-2xl",children:e("hero.subtitle")})]})})]}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center max-w-6xl mx-auto",children:[f.jsx(Qe,{children:f.jsx("img",{src:qce,alt:"Medical cannabis clinic consultation",className:"w-full h-[400px] object-cover rounded-2xl shadow-lg"})}),f.jsxs(Qe,{delay:.2,children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground leading-tight mb-6",children:e("together.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-4",children:e("together.paragraph1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:e("together.paragraph2")})]})]})})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"flex justify-between items-center mb-12 max-w-6xl mx-auto",children:[f.jsx("h2",{className:"text-4xl font-semibold text-white",children:e("services.title")}),f.jsxs("button",{className:"btn-linear text-white border border-white/30 hover:bg-white/10 px-6 py-2",children:[e("services.learnMore")," "]})]})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8 hover-lift group h-full flex flex-col",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(gu,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:e("services.consultations.title")}),f.jsx("p",{className:"text-white/90 leading-relaxed flex-grow",children:e("services.consultations.description")})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8 hover-lift group h-full flex flex-col",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(Hb,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:e("services.treatment.title")}),f.jsx("p",{className:"text-white/90 leading-relaxed flex-grow",children:e("services.treatment.description")})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-2xl p-8 hover-lift group h-full flex flex-col",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(P3,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-2xl font-semibold text-white mb-4",children:e("services.support.title")}),f.jsx("p",{className:"text-white/90 leading-relaxed flex-grow",children:e("services.support.description")})]})})]})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto space-y-20",children:[f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[f.jsx(Qe,{children:f.jsx("img",{src:Wce,alt:"Medical cannabis clinic in South Africa",className:"w-full h-[400px] object-cover rounded-2xl shadow-lg"})}),f.jsxs(Qe,{delay:.2,children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground",children:e("regions.southAfrica.title")}),Q0("live")]}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("regions.southAfrica.paragraph1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-8",children:e("regions.southAfrica.paragraph2")})]})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[f.jsxs(Qe,{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground",children:e("regions.uk.title")}),Q0("coming-soon")]}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("regions.uk.paragraph1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-8",children:e("regions.uk.paragraph2")})]}),f.jsx(Qe,{delay:.2,children:f.jsx("img",{src:Gce,alt:"Medical cannabis clinic network in the United Kingdom",className:"w-full h-[400px] object-cover rounded-2xl shadow-lg"})})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[f.jsx(Qe,{children:f.jsx("img",{src:Hce,alt:"Medical cannabis clinics in Thailand",className:"w-full h-[400px] object-cover rounded-2xl shadow-lg"})}),f.jsxs(Qe,{delay:.2,children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground",children:e("regions.thailand.title")}),Q0("factory-ops")]}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("regions.thailand.paragraph1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-8",children:e("regions.thailand.paragraph2")})]})]}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[f.jsxs(Qe,{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("h2",{className:"text-4xl font-semibold text-foreground",children:e("regions.portugal.title")}),Q0("coming-soon")]}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("regions.portugal.paragraph1")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed mb-8",children:e("regions.portugal.paragraph2")})]}),f.jsx(Qe,{delay:.2,children:f.jsx("img",{src:Zce,alt:"Medical cannabis clinic facilities in Portugal",className:"w-full h-[400px] object-cover rounded-2xl shadow-lg"})})]})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsxs(Qe,{children:[f.jsxs("blockquote",{className:"text-3xl font-semibold text-foreground mb-8 text-center",children:['"',e("testimonial.quote"),'"']}),f.jsxs("div",{className:"flex items-center justify-center gap-4",children:[f.jsx("div",{className:"w-16 h-16 bg-muted rounded-full"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-foreground",children:e("testimonial.name")}),f.jsx("p",{className:"text-muted-foreground/80",children:e("testimonial.role")})]})]})]})})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx("div",{className:"max-w-4xl mx-auto",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[f.jsx(Qe,{children:f.jsx("img",{src:Kce,alt:"Doctor consulting with patient about medical cannabis",className:"w-full h-[300px] object-cover rounded-2xl shadow-lg"})}),f.jsxs(Qe,{delay:.2,children:[f.jsx("h2",{className:"text-3xl font-semibold text-foreground mb-6",children:e("cta.title")}),f.jsx("p",{className:"text-muted-foreground/80 mb-8",children:e("cta.description")}),f.jsxs("div",{className:"flex flex-wrap gap-3",children:[f.jsxs("button",{className:"btn-primary px-6 py-2.5",children:[e("cta.contactButton")," "]}),f.jsxs("button",{className:"btn-outline px-6 py-2.5",children:[e("cta.eligibilityButton")," "]})]})]})]})})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:t})]})})},Qce=()=>{const[e,t]=U.useState(null),[r,n]=U.useState(!1),a=U.useRef(null),{scrollYProgress:u}=Nu({target:a,offset:["start start","end start"]}),h=gs(u,[0,1],["0%","50%"]),o=gs(u,[0,1],[1,.3]),_=T=>{t(e===T?null:T)};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:n}),f.jsxs("main",{className:"pt-24",children:[f.jsxs("section",{ref:a,className:"relative h-[500px] overflow-hidden",children:[f.jsx(ir.img,{src:Tk,alt:"Online medical cannabis pharmacy",className:"absolute inset-0 w-full h-full object-cover",style:{y:h,opacity:o}}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-background/40 via-background/60 to-background"}),f.jsx("div",{className:"relative container mx-auto px-4 sm:px-6 lg:px-8 h-full flex flex-col justify-center",children:f.jsxs(Qe,{children:[f.jsx("h1",{className:"text-5xl md:text-6xl font-semibold text-foreground mb-4",children:"Online Medical Cannabis Pharmacy"}),f.jsx("p",{className:"text-xl text-muted-foreground/80 max-w-2xl",children:"Convenient, secure access to prescribed medical cannabis across South Africa, UK, Thailand, and Portugal"})]})})]}),f.jsx("section",{className:"py-16 md:py-20 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid md:grid-cols-2 gap-8 md:gap-12 items-start max-w-6xl mx-auto",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground leading-tight",children:"Access your prescribed medical cannabis safely and conveniently through our fully licensed online pharmacy platform"})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our online pharmacy combines cutting-edge technology with pharmaceutical excellence to deliver medical cannabis directly to patients across South Africa, the United Kingdom, Thailand, and Portugal. Every order is processed by qualified pharmacists and delivered with complete discretion."}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"We work exclusively with licensed healthcare providers to ensure that every patient receives the right product, at the right dose, with comprehensive guidance and support throughout their treatment journey."}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our platform is designed for ease of use while maintaining the highest standards of privacy, security, and regulatory compliance in each jurisdiction we serve."})]})})]})})}),f.jsx("section",{className:"py-16 md:py-20",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx(Qe,{children:f.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-10 md:mb-12",children:f.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white",children:"Why choose our pharmacy?"})})}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>_("convenience"),className:"w-full flex items-center justify-between p-5 md:p-6 text-left hover:bg-white/5 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(i9,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white",children:"Convenient home delivery"})]}),f.jsx(ir.div,{animate:{rotate:e==="convenience"?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 md:w-6 md:h-6 text-white flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:e==="convenience"?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-5 md:px-6 pb-5 md:pb-6",children:f.jsx("p",{className:"text-white/90 text-sm md:text-base leading-relaxed",children:"Receive your prescribed medical cannabis directly to your door in discreet, secure packaging. No need to visit a physical pharmacy - order online and we'll handle the rest with fast, reliable delivery services."})})})]}),f.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>_("fast"),className:"w-full flex items-center justify-between p-5 md:p-6 text-left hover:bg-white/5 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(GW,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white",children:"Fast prescription processing"})]}),f.jsx(ir.div,{animate:{rotate:e==="fast"?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 md:w-6 md:h-6 text-white flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:e==="fast"?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-5 md:px-6 pb-5 md:pb-6",children:f.jsx("p",{className:"text-white/90 text-sm md:text-base leading-relaxed",children:"Our qualified pharmacists review and process prescriptions quickly, ensuring you receive your medication without unnecessary delays. Most orders are dispatched within 24-48 hours."})})})]}),f.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>_("secure"),className:"w-full flex items-center justify-between p-5 md:p-6 text-left hover:bg-white/5 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(mx,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white",children:"Secure & compliant platform"})]}),f.jsx(ir.div,{animate:{rotate:e==="secure"?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 md:w-6 md:h-6 text-white flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:e==="secure"?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-5 md:px-6 pb-5 md:pb-6",children:f.jsx("p",{className:"text-white/90 text-sm md:text-base leading-relaxed",children:"Your personal and medical information is protected with bank-level encryption. Our platform is fully compliant with healthcare data regulations and pharmaceutical standards."})})})]}),f.jsxs("div",{className:"bg-white/5 backdrop-blur-sm border border-white/10 rounded-lg overflow-hidden",children:[f.jsxs("button",{onClick:()=>_("support"),className:"w-full flex items-center justify-between p-5 md:p-6 text-left hover:bg-white/5 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-white/30 to-white/10 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(XW,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-white",children:"Dedicated patient support"})]}),f.jsx(ir.div,{animate:{rotate:e==="support"?180:0},transition:{duration:.3},children:f.jsx(_o,{className:"w-5 h-5 md:w-6 md:h-6 text-white flex-shrink-0"})})]}),f.jsx(ir.div,{initial:!1,animate:{height:e==="support"?"auto":0},transition:{duration:.3},className:"overflow-hidden",children:f.jsx("div",{className:"px-5 md:px-6 pb-5 md:pb-6",children:f.jsx("p",{className:"text-white/90 text-sm md:text-base leading-relaxed",children:"Our team of experienced pharmacists and patient care specialists are available to answer questions, provide guidance on medication usage, and support you throughout your treatment."})})})]})]})]})})}),f.jsx("section",{className:"py-16 md:py-20 bg-muted/30",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-3 md:mb-4",children:"How it works"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 max-w-3xl mb-12 md:mb-16",children:"Getting your prescribed medical cannabis is simple with our streamlined online process, available across South Africa, the UK, Thailand, and Portugal."})]}),f.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 max-w-6xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"bg-background rounded-xl overflow-hidden shadow-lg group hover:shadow-xl transition-shadow",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden",children:f.jsx("img",{src:vw,alt:"Upload prescription",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),f.jsxs("div",{className:"p-5 md:p-6",children:[f.jsx("div",{className:"text-3xl font-bold text-primary mb-3",children:"01"}),f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-2 md:mb-3",children:"Upload prescription"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Create an account and securely upload your valid medical cannabis prescription from your healthcare provider."})]})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"bg-background rounded-xl overflow-hidden shadow-lg group hover:shadow-xl transition-shadow",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden",children:f.jsx("img",{src:tx,alt:"Pharmacist review",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),f.jsxs("div",{className:"p-5 md:p-6",children:[f.jsx("div",{className:"text-3xl font-bold text-primary mb-3",children:"02"}),f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-2 md:mb-3",children:"Pharmacist review"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Our qualified pharmacists verify your prescription and prepare your order with care and precision."})]})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"bg-background rounded-xl overflow-hidden shadow-lg group hover:shadow-xl transition-shadow sm:col-span-2 lg:col-span-1",children:[f.jsx("div",{className:"h-48 md:h-56 overflow-hidden",children:f.jsx("img",{src:Tk,alt:"Secure delivery",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),f.jsxs("div",{className:"p-5 md:p-6",children:[f.jsx("div",{className:"text-3xl font-bold text-primary mb-3",children:"03"}),f.jsx("h3",{className:"text-xl md:text-2xl font-bold text-foreground mb-2 md:mb-3",children:"Secure delivery"}),f.jsx("p",{className:"text-sm md:text-base text-muted-foreground leading-relaxed",children:"Receive your medication in discreet packaging with tracked delivery, ensuring safe arrival at your doorstep."})]})]})})]})]})}),f.jsx("section",{className:"py-16 md:py-20",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-3 md:mb-4",children:"Stay in the loop"}),f.jsx("p",{className:"text-white/80 text-base md:text-lg mb-8 md:mb-10",children:"Sign up to be kept up-to-date with the latest updates on Curaleaf International."})]}),f.jsx(Qe,{delay:.2,children:f.jsxs("form",{className:"grid sm:grid-cols-2 gap-4 md:gap-6",children:[f.jsx("input",{type:"text",placeholder:"First Name",className:"px-4 py-3 rounded bg-white/10 border border-white/20 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"}),f.jsx("input",{type:"email",placeholder:"Email address",className:"px-4 py-3 rounded bg-white/10 border border-white/20 text-white placeholder:text-white/50 focus:outline-none focus:ring-2 focus:ring-white/30"}),f.jsx("button",{type:"submit",className:"sm:col-span-2 px-6 py-3 bg-white/10 hover:bg-white/20 border border-white/30 text-white rounded transition-all font-semibold",children:"Sign up"})]})})]})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:r})]})})},SD=({variant:e="leaf",className:t})=>e==="cannabis-line-art"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 400 140",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M0 120 Q30 118 60 115 Q90 112 110 105 Q130 98 145 90",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M145 90 Q135 95 130 105 Q128 115 135 120 Q145 125 155 118 Q165 110 160 95 Q158 85 165 80",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M165 80 Q155 75 145 60 Q142 55 140 48 Q138 42 142 38 Q145 35 148 38 Q152 42 155 50 Q158 58 168 65",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M168 65 Q160 55 155 40 Q152 30 155 22 Q158 16 162 20 Q166 26 170 38 Q174 50 180 58",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M180 58 Q175 45 178 28 Q180 18 185 12 Q190 8 194 14 Q198 22 196 38 Q194 52 195 60",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M195 60 Q195 42 200 22 Q203 10 208 5 Q213 2 218 8 Q223 16 222 32 Q220 48 225 58",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M225 58 Q228 45 235 28 Q240 18 248 14 Q254 10 258 18 Q260 28 255 45 Q250 58 252 65",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M252 65 Q258 50 268 38 Q275 28 282 26 Q288 24 290 32 Q290 42 282 55 Q275 65 272 72",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M272 72 Q280 62 290 55 Q298 50 305 52 Q310 56 308 64 Q304 72 295 78 Q285 84 278 85",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M278 85 Q285 92 295 100 Q310 110 330 115 Q360 120 400 120",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none"})]}):e==="cannabis-leaf-elegant"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 120 180",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M60 175 L60 140",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),f.jsx("ellipse",{cx:"60",cy:"85",rx:"32",ry:"55",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),f.jsx("path",{d:"M45 60 Q40 55 42 48 Q48 52 50 58 Q46 56 45 60",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M75 60 Q80 55 78 48 Q72 52 70 58 Q74 56 75 60",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M40 80 Q34 75 36 68 Q42 72 44 78 Q40 76 40 80",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M80 80 Q86 75 84 68 Q78 72 76 78 Q80 76 80 80",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M42 100 Q36 96 38 90 Q44 93 46 98 Q42 96 42 100",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M78 100 Q84 96 82 90 Q76 93 74 98 Q78 96 78 100",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M50 115 Q45 112 47 106 Q52 109 54 114 Q50 112 50 115",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M70 115 Q75 112 73 106 Q68 109 66 114 Q70 112 70 115",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M55 70 Q52 65 54 58 Q58 62 60 68 Q56 66 55 70",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M65 70 Q68 65 66 58 Q62 62 60 68 Q64 66 65 70",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M55 90 Q52 85 54 78 Q58 82 60 88 Q56 86 55 90",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M65 90 Q68 85 66 78 Q62 82 60 88 Q64 86 65 90",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M38 65 Q32 60 28 58",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M82 65 Q88 60 92 58",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M35 85 Q28 82 24 80",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M85 85 Q92 82 96 80",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M38 105 Q32 103 28 102",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M82 105 Q88 103 92 102",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M50 45 Q48 40 46 35",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M70 45 Q72 40 74 35",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M60 35 Q60 28 60 22",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round",opacity:"0.6"}),f.jsx("path",{d:"M30 75 Q22 70 18 75 Q24 74 30 75",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M90 75 Q98 70 102 75 Q96 74 90 75",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M32 95 Q24 92 20 96 Q26 95 32 95",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M88 95 Q96 92 100 96 Q94 95 88 95",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M45 125 Q40 128 36 132 Q42 130 48 128",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M75 125 Q80 128 84 132 Q78 130 72 128",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("circle",{cx:"48",cy:"55",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"72",cy:"55",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"42",cy:"75",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"78",cy:"75",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"45",cy:"95",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"75",cy:"95",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"55",cy:"65",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"65",cy:"65",r:"1",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"60",cy:"80",r:"1",fill:"currentColor",opacity:"0.3"})]}):e==="cannabis-bud"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 100 140",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:`M50 135 L50 100\r
             Q48 95 45 88 Q42 80 40 72 Q38 62 40 52 Q42 42 48 35 Q50 30 50 25\r
             Q50 30 52 35 Q58 42 60 52 Q62 62 60 72 Q58 80 55 88 Q52 95 50 100`,stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none"}),f.jsx("path",{d:"M45 75 Q42 70 44 65 Q48 68 45 75",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M55 75 Q58 70 56 65 Q52 68 55 75",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M48 60 Q45 55 47 50 Q50 53 48 60",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M52 60 Q55 55 53 50 Q50 53 52 60",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M50 45 Q48 40 50 35 Q52 40 50 45",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M43 85 Q40 82 42 78 Q45 80 43 85",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M57 85 Q60 82 58 78 Q55 80 57 85",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M44 68 Q40 65 38 62",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M56 68 Q60 65 62 62",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M46 55 Q42 52 40 50",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M54 55 Q58 52 60 50",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M48 42 Q45 38 43 36",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M52 42 Q55 38 57 36",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M50 28 Q48 24 47 22",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M50 28 Q52 24 53 22",stroke:"currentColor",strokeWidth:"0.5",strokeLinecap:"round"}),f.jsx("path",{d:"M38 78 Q32 75 28 80 Q34 78 38 78",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M62 78 Q68 75 72 80 Q66 78 62 78",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M42 55 Q36 50 32 52 Q38 52 42 55",stroke:"currentColor",strokeWidth:"0.8",fill:"none"}),f.jsx("path",{d:"M58 55 Q64 50 68 52 Q62 52 58 55",stroke:"currentColor",strokeWidth:"0.8",fill:"none"})]}):e==="organic-wave"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 400 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[f.jsx("path",{d:"M0 40 C 50 20, 80 60, 130 35 S 180 55, 230 40 S 280 20, 330 45 S 370 30, 400 40",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M0 50 C 60 35, 90 65, 140 45 S 190 60, 240 48 S 290 35, 340 52 S 380 40, 400 50",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.2"}),f.jsx("path",{d:"M80 38 Q 75 28, 85 25",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.25"}),f.jsx("path",{d:"M200 42 Q 195 32, 205 28",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.25"}),f.jsx("path",{d:"M320 48 Q 315 38, 325 35",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.25"}),f.jsx("circle",{cx:"85",cy:"25",r:"2",fill:"currentColor",opacity:"0.2"}),f.jsx("circle",{cx:"205",cy:"28",r:"2",fill:"currentColor",opacity:"0.2"}),f.jsx("circle",{cx:"325",cy:"35",r:"2",fill:"currentColor",opacity:"0.2"})]}):e==="cannabis-leaf"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 100 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M50 115 L50 60",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",opacity:"0.4"}),f.jsx("path",{d:"M50 60 Q 50 35, 50 15 Q 48 25, 45 35 Q 48 40, 50 45 Q 52 40, 55 35 Q 52 25, 50 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",opacity:"0.35"}),f.jsx("path",{d:"M50 65 Q 35 55, 15 40 Q 28 52, 40 58 Q 32 48, 20 35",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M50 75 Q 40 68, 25 60 Q 35 65, 42 70",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.25"}),f.jsx("path",{d:"M50 65 Q 65 55, 85 40 Q 72 52, 60 58 Q 68 48, 80 35",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M50 75 Q 60 68, 75 60 Q 65 65, 58 70",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.25"}),f.jsx("circle",{cx:"50",cy:"15",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"15",cy:"40",r:"1.5",fill:"currentColor",opacity:"0.2"}),f.jsx("circle",{cx:"85",cy:"40",r:"1.5",fill:"currentColor",opacity:"0.2"})]}):e==="leaf"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 120 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M60 100 Q 60 60, 60 20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",opacity:"0.6"}),f.jsx("path",{d:"M60 80 Q 30 70, 20 50",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M60 60 Q 35 50, 25 35",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M60 40 Q 40 32, 35 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M60 80 Q 90 70, 100 50",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M60 60 Q 85 50, 95 35",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M60 40 Q 80 32, 85 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("circle",{cx:"20",cy:"50",r:"3",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"100",cy:"50",r:"3",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"60",cy:"15",r:"4",fill:"currentColor",opacity:"0.4"})]}):e==="branch"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 200 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M10 40 Q 50 35, 100 40 T 190 40",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M40 40 Q 35 25, 45 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M70 38 Q 75 55, 65 60",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M100 40 Q 95 25, 105 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M130 42 Q 135 58, 125 62",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M160 40 Q 155 25, 165 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("circle",{cx:"45",cy:"20",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"65",cy:"60",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"105",cy:"18",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"125",cy:"62",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"165",cy:"20",r:"2",fill:"currentColor",opacity:"0.3"})]}):e==="corner"?f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M10 90 Q 10 50, 50 50 T 90 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M25 70 Q 15 60, 20 50",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M50 50 Q 55 40, 65 42",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("path",{d:"M70 30 Q 80 25, 85 15",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.3"}),f.jsx("circle",{cx:"20",cy:"50",r:"3",fill:"currentColor",opacity:"0.25"}),f.jsx("circle",{cx:"65",cy:"42",r:"2",fill:"currentColor",opacity:"0.25"}),f.jsx("circle",{cx:"85",cy:"15",r:"2",fill:"currentColor",opacity:"0.25"})]}):f.jsxs("svg",{className:St("text-primary",t),viewBox:"0 0 300 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{d:"M150 35 Q 150 20, 150 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",opacity:"0.5"}),f.jsx("path",{d:"M150 25 Q 135 18, 130 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M150 25 Q 165 18, 170 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",fill:"none",opacity:"0.4"}),f.jsx("path",{d:"M120 20 L 30 20",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.2"}),f.jsx("path",{d:"M180 20 L 270 20",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",fill:"none",opacity:"0.2"}),f.jsx("circle",{cx:"30",cy:"20",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"270",cy:"20",r:"2",fill:"currentColor",opacity:"0.3"}),f.jsx("circle",{cx:"150",cy:"5",r:"3",fill:"currentColor",opacity:"0.4"})]}),Xce=()=>{const{t:e}=Mi("research"),[t,r]=U.useState(""),[n,a]=U.useState("all"),[u,h]=U.useState(!1),o=["all","painManagement","mentalHealth","neurological","sleepDisorders"],P=Object.entries({painManagement:[{id:"chronic-pain",nameKey:"chronicPain",image:VB},{id:"arthritis",nameKey:"arthritis",image:$B},{id:"back-pain",nameKey:"backPain",image:UB},{id:"complex-regional-pain-syndrome",nameKey:"crps",image:qB},{id:"migraines",nameKey:"migraines",image:HB},{id:"neuropathic-pain",nameKey:"neuropathicPain",image:KB}],mentalHealth:[{id:"anxiety",nameKey:"anxiety",image:BB},{id:"ptsd",nameKey:"ptsd",image:QB}],neurological:[{id:"epilepsy",nameKey:"epilepsy",image:WB},{id:"multiple-sclerosis",nameKey:"multipleSclerosis",image:ZB},{id:"parkinsons-disease",nameKey:"parkinsons",image:YB}],sleepDisorders:[{id:"insomnia",nameKey:"insomnia",image:GB}]}).flatMap(([M,I])=>I.map(z=>({...z,categoryKey:M,name:e(`conditionNames.${z.nameKey}`),category:e(`categories.${M}`)}))).filter(M=>{const I=M.name.toLowerCase().includes(t.toLowerCase()),z=n==="all"||M.categoryKey===n;return I&&z}),E=P.reduce((M,I)=>(M[I.categoryKey]||(M[I.categoryKey]=[]),M[I.categoryKey].push(I),M),{});return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:h}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:e("hero.title")}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:e("hero.subtitle")})]})})})}),f.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-16 md:pb-20",children:f.jsxs("div",{className:"relative h-[400px] md:h-[500px] overflow-hidden rounded-xl border border-border/30",children:[f.jsx("img",{src:vw,alt:"Research laboratory with cannabis testing",className:"absolute inset-0 w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/10 to-transparent"}),f.jsx("div",{className:"absolute top-4 left-4 opacity-[0.08] pointer-events-none",children:f.jsx(SD,{variant:"cannabis-leaf-elegant",className:"w-24 md:w-32 h-auto text-white"})}),f.jsx("div",{className:"absolute bottom-4 right-4 opacity-[0.08] pointer-events-none",children:f.jsx(SD,{variant:"cannabis-bud",className:"w-20 md:w-28 h-auto text-white"})})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-6 tracking-tight",children:e("essentialResearch.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("essentialResearch.paragraph1")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed mb-16",children:e("essentialResearch.paragraph2")}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-16",children:[f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx(j3,{className:"w-10 h-10 text-primary mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("cards.clinicalTrials.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("cards.clinicalTrials.description")})]}),f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx(Hb,{className:"w-10 h-10 text-primary mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("cards.publications.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("cards.publications.description")})]}),f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx(TC,{className:"w-10 h-10 text-primary mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("cards.recognition.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("cards.recognition.description")})]}),f.jsxs("div",{className:"card-linear p-7 hover-lift",children:[f.jsx(gu,{className:"w-10 h-10 text-primary mb-4"}),f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-3 tracking-tight",children:e("cards.collaboration.title")}),f.jsx("p",{className:"text-muted-foreground/80 leading-relaxed text-sm",children:e("cards.collaboration.description")})]})]})]})})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs(Qe,{children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground text-center mb-6 tracking-tight",children:e("conditions.title")}),f.jsx("p",{className:"text-lg text-muted-foreground/80 text-center max-w-3xl mx-auto mb-12",children:e("conditions.subtitle")})]}),f.jsxs("div",{className:"max-w-4xl mx-auto mb-12 space-y-6",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"relative",children:[f.jsx(M3,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),f.jsx(La,{type:"text",placeholder:e("conditions.searchPlaceholder"),value:t,onChange:M=>r(M.target.value),className:"pl-12 h-12 text-base bg-card border-border/50 focus:border-primary"})]})}),f.jsx(Qe,{children:f.jsx("div",{className:"flex flex-wrap gap-3 justify-center",children:o.map(M=>f.jsx("button",{onClick:()=>a(M),className:`px-5 py-2.5 rounded-lg font-medium transition-all duration-200 ${n===M?"bg-primary text-primary-foreground shadow-md":"bg-card text-foreground hover:bg-muted border border-border/50"}`,children:e(`categories.${M}`)},M))})})]}),P.length===0?f.jsx("div",{className:"text-center py-16",children:f.jsx("p",{className:"text-lg text-muted-foreground",children:e("conditions.noResults")})}):f.jsx("div",{className:"space-y-16 max-w-7xl mx-auto",children:Object.entries(E).map(([M,I])=>f.jsxs("div",{children:[f.jsx(Qe,{children:f.jsx("h3",{className:"text-2xl md:text-3xl font-semibold text-foreground mb-8 tracking-tight",children:e(`categories.${M}`)})}),f.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:I.map((z,F)=>f.jsx(Qe,{delay:F*.05,children:f.jsxs(Gt,{to:`/conditions/${z.id}`,className:"group relative block h-[280px] rounded-2xl overflow-hidden",children:[f.jsx("img",{src:z.image,alt:z.name,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"}),f.jsx("div",{className:"absolute inset-0 bg-primary/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),f.jsx("div",{className:"absolute inset-0 p-6 flex flex-col justify-end",children:f.jsxs("div",{className:"transform transition-transform duration-300 group-hover:translate-y-[-4px]",children:[f.jsx("span",{className:"inline-block px-3 py-1 text-xs font-medium bg-white/10 backdrop-blur-sm text-white/90 rounded-full mb-3 border border-white/10",children:z.category}),f.jsx("h3",{className:"text-xl font-semibold text-white mb-2 tracking-tight",children:z.name}),f.jsxs("div",{className:"flex items-center text-white/70 text-sm font-medium group-hover:text-white transition-colors",children:[f.jsx("span",{children:e("conditions.learnMore")}),f.jsx("svg",{className:"w-4 h-4 ml-1 transform transition-transform group-hover:translate-x-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}),f.jsx("div",{className:"absolute inset-0 rounded-2xl ring-1 ring-white/10 group-hover:ring-primary/50 transition-all duration-300"})]})},z.id))})]},M))}),f.jsx(Qe,{children:f.jsxs("div",{className:"mt-20 text-center",children:[f.jsx("p",{className:"text-lg text-muted-foreground/80 mb-6",children:e("conditions.notListed")}),f.jsx(Gt,{to:"/contact",children:f.jsxs("button",{className:"btn-primary px-8 py-3 text-lg",children:[e("conditions.contactUs")," "]})})]})})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-6 tracking-tight",children:e("cta.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 max-w-3xl mx-auto mb-10",children:e("cta.subtitle")}),f.jsx(Gt,{to:"/contact",children:f.jsxs("button",{className:"btn-primary px-7 py-3",children:[e("cta.button")," "]})})]})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:u})]})})},Jce=()=>{const e=[{label:"Years of Operation",value:8,suffix:"+",icon:f.jsx(I3,{className:"w-8 h-8"}),color:"from-primary to-primary-dark"},{label:"Countries Served",value:4,suffix:"",icon:f.jsx(fx,{className:"w-8 h-8"}),color:"from-secondary to-accent"},{label:"Production Capacity",value:6e4,suffix:" kg/year",icon:f.jsx(S3,{className:"w-8 h-8"}),color:"from-accent to-primary"},{label:"Certifications",value:12,suffix:"+",icon:f.jsx(TC,{className:"w-8 h-8"}),color:"from-primary-dark to-secondary"}];return f.jsxs("section",{className:"py-20 md:py-32 bg-gradient-to-br from-muted/30 via-background to-muted/20 relative overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),f.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-primary/5 rounded-full blur-3xl"}),f.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-secondary/5 rounded-full blur-3xl"}),f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[f.jsx(Qe,{children:f.jsxs("div",{className:"text-center mb-16 md:mb-20",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-4 tracking-tight",children:"Our Impact in Numbers"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 max-w-2xl mx-auto leading-relaxed",children:"Building a global network of pharmaceutical-grade cannabis production and distribution"})]})}),f.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 max-w-7xl mx-auto",children:e.map((t,r)=>f.jsx(eue,{stat:t,index:r},r))})]})]})},eue=({stat:e,index:t})=>{const[r,n]=U.useState(0),a=U.useRef(null),u=WJ(a,{once:!0,margin:"-100px"});return U.useEffect(()=>{if(!u)return;const h=2e3,o=60,_=e.value/o,T=h/o;let P=0;const E=setInterval(()=>{P+=_,P>=e.value?(n(e.value),clearInterval(E)):n(Math.floor(P))},T);return()=>clearInterval(E)},[u,e.value]),f.jsx(ir.div,{ref:a,initial:{opacity:0,y:50},animate:u?{opacity:1,y:0}:{opacity:0,y:50},transition:{duration:.6,delay:t*.1},className:"group relative",children:f.jsxs("div",{className:"relative h-full p-8 rounded-2xl border border-border/30 bg-card backdrop-blur-sm hover:shadow-2xl hover:-translate-y-2 transition-all duration-500 overflow-hidden",children:[f.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${e.color} opacity-0 group-hover:opacity-10 transition-opacity duration-500`}),f.jsx("div",{className:`w-16 h-16 rounded-2xl bg-gradient-to-br ${e.color} flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl group-hover:scale-110 transition-all duration-500`,children:f.jsx("div",{className:"text-white",children:e.icon})}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"text-4xl md:text-5xl font-bold text-foreground mb-2 tracking-tight",children:[r.toLocaleString(),f.jsx("span",{className:"text-primary",children:e.suffix})]}),f.jsx("div",{className:"text-sm text-muted-foreground/80 font-medium tracking-wide",children:e.label})]}),f.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none",children:f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"})})]})})},tue=()=>{const{t:e}=Mi("aboutUs"),[t,r]=U.useState(!1);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:r}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:e("hero.title")}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:e("hero.subtitle")})]})})})}),f.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-16 md:pb-20",children:f.jsxs("div",{className:"relative h-[400px] md:h-[500px] overflow-hidden rounded-xl border border-border/30",children:[f.jsx("img",{src:OB,alt:"Cannabis greenhouse facility",className:"absolute inset-0 w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/10 to-transparent"})]})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-8 tracking-tight",children:e("story.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("story.paragraph1")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed mb-6",children:e("story.paragraph2")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:e("story.paragraph3")})]})})})}),f.jsx(Jce,{}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground text-center mb-16 md:mb-20 tracking-tight",children:e("values.title")}),f.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-10 max-w-6xl mx-auto",children:[f.jsxs("div",{className:"text-center group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:f.jsx(a9,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3 tracking-tight",children:e("values.excellence.title")}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:e("values.excellence.description")})]}),f.jsxs("div",{className:"text-center group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:f.jsx(P3,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3 tracking-tight",children:e("values.patientFocused.title")}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:e("values.patientFocused.description")})]}),f.jsxs("div",{className:"text-center group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:f.jsx(fx,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3 tracking-tight",children:e("values.globalReach.title")}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:e("values.globalReach.description")})]}),f.jsxs("div",{className:"text-center group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-primary to-secondary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg group-hover:shadow-xl transition-all duration-300 group-hover:scale-110",children:f.jsx(mx,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-3 tracking-tight",children:e("values.integrity.title")}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:e("values.integrity.description")})]})]})]})}),f.jsx("section",{className:"py-20 md:py-32",style:{backgroundColor:"hsl(var(--section-color))"},children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-white mb-8 tracking-tight",children:e("facilities.title")}),f.jsx("p",{className:"text-base md:text-lg text-white/80 leading-relaxed mb-16",children:e("facilities.description")}),f.jsxs("div",{className:"grid md:grid-cols-2 gap-6 text-left",children:[f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 tracking-tight",children:e("facilities.southAfrica.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base",children:e("facilities.southAfrica.description")})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 tracking-tight",children:e("facilities.uk.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base",children:e("facilities.uk.description")})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 tracking-tight",children:e("facilities.thailand.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base",children:e("facilities.thailand.description")})]}),f.jsxs("div",{className:"bg-white/[0.03] backdrop-blur-sm rounded-xl p-7 border border-white/10 hover:bg-white/[0.06] hover:border-white/20 transition-all duration-200",children:[f.jsx("h3",{className:"text-xl md:text-2xl font-medium text-white mb-4 tracking-tight",children:e("facilities.portugal.title")}),f.jsx("p",{className:"text-white/70 leading-relaxed text-sm md:text-base",children:e("facilities.portugal.description")})]})]})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-6 tracking-tight",children:e("cta.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 max-w-3xl mx-auto mb-10",children:e("cta.description")}),f.jsx(Gt,{to:"/contact",children:f.jsxs("button",{className:"btn-primary px-7 py-3",children:[e("cta.button")," "]})})]})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:t})]})})},rue=()=>{const[e,t]=U.useState(null),[r,n]=U.useState(!1),a=[{id:"seed",title:"Seed Registration",description:"Cannabis seed registered with unique genome sequence",Icon:N3,status:"completed",timestamp:"2024-01-15 08:30:00",details:[{label:"Genome ID",value:"0x7A3F...B2C9"},{label:"Strain",value:"Northern Lights"},{label:"Origin",value:"Cape Town Facility"},{label:"Genetics",value:"Indica Dominant"}]},{id:"sequencing",title:"Genome Sequencing",description:"Plant DNA encrypted into blockchain key-pairs",Icon:ZW,status:"completed",timestamp:"2024-01-15 09:45:00",details:[{label:"Public Key",value:"0xA1B2...C3D4"},{label:"Private Key",value:"Secured on-chain"},{label:"QR Code",value:"Generated"},{label:"Verification",value:"Blockchain Verified"}]},{id:"cultivation",title:"Cultivation Tracking",description:"Growth cycle monitored with blockchain checkpoints",Icon:Xd,status:"completed",timestamp:"2024-02-20 14:20:00",details:[{label:"Duration",value:"90 Days"},{label:"Environment",value:"Controlled Indoor"},{label:"Checkpoints",value:"24 Verified"},{label:"License",value:"SAHPRA-2024-001"}]},{id:"harvest",title:"Harvest & Processing",description:"Product harvested and quality tested",Icon:n9,status:"completed",timestamp:"2024-03-15 11:00:00",details:[{label:"Batch ID",value:"NL-2024-Q1-045"},{label:"Weight",value:"2.5 kg"},{label:"THC Content",value:"22.4%"},{label:"CBD Content",value:"1.2%"}]},{id:"lab",title:"Lab Testing",description:"Independent lab verification and certification",Icon:j3,status:"completed",timestamp:"2024-03-18 16:30:00",details:[{label:"Lab",value:"CannaSafe Analytics"},{label:"Microbial",value:"Pass"},{label:"Heavy Metals",value:"Pass"},{label:"Certificate",value:"CS-2024-0318"}]},{id:"packaging",title:"Packaging & QR",description:"Product sealed with blockchain-verified QR code",Icon:A3,status:"active",timestamp:"2024-03-20 10:15:00",details:[{label:"QR Generated",value:"Yes"},{label:"Tamper Seal",value:"Applied"},{label:"Package ID",value:"PKG-2024-045-01"},{label:"Expiry Date",value:"2025-03-20"}]},{id:"distribution",title:"Distribution",description:"Licensed partner delivery to medical dispensaries",Icon:o9,status:"pending",details:[{label:"Carrier",value:"Licensed Courier"},{label:"Destination",value:"Medical Clinic - Lisbon"},{label:"ETA",value:"2024-03-22"},{label:"Temperature",value:"Monitored"}]},{id:"consumer",title:"Consumer Verification",description:"End user scans QR to verify authenticity",Icon:IM,status:"pending",details:[{label:"Verification",value:"Pending"},{label:"Authenticity",value:"Blockchain Verified"},{label:"Journey",value:"Full Transparency"},{label:"Anti-Spoofing",value:"Protected"}]}],u=o=>{switch(o){case"completed":return"bg-brand-lime-green/20 text-brand-lime-green border-brand-lime-green/40";case"active":return"bg-brand-deep-teal/20 text-brand-deep-teal border-brand-deep-teal/40";case"pending":return"bg-muted text-muted-foreground border-border";default:return"bg-muted text-muted-foreground border-border"}},h=e?a.find(o=>o.id===e):null;return f.jsx("div",{className:"w-full bg-background py-20 md:py-32",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-16 max-w-4xl mx-auto",children:[f.jsx(ga,{className:"mb-4 text-xs font-bold tracking-wider",children:"BLOCKCHAIN TECHNOLOGY"}),f.jsxs("h2",{className:"text-4xl md:text-5xl font-semibold text-foreground mb-6",children:["Seed-to-Patient ",f.jsx("span",{className:"text-brand-deep-teal",children:"Traceability"})]}),f.jsx("p",{className:"text-lg text-muted-foreground/80 leading-relaxed",children:"With every stage of cultivation tracked and documented on the blockchain with full transparency from seed to patient with unwavering attention to detail. Dr Green's EU GMP Certified products meeting the highest international standards."})]}),f.jsxs("div",{className:"relative mb-16 max-w-6xl mx-auto",children:[f.jsx("div",{className:"absolute left-1/2 top-0 bottom-0 w-1 bg-border/40 transform -translate-x-1/2 hidden md:block"}),f.jsx("div",{className:"space-y-8",children:a.map((o,_)=>{const T=o.Icon;return f.jsxs(ir.div,{initial:{opacity:0,x:_%2===0?-50:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.5,delay:_*.1},className:`flex items-center gap-6 ${_%2===0?"md:flex-row":"md:flex-row-reverse"}`,children:[f.jsx("div",{className:`flex-1 card-linear p-6 cursor-pointer transition-all hover-lift ${e===o.id?"ring-2 ring-brand-deep-teal shadow-xl":""}`,onClick:()=>t(e===o.id?null:o.id),children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-brand-lime-green to-brand-deep-teal rounded-xl flex items-center justify-center flex-shrink-0 shadow-lg",children:f.jsx(T,{className:"w-6 h-6 text-white",strokeWidth:2})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("h3",{className:"font-semibold text-lg text-foreground",children:o.title}),f.jsx(ga,{className:`text-[10px] ${u(o.status)}`,children:o.status.toUpperCase()})]}),f.jsx("p",{className:"text-sm text-muted-foreground/80 mb-2",children:o.description}),o.timestamp&&f.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:o.timestamp})]})]})}),f.jsx("div",{className:"relative z-10 hidden md:block",children:f.jsxs("div",{className:`w-12 h-12 rounded-full border-4 flex items-center justify-center font-bold transition-all ${o.status==="completed"?"bg-brand-lime-green border-brand-lime-green/20 text-white shadow-lg":o.status==="active"?"bg-brand-deep-teal border-brand-deep-teal/20 text-white animate-pulse shadow-lg":"bg-background border-border text-muted-foreground"}`,children:[o.status==="completed"&&f.jsx(IM,{className:"w-6 h-6"}),o.status==="active"&&f.jsx("div",{className:"w-3 h-3 rounded-full bg-white"}),o.status==="pending"&&f.jsx("div",{className:"w-3 h-3 rounded-full border-2 border-muted-foreground"})]})}),f.jsx("div",{className:"flex-1 hidden md:block"})]},o.id)})})]}),f.jsx(oh,{mode:"wait",children:h&&f.jsx(ir.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"max-w-6xl mx-auto",children:f.jsxs("div",{className:"card-linear p-8 bg-gradient-to-br from-brand-lime-green/5 to-brand-deep-teal/5",children:[f.jsxs("div",{className:"flex items-start justify-between mb-6",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-brand-lime-green to-brand-deep-teal rounded-xl flex items-center justify-center shadow-lg",children:f.jsx(h.Icon,{className:"w-7 h-7 text-white",strokeWidth:2})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-2xl font-semibold text-foreground mb-1",children:h.title}),f.jsx("p",{className:"text-muted-foreground/80",children:h.description})]})]}),f.jsx(Zr,{variant:"ghost",size:"sm",onClick:()=>t(null),children:""})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.details.map((o,_)=>f.jsxs("div",{className:"card-linear p-4 hover-lift",children:[f.jsx("div",{className:"text-xs text-muted-foreground/80 font-semibold uppercase tracking-wider mb-1",children:o.label}),f.jsx("div",{className:"text-sm font-mono font-semibold text-foreground",children:o.value})]},_))}),h.id==="sequencing"&&f.jsxs("div",{className:"mt-6 pt-6 border-t border-border",children:[f.jsxs(Zr,{onClick:()=>n(!r),className:"w-full",children:[r?"Hide":"View"," QR Code Verification"]}),f.jsx(oh,{children:r&&f.jsxs(ir.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 card-linear p-6 text-center",children:[f.jsx("div",{className:"w-48 h-48 mx-auto bg-white rounded-lg flex items-center justify-center mb-4",children:f.jsx("div",{className:"grid grid-cols-8 gap-1 p-2",children:Array.from({length:64}).map((o,_)=>f.jsx("div",{className:`w-4 h-4 ${Math.random()>.5?"bg-black":"bg-white"}`},_))})}),f.jsx("p",{className:"text-sm text-muted-foreground/80",children:"Scan to verify product authenticity and view complete blockchain journey"})]})})]})]})})}),f.jsxs("div",{className:"mt-16 grid md:grid-cols-3 gap-6 max-w-6xl mx-auto",children:[f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-lime-green to-brand-deep-teal rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(K_,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:"Genome Encryption"}),f.jsx("p",{className:"text-sm text-muted-foreground/80 leading-relaxed",children:"Plant DNA is sequenced and encrypted into public/private key-pairs at the seed stage, creating an immutable genetic fingerprint on the blockchain."})]}),f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-lime-green to-brand-deep-teal rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(mx,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:"Anti-Spoofing Protection"}),f.jsx("p",{className:"text-sm text-muted-foreground/80 leading-relaxed",children:"QR codes contain encrypted genome data that can be verified against our secure servers, preventing illegal cannabis from entering the legal supply chain."})]}),f.jsxs("div",{className:"card-linear p-7 hover-lift group",children:[f.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-brand-lime-green to-brand-deep-teal rounded-2xl flex items-center justify-center mb-6 shadow-lg group-hover:shadow-xl transition-all duration-200 group-hover:scale-110",children:f.jsx(C3,{className:"w-8 h-8 text-white",strokeWidth:2})}),f.jsx("h3",{className:"font-semibold text-lg text-foreground mb-2",children:"Full Transparency"}),f.jsx("p",{className:"text-sm text-muted-foreground/80 leading-relaxed",children:"Every step from seed to consumer is recorded on-chain with timestamps, ensuring regulatory compliance and building consumer trust."})]})]}),f.jsx("div",{className:"mt-16 text-center max-w-6xl mx-auto",children:f.jsxs("div",{className:"card-linear p-8 hover-lift",children:[f.jsx("h3",{className:"text-2xl font-semibold text-foreground mb-3",children:"Experience The Future of Cannabis Traceability"}),f.jsx("p",{className:"text-muted-foreground/80 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Our blockchain-verified system ensures every product is authentic, compliant, and traceable from seed to consumer."}),f.jsxs(Zr,{size:"lg",className:"gap-2",children:["Learn More About Our Technology",f.jsx("span",{children:""})]})]})})]})})},nue=()=>{const[e,t]=U.useState(!1);return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:t}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:"Blockchain Technology"}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:"Pioneering transparency and traceability in medical cannabis through cutting-edge blockchain solutions"})]})})})}),f.jsx("section",{className:"py-16 md:py-20 bg-muted/30",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-4xl mx-auto",children:[f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground mb-8 tracking-tight",children:"Why Blockchain?"}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed mb-6",children:"At Healing Buds, we believe that transparency is the foundation of trust. By integrating blockchain technology into our entire supply chain, we provide patients, healthcare providers, and regulatory bodies with an immutable record of every step in the production process."}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 leading-relaxed",children:"Our blockchain infrastructure ensures that every cannabis product can be traced from seed to patient, eliminating counterfeits and guaranteeing the authenticity and quality of our EU GMP-certified medical cannabis products."})]})})})}),f.jsx(rue,{}),f.jsx("section",{className:"py-20 md:py-32 bg-muted/30",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsx(Qe,{children:f.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-foreground text-center mb-16 tracking-tight",children:"Benefits of Our Blockchain System"})}),f.jsxs("div",{className:"grid md:grid-cols-3 gap-8 max-w-5xl mx-auto",children:[f.jsx(Qe,{delay:.1,children:f.jsxs("div",{className:"bg-background rounded-xl p-8 border border-border/30 hover:border-primary/30 transition-all duration-300",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Complete Transparency"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:"Every stage of cultivation, processing, and distribution is recorded on an immutable ledger, providing full visibility into product origins."})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"bg-background rounded-xl p-8 border border-border/30 hover:border-primary/30 transition-all duration-300",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Anti-Counterfeiting"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:"Unique genome sequencing and blockchain verification make it impossible to counterfeit our products, protecting patient safety."})]})}),f.jsx(Qe,{delay:.3,children:f.jsxs("div",{className:"bg-background rounded-xl p-8 border border-border/30 hover:border-primary/30 transition-all duration-300",children:[f.jsx("h3",{className:"text-xl font-semibold text-foreground mb-4",children:"Regulatory Compliance"}),f.jsx("p",{className:"text-muted-foreground/80 text-sm leading-relaxed",children:"Automatic documentation and audit trails ensure compliance with international pharmaceutical standards and regulatory requirements."})]})})]})]})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:e})]})})},iue=ch({name:mi().trim().min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),email:mi().trim().email("Please enter a valid email address").max(255,"Email must be less than 255 characters"),subject:mi().trim().min(3,"Subject must be at least 3 characters").max(200,"Subject must be less than 200 characters"),message:mi().trim().min(10,"Message must be at least 10 characters").max(2e3,"Message must be less than 2000 characters")}),sue=()=>{const{t:e}=Mi("contact"),[t,r]=U.useState(!1),[n,a]=U.useState(!1),[u,h]=U.useState("idle"),{toast:o}=dx(),{register:_,handleSubmit:T,reset:P,formState:{errors:E}}=qg({resolver:Wg(iue)}),M=async I=>{var z;a(!0),h("idle");try{const{data:F,error:D}=await Fa.functions.invoke("send-contact-email",{body:{name:I.name,email:I.email,subject:I.subject,message:I.message}});if(D)throw D;if(F!=null&&F.success)h("success"),P(),o({title:"Message sent!",description:"Thank you for contacting us. We'll get back to you soon."});else throw new Error((F==null?void 0:F.error)||"Failed to send message")}catch(F){console.error("Contact form error:",F),h("error");let D="Something went wrong. Please try again later.";(z=F==null?void 0:F.message)!=null&&z.includes("Too many requests")&&(D="Too many requests. Please wait a few minutes before trying again."),o({title:"Error",description:D,variant:"destructive"})}finally{a(!1)}};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:r}),f.jsxs("main",{className:"pt-28 md:pt-32",children:[f.jsx("section",{className:"bg-background py-16 md:py-20",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsx(Qe,{children:f.jsxs("div",{className:"max-w-5xl",children:[f.jsx("h1",{className:"text-5xl md:text-6xl lg:text-7xl font-bold text-foreground mb-6 tracking-tight leading-[1.1]",children:e("hero.title")}),f.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground/80 max-w-3xl font-light",children:e("hero.subtitle")})]})})})}),f.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-16 md:pb-20",children:f.jsx(Qe,{variant:"scale",duration:.8,children:f.jsxs("div",{className:"relative h-[300px] md:h-[400px] overflow-hidden rounded-xl border border-border/30",children:[f.jsx("img",{src:LB,alt:"Healing Buds facilities",className:"absolute inset-0 w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background/10 to-transparent"})]})})}),f.jsx("section",{className:"py-20 md:py-32 bg-background",children:f.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-6xl mx-auto grid md:grid-cols-2 gap-16",children:[f.jsx(Qe,{children:f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-semibold text-foreground mb-8 tracking-tight",children:e("connect.title")}),f.jsx("p",{className:"text-base md:text-lg text-muted-foreground/80 mb-12 leading-relaxed",children:e("connect.subtitle")}),f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"w-12 h-12 bg-primary rounded-xl flex items-center justify-center flex-shrink-0",children:f.jsx(iy,{className:"w-6 h-6 text-primary-foreground"})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2 tracking-tight",children:e("connect.email")}),f.jsx("p",{className:"text-muted-foreground/80 text-sm",children:"info@healingbuds.com"})]})]})]})}),f.jsx(Qe,{delay:.2,children:f.jsxs("div",{className:"card-linear p-8",children:[f.jsx("h3",{className:"text-2xl font-semibold text-foreground mb-6 tracking-tight",children:e("form.title")}),u==="success"&&f.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-primary/10 border border-primary/20 flex items-start gap-3",children:[f.jsx(dT,{className:"w-5 h-5 text-primary flex-shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-foreground",children:"Message sent successfully!"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"We'll get back to you as soon as possible."})]})]}),u==="error"&&f.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-destructive/10 border border-destructive/20 flex items-start gap-3",children:[f.jsx(kC,{className:"w-5 h-5 text-destructive flex-shrink-0 mt-0.5"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-foreground",children:"Failed to send message"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please try again later or contact us directly."})]})]}),f.jsxs("form",{onSubmit:T(M),className:"space-y-5",children:[f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:[e("form.name")," *"]}),f.jsx("input",{type:"text",id:"name",..._("name"),className:`w-full px-4 py-2.5 rounded-lg bg-background border ${E.name?"border-destructive":"border-border/40"} focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200`,placeholder:e("form.namePlaceholder"),disabled:n}),E.name&&f.jsx("p",{className:"text-destructive text-xs mt-1.5",children:E.name.message})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:[e("form.email")," *"]}),f.jsx("input",{type:"email",id:"email",..._("email"),className:`w-full px-4 py-2.5 rounded-lg bg-background border ${E.email?"border-destructive":"border-border/40"} focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200`,placeholder:e("form.emailPlaceholder"),disabled:n}),E.email&&f.jsx("p",{className:"text-destructive text-xs mt-1.5",children:E.email.message})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"subject",className:"block text-sm font-medium text-foreground mb-2",children:[e("form.subject")," *"]}),f.jsx("input",{type:"text",id:"subject",..._("subject"),className:`w-full px-4 py-2.5 rounded-lg bg-background border ${E.subject?"border-destructive":"border-border/40"} focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all duration-200`,placeholder:e("form.subjectPlaceholder"),disabled:n}),E.subject&&f.jsx("p",{className:"text-destructive text-xs mt-1.5",children:E.subject.message})]}),f.jsxs("div",{children:[f.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-foreground mb-2",children:[e("form.message")," *"]}),f.jsx("textarea",{id:"message",rows:5,..._("message"),className:`w-full px-4 py-2.5 rounded-lg bg-background border ${E.message?"border-destructive":"border-border/40"} focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary resize-none transition-all duration-200`,placeholder:e("form.messagePlaceholder"),disabled:n}),E.message&&f.jsx("p",{className:"text-destructive text-xs mt-1.5",children:E.message.message})]}),f.jsx("button",{type:"submit",disabled:n,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-60 disabled:cursor-not-allowed",children:n?f.jsxs(f.Fragment,{children:[f.jsx(pT,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):e("form.submit")})]})]})})]})})})]}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:t})]})})},aue=()=>{const{t:e,i18n:t}=Mi("legal"),[r,n]=U.useState(!1),a=()=>{const u=t.language==="pt"?"pt-PT":"en-US";return new Date().toLocaleDateString(u,{month:"long",day:"numeric",year:"numeric"})};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:n}),f.jsx("main",{className:"pt-24 pb-16",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx(mx,{className:"w-16 h-16 text-primary"})}),f.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold text-foreground mb-4",children:e("privacy.title")}),f.jsxs("p",{className:"text-muted-foreground text-lg",children:[e("privacy.lastUpdated")," ",a()]})]}),f.jsxs("div",{className:"space-y-8 text-foreground/90",children:[f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(Hb,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("privacy.introduction.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("privacy.introduction.content")})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(C3,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("privacy.informationCollect.title")})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-2",children:e("privacy.informationCollect.personal.title")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.informationCollect.personal.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-2",children:e("privacy.informationCollect.automatic.title")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.informationCollect.automatic.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]})]})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(gu,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("privacy.howWeUse.title")})]}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.howWeUse.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(fx,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("privacy.informationSharing.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("privacy.informationSharing.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.informationSharing.items",{returnObjects:!0}).map((u,h)=>f.jsxs("li",{children:[f.jsx("strong",{children:u.label})," ",u.desc]},h))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(K_,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("privacy.dataSecurity.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("privacy.dataSecurity.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.dataSecurity.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.yourRights.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("privacy.yourRights.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("privacy.yourRights.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.blockchain.title")}),f.jsx("p",{className:"leading-relaxed",children:e("privacy.blockchain.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.international.title")}),f.jsx("p",{className:"leading-relaxed",children:e("privacy.international.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.children.title")}),f.jsx("p",{className:"leading-relaxed",children:e("privacy.children.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.changes.title")}),f.jsx("p",{className:"leading-relaxed",children:e("privacy.changes.content")})]}),f.jsxs("section",{className:"bg-card p-6 rounded-lg border border-border",children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("privacy.contact.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("privacy.contact.content")}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("strong",{children:e("privacy.contact.email")})," privacy@healingbuds.com"]}),f.jsxs("p",{children:[f.jsx("strong",{children:e("privacy.contact.address")})," ",e("privacy.contact.addressValue")]})]})]})]})]})}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:r})]})})},oue=()=>{const{t:e,i18n:t}=Mi("legal"),[r,n]=U.useState(!1),a=()=>{const u=t.language==="pt"?"pt-PT":"en-US";return new Date().toLocaleDateString(u,{month:"long",day:"numeric",year:"numeric"})};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-background pb-24 lg:pb-0",children:[f.jsx(ji,{onMenuStateChange:n}),f.jsx("main",{className:"pt-24 pb-16",children:f.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[f.jsxs("div",{className:"text-center mb-12",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx(Hb,{className:"w-16 h-16 text-primary"})}),f.jsx("h1",{className:"font-display text-4xl md:text-5xl font-bold text-foreground mb-4",children:e("terms.title")}),f.jsxs("p",{className:"text-muted-foreground text-lg",children:[e("terms.lastUpdated")," ",a()]})]}),f.jsxs("div",{className:"space-y-8 text-foreground/90",children:[f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(kC,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("terms.agreement.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.agreement.content")})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(gu,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("terms.eligibility.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.eligibility.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.eligibility.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(HW,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("terms.nftKeys.title")})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-2",children:e("terms.nftKeys.ownership.title")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.nftKeys.ownership.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-semibold text-lg mb-2",children:e("terms.nftKeys.tiers.title")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.nftKeys.tiers.items",{returnObjects:!0}).map((u,h)=>f.jsxs("li",{children:[f.jsx("strong",{children:u.label})," ",u.desc]},h))})]})]})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(r9,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("terms.compliance.title")})]}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.compliance.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.compliance.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.useServices.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.useServices.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.useServices.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx(mx,{className:"w-6 h-6 text-primary"}),f.jsx("h2",{className:"font-display text-2xl font-bold",children:e("terms.risks.title")})]}),f.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 p-6 rounded-lg mb-4",children:[f.jsx("p",{className:"font-semibold mb-2",children:e("terms.risks.warning")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.risks.items",{returnObjects:!0}).map((u,h)=>f.jsxs("li",{children:[f.jsx("strong",{children:u.label})," ",u.desc]},h))})]})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.blockchainTraceability.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.blockchainTraceability.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.blockchainTraceability.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))}),f.jsx("p",{className:"leading-relaxed mt-4",children:e("terms.blockchainTraceability.note")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.intellectualProperty.title")}),f.jsx("p",{className:"leading-relaxed",children:e("terms.intellectualProperty.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.liability.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.liability.intro")}),f.jsx("ul",{className:"list-disc list-inside space-y-2 ml-4",children:e("terms.liability.items",{returnObjects:!0}).map((u,h)=>f.jsx("li",{children:u},h))})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.termination.title")}),f.jsx("p",{className:"leading-relaxed",children:e("terms.termination.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.governingLaw.title")}),f.jsx("p",{className:"leading-relaxed",children:e("terms.governingLaw.content")})]}),f.jsxs("section",{children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.changesTerms.title")}),f.jsx("p",{className:"leading-relaxed",children:e("terms.changesTerms.content")})]}),f.jsxs("section",{className:"bg-card p-6 rounded-lg border border-border",children:[f.jsx("h2",{className:"font-display text-2xl font-bold mb-4",children:e("terms.contact.title")}),f.jsx("p",{className:"leading-relaxed mb-4",children:e("terms.contact.content")}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("p",{children:[f.jsx("strong",{children:e("terms.contact.email")})," legal@healingbuds.com"]}),f.jsxs("p",{children:[f.jsx("strong",{children:e("terms.contact.address")})," ",e("terms.contact.addressValue")]})]})]})]})]})}),f.jsx(Ai,{}),f.jsx(ns,{}),f.jsx(Xs,{menuOpen:r})]})})},lue=()=>{const e=oc();return U.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),f.jsx(yi,{children:f.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:f.jsxs("div",{className:"text-center",children:[f.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),f.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),f.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})})},cue=()=>{const[e,t]=U.useState(!0),[r,n]=U.useState(!1),[a,u]=U.useState(""),[h,o]=U.useState(""),[_,T]=U.useState(""),[P,E]=U.useState(""),[M,I]=U.useState(!1),[z,F]=U.useState(null),[D,q]=U.useState(null),[$,W]=U.useState({}),[te,se]=U.useState(!1),he=Yf(),{toast:pe}=dx(),{t:xe}=Mi("auth"),Re=ch({email:mi().trim().email({message:xe("validationErrors.invalidEmail")}),password:mi().min(6,{message:xe("validationErrors.passwordMin")})}),Me=ch({email:mi().trim().email({message:xe("validationErrors.invalidEmail")}),password:mi().min(6,{message:xe("validationErrors.passwordMin")}),confirmPassword:mi(),fullName:mi().trim().min(2,{message:xe("validationErrors.fullNameMin")})}).refine(rt=>rt.password===rt.confirmPassword,{message:xe("validationErrors.passwordMatch"),path:["confirmPassword"]});U.useEffect(()=>{const{data:{subscription:rt}}=Fa.auth.onAuthStateChange((nt,Ve)=>{q(Ve),F((Ve==null?void 0:Ve.user)??null)});return Fa.auth.getSession().then(({data:{session:nt}})=>{q(nt),F((nt==null?void 0:nt.user)??null)}),()=>rt.unsubscribe()},[]),U.useEffect(()=>{z&&he("/")},[z,he]);const pt=()=>{W({});try{return e?Re.parse({email:a,password:h}):Me.parse({email:a,password:h,confirmPassword:_,fullName:P}),!0}catch(rt){if(rt instanceof hl){const nt={};rt.errors.forEach(Ve=>{Ve.path[0]&&(nt[Ve.path[0]]=Ve.message)}),W(nt)}return!1}},Oe=async rt=>{if(rt.preventDefault(),!pt())return;I(!0);const{data:nt,error:Ve}=await Fa.auth.signInWithPassword({email:a.trim(),password:h});if(I(!1),Ve){let _e=xe("loginError");Ve.message.includes("Invalid login credentials")?_e=xe("invalidCredentials"):Ve.message.includes("Email not confirmed")&&(_e=xe("emailNotConfirmed")),pe({title:xe("loginFailed"),description:_e,variant:"destructive"});return}pe({title:xe("welcomeBackToast"),description:xe("loginSuccess")}),he("/")},Ye=async rt=>{if(rt.preventDefault(),!pt())return;I(!0);const nt=`${window.location.origin}/`,{data:Ve,error:_e}=await Fa.auth.signUp({email:a.trim(),password:h,options:{emailRedirectTo:nt,data:{full_name:P.trim()}}});if(I(!1),_e){let Le=xe("signupError");_e.message.includes("User already registered")?Le=xe("emailRegistered"):_e.message.includes("Password should be")&&(Le=xe("passwordRequirements")),pe({title:xe("signupFailed"),description:Le,variant:"destructive"});return}pe({title:xe("accountCreated"),description:xe("accountCreatedDesc")}),t(!0),o(""),T("")},Ge=async rt=>{rt.preventDefault(),W({});const Ve=mi().trim().email({message:xe("validationErrors.invalidEmail")}).safeParse(a);if(!Ve.success){W({email:Ve.error.errors[0].message});return}I(!0);const _e=`${window.location.origin}/auth`,{error:Le}=await Fa.auth.resetPasswordForEmail(a.trim(),{redirectTo:_e});if(I(!1),Le){pe({title:xe("error"),description:Le.message,variant:"destructive"});return}se(!0),pe({title:xe("checkEmail"),description:xe("resetLinkSentToast")})};return f.jsx(yi,{children:f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#1a2e2a] via-[#2a3d3a] to-[#1a2e2a]",children:[f.jsx(ji,{}),f.jsx("main",{className:"pt-32 pb-20",children:f.jsx("div",{className:"container mx-auto px-4 max-w-md",children:f.jsxs("div",{className:"bg-background/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-border/50 overflow-hidden",children:[f.jsxs("div",{className:"bg-gradient-to-br from-[hsl(164,48%,53%)]/15 via-[hsl(178,48%,33%)]/20 to-[hsl(164,48%,53%)]/10 p-8 text-center",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("img",{src:jP,alt:"Healing Buds",className:"h-16 w-auto"})}),f.jsx("h1",{className:"font-display text-2xl font-bold text-foreground mb-2",children:xe(r?"resetPassword":e?"welcomeBack":"createAccount")}),f.jsx("p",{className:"text-muted-foreground text-sm",children:xe(r?"resetDescription":e?"loginDescription":"signupDescription")})]}),r?f.jsx("div",{className:"p-8 space-y-5",children:te?f.jsxs("div",{className:"text-center space-y-4",children:[f.jsxs("div",{className:"bg-primary/10 text-primary p-4 rounded-lg",children:[f.jsx(iy,{className:"w-8 h-8 mx-auto mb-2"}),f.jsx("p",{className:"font-medium",children:xe("checkInbox")}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:xe("resetLinkSent",{email:a})})]}),f.jsx(Zr,{type:"button",variant:"outline",className:"w-full",onClick:()=>{n(!1),se(!1),u("")},children:xe("backToSignIn")})]}):f.jsxs("form",{onSubmit:Ge,className:"space-y-5",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(qn,{htmlFor:"resetEmail",className:"text-foreground",children:xe("email")}),f.jsxs("div",{className:"relative",children:[f.jsx(iy,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(La,{id:"resetEmail",type:"email",placeholder:xe("emailPlaceholder"),value:a,onChange:rt=>u(rt.target.value),className:"pl-10",disabled:M})]}),$.email&&f.jsx("p",{className:"text-destructive text-xs",children:$.email})]}),f.jsxs(Zr,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:M,children:[M?f.jsx(pT,{className:"w-4 h-4 animate-spin mr-2"}):null,xe("sendResetLink"),!M&&f.jsx(NM,{className:"w-4 h-4 ml-2"})]}),f.jsx("div",{className:"text-center pt-4 border-t border-border",children:f.jsx("button",{type:"button",onClick:()=>{n(!1),W({})},className:"text-primary hover:underline text-sm font-medium",disabled:M,children:xe("backToSignIn")})})]})}):f.jsxs("form",{onSubmit:e?Oe:Ye,className:"p-8 space-y-5",children:[!e&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(qn,{htmlFor:"fullName",className:"text-foreground",children:xe("fullName")}),f.jsxs("div",{className:"relative",children:[f.jsx(R3,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(La,{id:"fullName",type:"text",placeholder:xe("fullNamePlaceholder"),value:P,onChange:rt=>E(rt.target.value),className:"pl-10",disabled:M})]}),$.fullName&&f.jsx("p",{className:"text-destructive text-xs",children:$.fullName})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(qn,{htmlFor:"email",className:"text-foreground",children:xe("email")}),f.jsxs("div",{className:"relative",children:[f.jsx(iy,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(La,{id:"email",type:"email",placeholder:xe("emailPlaceholder"),value:a,onChange:rt=>u(rt.target.value),className:"pl-10",disabled:M})]}),$.email&&f.jsx("p",{className:"text-destructive text-xs",children:$.email})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx(qn,{htmlFor:"password",className:"text-foreground",children:xe("password")}),e&&f.jsx("button",{type:"button",onClick:()=>{n(!0),W({}),o("")},className:"text-xs text-primary hover:underline",children:xe("forgotPassword")})]}),f.jsxs("div",{className:"relative",children:[f.jsx(K_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(La,{id:"password",type:"password",placeholder:"",value:h,onChange:rt=>o(rt.target.value),className:"pl-10",disabled:M})]}),$.password&&f.jsx("p",{className:"text-destructive text-xs",children:$.password})]}),!e&&f.jsxs("div",{className:"space-y-2",children:[f.jsx(qn,{htmlFor:"confirmPassword",className:"text-foreground",children:xe("confirmPassword")}),f.jsxs("div",{className:"relative",children:[f.jsx(K_,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(La,{id:"confirmPassword",type:"password",placeholder:"",value:_,onChange:rt=>T(rt.target.value),className:"pl-10",disabled:M})]}),$.confirmPassword&&f.jsx("p",{className:"text-destructive text-xs",children:$.confirmPassword})]}),f.jsxs(Zr,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:M,children:[M?f.jsx(pT,{className:"w-4 h-4 animate-spin mr-2"}):null,xe(e?"signIn":"createAccount"),!M&&f.jsx(NM,{className:"w-4 h-4 ml-2"})]}),f.jsx("div",{className:"text-center pt-4 border-t border-border",children:f.jsxs("p",{className:"text-muted-foreground text-sm",children:[xe(e?"noAccount":"hasAccount"),f.jsx("button",{type:"button",onClick:()=>{t(!e),W({}),o(""),T("")},className:"text-primary hover:underline ml-1 font-medium",disabled:M,children:xe(e?"signUp":"signIn")})]})})]})]})})}),f.jsx(Ai,{})]})})},uue=new IH,due=()=>{const e=oc();return f.jsx(oh,{mode:"wait",initial:!1,children:f.jsxs(kZ,{location:e,children:[f.jsx(ki,{path:"/",element:f.jsx(xce,{})}),f.jsx(ki,{path:"/auth",element:f.jsx(cue,{})}),f.jsx(ki,{path:"/what-we-do",element:f.jsx(_ce,{})}),f.jsx(ki,{path:"/cultivating-processing",element:f.jsx(kce,{})}),f.jsx(ki,{path:"/manufacture-distribution",element:f.jsx(jce,{})}),f.jsx(ki,{path:"/conditions",element:f.jsx(Ace,{})}),f.jsx(ki,{path:"/conditions/:conditionId",element:f.jsx(Uce,{})}),f.jsx(ki,{path:"/medical-clinics",element:f.jsx(Yce,{})}),f.jsx(ki,{path:"/online-pharmacy",element:f.jsx(Qce,{})}),f.jsx(ki,{path:"/research",element:f.jsx(Xce,{})}),f.jsx(ki,{path:"/about-us",element:f.jsx(tue,{})}),f.jsx(ki,{path:"/blockchain-technology",element:f.jsx(nue,{})}),f.jsx(ki,{path:"/the-wire",element:f.jsx(bce,{})}),f.jsx(ki,{path:"/the-wire/:articleId",element:f.jsx(wce,{})}),f.jsx(ki,{path:"/contact",element:f.jsx(sue,{})}),f.jsx(ki,{path:"/privacy-policy",element:f.jsx(aue,{})}),f.jsx(ki,{path:"/terms-of-service",element:f.jsx(oue,{})}),f.jsx(ki,{path:"*",element:f.jsx(lue,{})})]},e.pathname)})},hue=()=>f.jsx(GJ,{defaultTheme:"dark",storageKey:"healing-buds-theme",children:f.jsx(DH,{client:uue,children:f.jsxs(cH,{children:[f.jsx(U9,{}),f.jsx(T7,{}),f.jsxs(NZ,{children:[f.jsx(HJ,{}),f.jsx(due,{})]})]})})}),pue={whatWeDo:"What We Do",research:"Research",theWire:"The Wire",aboutUs:"About Us",contactUs:"Contact Us",checkEligibility:"Check Eligibility",patientLogin:"Patient Login",signOut:"Sign Out"},fue={cultivating:"Cultivating & Processing",cultivatingDesc:"Pharmaceutical-grade cultivation",manufacture:"Manufacture & Distribution",manufactureDesc:"Global supply chain excellence",clinics:"Medical Cannabis Clinics",clinicsDesc:"Patient-centered care",pharmacy:"Online Medical Cannabis Pharmacy",pharmacyDesc:"Convenient access to care",aboutHealing:"About Healing Buds",aboutHealingDesc:"Our story, values & facilities",blockchain:"Blockchain Technology",blockchainDesc:"Seed-to-patient traceability"},mue={tagline:"Shaping the future of cannabis through research and excellence.",company:"Company",aboutUs:"About Us",ourStandards:"Our Standards",research:"Research",theWire:"The Wire",resources:"Resources",patientAccess:"Patient Access",conditionsTreated:"Conditions Treated",franchiseOpportunities:"Franchise Opportunities",legal:"Legal",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",compliance:"Compliance",copyright:" {{year}} Healing Buds Global. All rights reserved.",commitment:"Committed to advancing global cannabis medicine"},gue={nav:pue,dropdown:fue,footer:mue},yue={welcome:"Welcome to",healingBuds:"Healing Buds",tagline:"Pioneering tomorrow's medical cannabis solutions"},xue={hero:yue},vue="Reset Password",_ue="Welcome Back",bue="Create Account",wue="Enter your email to receive a reset link",Sue="Sign in to access your patient portal",Tue="Join Healing Buds for personalized care",kue="Check your inbox",Cue="We've sent a password reset link to {{email}}",Pue="Back to Sign In",Eue="Full Name",jue="John Doe",Aue="Email",Mue="you@example.com",Nue="Password",Iue="Confirm Password",Rue="Forgot password?",Due="Send Reset Link",Oue="Sign In",Lue="Sign up",Fue="Don't have an account?",zue="Already have an account?",Bue="Login Failed",Vue="Sign Up Failed",$ue="Invalid email or password. Please try again.",Uue="Please confirm your email before logging in.",que="An error occurred during login",Wue="This email is already registered. Please log in instead.",Gue="Password does not meet requirements.",Hue="An error occurred during sign up",Zue="Account Created!",Kue="You can now log in with your credentials.",Yue="Welcome back!",Que="You have successfully logged in.",Xue="Check your email",Jue="We've sent you a password reset link.",ede="Error",tde={invalidEmail:"Please enter a valid email address",passwordMin:"Password must be at least 6 characters",passwordMatch:"Passwords do not match",fullNameMin:"Please enter your full name"},rde={resetPassword:vue,welcomeBack:_ue,createAccount:bue,resetDescription:wue,loginDescription:Sue,signupDescription:Tue,checkInbox:kue,resetLinkSent:Cue,backToSignIn:Pue,fullName:Eue,fullNamePlaceholder:jue,email:Aue,emailPlaceholder:Mue,password:Nue,confirmPassword:Iue,forgotPassword:Rue,sendResetLink:Due,signIn:Oue,signUp:Lue,noAccount:Fue,hasAccount:zue,loginFailed:Bue,signupFailed:Vue,invalidCredentials:$ue,emailNotConfirmed:Uue,loginError:que,emailRegistered:Wue,passwordRequirements:Gue,signupError:Hue,accountCreated:Zue,accountCreatedDesc:Kue,welcomeBackToast:Yue,loginSuccess:Que,checkEmail:Xue,resetLinkSentToast:Jue,error:ede,validationErrors:tde},nde={title:"Research & Development",subtitle:"Advancing cannabis science through rigorous research and clinical trials"},ide={title:"Essential Research",paragraph1:"Our collaboration with world-class research institutions including Imperial College London and the Lisbon School of Agriculture gives us advanced scientific understanding of cannabis and its benefits. Scientific research isn't just what we do  it's everything we stand for.",paragraph2:"Our research division conducts rigorous clinical trials to advance the scientific understanding of cannabinoids and their medical applications, contributing to a growing body of evidence that breaks down stigma and pushes for progress."},sde={clinicalTrials:{title:"Clinical Trials",description:"We conduct rigorous clinical trials examining the efficacy and safety of cannabis-based medicines for various medical conditions."},publications:{title:"Publications",description:"Our research team publishes findings in peer-reviewed journals, contributing to the global understanding of cannabis medicine."},recognition:{title:"Recognition",description:"Our work has been recognized with multiple awards for contributions to cannabis science and medical innovation."},collaboration:{title:"Collaboration",description:"We partner with leading universities and research institutions worldwide to accelerate cannabis research."}},ade={title:"Eligible Conditions We Treat",subtitle:"Medical cannabis research across key therapeutic areas",searchPlaceholder:"Search conditions...",noResults:"No conditions found matching your search.",learnMore:"Learn more",notListed:"Don't see your condition listed? We may still be able to help.",contactUs:"Contact Us"},ode={all:"All",painManagement:"Pain Management",mentalHealth:"Mental Health",neurological:"Neurological",sleepDisorders:"Sleep Disorders"},lde={chronicPain:"Chronic Pain",arthritis:"Arthritis",backPain:"Back Pain",crps:"Complex Regional Pain Syndrome",migraines:"Migraines",neuropathicPain:"Neuropathic Pain",anxiety:"Anxiety",ptsd:"PTSD",epilepsy:"Epilepsy",multipleSclerosis:"Multiple Sclerosis",parkinsons:"Parkinson's Disease",insomnia:"Insomnia"},cde={title:"Interested in our research?",subtitle:"Learn more about our ongoing studies and how we're advancing cannabis science.",button:"Contact our research team"},ude={hero:nde,essentialResearch:ide,cards:sde,conditions:ade,categories:ode,conditionNames:lde,cta:cde},dde={title:"Contact Us",subtitle:"Get in touch with our team"},hde={title:"Let's Connect",subtitle:"Whether you're a patient, healthcare provider, or potential partner, we're here to help. Reach out to us through any of the channels below.",email:"Email",phone:"Phone",location:"Location"},pde={title:"Send us a message",name:"Name",namePlaceholder:"Your name",email:"Email",emailPlaceholder:"your@email.com",subject:"Subject",subjectPlaceholder:"What is this about?",message:"Message",messagePlaceholder:"Your message...",submit:"Send Message"},fde={hero:dde,connect:hde,form:pde},mde={title:"Eligible Conditions",subtitle:"At Healing Buds, we see patients when prescribed cannabis is an appropriate treatment option. Medical cannabis can be prescribed for a wide range of conditions where other treatments have failed.",note:"If your condition is not listed below, please get in touch. We may still be able to help."},gde={placeholder:"Search conditions..."},yde={all:"All",painManagement:"Pain Management",mentalHealth:"Mental Health",neurological:"Neurological",sleepDisorders:"Sleep Disorders"},xde={anxiety:"Anxiety",chronicPain:"Chronic Pain",arthritis:"Arthritis",backPain:"Back Pain",crps:"Complex Regional Pain Syndrome",epilepsy:"Epilepsy",insomnia:"Insomnia",migraines:"Migraines",multipleSclerosis:"Multiple Sclerosis",neuropathicPain:"Neuropathic Pain",parkinsons:"Parkinson's Disease",ptsd:"PTSD"},vde="No conditions found matching your search. Please try a different search term or contact us for assistance.",_de={title:"Don't see your condition listed?",subtitle:"We may still be able to help. Contact our team to discuss your specific condition and treatment options.",button:"Get in touch"},bde={hero:mde,search:gde,categories:yde,conditionNames:xde,noResults:vde,cta:_de},wde={title:"What We Do",subtitle:"Shaping the future of cannabis through cultivation, research, and innovation"},Sde={title:"Healing Buds: Leading the World in Cannabis",description:"Consistently delivering superior products and services and driving the global acceptance of cannabis. At Healing Buds, we're at the forefront of cannabis innovation, from cultivation to patient care."},Tde={title:"Our Services",cultivating:{title:"Cultivating & Processing",description:"At our extensive facilities in South Africa and Portugal, covering over 18,000 m, we select, grow, harvest and process a broad portfolio of pharmaceutical-grade cannabis products. With careful control over every aspect of production, we test, trim, dry, cure and package high-grade medical cannabis that passes third-party testing, batch after batch."},manufacture:{title:"Manufacture & Distribution",description:"With an evergreen global supply chain and deep regulatory understanding, our EU Good Manufacturing Practices (GMP) certified medical products reach patients by supplying to clinics and pharmacies worldwide. Established distribution across Europe, Africa and Asia."},clinics:{title:"Medical Cannabis Clinics",description:"We're leading in a new era of patient access, bridging the gap between healthcare professionals and those who may benefit from medical cannabis. Our clinics provide expert consultations and personalized treatment plans."},pharmacy:{title:"Online Medical Cannabis Pharmacy",description:"We provide a seamless pathway from prescription to secure direct delivery of EU GMP-certified medical cannabis, through our registered pharmacy and specialist clinic network."}},kde={title:"We cultivate beyond cannabis",betterStandards:{title:"Better Standards",description:"From plant to patient, every step of cultivation, extraction and production receives our care and attention  no detail is too small. That's why our products are EU GMP-certified and trusted worldwide."},patientAccess:{title:"Patient Access",description:"As we grow, we aspire to leave no patient behind. Thanks to a growing body of evidence, we're breaking down stigma, pushing for progress, and widening safer access to medical cannabis."},essentialResearch:{title:"Essential Research",description:"We partner with leading institutions Imperial College London and University of Pennsylvania, to deepen the clinical understanding of cannabis-based medicine. Scientific research isn't just what we do  it's everything we stand for."}},Cde={title:"Why partner with us?",description:"We bring together expert cultivators, world-class researchers, and a commitment to quality that sets us apart in the cannabis industry.",button:"Get in touch"},Pde={hero:wde,intro:Sde,services:Tde,values:kde,cta:Cde},Ede={title:"About Healing Buds",subtitle:"Leading the way in pharmaceutical-grade cannabis production"},jde={title:"Our Story",paragraph1:"Healing Buds was founded with a clear mission: to consistently deliver superior products and services while driving the global acceptance of medical cannabis. Launching from South Africa, we've expanded our cultivation and processing operations across the United Kingdom and Thailand, with exciting developments underway in Portugal. Our facilities produce EU GMP-certified medical cannabis that meets the strictest pharmaceutical-grade quality standards.",paragraph2:"From plant to patient, every step of cultivation, extraction, and production receives our meticulous care and attention  no detail is too small. This unwavering commitment to quality is why our products are trusted by healthcare professionals across multiple continents.",paragraph3:"As we grow our international footprint, we aspire to leave no patient behind. Thanks to a growing body of evidence from our research partnerships, we're breaking down stigma, pushing for regulatory progress, and widening safer access to medical cannabis through our commitment to excellence and essential scientific research."},Ade={title:"Our Values",excellence:{title:"Excellence",description:"We maintain pharmaceutical-grade standards across all operations, from cultivation in our South African facilities to distribution worldwide."},patientFocused:{title:"Patient-Focused",description:"Patient well-being drives every decision we make, ensuring safe access to medical cannabis across all our markets."},globalReach:{title:"Global Reach",description:"Operating across South Africa, UK, Thailand, and expanding to Portugal, we ensure quality cannabis medicine reaches patients worldwide."},integrity:{title:"Integrity",description:"We operate with complete transparency and adherence to the highest regulatory standards in every jurisdiction."}},Mde={title:"Our Global Facilities",description:"Operating across multiple continents with thousands of square meters of cultivation space, we select, grow, harvest, and process a comprehensive portfolio of pharmaceutical-grade cannabis products. Our facilities combine traditional horticultural expertise with cutting-edge technology and rigorous quality control protocols.",southAfrica:{title:"South Africa",description:"Our flagship South African facility serves as the cornerstone of our operations, featuring advanced greenhouse technology optimized for the region's favorable climate and regulatory framework."},uk:{title:"United Kingdom",description:"Our UK facility serves the European medical market with GMP-certified production capabilities, combining precision agriculture with pharmaceutical-grade standards."},thailand:{title:"Thailand",description:"Leveraging Thailand's rich tradition of cannabis cultivation knowledge, our facility combines local expertise with modern cultivation methodologies for the Asian market."},portugal:{title:"Portugal (Expanding)",description:"Our upcoming Portuguese facility will strategically position us in Southern Europe, combining traditional European cultivation methods with our proven quality protocols."}},Nde={title:"Join us in shaping the future of medical cannabis",description:"Whether you're a patient, healthcare provider, or potential partner across our South African, UK, Thai, or Portuguese markets, we'd love to hear from you.",button:"Get in touch"},Ide={hero:Ede,story:jde,values:Ade,facilities:Mde,cta:Nde},Rde={title:"Medical Cannabis Clinics",subtitle:"Led by doctors trained in cannabis medicine. Currently operational in South Africa, with UK and Portugal launching soon."},Dde={title:"We bring people together",paragraph1:"Because access to quality medical cannabis care requires specialized clinical expertise, our clinics connect patients with experienced cannabis-trained physicians. Currently operational in South Africa, with expansion to the UK and Portugal coming soon.",paragraph2:"It's not just about cannabisit's about helping people find the life-changing relief they deserve through personalized, evidence-based care."},Ode={title:"Our Services",learnMore:"Learn more",consultations:{title:"Expert consultations",description:"Our physicians are medical doctors trained as cannabis specialists, providing evidence-based guidance for your treatment."},treatment:{title:"Personalized treatment plans",description:"Our physicians begin with a comprehensive review of your medical history to create tailored cannabis treatment plans."},support:{title:"Ongoing patient support",description:"Continuous follow-up care throughout your cannabis treatment journey with expert clinical support from our physicians."}},Lde={southAfrica:{title:"In South Africa",paragraph1:"Our South African clinics are fully operational, providing access to medical cannabis treatment through our store and dispensary alongside our network of trained specialists.",paragraph2:"Comprehensive consultations and ongoing support ensure patients receive appropriate care tailored to their needs."},uk:{title:"In the United Kingdom",paragraph1:"Coming Soon. Since 2018, medical cannabis has been available in the UK through specialist prescribers. Our UK clinics will be led by GMC-registered doctors with extensive training in cannabis therapeutics.",paragraph2:"We will offer consultant-led assessments and access schemes to ensure affordable treatment for eligible patients across England, Scotland, Wales, and Northern Ireland."},thailand:{title:"In Thailand",paragraph1:"We operate partner manufacturing facilities in Thailand, leveraging the country's progressive cannabis regulations and traditional cultivation expertise.",paragraph2:"Our Thai operations focus on production and processing, with clinical services planned for future expansion."},portugal:{title:"In Portugal",paragraph1:"Coming Soon (after UK). Portugal will serve as our main production, processing, and shipping hub for European distribution.",paragraph2:"Our Portuguese operations will expand access across Southern Europe with expert consultations in Portuguese and English."}},Fde={quote:"I love the idea of contributing to the growing evidence which no doubt will help many others in the future.",name:"Laura Drummond",role:"Patient, UK"},zde={title:"Learn more about our medical cannabis clinics",description:"Currently operational in South Africa. UK coming soon, followed by Portugal. Find expert cannabis care.",contactButton:"Contact us",eligibilityButton:"Check eligibility"},Bde={hero:Rde,together:Dde,services:Ode,regions:Lde,testimonial:Fde,cta:zde},Vde={title:"The Wire",subtitle:"Inside news, updates, and insights from the forefront of regulated cannabis innovation and blockchain technology."},$de="Featured",Ude="Read Article ",qde="Latest Updates",Wde="Read More ",Gde={title:"Article Not Found",description:"The article you're looking for doesn't exist.",backButton:"Back to The Wire"},Hde="Back to The Wire",Zde="Read Original Article",Kde="More from The Wire",Yde={hero:Vde,featured:$de,readArticle:Ude,latestUpdates:qde,readMore:Wde,articleNotFound:Gde,backToWire:Hde,readOriginal:Zde,moreFromWire:Kde},Qde={title:"Privacy Policy",lastUpdated:"Last updated:",introduction:{title:"Introduction",content:'Healing Buds Global ("we," "our," or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our platform, including our website and medical cannabis services.'},informationCollect:{title:"Information We Collect",personal:{title:"Personal Information",items:["Name, email address, and contact information","Wallet addresses and blockchain transaction data","Medical documentation and eligibility information","Age verification and identification documents","Payment and billing information"]},automatic:{title:"Automatically Collected Information",items:["IP address, browser type, and device information","Usage data and analytics","Cookies and tracking technologies"]}},howWeUse:{title:"How We Use Your Information",items:["To provide and maintain our platform and fulfilment services","To verify eligibility and comply with cannabis regulations","To process transactions and manage access","To communicate with you about your account and services","To ensure blockchain traceability and compliance","To improve our services and develop new features","To prevent fraud and maintain security"]},informationSharing:{title:"Information Sharing",intro:"We may share your information with:",items:[{label:"Licensed Partners:",desc:"Cannabis cultivation and fulfilment providers"},{label:"Regulatory Authorities:",desc:"As required by applicable cannabis laws"},{label:"Service Providers:",desc:"Third-party vendors who assist our operations"},{label:"Blockchain Networks:",desc:"Transaction data recorded on public blockchains"},{label:"Legal Requirements:",desc:"When required by law or legal process"}]},dataSecurity:{title:"Data Security",intro:"We implement appropriate technical and organizational measures to protect your personal information, including:",items:["Encryption of sensitive data in transit and at rest","Secure blockchain infrastructure","Regular security audits and assessments","Access controls and authentication protocols","Compliance with GDPR and other data protection regulations"]},yourRights:{title:"Your Rights",intro:"Depending on your location, you may have the following rights:",items:["Access to your personal information","Correction of inaccurate data","Deletion of your data (subject to legal obligations)","Restriction of processing","Data portability","Objection to processing","Withdrawal of consent"]},blockchain:{title:"Blockchain Considerations",content:"Please note that information recorded on blockchain networks is public and permanent. While we use blockchain for transparency and compliance, this means certain transaction data cannot be deleted or modified once recorded."},international:{title:"International Transfers",content:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place for such transfers in compliance with applicable data protection laws."},children:{title:"Children's Privacy",content:"Our services are not intended for individuals under the age of 18 (or the legal age for cannabis use in your jurisdiction). We do not knowingly collect information from minors."},changes:{title:"Changes to This Policy",content:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page and updating the "Last updated" date.'},contact:{title:"Contact Us",content:"If you have questions about this Privacy Policy or our privacy practices, please contact us at:",email:"Email:",address:"Address:",addressValue:"Healing Buds Global Headquarters"}},Xde={title:"Terms of Service",lastUpdated:"Last updated:",agreement:{title:"Agreement to Terms",content:"By accessing or using Healing Buds Global's platform and services, you agree to be bound by these Terms of Service. If you do not agree to these terms, you may not access or use our services."},eligibility:{title:"Eligibility",intro:"To use our services, you must:",items:["Be at least 18 years old or the legal age for cannabis use in your jurisdiction","Have legal authorization to use medical cannabis in your region","Provide accurate medical documentation and eligibility verification","Comply with all applicable local, state, and federal laws regarding cannabis","Have a valid cryptocurrency wallet for NFT transactions"]},nftKeys:{title:"NFT Keys and Access",ownership:{title:"NFT Ownership",items:["NFT Keys (Standard, Gold, Platinum) grant access to our cannabis fulfilment platform","Each NFT is an ERC-721 token on the blockchain","You retain ownership and can trade NFTs on secondary markets","NFT value is determined by blockchain activity and market demand"]},tiers:{title:"Key Tiers",items:[{label:"Standard Key:",desc:"Access to one planet with basic features"},{label:"Gold Key:",desc:"Access to multiple planets with enhanced benefits"},{label:"Platinum Key:",desc:"Access to all 20 planets and custom strain creation"}]}},compliance:{title:"Regulatory Compliance",intro:"Our platform operates in accordance with regulated cannabis markets:",items:["All cannabis products are cultivated and distributed by licensed partners","Full seed-to-sale blockchain traceability ensures compliance","Currently licensed in Portugal with planned global expansion","Users must comply with their local jurisdiction's cannabis laws","We reserve the right to verify eligibility and deny service"]},useServices:{title:"Use of Services",intro:"You agree to:",items:["Use services only for lawful purposes","Provide accurate and complete information","Maintain the security of your account and wallet","Not engage in fraud, manipulation, or illegal activities","Not attempt to circumvent our eligibility verification","Respect intellectual property rights"]},risks:{title:"Risks and Disclaimers",warning:"Important Risks:",items:[{label:"Regulatory Risk:",desc:"Cannabis laws vary by jurisdiction and may change"},{label:"Market Volatility:",desc:"NFT resale values may fluctuate significantly"},{label:"Operational Risk:",desc:"Service depends on licensed partners' performance"},{label:"Blockchain Risk:",desc:"Transactions are irreversible; wallet security is your responsibility"}]},blockchainTraceability:{title:"Blockchain and Traceability",intro:"Our platform uses blockchain technology for:",items:["Transparent seed-to-sale product tracking","Immutable record of all transactions and fulfilments","Verification of product authenticity and regulatory compliance","Prevention of counterfeit products"],note:"Please note: Blockchain data is public and permanent. Once recorded, information cannot be modified or deleted."},intellectualProperty:{title:"Intellectual Property",content:"All content, trademarks, and intellectual property on our platform are owned by Healing Buds Global or our licensors. You may not use, reproduce, or distribute any content without our express written permission."},liability:{title:"Limitation of Liability",intro:"To the fullest extent permitted by law, Healing Buds Global shall not be liable for:",items:["Indirect, incidental, or consequential damages","Loss of profits, data, or business opportunities","Changes in cannabis laws or regulations","NFT market value fluctuations","Third-party actions or failures","Blockchain network issues or wallet security breaches"]},termination:{title:"Termination",content:"We reserve the right to suspend or terminate your access to our services at any time, with or without cause, including for violation of these terms or applicable laws. Upon termination, your NFT ownership rights remain, but platform access may be revoked."},governingLaw:{title:"Governing Law",content:"These Terms shall be governed by and construed in accordance with the laws of Portugal, where we currently hold our primary license. Disputes shall be resolved through arbitration in accordance with applicable arbitration rules."},changesTerms:{title:"Changes to Terms",content:"We may modify these Terms at any time. Material changes will be notified via email or platform notification. Continued use of services after changes constitutes acceptance of modified terms."},contact:{title:"Contact Us",content:"For questions about these Terms of Service, please contact us at:",email:"Email:",address:"Address:",addressValue:"Healing Buds Global Headquarters"}},Jde={privacy:Qde,terms:Xde},ehe={home:"Home",conditions:"Eligible Conditions",research:"Research"},the={title:"Table of Contents",onThisPage:"On This Page"},rhe={title:"Ready to Explore Your Treatment Options?",subtitle:"Contact our specialist team to learn more about medical cannabis treatment.",contact:"Contact Us ",viewConditions:"View All Eligible Conditions"},nhe="Schedule a Consultation ",ihe={causes:"Causes",symptoms:"Symptoms",treatment:"Treatment",medicalCannabis:"Medical Cannabis",faq:"FAQ"},she={title:"Anxiety and Medical Cannabis",subtitle:"Anxiety disorders affect millions of people globally, causing persistent worry and fear that interfere with daily activities. For those who haven't found relief with traditional treatments, medical cannabis may offer an alternative approach.",breadcrumb:"Anxiety",toc:{causes:"What Causes Anxiety?",symptoms:"Anxiety Symptoms",types:"Types of Anxiety Disorders",treatment:"Anxiety Treatment",medicalCannabis:"Medical Cannabis for Anxiety",faq:"Frequently Asked Questions"},causes:{title:"What Causes Anxiety?",intro:"Anxiety disorders can develop from a complex set of risk factors, including genetics, brain chemistry, personality, and life events. Understanding the underlying causes is essential for effective treatment.",items:[{title:"Genetic Factors",desc:"Family history and inherited traits can increase susceptibility"},{title:"Brain Chemistry",desc:"Imbalances in neurotransmitters may contribute to anxiety"},{title:"Environmental Stress",desc:"Traumatic experiences or prolonged stress can trigger anxiety"},{title:"Medical Conditions",desc:"Certain health issues can cause or worsen anxiety symptoms"}]},symptoms:{title:"Anxiety Symptoms",intro:"Anxiety manifests through both physical and psychological symptoms:",physical:{title:"Physical Symptoms",items:["Rapid heartbeat","Sweating and trembling","Shortness of breath","Muscle tension","Fatigue","Sleep disturbances"]},psychological:{title:"Psychological Symptoms",items:["Persistent worry","Restlessness","Difficulty concentrating","Irritability","Sense of impending doom","Avoidance behaviors"]}},types:{title:"Types of Anxiety Disorders",items:[{type:"Generalized Anxiety Disorder (GAD)",desc:"Persistent excessive worry about various aspects of daily life"},{type:"Social Anxiety Disorder",desc:"Intense fear of social situations and being judged by others"},{type:"Panic Disorder",desc:"Recurrent unexpected panic attacks and fear of future episodes"},{type:"Specific Phobias",desc:"Excessive fear of specific objects or situations"},{type:"Separation Anxiety",desc:"Excessive fear of being separated from attachment figures"}]},treatment:{title:"Anxiety Treatment",intro:"Effective anxiety treatment typically involves a combination of approaches:",items:[{title:"Psychotherapy",desc:"Cognitive behavioral therapy (CBT) and exposure therapy"},{title:"Medications",desc:"Antidepressants, anti-anxiety medications, and beta-blockers"},{title:"Lifestyle Changes",desc:"Exercise, stress management, and sleep hygiene"},{title:"Support Groups",desc:"Connecting with others experiencing similar challenges"}]},medicalCannabis:{title:"Medical Cannabis for Anxiety",content1:"For patients with anxiety who have not found adequate relief with conventional treatments, medical cannabis may represent an alternative therapeutic option. Research suggests that certain cannabinoids may help regulate the body's stress response system.",content2:"At Healing Buds, our medical professionals conduct comprehensive evaluations to determine whether medical cannabis is appropriate for your specific anxiety condition. We provide personalized treatment plans and ongoing support."},faq:{title:"Frequently Asked Questions",items:[{question:"Can medical cannabis help with anxiety?",answer:"Some studies suggest that certain cannabinoids may help manage anxiety symptoms, though responses vary by individual. The endocannabinoid system plays a role in regulating stress and emotional responses."},{question:"Will medical cannabis make my anxiety worse?",answer:"Response to medical cannabis varies by individual, and dosing is critical. Our medical team carefully monitors your treatment to find the optimal dosage and formulation for your specific needs."},{question:"How long does treatment take to work?",answer:"The timeline varies depending on the individual, the specific product, and the administration method. Some patients notice improvements within days, while others may require several weeks."}]}},ahe={title:"Chronic Pain and Medical Cannabis",subtitle:"Chronic pain affects millions of people worldwide, significantly impacting quality of life and daily functioning. Medical cannabis has emerged as a potential treatment option for those who haven't found relief with conventional therapies.",breadcrumb:"Chronic Pain",causes:{title:"What Causes Chronic Pain?",intro:"Chronic pain is defined as pain that persists for more than 12 weeks, often despite treatment.",items:[{title:"Injury or Surgery",desc:"Nerve damage or tissue injury that doesn't heal properly"},{title:"Chronic Conditions",desc:"Arthritis, fibromyalgia, and other long-term diseases"},{title:"Nerve Damage",desc:"Neuropathy from diabetes, infections, or trauma"},{title:"Unknown Causes",desc:"Sometimes chronic pain develops without any identifiable cause"}]},symptoms:{title:"Chronic Pain Symptoms",intro:"Chronic pain can manifest in various forms and intensities:",types:{title:"Pain Types",items:["Aching or throbbing pain","Burning sensations","Shooting or stabbing pain","Stiffness and soreness","Tingling or numbness"]},associated:{title:"Associated Symptoms",items:["Fatigue and sleep problems","Mood changes and depression","Reduced mobility","Decreased appetite","Social withdrawal"]}},treatment:{title:"Chronic Pain Treatment",intro:"Effective chronic pain management often requires a multidisciplinary approach:",items:[{title:"Physical Therapy",desc:"Exercise and rehabilitation programs"},{title:"Medications",desc:"Pain relievers, anti-inflammatories, and nerve blockers"},{title:"Psychological Support",desc:"Cognitive behavioral therapy and counseling"},{title:"Alternative Therapies",desc:"Acupuncture, massage, and mindfulness"}]},medicalCannabis:{title:"Medical Cannabis for Chronic Pain",content1:"Research suggests that cannabinoids may interact with the body's endocannabinoid system to help manage pain signals.",content2:"Our medical team works with patients to develop personalized treatment plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Is medical cannabis effective for all types of chronic pain?",answer:"Medical cannabis may be more effective for certain types of pain, particularly neuropathic pain."},{question:"Can I use medical cannabis alongside other pain medications?",answer:"In some cases, medical cannabis may be used as part of a comprehensive pain management plan."},{question:"How quickly can I expect relief?",answer:"Response times vary depending on the product, administration method, and individual factors."}]}},ohe={title:"Insomnia Treatment",subtitle:"Understanding sleep disorders and exploring medical cannabis as a treatment option for improving sleep quality and duration.",breadcrumb:"Insomnia",causes:{title:"What Causes Insomnia?",content1:"Insomnia is a sleep disorder characterized by difficulty falling asleep, staying asleep, or both.",content2:"Common causes include stress, anxiety, depression, poor sleep habits, medications, and environmental factors.",content3:"Chronic insomnia can lead to serious health consequences."},symptoms:{title:"Insomnia Symptoms",sleep:{title:"Sleep-Related Symptoms",items:["Difficulty falling asleep","Waking up during the night","Waking too early","Not feeling rested after sleep","Sleeping for short periods"]},daytime:{title:"Daytime Symptoms",items:["Fatigue and low energy","Difficulty concentrating","Irritability and mood changes","Impaired work performance","Increased errors or accidents"]}},treatment:{title:"Treatment Options",items:[{title:"Sleep Hygiene",desc:"Establishing consistent sleep schedules and bedtime routines"},{title:"Cognitive Behavioral Therapy",desc:"Addressing thoughts and behaviors affecting sleep"},{title:"Medications",desc:"Prescription sleep aids and over-the-counter options"},{title:"Lifestyle Changes",desc:"Exercise, diet modifications, and stress management"}]},medicalCannabis:{title:"Medical Cannabis for Sleep",content1:"Research suggests that certain cannabinoids may help regulate sleep patterns.",content2:"Our sleep specialists work with patients to develop personalized treatment plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Can medical cannabis help me fall asleep faster?",answer:"Some studies suggest certain cannabis formulations may reduce sleep onset latency."},{question:"Will I feel groggy in the morning?",answer:"Proper dosing and strain selection are key to avoiding morning grogginess."},{question:"Is medical cannabis addictive for sleep use?",answer:"When used as prescribed and monitored by medical professionals, the risk of dependence is managed."}]}},lhe={title:"PTSD Treatment",subtitle:"Understanding post-traumatic stress disorder and exploring medical cannabis as a complementary treatment option.",breadcrumb:"PTSD",causes:{title:"What Causes PTSD?",content1:"Post-Traumatic Stress Disorder (PTSD) is a mental health condition triggered by experiencing or witnessing a terrifying event.",content2:"Common triggers include combat exposure, childhood trauma, physical assault, sexual violence, accidents, natural disasters, or witnessing death or injury.",content3:"PTSD involves changes in brain chemistry and function, particularly in areas related to fear, stress response, and memory processing."},symptoms:{title:"PTSD Symptoms",core:{title:"Core Symptoms",items:["Intrusive memories and flashbacks","Avoidance of triggers","Negative thoughts and mood","Hyperarousal and reactivity"]},additional:{title:"Additional Effects",items:["Sleep disturbances and nightmares","Difficulty concentrating","Emotional numbness","Relationship problems"]}},treatment:{title:"Treatment Options",items:[{title:"Trauma-Focused Therapy",desc:"EMDR and prolonged exposure therapy"},{title:"Medications",desc:"Antidepressants and anti-anxiety medications"},{title:"Support Groups",desc:"Connecting with others who understand"},{title:"Lifestyle Support",desc:"Exercise, mindfulness, and stress management"}]},medicalCannabis:{title:"Medical Cannabis for PTSD",content1:"Research shows cannabinoids may help regulate the endocannabinoid system involved in fear and stress responses.",content2:"Our specialists work with PTSD patients to develop careful, monitored treatment plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Can medical cannabis help with PTSD nightmares?",answer:"Some studies suggest cannabis may reduce the frequency and intensity of PTSD-related nightmares."},{question:"Will cannabis worsen my anxiety symptoms?",answer:"Proper strain selection and dosing are critical. Our team carefully monitors your response."},{question:"Can I combine cannabis with my current PTSD treatment?",answer:"Medical cannabis is often used as a complementary therapy alongside conventional treatments."}]}},che={title:"Epilepsy Treatment",subtitle:"Understanding epilepsy and exploring medical cannabis as a treatment option for seizure management.",breadcrumb:"Epilepsy",causes:{title:"What Causes Epilepsy?",content1:"Epilepsy is a neurological disorder characterized by recurrent, unprovoked seizures caused by abnormal electrical activity in the brain.",content2:"Causes include genetic factors, head trauma, brain conditions, infections, prenatal injury, and developmental disorders. In many cases, the cause is unknown.",content3:"Seizures occur when there's a sudden surge of electrical activity in the brain."},symptoms:{title:"Epilepsy Symptoms",seizures:{title:"Seizure Types",items:["Generalized tonic-clonic seizures","Absence seizures","Focal (partial) seizures","Myoclonic seizures"]},signs:{title:"Common Signs",items:["Temporary confusion","Staring spells","Uncontrollable jerking","Loss of consciousness","Sensory symptoms"]}},treatment:{title:"Treatment Options",items:[{title:"Anti-Epileptic Drugs",desc:"Medications to control seizure activity"},{title:"Surgery",desc:"For drug-resistant epilepsy when seizure focus is identifiable"},{title:"Dietary Therapy",desc:"Ketogenic diet and modified Atkins diet"},{title:"Nerve Stimulation",desc:"VNS and responsive neurostimulation devices"}]},medicalCannabis:{title:"Medical Cannabis for Epilepsy",content1:"CBD-based treatments have shown significant promise in reducing seizure frequency, particularly in treatment-resistant epilepsy.",content2:"Our neurological specialists work with patients to develop comprehensive seizure management plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Is CBD approved for epilepsy treatment?",answer:"Yes, CBD-based medications like Epidiolex are FDA-approved for certain types of epilepsy."},{question:"Can cannabis replace my current epilepsy medications?",answer:"Medical cannabis is typically used alongside existing treatments, not as a replacement."},{question:"How effective is cannabis for seizure control?",answer:"Studies show significant seizure reduction in many patients with treatment-resistant epilepsy."}]}},uhe={title:"Arthritis Treatment",subtitle:"Understanding arthritis and exploring medical cannabis as a treatment option for joint pain and inflammation.",breadcrumb:"Arthritis",causes:{title:"What Causes Arthritis?",content1:"Arthritis is inflammation of one or more joints, causing pain and stiffness that can worsen with age.",content2:"Osteoarthritis occurs when protective cartilage wears down. Rheumatoid arthritis is an autoimmune disorder where the immune system attacks the joints.",content3:"Risk factors include age, family history, previous joint injuries, obesity, and repetitive stress on joints."},symptoms:{title:"Arthritis Symptoms",common:{title:"Common Symptoms",items:["Joint pain and stiffness","Swelling and inflammation","Reduced range of motion","Warmth around joints"]},severe:{title:"Severe Symptoms",items:["Joint deformity","Chronic fatigue","Morning stiffness lasting hours","Difficulty with daily tasks"]}},treatment:{title:"Treatment Options",items:[{title:"Physical Therapy",desc:"Exercises to improve strength and flexibility"},{title:"Medications",desc:"NSAIDs, DMARDs, and biologics"},{title:"Joint Injections",desc:"Corticosteroids and hyaluronic acid"},{title:"Surgery",desc:"Joint repair, replacement, or fusion"}]},medicalCannabis:{title:"Medical Cannabis for Arthritis",content1:"Cannabinoids have shown anti-inflammatory and analgesic properties that may help manage arthritis symptoms.",content2:"Our rheumatology specialists work with patients to develop comprehensive pain management strategies."},faq:{title:"Frequently Asked Questions",items:[{question:"Can cannabis reduce joint inflammation?",answer:"Studies suggest cannabinoids have anti-inflammatory properties that may help reduce joint inflammation."},{question:"Is topical cannabis effective for arthritis?",answer:"Topical cannabis products may provide localized relief for joint pain without systemic effects."},{question:"Can I use cannabis with my arthritis medications?",answer:"Our team reviews your current medications to ensure safe, complementary treatment."}]}},dhe={title:"Migraine Treatment",subtitle:"Understanding migraines and exploring medical cannabis as a treatment option for headache management.",breadcrumb:"Migraines",causes:{title:"What Causes Migraines?",content1:"Migraines are severe, recurring headaches often accompanied by other symptoms like nausea and sensitivity to light.",content2:"Triggers include hormonal changes, stress, certain foods, sensory stimuli, sleep changes, and weather changes.",content3:"Migraines involve changes in brain activity affecting nerve signals, chemicals, and blood vessels."},symptoms:{title:"Migraine Symptoms",headache:{title:"Headache Symptoms",items:["Throbbing or pulsing pain","Pain on one or both sides","Sensitivity to light and sound","Nausea and vomiting"]},other:{title:"Other Symptoms",items:["Visual disturbances (aura)","Tingling sensations","Difficulty speaking","Cognitive difficulties"]}},treatment:{title:"Treatment Options",items:[{title:"Preventive Medications",desc:"Daily medications to reduce frequency"},{title:"Acute Treatments",desc:"Triptans and pain relievers for active migraines"},{title:"Lifestyle Management",desc:"Identifying and avoiding triggers"},{title:"Alternative Therapies",desc:"Acupuncture, biofeedback, and supplements"}]},medicalCannabis:{title:"Medical Cannabis for Migraines",content1:"Research suggests cannabinoids may help reduce migraine frequency and intensity through effects on the endocannabinoid system.",content2:"Our headache specialists work with patients to develop comprehensive migraine management plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Can cannabis prevent migraines?",answer:"Some studies suggest regular cannabis use may reduce migraine frequency in certain patients."},{question:"Is cannabis effective during an active migraine?",answer:"Some patients report relief during acute migraines, though response varies by individual."},{question:"What's the best cannabis product for migraines?",answer:"Our specialists can recommend specific formulations based on your migraine patterns."}]}},hhe={title:"Multiple Sclerosis Treatment",subtitle:"Understanding MS and exploring medical cannabis as a treatment option for symptom management.",breadcrumb:"Multiple Sclerosis",causes:{title:"What Causes Multiple Sclerosis?",content1:"Multiple sclerosis is an autoimmune disease where the immune system attacks the protective myelin sheath covering nerve fibers.",content2:"The exact cause is unknown, but genetic and environmental factors play a role. Risk factors include family history, infections, climate, and vitamin D levels.",content3:"MS disrupts communication between the brain and body, causing a wide range of symptoms."},symptoms:{title:"MS Symptoms",neurological:{title:"Neurological Symptoms",items:["Numbness or tingling","Muscle weakness","Vision problems","Balance and coordination issues"]},other:{title:"Other Symptoms",items:["Fatigue","Cognitive changes","Bladder dysfunction","Spasticity and muscle stiffness"]}},treatment:{title:"Treatment Options",items:[{title:"Disease-Modifying Therapies",desc:"Medications to slow MS progression"},{title:"Symptom Management",desc:"Treatments for specific symptoms"},{title:"Physical Therapy",desc:"Exercises for strength and mobility"},{title:"Occupational Therapy",desc:"Strategies for daily living"}]},medicalCannabis:{title:"Medical Cannabis for MS",content1:"Cannabis-based treatments have shown promise in managing MS symptoms, particularly spasticity and pain.",content2:"Our neurology specialists work with MS patients to develop comprehensive symptom management plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Is cannabis approved for MS treatment?",answer:"Cannabis-based medications like Sativex are approved in some countries for MS spasticity."},{question:"Can cannabis help with MS fatigue?",answer:"Some patients report improved energy levels, though effects vary by individual."},{question:"Will cannabis interact with my MS medications?",answer:"Our team reviews your current treatments to ensure safe, effective complementary therapy."}]}},phe={title:"Neuropathic Pain Treatment",subtitle:"Understanding nerve pain and exploring medical cannabis as a treatment option.",breadcrumb:"Neuropathic Pain",causes:{title:"What Causes Neuropathic Pain?",content1:"Neuropathic pain results from damage to or dysfunction of the nervous system, causing abnormal pain signals.",content2:"Common causes include diabetes, shingles, chemotherapy, injuries, infections, and conditions like multiple sclerosis.",content3:"Unlike other types of pain, neuropathic pain persists even after the initial injury heals."},symptoms:{title:"Neuropathic Pain Symptoms",sensations:{title:"Pain Sensations",items:["Burning or shooting pain","Electric shock sensations","Stabbing or lancinating pain","Tingling and numbness"]},other:{title:"Other Symptoms",items:["Increased sensitivity to touch","Pain from normally painless stimuli","Sleep disturbances","Emotional impact"]}},treatment:{title:"Treatment Options",items:[{title:"Medications",desc:"Anticonvulsants, antidepressants, and topical treatments"},{title:"Nerve Blocks",desc:"Injections to interrupt pain signals"},{title:"Physical Therapy",desc:"TENS, exercises, and desensitization"},{title:"Interventional Procedures",desc:"Spinal cord stimulation"}]},medicalCannabis:{title:"Medical Cannabis for Neuropathic Pain",content1:"Research strongly supports cannabinoids for neuropathic pain management, with multiple studies showing significant relief.",content2:"Our pain specialists work with patients to develop personalized neuropathic pain treatment plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Is cannabis more effective for nerve pain than other pain types?",answer:"Research suggests cannabinoids may be particularly effective for neuropathic pain."},{question:"Can topical cannabis help nerve pain?",answer:"Topical products may provide localized relief, particularly for peripheral neuropathy."},{question:"How long until I see results?",answer:"Many patients notice improvement within weeks, though optimal dosing may take time to establish."}]}},fhe={title:"Back Pain Treatment",subtitle:"Understanding back pain and exploring medical cannabis as a treatment option.",breadcrumb:"Back Pain",causes:{title:"What Causes Back Pain?",content1:"Back pain is one of the most common medical problems, affecting most people at some point in their lives.",content2:"Causes include muscle strains, disc problems, arthritis, osteoporosis, and structural abnormalities.",content3:"Risk factors include poor posture, obesity, sedentary lifestyle, and physically demanding work."},symptoms:{title:"Back Pain Symptoms",pain:{title:"Pain Characteristics",items:["Muscle aching","Shooting or stabbing pain","Pain radiating down the leg","Limited flexibility"]},severe:{title:"Warning Signs",items:["Numbness or tingling","Weakness in legs","Bladder or bowel problems","Fever with back pain"]}},treatment:{title:"Treatment Options",items:[{title:"Physical Therapy",desc:"Exercises to strengthen and stretch"},{title:"Medications",desc:"Pain relievers and muscle relaxants"},{title:"Injections",desc:"Epidural steroid injections"},{title:"Surgery",desc:"For structural problems or nerve compression"}]},medicalCannabis:{title:"Medical Cannabis for Back Pain",content1:"Medical cannabis may help manage chronic back pain through anti-inflammatory and analgesic effects.",content2:"Our pain management specialists develop personalized treatment plans for back pain relief."},faq:{title:"Frequently Asked Questions",items:[{question:"Can cannabis help with chronic back pain?",answer:"Many patients with chronic back pain report significant relief with medical cannabis."},{question:"Is cannabis better than opioids for back pain?",answer:"Some patients find cannabis provides comparable relief with fewer side effects than opioids."},{question:"Can I use topical cannabis for back pain?",answer:"Topical products can provide localized relief for muscle-related back pain."}]}},mhe={title:"Parkinson's Disease Treatment",subtitle:"Understanding Parkinson's and exploring medical cannabis for symptom management.",breadcrumb:"Parkinson's",causes:{title:"What Causes Parkinson's?",content1:"Parkinson's disease is a progressive neurological disorder affecting movement, caused by the loss of dopamine-producing brain cells.",content2:"The exact cause is unknown, but genetic mutations and environmental factors may contribute.",content3:"Parkinson's primarily affects people over 60, though early-onset forms exist."},symptoms:{title:"Parkinson's Symptoms",motor:{title:"Motor Symptoms",items:["Tremor at rest","Slowed movement (bradykinesia)","Rigid muscles","Impaired posture and balance"]},nonmotor:{title:"Non-Motor Symptoms",items:["Sleep disturbances","Depression and anxiety","Cognitive changes","Autonomic dysfunction"]}},treatment:{title:"Treatment Options",items:[{title:"Dopamine Therapy",desc:"Levodopa and dopamine agonists"},{title:"Physical Therapy",desc:"Exercises to improve movement and balance"},{title:"Deep Brain Stimulation",desc:"Surgical intervention for advanced cases"},{title:"Speech Therapy",desc:"Addressing voice and swallowing difficulties"}]},medicalCannabis:{title:"Medical Cannabis for Parkinson's",content1:"Research suggests cannabinoids may help manage several Parkinson's symptoms including tremor, pain, and sleep issues.",content2:"Our movement disorder specialists work with patients to explore complementary cannabis treatments."},faq:{title:"Frequently Asked Questions",items:[{question:"Can cannabis reduce Parkinson's tremors?",answer:"Some studies and patient reports suggest cannabis may help reduce tremor severity."},{question:"Will cannabis interact with my Parkinson's medications?",answer:"Our specialists carefully review your medications for potential interactions."},{question:"Can cannabis help with Parkinson's sleep problems?",answer:"Many Parkinson's patients report improved sleep quality with medical cannabis."}]}},ghe={title:"Complex Regional Pain Syndrome Treatment",subtitle:"Understanding CRPS and exploring medical cannabis for pain management.",breadcrumb:"CRPS",causes:{title:"What Causes CRPS?",content1:"Complex Regional Pain Syndrome is a chronic pain condition usually affecting a limb after injury, surgery, stroke, or heart attack.",content2:"CRPS involves abnormal responses in the nervous system, causing pain disproportionate to the initial injury.",content3:"The condition can spread beyond the initially affected area and cause long-lasting disability."},symptoms:{title:"CRPS Symptoms",pain:{title:"Pain Symptoms",items:["Continuous burning or throbbing pain","Sensitivity to touch or cold","Swelling of the affected area","Changes in skin color and temperature"]},other:{title:"Other Symptoms",items:["Changes in skin texture","Abnormal sweating","Joint stiffness","Difficulty moving the affected limb"]}},treatment:{title:"Treatment Options",items:[{title:"Physical Therapy",desc:"Gradual movement and desensitization"},{title:"Medications",desc:"Pain medications, antidepressants, and anticonvulsants"},{title:"Nerve Blocks",desc:"Injections to interrupt pain signals"},{title:"Spinal Cord Stimulation",desc:"Electrical pulses to modify pain signals"}]},medicalCannabis:{title:"Medical Cannabis for CRPS",content1:"Medical cannabis may help manage CRPS pain through multiple mechanisms, including modulation of pain signals.",content2:"Our pain specialists work with CRPS patients to develop comprehensive, multimodal treatment plans."},faq:{title:"Frequently Asked Questions",items:[{question:"Can cannabis help with CRPS pain?",answer:"Some CRPS patients report significant pain relief with medical cannabis treatment."},{question:"Is cannabis effective for CRPS-related sleep problems?",answer:"Many patients report improved sleep quality, which can help overall pain management."},{question:"Can I use cannabis with my current CRPS treatments?",answer:"Medical cannabis is often used alongside other CRPS treatments as part of a comprehensive plan."}]}},yhe={breadcrumbs:ehe,toc:the,cta:rhe,consultation:nhe,common:ihe,anxiety:she,chronicPain:ahe,insomnia:ohe,ptsd:lhe,epilepsy:che,arthritis:uhe,migraines:dhe,multipleSclerosis:hhe,neuropathicPain:phe,backPain:fhe,parkinsons:mhe,crps:ghe},xhe={whatWeDo:"O Que Fazemos",research:"Investigao",theWire:"Notcias",aboutUs:"Sobre Ns",contactUs:"Contacte-nos",checkEligibility:"Verificar Elegibilidade",patientLogin:"Login do Paciente",signOut:"Sair"},vhe={cultivating:"Cultivo e Processamento",cultivatingDesc:"Cultivo de grau farmacutico",manufacture:"Fabrico e Distribuio",manufactureDesc:"Excelncia na cadeia de fornecimento global",clinics:"Clnicas de Cannabis Medicinal",clinicsDesc:"Cuidados centrados no paciente",pharmacy:"Farmcia Online de Cannabis Medicinal",pharmacyDesc:"Acesso conveniente aos cuidados",aboutHealing:"Sobre a Healing Buds",aboutHealingDesc:"A nossa histria, valores e instalaes",blockchain:"Tecnologia Blockchain",blockchainDesc:"Rastreabilidade da semente ao paciente"},_he={tagline:"Moldando o futuro da cannabis atravs da investigao e excelncia.",company:"Empresa",aboutUs:"Sobre Ns",ourStandards:"Os Nossos Padres",research:"Investigao",theWire:"Notcias",resources:"Recursos",patientAccess:"Acesso ao Paciente",conditionsTreated:"Condies Tratadas",franchiseOpportunities:"Oportunidades de Franquia",legal:"Legal",privacyPolicy:"Poltica de Privacidade",termsOfService:"Termos de Servio",compliance:"Conformidade",copyright:" {{year}} Healing Buds Global. Todos os direitos reservados.",commitment:"Comprometidos em avanar a medicina global de cannabis"},bhe={nav:xhe,dropdown:vhe,footer:_he},whe={welcome:"Bem-vindo ",healingBuds:"Healing Buds",tagline:"Pioneiros nas solues de cannabis medicinal de amanh"},She={hero:whe},The="Redefinir Palavra-passe",khe="Bem-vindo de Volta",Che="Criar Conta",Phe="Introduza o seu email para receber um link de redefinio",Ehe="Inicie sesso para aceder ao seu portal de paciente",jhe="Junte-se  Healing Buds para cuidados personalizados",Ahe="Verifique a sua caixa de entrada",Mhe="Envimos um link de redefinio de palavra-passe para {{email}}",Nhe="Voltar ao Login",Ihe="Nome Completo",Rhe="Joo Silva",Dhe="Email",Ohe="voce@exemplo.com",Lhe="Palavra-passe",Fhe="Confirmar Palavra-passe",zhe="Esqueceu a palavra-passe?",Bhe="Enviar Link de Redefinio",Vhe="Iniciar Sesso",$he="Registar-se",Uhe="No tem uma conta?",qhe="J tem uma conta?",Whe="Falha no Login",Ghe="Falha no Registo",Hhe="Email ou palavra-passe invlidos. Por favor, tente novamente.",Zhe="Por favor, confirme o seu email antes de iniciar sesso.",Khe="Ocorreu um erro durante o login",Yhe="Este email j est registado. Por favor, inicie sesso.",Qhe="A palavra-passe no cumpre os requisitos.",Xhe="Ocorreu um erro durante o registo",Jhe="Conta Criada!",epe="Agora pode iniciar sesso com as suas credenciais.",tpe="Bem-vindo de volta!",rpe="Iniciou sesso com sucesso.",npe="Verifique o seu email",ipe="Envimos-lhe um link de redefinio de palavra-passe.",spe="Erro",ape={invalidEmail:"Por favor, introduza um endereo de email vlido",passwordMin:"A palavra-passe deve ter pelo menos 6 caracteres",passwordMatch:"As palavras-passe no coincidem",fullNameMin:"Por favor, introduza o seu nome completo"},ope={resetPassword:The,welcomeBack:khe,createAccount:Che,resetDescription:Phe,loginDescription:Ehe,signupDescription:jhe,checkInbox:Ahe,resetLinkSent:Mhe,backToSignIn:Nhe,fullName:Ihe,fullNamePlaceholder:Rhe,email:Dhe,emailPlaceholder:Ohe,password:Lhe,confirmPassword:Fhe,forgotPassword:zhe,sendResetLink:Bhe,signIn:Vhe,signUp:$he,noAccount:Uhe,hasAccount:qhe,loginFailed:Whe,signupFailed:Ghe,invalidCredentials:Hhe,emailNotConfirmed:Zhe,loginError:Khe,emailRegistered:Yhe,passwordRequirements:Qhe,signupError:Xhe,accountCreated:Jhe,accountCreatedDesc:epe,welcomeBackToast:tpe,loginSuccess:rpe,checkEmail:npe,resetLinkSentToast:ipe,error:spe,validationErrors:ape},lpe={title:"Investigao & Desenvolvimento",subtitle:"Avanando a cincia da cannabis atravs de investigao rigorosa e ensaios clnicos"},cpe={title:"Investigao Essencial",paragraph1:"A nossa colaborao com instituies de investigao de classe mundial, incluindo o Imperial College London e o Instituto Superior de Agronomia de Lisboa, proporciona-nos uma compreenso cientfica avanada da cannabis e dos seus benefcios. A investigao cientfica no  apenas o que fazemos   tudo o que defendemos.",paragraph2:"A nossa diviso de investigao realiza ensaios clnicos rigorosos para avanar a compreenso cientfica dos canabinides e as suas aplicaes mdicas, contribuindo para um crescente corpo de evidncias que derruba o estigma e impulsiona o progresso."},upe={clinicalTrials:{title:"Ensaios Clnicos",description:"Realizamos ensaios clnicos rigorosos examinando a eficcia e segurana de medicamentos  base de cannabis para vrias condies mdicas."},publications:{title:"Publicaes",description:"A nossa equipa de investigao publica descobertas em revistas cientficas revistas por pares, contribuindo para a compreenso global da medicina de cannabis."},recognition:{title:"Reconhecimento",description:"O nosso trabalho foi reconhecido com mltiplos prmios pelas contribuies para a cincia da cannabis e inovao mdica."},collaboration:{title:"Colaborao",description:"Fazemos parcerias com universidades e instituies de investigao lderes mundiais para acelerar a investigao da cannabis."}},dpe={title:"Condies Elegveis que Tratamos",subtitle:"Investigao de cannabis medicinal em reas teraputicas chave",searchPlaceholder:"Pesquisar condies...",noResults:"Nenhuma condio encontrada correspondente  sua pesquisa.",learnMore:"Saber mais",notListed:"No v a sua condio listada? Ainda podemos ajudar.",contactUs:"Contacte-nos"},hpe={all:"Todas",painManagement:"Gesto da Dor",mentalHealth:"Sade Mental",neurological:"Neurolgico",sleepDisorders:"Distrbios do Sono"},ppe={chronicPain:"Dor Crnica",arthritis:"Artrite",backPain:"Dor nas Costas",crps:"Sndrome de Dor Regional Complexa",migraines:"Enxaquecas",neuropathicPain:"Dor Neuroptica",anxiety:"Ansiedade",ptsd:"PTSD",epilepsy:"Epilepsia",multipleSclerosis:"Esclerose Mltipla",parkinsons:"Doena de Parkinson",insomnia:"Insnia"},fpe={title:"Interessado na nossa investigao?",subtitle:"Saiba mais sobre os nossos estudos em curso e como estamos a avanar a cincia da cannabis.",button:"Contactar a nossa equipa de investigao"},mpe={hero:lpe,essentialResearch:cpe,cards:upe,conditions:dpe,categories:hpe,conditionNames:ppe,cta:fpe},gpe={title:"Contacte-nos",subtitle:"Entre em contacto com a nossa equipa"},ype={title:"Vamos Conectar",subtitle:"Seja paciente, profissional de sade ou potencial parceiro, estamos aqui para ajudar. Contacte-nos atravs de qualquer um dos canais abaixo.",email:"Email",phone:"Telefone",location:"Localizao"},xpe={title:"Envie-nos uma mensagem",name:"Nome",namePlaceholder:"O seu nome",email:"Email",emailPlaceholder:"seu@email.com",subject:"Assunto",subjectPlaceholder:"Sobre o que ?",message:"Mensagem",messagePlaceholder:"A sua mensagem...",submit:"Enviar Mensagem"},vpe={hero:gpe,connect:ype,form:xpe},_pe={title:"Condies Elegveis",subtitle:"Na Healing Buds, atendemos pacientes quando a cannabis prescrita  uma opo de tratamento apropriada. A cannabis medicinal pode ser prescrita para uma ampla gama de condies onde outros tratamentos falharam.",note:"Se a sua condio no estiver listada abaixo, entre em contacto. Ainda podemos ajudar."},bpe={placeholder:"Pesquisar condies..."},wpe={all:"Todas",painManagement:"Gesto da Dor",mentalHealth:"Sade Mental",neurological:"Neurolgico",sleepDisorders:"Distrbios do Sono"},Spe={anxiety:"Ansiedade",chronicPain:"Dor Crnica",arthritis:"Artrite",backPain:"Dor nas Costas",crps:"Sndrome de Dor Regional Complexa",epilepsy:"Epilepsia",insomnia:"Insnia",migraines:"Enxaquecas",multipleSclerosis:"Esclerose Mltipla",neuropathicPain:"Dor Neuroptica",parkinsons:"Doena de Parkinson",ptsd:"PTSD"},Tpe="Nenhuma condio encontrada correspondente  sua pesquisa. Por favor, tente um termo de pesquisa diferente ou contacte-nos para assistncia.",kpe={title:"No v a sua condio listada?",subtitle:"Ainda podemos ajudar. Contacte a nossa equipa para discutir a sua condio especfica e opes de tratamento.",button:"Entre em contacto"},Cpe={hero:_pe,search:bpe,categories:wpe,conditionNames:Spe,noResults:Tpe,cta:kpe},Ppe={title:"O Que Fazemos",subtitle:"Moldando o futuro da cannabis atravs do cultivo, investigao e inovao"},Epe={title:"Healing Buds: Liderando o Mundo na Cannabis",description:"Entregando consistentemente produtos e servios superiores e impulsionando a aceitao global da cannabis. Na Healing Buds, estamos na vanguarda da inovao em cannabis, desde o cultivo at ao cuidado do paciente."},jpe={title:"Os Nossos Servios",cultivating:{title:"Cultivo e Processamento",description:"Nas nossas extensas instalaes na frica do Sul e Portugal, cobrindo mais de 18.000 m, selecionamos, cultivamos, colhemos e processamos um amplo portflio de produtos de cannabis de grau farmacutico. Com controlo cuidadoso sobre cada aspeto da produo, testamos, aparamos, secamos, curamos e embalamos cannabis medicinal de alta qualidade que passa em testes de terceiros, lote aps lote."},manufacture:{title:"Fabrico e Distribuio",description:"Com uma cadeia de fornecimento global perene e profunda compreenso regulatria, os nossos produtos mdicos certificados EU GMP chegam aos pacientes atravs do fornecimento a clnicas e farmcias em todo o mundo. Distribuio estabelecida na Europa, frica e sia."},clinics:{title:"Clnicas de Cannabis Medicinal",description:"Estamos a liderar uma nova era de acesso ao paciente, fazendo a ponte entre profissionais de sade e aqueles que podem beneficiar da cannabis medicinal. As nossas clnicas fornecem consultas especializadas e planos de tratamento personalizados."},pharmacy:{title:"Farmcia Online de Cannabis Medicinal",description:"Fornecemos um caminho contnuo desde a prescrio at  entrega direta e segura de cannabis medicinal certificada EU GMP, atravs da nossa rede de farmcias registadas e clnicas especializadas."}},Ape={title:"Cultivamos alm da cannabis",betterStandards:{title:"Melhores Padres",description:"Da planta ao paciente, cada passo do cultivo, extrao e produo recebe o nosso cuidado e ateno  nenhum detalhe  demasiado pequeno.  por isso que os nossos produtos so certificados EU GMP e confiveis em todo o mundo."},patientAccess:{title:"Acesso ao Paciente",description:" medida que crescemos, aspiramos a no deixar nenhum paciente para trs. Graas a um crescente corpo de evidncias, estamos a derrubar o estigma, a impulsionar o progresso e a ampliar o acesso mais seguro  cannabis medicinal."},essentialResearch:{title:"Investigao Essencial",description:"Fazemos parcerias com instituies lderes como o Imperial College London e a Universidade da Pensilvnia, para aprofundar a compreenso clnica da medicina  base de cannabis. A investigao cientfica no  apenas o que fazemos   tudo o que defendemos."}},Mpe={title:"Porqu fazer parceria connosco?",description:"Reunimos cultivadores especializados, investigadores de classe mundial e um compromisso com a qualidade que nos distingue na indstria da cannabis.",button:"Entre em contacto"},Npe={hero:Ppe,intro:Epe,services:jpe,values:Ape,cta:Mpe},Ipe={title:"Sobre a Healing Buds",subtitle:"Liderando o caminho na produo de cannabis de grau farmacutico"},Rpe={title:"A Nossa Histria",paragraph1:"A Healing Buds foi fundada com uma misso clara: entregar consistentemente produtos e servios superiores enquanto impulsiona a aceitao global da cannabis medicinal. Lanando a partir da frica do Sul, expandimos as nossas operaes de cultivo e processamento pelo Reino Unido e Tailndia, com desenvolvimentos emocionantes em curso em Portugal. As nossas instalaes produzem cannabis medicinal certificada EU GMP que cumpre os mais rigorosos padres de qualidade farmacutica.",paragraph2:"Da planta ao paciente, cada passo do cultivo, extrao e produo recebe o nosso cuidado e ateno meticulosos  nenhum detalhe  demasiado pequeno. Este compromisso inabalvel com a qualidade  a razo pela qual os nossos produtos so confiados por profissionais de sade em mltiplos continentes.",paragraph3:" medida que crescemos a nossa presena internacional, aspiramos a no deixar nenhum paciente para trs. Graas a um crescente corpo de evidncias das nossas parcerias de investigao, estamos a derrubar o estigma, a impulsionar o progresso regulatrio e a ampliar o acesso mais seguro  cannabis medicinal atravs do nosso compromisso com a excelncia e investigao cientfica essencial."},Dpe={title:"Os Nossos Valores",excellence:{title:"Excelncia",description:"Mantemos padres de grau farmacutico em todas as operaes, desde o cultivo nas nossas instalaes na frica do Sul at  distribuio mundial."},patientFocused:{title:"Focado no Paciente",description:"O bem-estar do paciente guia cada deciso que tomamos, garantindo acesso seguro  cannabis medicinal em todos os nossos mercados."},globalReach:{title:"Alcance Global",description:"Operando na frica do Sul, Reino Unido, Tailndia e expandindo para Portugal, garantimos que a medicina de cannabis de qualidade chegue aos pacientes em todo o mundo."},integrity:{title:"Integridade",description:"Operamos com total transparncia e adeso aos mais altos padres regulatrios em todas as jurisdies."}},Ope={title:"As Nossas Instalaes Globais",description:"Operando em mltiplos continentes com milhares de metros quadrados de espao de cultivo, selecionamos, cultivamos, colhemos e processamos um portflio abrangente de produtos de cannabis de grau farmacutico. As nossas instalaes combinam experincia hortcola tradicional com tecnologia de ponta e protocolos rigorosos de controlo de qualidade.",southAfrica:{title:"frica do Sul",description:"A nossa instalao principal na frica do Sul serve como pedra angular das nossas operaes, apresentando tecnologia de estufa avanada otimizada para o clima favorvel da regio e enquadramento regulatrio."},uk:{title:"Reino Unido",description:"A nossa instalao no Reino Unido serve o mercado mdico europeu com capacidades de produo certificadas GMP, combinando agricultura de preciso com padres de grau farmacutico."},thailand:{title:"Tailndia",description:"Aproveitando a rica tradio da Tailndia em conhecimento de cultivo de cannabis, a nossa instalao combina experincia local com metodologias modernas de cultivo para o mercado asitico."},portugal:{title:"Portugal (Em Expanso)",description:"A nossa prxima instalao portuguesa ir posicionar-nos estrategicamente no Sul da Europa, combinando mtodos tradicionais de cultivo europeus com os nossos protocolos de qualidade comprovados."}},Lpe={title:"Junte-se a ns a moldar o futuro da cannabis medicinal",description:"Seja paciente, profissional de sade ou potencial parceiro nos nossos mercados da frica do Sul, Reino Unido, Tailndia ou Portugal, adoraramos ouvir de si.",button:"Entre em contacto"},Fpe={hero:Ipe,story:Rpe,values:Dpe,facilities:Ope,cta:Lpe},zpe={title:"Clnicas de Cannabis Medicinal",subtitle:"Lideradas por mdicos formados em medicina de cannabis. Atualmente operacional na frica do Sul, com Reino Unido e Portugal em breve."},Bpe={title:"Unimos pessoas",paragraph1:"Porque o acesso a cuidados de cannabis medicinal de qualidade requer experincia clnica especializada, as nossas clnicas conectam pacientes com mdicos experientes formados em cannabis. Atualmente operacional na frica do Sul, com expanso para o Reino Unido e Portugal em breve.",paragraph2:"No se trata apenas de cannabis  trata-se de ajudar as pessoas a encontrar o alvio transformador que merecem atravs de cuidados personalizados e baseados em evidncias."},Vpe={title:"Os Nossos Servios",learnMore:"Saber mais",consultations:{title:"Consultas especializadas",description:"Os nossos mdicos so profissionais de medicina formados como especialistas em cannabis, fornecendo orientao baseada em evidncias para o seu tratamento."},treatment:{title:"Planos de tratamento personalizados",description:"Os nossos mdicos comeam com uma reviso abrangente do seu histrico mdico para criar planos de tratamento de cannabis personalizados."},support:{title:"Apoio contnuo ao paciente",description:"Acompanhamento contnuo ao longo da sua jornada de tratamento com cannabis, com apoio clnico especializado dos nossos mdicos."}},$pe={southAfrica:{title:"Na frica do Sul",paragraph1:"As nossas clnicas na frica do Sul esto totalmente operacionais, fornecendo acesso ao tratamento com cannabis medicinal atravs da nossa loja e dispensrio, juntamente com a nossa rede de especialistas formados.",paragraph2:"Consultas abrangentes e apoio contnuo garantem que os pacientes recebam cuidados apropriados adaptados s suas necessidades."},uk:{title:"No Reino Unido",paragraph1:"Em Breve. Desde 2018, a cannabis medicinal est disponvel no Reino Unido atravs de prescritores especializados. As nossas clnicas no Reino Unido sero lideradas por mdicos registados no GMC com extensa formao em teraputica de cannabis.",paragraph2:"Ofereceremos avaliaes lideradas por consultores e esquemas de acesso para garantir tratamento acessvel para pacientes elegveis em Inglaterra, Esccia, Pas de Gales e Irlanda do Norte."},thailand:{title:"Na Tailndia",paragraph1:"Operamos instalaes de fabrico parceiras na Tailndia, aproveitando as regulamentaes progressivas do pas sobre cannabis e a experincia tradicional de cultivo.",paragraph2:"As nossas operaes tailandesas focam-se na produo e processamento, com servios clnicos planeados para expanso futura."},portugal:{title:"Em Portugal",paragraph1:"Em Breve (aps o Reino Unido). Portugal servir como o nosso principal centro de produo, processamento e expedio para distribuio europeia.",paragraph2:"As nossas operaes portuguesas expandiro o acesso pelo Sul da Europa com consultas especializadas em portugus e ingls."}},Upe={quote:"Adoro a ideia de contribuir para as evidncias crescentes que sem dvida ajudaro muitos outros no futuro.",name:"Laura Drummond",role:"Paciente, Reino Unido"},qpe={title:"Saiba mais sobre as nossas clnicas de cannabis medicinal",description:"Atualmente operacional na frica do Sul. Reino Unido em breve, seguido por Portugal. Encontre cuidados especializados em cannabis.",contactButton:"Contacte-nos",eligibilityButton:"Verificar elegibilidade"},Wpe={hero:zpe,together:Bpe,services:Vpe,regions:$pe,testimonial:Upe,cta:qpe},Gpe={title:"The Wire",subtitle:"Notcias internas, atualizaes e insights da vanguarda da inovao em cannabis regulada e tecnologia blockchain."},Hpe="Destaque",Zpe="Ler Artigo ",Kpe="ltimas Atualizaes",Ype="Ler Mais ",Qpe={title:"Artigo No Encontrado",description:"O artigo que procura no existe.",backButton:"Voltar ao The Wire"},Xpe="Voltar ao The Wire",Jpe="Ler Artigo Original",efe="Mais do The Wire",tfe={hero:Gpe,featured:Hpe,readArticle:Zpe,latestUpdates:Kpe,readMore:Ype,articleNotFound:Qpe,backToWire:Xpe,readOriginal:Jpe,moreFromWire:efe},rfe={title:"Poltica de Privacidade",lastUpdated:"ltima atualizao:",introduction:{title:"Introduo",content:'A Healing Buds Global ("ns", "nosso" ou "nos") est comprometida em proteger a sua privacidade. Esta Poltica de Privacidade explica como recolhemos, usamos, divulgamos e protegemos as suas informaes quando utiliza a nossa plataforma, incluindo o nosso website e servios de cannabis medicinal.'},informationCollect:{title:"Informaes que Recolhemos",personal:{title:"Informaes Pessoais",items:["Nome, endereo de email e informaes de contacto","Endereos de carteira e dados de transaes blockchain","Documentao mdica e informaes de elegibilidade","Verificao de idade e documentos de identificao","Informaes de pagamento e faturao"]},automatic:{title:"Informaes Recolhidas Automaticamente",items:["Endereo IP, tipo de navegador e informaes do dispositivo","Dados de utilizao e anlises","Cookies e tecnologias de rastreamento"]}},howWeUse:{title:"Como Utilizamos as Suas Informaes",items:["Para fornecer e manter a nossa plataforma e servios de cumprimento","Para verificar elegibilidade e cumprir regulamentos de cannabis","Para processar transaes e gerir acesso","Para comunicar consigo sobre a sua conta e servios","Para garantir rastreabilidade blockchain e conformidade","Para melhorar os nossos servios e desenvolver novas funcionalidades","Para prevenir fraude e manter a segurana"]},informationSharing:{title:"Partilha de Informaes",intro:"Podemos partilhar as suas informaes com:",items:[{label:"Parceiros Licenciados:",desc:"Fornecedores de cultivo e cumprimento de cannabis"},{label:"Autoridades Reguladoras:",desc:"Conforme exigido pelas leis de cannabis aplicveis"},{label:"Prestadores de Servios:",desc:"Fornecedores terceiros que auxiliam as nossas operaes"},{label:"Redes Blockchain:",desc:"Dados de transaes registados em blockchains pblicos"},{label:"Requisitos Legais:",desc:"Quando exigido por lei ou processo legal"}]},dataSecurity:{title:"Segurana de Dados",intro:"Implementamos medidas tcnicas e organizacionais apropriadas para proteger as suas informaes pessoais, incluindo:",items:["Encriptao de dados sensveis em trnsito e em repouso","Infraestrutura blockchain segura","Auditorias e avaliaes de segurana regulares","Controlos de acesso e protocolos de autenticao","Conformidade com o RGPD e outros regulamentos de proteo de dados"]},yourRights:{title:"Os Seus Direitos",intro:"Dependendo da sua localizao, pode ter os seguintes direitos:",items:["Acesso s suas informaes pessoais","Correo de dados imprecisos","Eliminao dos seus dados (sujeito a obrigaes legais)","Restrio de processamento","Portabilidade de dados","Oposio ao processamento","Retirada de consentimento"]},blockchain:{title:"Consideraes Blockchain",content:"Note que as informaes registadas em redes blockchain so pblicas e permanentes. Embora utilizemos blockchain para transparncia e conformidade, isto significa que certos dados de transaes no podem ser eliminados ou modificados uma vez registados."},international:{title:"Transferncias Internacionais",content:"As suas informaes podem ser transferidas e processadas em pases diferentes do seu. Garantimos que salvaguardas apropriadas esto em vigor para tais transferncias em conformidade com as leis de proteo de dados aplicveis."},children:{title:"Privacidade de Menores",content:"Os nossos servios no se destinam a indivduos com menos de 18 anos (ou a idade legal para uso de cannabis na sua jurisdio). No recolhemos intencionalmente informaes de menores."},changes:{title:"Alteraes a Esta Poltica",content:'Podemos atualizar esta Poltica de Privacidade periodicamente. Notificaremos sobre quaisquer alteraes materiais publicando a nova poltica nesta pgina e atualizando a data de "ltima atualizao".'},contact:{title:"Contacte-nos",content:"Se tiver questes sobre esta Poltica de Privacidade ou as nossas prticas de privacidade, contacte-nos em:",email:"Email:",address:"Morada:",addressValue:"Sede da Healing Buds Global"}},nfe={title:"Termos de Servio",lastUpdated:"ltima atualizao:",agreement:{title:"Acordo com os Termos",content:"Ao aceder ou utilizar a plataforma e servios da Healing Buds Global, concorda em estar vinculado a estes Termos de Servio. Se no concordar com estes termos, no pode aceder ou utilizar os nossos servios."},eligibility:{title:"Elegibilidade",intro:"Para utilizar os nossos servios, deve:",items:["Ter pelo menos 18 anos ou a idade legal para uso de cannabis na sua jurisdio","Ter autorizao legal para usar cannabis medicinal na sua regio","Fornecer documentao mdica precisa e verificao de elegibilidade","Cumprir todas as leis locais, estaduais e federais aplicveis relativas  cannabis","Ter uma carteira de criptomoedas vlida para transaes NFT"]},nftKeys:{title:"Chaves NFT e Acesso",ownership:{title:"Propriedade NFT",items:["As Chaves NFT (Standard, Gold, Platinum) concedem acesso  nossa plataforma de cumprimento de cannabis","Cada NFT  um token ERC-721 na blockchain","Mantm a propriedade e pode negociar NFTs em mercados secundrios","O valor do NFT  determinado pela atividade blockchain e procura do mercado"]},tiers:{title:"Nveis de Chave",items:[{label:"Chave Standard:",desc:"Acesso a um planeta com funcionalidades bsicas"},{label:"Chave Gold:",desc:"Acesso a mltiplos planetas com benefcios melhorados"},{label:"Chave Platinum:",desc:"Acesso a todos os 20 planetas e criao de variedades personalizadas"}]}},compliance:{title:"Conformidade Regulamentar",intro:"A nossa plataforma opera em conformidade com mercados de cannabis regulamentados:",items:["Todos os produtos de cannabis so cultivados e distribudos por parceiros licenciados","Rastreabilidade blockchain completa da semente  venda garante conformidade","Atualmente licenciados em Portugal com expanso global planeada","Os utilizadores devem cumprir as leis de cannabis da sua jurisdio local","Reservamo-nos o direito de verificar elegibilidade e negar servio"]},useServices:{title:"Utilizao dos Servios",intro:"Concorda em:",items:["Utilizar os servios apenas para fins legais","Fornecer informaes precisas e completas","Manter a segurana da sua conta e carteira","No se envolver em fraude, manipulao ou atividades ilegais","No tentar contornar a nossa verificao de elegibilidade","Respeitar os direitos de propriedade intelectual"]},risks:{title:"Riscos e Isenes",warning:"Riscos Importantes:",items:[{label:"Risco Regulamentar:",desc:"As leis de cannabis variam por jurisdio e podem mudar"},{label:"Volatilidade de Mercado:",desc:"Os valores de revenda de NFT podem flutuar significativamente"},{label:"Risco Operacional:",desc:"O servio depende do desempenho dos parceiros licenciados"},{label:"Risco Blockchain:",desc:"As transaes so irreversveis; a segurana da carteira  sua responsabilidade"}]},blockchainTraceability:{title:"Blockchain e Rastreabilidade",intro:"A nossa plataforma utiliza tecnologia blockchain para:",items:["Rastreamento transparente da semente  venda do produto","Registo imutvel de todas as transaes e cumprimentos","Verificao da autenticidade do produto e conformidade regulamentar","Preveno de produtos contrafeitos"],note:"Nota: Os dados blockchain so pblicos e permanentes. Uma vez registadas, as informaes no podem ser modificadas ou eliminadas."},intellectualProperty:{title:"Propriedade Intelectual",content:"Todo o contedo, marcas registadas e propriedade intelectual na nossa plataforma so propriedade da Healing Buds Global ou dos nossos licenciadores. No pode usar, reproduzir ou distribuir qualquer contedo sem a nossa permisso expressa por escrito."},liability:{title:"Limitao de Responsabilidade",intro:"Na mxima extenso permitida por lei, a Healing Buds Global no ser responsvel por:",items:["Danos indiretos, incidentais ou consequenciais","Perda de lucros, dados ou oportunidades de negcio","Alteraes nas leis ou regulamentos de cannabis","Flutuaes no valor de mercado de NFT","Aes ou falhas de terceiros","Problemas de rede blockchain ou violaes de segurana de carteira"]},termination:{title:"Resciso",content:"Reservamo-nos o direito de suspender ou terminar o seu acesso aos nossos servios a qualquer momento, com ou sem causa, incluindo por violao destes termos ou leis aplicveis. Aps a resciso, os seus direitos de propriedade NFT permanecem, mas o acesso  plataforma pode ser revogado."},governingLaw:{title:"Lei Aplicvel",content:"Estes Termos sero regidos e interpretados de acordo com as leis de Portugal, onde atualmente detemos a nossa licena principal. As disputas sero resolvidas atravs de arbitragem de acordo com as regras de arbitragem aplicveis."},changesTerms:{title:"Alteraes aos Termos",content:"Podemos modificar estes Termos a qualquer momento. Alteraes materiais sero notificadas por email ou notificao na plataforma. O uso continuado dos servios aps alteraes constitui aceitao dos termos modificados."},contact:{title:"Contacte-nos",content:"Para questes sobre estes Termos de Servio, contacte-nos em:",email:"Email:",address:"Morada:",addressValue:"Sede da Healing Buds Global"}},ife={privacy:rfe,terms:nfe},sfe={home:"Incio",conditions:"Condies Elegveis",research:"Investigao"},afe={title:"ndice",onThisPage:"Nesta Pgina"},ofe={title:"Pronto para Explorar as Suas Opes de Tratamento?",subtitle:"Contacte a nossa equipa especializada para saber mais sobre o tratamento com cannabis medicinal.",contact:"Contacte-nos ",viewConditions:"Ver Todas as Condies Elegveis"},lfe="Agendar Consulta ",cfe={causes:"Causas",symptoms:"Sintomas",treatment:"Tratamento",medicalCannabis:"Cannabis Medicinal",faq:"FAQ"},ufe={title:"Ansiedade e Cannabis Medicinal",subtitle:"Os transtornos de ansiedade afetam milhes de pessoas globalmente, causando preocupao e medo persistentes que interferem nas atividades dirias.",breadcrumb:"Ansiedade",toc:{causes:"O Que Causa a Ansiedade?",symptoms:"Sintomas de Ansiedade",types:"Tipos de Transtornos de Ansiedade",treatment:"Tratamento da Ansiedade",medicalCannabis:"Cannabis Medicinal para Ansiedade",faq:"Perguntas Frequentes"},causes:{title:"O Que Causa a Ansiedade?",intro:"Os transtornos de ansiedade podem desenvolver-se a partir de um conjunto complexo de fatores de risco.",items:[{title:"Fatores Genticos",desc:"Histrico familiar e traos hereditrios podem aumentar a suscetibilidade"},{title:"Qumica Cerebral",desc:"Desequilbrios nos neurotransmissores podem contribuir para a ansiedade"},{title:"Stress Ambiental",desc:"Experincias traumticas ou stress prolongado podem desencadear ansiedade"},{title:"Condies Mdicas",desc:"Certos problemas de sade podem causar ou agravar sintomas de ansiedade"}]},symptoms:{title:"Sintomas de Ansiedade",intro:"A ansiedade manifesta-se atravs de sintomas fsicos e psicolgicos:",physical:{title:"Sintomas Fsicos",items:["Batimento cardaco acelerado","Suor e tremores","Falta de ar","Tenso muscular","Fadiga","Distrbios do sono"]},psychological:{title:"Sintomas Psicolgicos",items:["Preocupao persistente","Inquietao","Dificuldade de concentrao","Irritabilidade","Sensao de perigo iminente","Comportamentos de evitamento"]}},types:{title:"Tipos de Transtornos de Ansiedade",items:[{type:"Transtorno de Ansiedade Generalizada (TAG)",desc:"Preocupao excessiva persistente sobre vrios aspetos da vida diria"},{type:"Transtorno de Ansiedade Social",desc:"Medo intenso de situaes sociais e de ser julgado pelos outros"},{type:"Transtorno de Pnico",desc:"Ataques de pnico inesperados recorrentes"},{type:"Fobias Especficas",desc:"Medo excessivo de objetos ou situaes especficas"},{type:"Ansiedade de Separao",desc:"Medo excessivo de se separar de figuras de apego"}]},treatment:{title:"Tratamento da Ansiedade",intro:"O tratamento eficaz da ansiedade geralmente envolve uma combinao de abordagens:",items:[{title:"Psicoterapia",desc:"Terapia cognitivo-comportamental (TCC) e terapia de exposio"},{title:"Medicamentos",desc:"Antidepressivos, medicamentos ansiolticos e beta-bloqueadores"},{title:"Mudanas no Estilo de Vida",desc:"Exerccio, gesto do stress e higiene do sono"},{title:"Grupos de Apoio",desc:"Conectar-se com outros que experienciam desafios semelhantes"}]},medicalCannabis:{title:"Cannabis Medicinal para Ansiedade",content1:"Para pacientes com ansiedade que no encontraram alvio adequado com tratamentos convencionais, a cannabis medicinal pode representar uma opo teraputica alternativa.",content2:"Na Healing Buds, os nossos profissionais mdicos realizam avaliaes abrangentes para determinar se a cannabis medicinal  apropriada."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis medicinal pode ajudar com a ansiedade?",answer:"Alguns estudos sugerem que certos canabinoides podem ajudar a gerir os sintomas de ansiedade."},{question:"A cannabis medicinal pode piorar a minha ansiedade?",answer:"A resposta  cannabis medicinal varia por indivduo, e a dosagem  crtica."},{question:"Quanto tempo demora o tratamento a fazer efeito?",answer:"O cronograma varia dependendo do indivduo, do produto especfico e do mtodo de administrao."}]}},dfe={title:"Dor Crnica e Cannabis Medicinal",subtitle:"A dor crnica afeta milhes de pessoas em todo o mundo, impactando significativamente a qualidade de vida.",breadcrumb:"Dor Crnica",causes:{title:"O Que Causa a Dor Crnica?",intro:"A dor crnica  definida como dor que persiste por mais de 12 semanas.",items:[{title:"Leso ou Cirurgia",desc:"Dano nervoso ou leso tecidual que no cicatriza adequadamente"},{title:"Condies Crnicas",desc:"Artrite, fibromialgia e outras doenas de longo prazo"},{title:"Dano Nervoso",desc:"Neuropatia de diabetes, infees ou trauma"},{title:"Causas Desconhecidas",desc:"Por vezes a dor crnica desenvolve-se sem causa identificvel"}]},symptoms:{title:"Sintomas da Dor Crnica",intro:"A dor crnica pode manifestar-se de vrias formas:",types:{title:"Tipos de Dor",items:["Dor latejante ou pulsante","Sensaes de queimadura","Dor aguda ou penetrante","Rigidez e sensibilidade","Formigueiro ou dormncia"]},associated:{title:"Sintomas Associados",items:["Fadiga e problemas de sono","Alteraes de humor e depresso","Mobilidade reduzida","Apetite diminudo","Isolamento social"]}},treatment:{title:"Tratamento da Dor Crnica",intro:"A gesto eficaz da dor crnica frequentemente requer uma abordagem multidisciplinar:",items:[{title:"Fisioterapia",desc:"Programas de exerccio e reabilitao"},{title:"Medicamentos",desc:"Analgsicos, anti-inflamatrios e bloqueadores nervosos"},{title:"Apoio Psicolgico",desc:"Terapia cognitivo-comportamental e aconselhamento"},{title:"Terapias Alternativas",desc:"Acupuntura, massagem e mindfulness"}]},medicalCannabis:{title:"Cannabis Medicinal para Dor Crnica",content1:"A investigao sugere que os canabinoides podem interagir com o sistema endocanabinoide do corpo para ajudar a gerir os sinais de dor.",content2:"A nossa equipa mdica trabalha com os pacientes para desenvolver planos de tratamento personalizados."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis medicinal  eficaz para todos os tipos de dor crnica?",answer:"A cannabis medicinal pode ser mais eficaz para certos tipos de dor, particularmente dor neuroptica."},{question:"Posso usar cannabis medicinal com outros medicamentos?",answer:"Em alguns casos, a cannabis medicinal pode ser usada como parte de um plano abrangente."},{question:"Com que rapidez posso esperar alvio?",answer:"Os tempos de resposta variam dependendo do produto e fatores individuais."}]}},hfe={title:"Tratamento da Insnia",subtitle:"Compreender os distrbios do sono e explorar a cannabis medicinal como opo de tratamento.",breadcrumb:"Insnia",causes:{title:"O Que Causa a Insnia?",content1:"A insnia  um distrbio do sono caracterizado por dificuldade em adormecer ou manter o sono.",content2:"As causas comuns incluem stress, ansiedade, depresso, maus hbitos de sono e fatores ambientais.",content3:"A insnia crnica pode levar a consequncias graves para a sade."},symptoms:{title:"Sintomas da Insnia",sleep:{title:"Sintomas de Sono",items:["Dificuldade em adormecer","Acordar durante a noite","Acordar muito cedo","No se sentir descansado","Dormir por perodos curtos"]},daytime:{title:"Sintomas Diurnos",items:["Fadiga e baixa energia","Dificuldade de concentrao","Irritabilidade","Desempenho prejudicado","Aumento de erros"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Higiene do Sono",desc:"Estabelecer horrios de sono consistentes"},{title:"Terapia Cognitivo-Comportamental",desc:"Abordar pensamentos e comportamentos"},{title:"Medicamentos",desc:"Auxiliares de sono prescritos"},{title:"Mudanas no Estilo de Vida",desc:"Exerccio e gesto do stress"}]},medicalCannabis:{title:"Cannabis Medicinal para o Sono",content1:"A investigao sugere que certos canabinoides podem ajudar a regular os padres de sono.",content2:"Os nossos especialistas em sono trabalham com os pacientes para desenvolver planos personalizados."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode ajudar-me a adormecer mais rapidamente?",answer:"Alguns estudos sugerem que certas formulaes podem reduzir a latncia do incio do sono."},{question:"Vou sentir-me grogue de manh?",answer:"A dosagem adequada e a seleo de estirpes so fundamentais."},{question:"A cannabis medicinal  viciante?",answer:"Quando usada conforme prescrito e monitorizada, o risco de dependncia  gerido."}]}},pfe={title:"Tratamento do PTSD",subtitle:"Compreender o transtorno de stress ps-traumtico e explorar a cannabis medicinal como opo de tratamento complementar.",breadcrumb:"PTSD",causes:{title:"O Que Causa o PTSD?",content1:"O Transtorno de Stress Ps-Traumtico  uma condio de sade mental desencadeada por experienciar ou testemunhar um evento aterrador.",content2:"Os gatilhos comuns incluem exposio a combate, trauma infantil, agresso fsica, violncia sexual, acidentes e desastres naturais.",content3:"O PTSD envolve mudanas na qumica e funo cerebral."},symptoms:{title:"Sintomas do PTSD",core:{title:"Sintomas Principais",items:["Memrias intrusivas e flashbacks","Evitamento de gatilhos","Pensamentos e humor negativos","Hipervigilncia e reatividade"]},additional:{title:"Efeitos Adicionais",items:["Distrbios do sono e pesadelos","Dificuldade de concentrao","Entorpecimento emocional","Problemas de relacionamento"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Terapia Focada no Trauma",desc:"EMDR e terapia de exposio prolongada"},{title:"Medicamentos",desc:"Antidepressivos e ansiolticos"},{title:"Grupos de Apoio",desc:"Conectar-se com outros que compreendem"},{title:"Apoio ao Estilo de Vida",desc:"Exerccio, mindfulness e gesto do stress"}]},medicalCannabis:{title:"Cannabis Medicinal para PTSD",content1:"A investigao mostra que os canabinoides podem ajudar a regular o sistema endocanabinoide envolvido nas respostas de medo e stress.",content2:"Os nossos especialistas trabalham com pacientes de PTSD para desenvolver planos de tratamento cuidadosos."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode ajudar com pesadelos de PTSD?",answer:"Alguns estudos sugerem que a cannabis pode reduzir a frequncia e intensidade dos pesadelos."},{question:"A cannabis vai piorar os meus sintomas de ansiedade?",answer:"A seleo adequada de estirpes e dosagem so crticas."},{question:"Posso combinar cannabis com o meu tratamento atual?",answer:"A cannabis medicinal  frequentemente usada como terapia complementar."}]}},ffe={title:"Tratamento da Epilepsia",subtitle:"Compreender a epilepsia e explorar a cannabis medicinal como opo de tratamento para gesto de convulses.",breadcrumb:"Epilepsia",causes:{title:"O Que Causa a Epilepsia?",content1:"A epilepsia  um distrbio neurolgico caracterizado por convulses recorrentes causadas por atividade eltrica anormal no crebro.",content2:"As causas incluem fatores genticos, trauma craniano, condies cerebrais, infees e distrbios do desenvolvimento.",content3:"As convulses ocorrem quando h uma onda sbita de atividade eltrica no crebro."},symptoms:{title:"Sintomas da Epilepsia",seizures:{title:"Tipos de Convulses",items:["Convulses tnico-clnicas generalizadas","Crises de ausncia","Convulses focais (parciais)","Convulses mioclnicas"]},signs:{title:"Sinais Comuns",items:["Confuso temporria","Olhar fixo","Movimentos bruscos incontrolveis","Perda de conscincia","Sintomas sensoriais"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Medicamentos Antiepilpticos",desc:"Medicamentos para controlar a atividade convulsiva"},{title:"Cirurgia",desc:"Para epilepsia resistente a medicamentos"},{title:"Terapia Diettica",desc:"Dieta cetognica e dieta Atkins modificada"},{title:"Estimulao Nervosa",desc:"VNS e dispositivos de neuroestimulao"}]},medicalCannabis:{title:"Cannabis Medicinal para Epilepsia",content1:"Os tratamentos baseados em CBD mostraram promessa significativa na reduo da frequncia de convulses.",content2:"Os nossos especialistas neurolgicos trabalham com pacientes para desenvolver planos abrangentes de gesto de convulses."},faq:{title:"Perguntas Frequentes",items:[{question:"O CBD  aprovado para tratamento de epilepsia?",answer:"Sim, medicamentos baseados em CBD como o Epidiolex so aprovados para certos tipos de epilepsia."},{question:"A cannabis pode substituir os meus medicamentos atuais?",answer:"A cannabis medicinal  tipicamente usada junto com tratamentos existentes."},{question:"Quo eficaz  a cannabis para controlo de convulses?",answer:"Estudos mostram reduo significativa de convulses em muitos pacientes."}]}},mfe={title:"Tratamento da Artrite",subtitle:"Compreender a artrite e explorar a cannabis medicinal para dor articular e inflamao.",breadcrumb:"Artrite",causes:{title:"O Que Causa a Artrite?",content1:"A artrite  inflamao de uma ou mais articulaes, causando dor e rigidez.",content2:"A osteoartrite ocorre quando a cartilagem protetora se desgasta. A artrite reumatoide  uma doena autoimune.",content3:"Os fatores de risco incluem idade, histrico familiar, leses articulares anteriores e obesidade."},symptoms:{title:"Sintomas da Artrite",common:{title:"Sintomas Comuns",items:["Dor e rigidez articular","Inchao e inflamao","Amplitude de movimento reduzida","Calor nas articulaes"]},severe:{title:"Sintomas Graves",items:["Deformidade articular","Fadiga crnica","Rigidez matinal prolongada","Dificuldade nas tarefas dirias"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Fisioterapia",desc:"Exerccios para melhorar fora e flexibilidade"},{title:"Medicamentos",desc:"AINEs, DMARDs e biolgicos"},{title:"Injees Articulares",desc:"Corticosteroides e cido hialurnico"},{title:"Cirurgia",desc:"Reparao, substituio ou fuso articular"}]},medicalCannabis:{title:"Cannabis Medicinal para Artrite",content1:"Os canabinoides mostraram propriedades anti-inflamatrias e analgsicas que podem ajudar a gerir os sintomas da artrite.",content2:"Os nossos especialistas em reumatologia desenvolvem estratgias abrangentes de gesto da dor."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode reduzir a inflamao articular?",answer:"Estudos sugerem que os canabinoides tm propriedades anti-inflamatrias."},{question:"A cannabis tpica  eficaz para artrite?",answer:"Produtos tpicos podem fornecer alvio localizado para dor articular."},{question:"Posso usar cannabis com os meus medicamentos para artrite?",answer:"A nossa equipa rev os seus medicamentos para garantir tratamento seguro."}]}},gfe={title:"Tratamento de Enxaquecas",subtitle:"Compreender as enxaquecas e explorar a cannabis medicinal para gesto de cefaleias.",breadcrumb:"Enxaquecas",causes:{title:"O Que Causa Enxaquecas?",content1:"As enxaquecas so cefaleias graves e recorrentes frequentemente acompanhadas de outros sintomas.",content2:"Os gatilhos incluem alteraes hormonais, stress, certos alimentos, estmulos sensoriais e mudanas climticas.",content3:"As enxaquecas envolvem mudanas na atividade cerebral afetando sinais nervosos e vasos sanguneos."},symptoms:{title:"Sintomas de Enxaqueca",headache:{title:"Sintomas de Cefaleia",items:["Dor latejante ou pulsante","Dor num ou ambos os lados","Sensibilidade  luz e som","Nuseas e vmitos"]},other:{title:"Outros Sintomas",items:["Distrbios visuais (aura)","Sensaes de formigueiro","Dificuldade em falar","Dificuldades cognitivas"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Medicamentos Preventivos",desc:"Medicamentos dirios para reduzir frequncia"},{title:"Tratamentos Agudos",desc:"Triptanos e analgsicos"},{title:"Gesto do Estilo de Vida",desc:"Identificar e evitar gatilhos"},{title:"Terapias Alternativas",desc:"Acupuntura e biofeedback"}]},medicalCannabis:{title:"Cannabis Medicinal para Enxaquecas",content1:"A investigao sugere que os canabinoides podem ajudar a reduzir a frequncia e intensidade das enxaquecas.",content2:"Os nossos especialistas em cefaleias desenvolvem planos abrangentes de gesto de enxaquecas."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode prevenir enxaquecas?",answer:"Alguns estudos sugerem que o uso regular pode reduzir a frequncia em certos pacientes."},{question:"A cannabis  eficaz durante uma enxaqueca ativa?",answer:"Alguns pacientes relatam alvio, embora a resposta varie."},{question:"Qual o melhor produto para enxaquecas?",answer:"Os nossos especialistas podem recomendar formulaes especficas."}]}},yfe={title:"Tratamento da Esclerose Mltipla",subtitle:"Compreender a EM e explorar a cannabis medicinal para gesto de sintomas.",breadcrumb:"Esclerose Mltipla",causes:{title:"O Que Causa a Esclerose Mltipla?",content1:"A esclerose mltipla  uma doena autoimune onde o sistema imunitrio ataca a bainha de mielina protetora.",content2:"A causa exata  desconhecida, mas fatores genticos e ambientais desempenham um papel.",content3:"A EM perturba a comunicao entre o crebro e o corpo."},symptoms:{title:"Sintomas da EM",neurological:{title:"Sintomas Neurolgicos",items:["Dormncia ou formigueiro","Fraqueza muscular","Problemas de viso","Problemas de equilbrio e coordenao"]},other:{title:"Outros Sintomas",items:["Fadiga","Alteraes cognitivas","Disfuno da bexiga","Espasticidade e rigidez muscular"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Terapias Modificadoras da Doena",desc:"Medicamentos para retardar a progresso"},{title:"Gesto de Sintomas",desc:"Tratamentos para sintomas especficos"},{title:"Fisioterapia",desc:"Exerccios para fora e mobilidade"},{title:"Terapia Ocupacional",desc:"Estratgias para a vida diria"}]},medicalCannabis:{title:"Cannabis Medicinal para EM",content1:"Os tratamentos baseados em cannabis mostraram promessa na gesto dos sintomas da EM, particularmente espasticidade e dor.",content2:"Os nossos especialistas em neurologia desenvolvem planos abrangentes de gesto de sintomas."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis  aprovada para tratamento de EM?",answer:"Medicamentos baseados em cannabis como o Sativex so aprovados em alguns pases para espasticidade."},{question:"A cannabis pode ajudar com a fadiga da EM?",answer:"Alguns pacientes relatam nveis de energia melhorados."},{question:"A cannabis vai interagir com os meus medicamentos?",answer:"A nossa equipa rev os seus tratamentos para garantir terapia complementar segura."}]}},xfe={title:"Tratamento da Dor Neuroptica",subtitle:"Compreender a dor nervosa e explorar a cannabis medicinal como opo de tratamento.",breadcrumb:"Dor Neuroptica",causes:{title:"O Que Causa a Dor Neuroptica?",content1:"A dor neuroptica resulta de dano ou disfuno do sistema nervoso.",content2:"As causas comuns incluem diabetes, herpes zoster, quimioterapia, leses e infees.",content3:"Ao contrrio de outros tipos de dor, a dor neuroptica persiste aps a leso inicial cicatrizar."},symptoms:{title:"Sintomas da Dor Neuroptica",sensations:{title:"Sensaes de Dor",items:["Dor ardente ou lancinante","Sensaes de choque eltrico","Dor penetrante","Formigueiro e dormncia"]},other:{title:"Outros Sintomas",items:["Sensibilidade aumentada ao toque","Dor de estmulos normalmente indolores","Distrbios do sono","Impacto emocional"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Medicamentos",desc:"Anticonvulsivantes, antidepressivos e tratamentos tpicos"},{title:"Bloqueios Nervosos",desc:"Injees para interromper sinais de dor"},{title:"Fisioterapia",desc:"TENS, exerccios e dessensibilizao"},{title:"Procedimentos Intervencionistas",desc:"Estimulao da medula espinhal"}]},medicalCannabis:{title:"Cannabis Medicinal para Dor Neuroptica",content1:"A investigao apoia fortemente os canabinoides para gesto da dor neuroptica.",content2:"Os nossos especialistas em dor desenvolvem planos de tratamento personalizados."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis  mais eficaz para dor nervosa?",answer:"A investigao sugere que os canabinoides podem ser particularmente eficazes para dor neuroptica."},{question:"A cannabis tpica pode ajudar?",answer:"Produtos tpicos podem fornecer alvio localizado para neuropatia perifrica."},{question:"Quanto tempo at ver resultados?",answer:"Muitos pacientes notam melhoria em semanas."}]}},vfe={title:"Tratamento de Dor nas Costas",subtitle:"Compreender a dor nas costas e explorar a cannabis medicinal como opo de tratamento.",breadcrumb:"Dor nas Costas",causes:{title:"O Que Causa Dor nas Costas?",content1:"A dor nas costas  um dos problemas mdicos mais comuns, afetando a maioria das pessoas.",content2:"As causas incluem distenses musculares, problemas de disco, artrite, osteoporose e anomalias estruturais.",content3:"Os fatores de risco incluem m postura, obesidade, estilo de vida sedentrio e trabalho fisicamente exigente."},symptoms:{title:"Sintomas de Dor nas Costas",pain:{title:"Caractersticas da Dor",items:["Dor muscular","Dor lancinante ou penetrante","Dor irradiando para a perna","Flexibilidade limitada"]},severe:{title:"Sinais de Alerta",items:["Dormncia ou formigueiro","Fraqueza nas pernas","Problemas de bexiga ou intestino","Febre com dor nas costas"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Fisioterapia",desc:"Exerccios para fortalecer e alongar"},{title:"Medicamentos",desc:"Analgsicos e relaxantes musculares"},{title:"Injees",desc:"Injees epidurais de esteroides"},{title:"Cirurgia",desc:"Para problemas estruturais ou compresso nervosa"}]},medicalCannabis:{title:"Cannabis Medicinal para Dor nas Costas",content1:"A cannabis medicinal pode ajudar a gerir a dor crnica nas costas atravs de efeitos anti-inflamatrios e analgsicos.",content2:"Os nossos especialistas em gesto da dor desenvolvem planos de tratamento personalizados."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode ajudar com dor crnica nas costas?",answer:"Muitos pacientes relatam alvio significativo com cannabis medicinal."},{question:"A cannabis  melhor que opioides?",answer:"Alguns pacientes encontram alvio comparvel com menos efeitos secundrios."},{question:"Posso usar cannabis tpica?",answer:"Produtos tpicos podem fornecer alvio localizado para dor muscular."}]}},_fe={title:"Tratamento da Doena de Parkinson",subtitle:"Compreender o Parkinson e explorar a cannabis medicinal para gesto de sintomas.",breadcrumb:"Parkinson",causes:{title:"O Que Causa o Parkinson?",content1:"A doena de Parkinson  um distrbio neurolgico progressivo que afeta o movimento.",content2:"A causa exata  desconhecida, mas mutaes genticas e fatores ambientais podem contribuir.",content3:"O Parkinson afeta principalmente pessoas com mais de 60 anos."},symptoms:{title:"Sintomas do Parkinson",motor:{title:"Sintomas Motores",items:["Tremor em repouso","Movimento lento (bradicinesia)","Msculos rgidos","Postura e equilbrio prejudicados"]},nonmotor:{title:"Sintomas No-Motores",items:["Distrbios do sono","Depresso e ansiedade","Alteraes cognitivas","Disfuno autonmica"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Terapia com Dopamina",desc:"Levodopa e agonistas da dopamina"},{title:"Fisioterapia",desc:"Exerccios para melhorar movimento e equilbrio"},{title:"Estimulao Cerebral Profunda",desc:"Interveno cirrgica para casos avanados"},{title:"Terapia da Fala",desc:"Abordar dificuldades de voz e deglutio"}]},medicalCannabis:{title:"Cannabis Medicinal para Parkinson",content1:"A investigao sugere que os canabinoides podem ajudar a gerir vrios sintomas do Parkinson.",content2:"Os nossos especialistas em distrbios do movimento exploram tratamentos complementares com cannabis."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode reduzir os tremores do Parkinson?",answer:"Alguns estudos e relatos sugerem que a cannabis pode ajudar a reduzir a gravidade dos tremores."},{question:"A cannabis vai interagir com os meus medicamentos?",answer:"Os nossos especialistas revem cuidadosamente os seus medicamentos."},{question:"A cannabis pode ajudar com problemas de sono?",answer:"Muitos pacientes de Parkinson relatam melhoria na qualidade do sono."}]}},bfe={title:"Tratamento da Sndrome de Dor Regional Complexa",subtitle:"Compreender a SDRC e explorar a cannabis medicinal para gesto da dor.",breadcrumb:"SDRC",causes:{title:"O Que Causa a SDRC?",content1:"A Sndrome de Dor Regional Complexa  uma condio de dor crnica que geralmente afeta um membro aps leso.",content2:"A SDRC envolve respostas anormais no sistema nervoso, causando dor desproporcional  leso inicial.",content3:"A condio pode espalhar-se alm da rea inicialmente afetada."},symptoms:{title:"Sintomas da SDRC",pain:{title:"Sintomas de Dor",items:["Dor ardente ou latejante contnua","Sensibilidade ao toque ou frio","Inchao da rea afetada","Mudanas na cor e temperatura da pele"]},other:{title:"Outros Sintomas",items:["Mudanas na textura da pele","Sudorese anormal","Rigidez articular","Dificuldade em mover o membro afetado"]}},treatment:{title:"Opes de Tratamento",items:[{title:"Fisioterapia",desc:"Movimento gradual e dessensibilizao"},{title:"Medicamentos",desc:"Analgsicos, antidepressivos e anticonvulsivantes"},{title:"Bloqueios Nervosos",desc:"Injees para interromper sinais de dor"},{title:"Estimulao da Medula Espinhal",desc:"Pulsos eltricos para modificar sinais de dor"}]},medicalCannabis:{title:"Cannabis Medicinal para SDRC",content1:"A cannabis medicinal pode ajudar a gerir a dor da SDRC atravs de mltiplos mecanismos.",content2:"Os nossos especialistas em dor desenvolvem planos de tratamento abrangentes e multimodais."},faq:{title:"Perguntas Frequentes",items:[{question:"A cannabis pode ajudar com a dor da SDRC?",answer:"Alguns pacientes relatam alvio significativo da dor com cannabis medicinal."},{question:"A cannabis  eficaz para problemas de sono?",answer:"Muitos pacientes relatam melhoria na qualidade do sono."},{question:"Posso usar cannabis com os meus tratamentos atuais?",answer:"A cannabis medicinal  frequentemente usada como parte de um plano abrangente."}]}},wfe={breadcrumbs:sfe,toc:afe,cta:ofe,consultation:lfe,common:cfe,anxiety:ufe,chronicPain:dfe,insomnia:hfe,ptsd:pfe,epilepsy:ffe,arthritis:mfe,migraines:gfe,multipleSclerosis:yfe,neuropathicPain:xfe,backPain:vfe,parkinsons:_fe,crps:bfe},Sfe={en:{common:gue,home:xue,auth:rde,research:ude,contact:fde,conditions:bde,whatWeDo:Pde,aboutUs:Ide,clinics:Bde,theWire:Yde,legal:Jde,conditionPages:yhe},pt:{common:bhe,home:She,auth:ope,research:mpe,contact:vpe,conditions:Cpe,whatWeDo:Npe,aboutUs:Fpe,clinics:Wpe,theWire:tfe,legal:ife,conditionPages:wfe}},XB=()=>{const e=localStorage.getItem("i18nextLng");if(e)return e;const t=window.location.hostname;return t.endsWith(".pt")?"pt":(t.endsWith(".co.uk")||t.endsWith(".co.za"),"en")},Tfe=()=>XB();Is.use(uae).init({resources:Sfe,lng:Tfe(),fallbackLng:"en",defaultNS:"common",ns:["common","home","auth","research","contact","conditions","whatWeDo","aboutUs","clinics","theWire","legal","conditionPages"],interpolation:{escapeValue:!1}});if(!localStorage.getItem("i18nextLng")){const e=XB();localStorage.setItem("i18nextLng",e)}GL(document.getElementById("root")).render(f.jsx(hue,{}));
